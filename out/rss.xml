<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Hacker News: Front Page</title><link>https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml</link><description>Hacker News RSS</description><atom:link href="https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml" rel="self"/><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><language>en</language><lastBuildDate>Sun, 04 Jan 2026 15:37:50 +0000</lastBuildDate><item><title>Pixoo Sign Client for Ruby</title><link>https://github.com/tenderlove/pixoo-rb</link><description>&lt;doc fingerprint="c1f8174e6a920ab4"&gt;
  &lt;main&gt;
    &lt;p&gt;This is just a client for the Pixoo 64 sign written in Ruby.&lt;/p&gt;
    &lt;p&gt;Draw some stuff and then display it as an animated image:&lt;/p&gt;
    &lt;code&gt;include Pixoo::Utils

images = [7, 17, 29].map { |m|
  img = Pixoo::ImageBuffer.new 64, speed: 500
  64.times do |x|
    64.times do |y|
      if ((x | y) % m).zero?
        img.set_pixel x, y, *(rainbow_color(x))
      end
    end
  end
  img
}

dev = Pixoo::Client.find_all.first
dev.send_animation images
sleep 1

# add some text
dev.send_text "Hello", x: 0, y: 0, id: 1
dev.send_text "World", x: 0, y: 40, id: 2, font: 6&lt;/code&gt;
    &lt;p&gt;Read a PNG and display it:&lt;/p&gt;
    &lt;code&gt;img = Pixoo::ImageBuffer.from_png ARGV[0]

dev = Pixoo::Client.find_all.first
dev.send_animation [img]&lt;/code&gt;
    &lt;p&gt;This thing supports reading values from a remote server. I have a server that collects PM2.5 / CO2 sensors I have in the house. On the server, I have a webrick server that response to requests for sensor info. For example to get the PM2.5 data from my office, I can do this:&lt;/p&gt;
    &lt;code&gt;$ curl 'http://tender.home:9292/reading?floor=main&amp;amp;room=office&amp;amp;measurement=pm2.5'
{"DispData":"25"}
&lt;/code&gt;
    &lt;p&gt;The response is important because this display will parse the response and display it on the sign. I've configured the sign as follows:&lt;/p&gt;
    &lt;code&gt;dev = Pixoo::Client.find_all.first

label = dev.new_display_item(id: 1,
  type: Pixoo::DisplayItem::TEXT_MESSAGE,
  x: 0,
  y: 0,
  dir: 0,
  font: 18,
  width: 64,
  height: 5,
  string: "PM2-5:",
  speed: 10,
  color: "#FF0000",
  align: 1)

value = dev.new_display_item(id: 2,
  type: Pixoo::DisplayItem::NET_TEXT_MESSAGE,
  x: 23,
  y: 0,
  dir: 0,
  font: 18,
  width: 64,
  height: 5,
  string: "http://tender.home:9292/reading?floor=main&amp;amp;room=office&amp;amp;measurement=pm2.5",
  speed: 10,
  color: "#FFFFFF",
  align: 1)&lt;/code&gt;
    &lt;p&gt;The sign will automatically fetch data from my server and update the display.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46485629</guid><pubDate>Sun, 04 Jan 2026 06:54:50 +0000</pubDate></item><item><title>Can I start using Wayland in 2026?</title><link>https://michael.stapelberg.ch/posts/2026-01-04-wayland-sway-in-2026/</link><description>&lt;doc fingerprint="f66c997349b60b9c"&gt;
  &lt;main&gt;
    &lt;head&gt;Table of contents&lt;/head&gt;
    &lt;p&gt;Wayland is the successor to the X server (X11, Xorg) to implement the graphics stack on Linux. The Wayland project was actually started in 2008, a year before I created the i3 tiling window manager for X11 in 2009 ‚Äî but for the last 18 years (!), Wayland was never usable on my computers. I don‚Äôt want to be stuck on deprecated software, so I try to start using Wayland each year, and this articles outlines what keeps me from migrating to Wayland in 2026.&lt;/p&gt;
    &lt;head rend="h2"&gt;Historical context&lt;/head&gt;
    &lt;p&gt;For the first few years, Wayland rarely even started on my machines. When I was lucky enough for something to show up, I could start some toy demo apps in the demo compositor Weston.&lt;/p&gt;
    &lt;p&gt;Around 2014, GNOME started supporting Wayland. KDE followed a few years later. Major applications (like Firefox, Chrome or Emacs) have been slower to adopt Wayland and needed users to opt into experimental implementations via custom flags or environment variables, until very recently, or ‚Äî in some cases, like &lt;code&gt;geeqie&lt;/code&gt; ‚Äî still as of today.&lt;/p&gt;
    &lt;p&gt;Unfortunately, the driver support situation remained poor for many years. With nVidia graphics cards, which are the only cards that support my 8K monitor, Wayland would either not work at all or exhibit heavy graphics glitches and crashes.&lt;/p&gt;
    &lt;p&gt;In the 2020s, more and more distributions announced looking to switch to Wayland by default or even drop their X11 sessions, and RHEL is winding down their contributions to the X server.&lt;/p&gt;
    &lt;p&gt;Modern Linux distributions like Asahi Linux (for Macs, with their own GPU driver!) clearly consider Wayland their primary desktop stack, and only support X11 on a best-effort basis.&lt;/p&gt;
    &lt;p&gt;So the pressure to switch to Wayland is mounting! Is it ready now? What‚Äôs missing?&lt;/p&gt;
    &lt;head rend="h2"&gt;Making Wayland start&lt;/head&gt;
    &lt;head rend="h3"&gt;Hardware&lt;/head&gt;
    &lt;p&gt;I‚Äôm testing with my lab PC, which is a slightly upgraded version of my 2022 high-end Linux PC.&lt;/p&gt;
    &lt;p&gt;I describe my setup in more details in stapelberg uses this: my 2020 desk setup.&lt;/p&gt;
    &lt;p&gt;Most importantly for this article, I use a Dell 8K 32" monitor (resolution: 7680x4320!), which, in my experience, is only compatible with nVidia graphics cards (I try other cards sometimes).&lt;/p&gt;
    &lt;p&gt;Hence, both the lab PC and my main PC contain an nVidia GPU:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The lab PC contains a nVidia GeForce RTX 4070 Ti.&lt;/item&gt;
      &lt;item&gt;The main PC contains a nVidia GeForce RTX 3060 Ti.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;(In case you‚Äôre wondering why I use the older card in my PC: I had a crash once where I suspected the GPU, so I switched back from the 4070 to my older 3060.)&lt;/p&gt;
    &lt;head rend="h3"&gt;nVidia driver support&lt;/head&gt;
    &lt;p&gt;For many years, nVidia drivers were entirely unsupported under Wayland.&lt;/p&gt;
    &lt;p&gt;Apparently, nVidia refused to support the API that Wayland was using, insisting that their EGLStreams approach was superior. Luckily, with nVidia driver 495 (late 2021), they added support for GBM (Generic Buffer Manager).&lt;/p&gt;
    &lt;p&gt;But, even with GBM support, while you could now start many Wayland sessions, the session wouldn‚Äôt run smoothly: You would see severe graphics glitches and artifacts, preventing you from getting any work done.&lt;/p&gt;
    &lt;p&gt;The solution for the glitches was explicit sync support: because the nVidia driver does not support implicit sync (like AMD or Intel), Wayland (and wlroots, and sway) needed to get explicit sync support.&lt;/p&gt;
    &lt;p&gt;Sway 1.11 (June 2025) and wlroots 0.19.0 are the first version with explicit sync support.&lt;/p&gt;
    &lt;head rend="h3"&gt;Not working: TILE support for 8K monitor&lt;/head&gt;
    &lt;p&gt;With the nVidia driver now working per se with Wayland, unfortunately that‚Äôs still not good enough to use Wayland in my setup: my Dell UP3218K monitor requires two DisplayPort 1.4 connections with MST (Multi Stream Transport) and &lt;code&gt;TILE&lt;/code&gt; support. This
combination worked just fine under X11 for the last 8+ years.&lt;/p&gt;
    &lt;p&gt;While GNOME successfully configures the monitor with its native resolution of 7680x4320@60, the monitor incorrectly shows up as two separate monitors in sway.&lt;/p&gt;
    &lt;p&gt;The reason behind this behavior is that wlroots does not support the &lt;code&gt;TILE&lt;/code&gt;
property (issue #1580 from
2019). Luckily,
in 2023, contributor &lt;code&gt;EBADBEEF&lt;/code&gt; sent draft merge request
!4154,
which adds support for the &lt;code&gt;TILE&lt;/code&gt; property.&lt;/p&gt;
    &lt;p&gt;But, even with the &lt;code&gt;TILE&lt;/code&gt; patch, my monitor would not work correctly: The right
half of the monitor would just stay black. The full picture is visible when
taking a screenshot with &lt;code&gt;grim&lt;/code&gt;, so it seems like an output issue. I had a few
exchanges about this with &lt;code&gt;EBADBEEF&lt;/code&gt; starting in August 2025 (thanks for taking
a look!), but we couldn‚Äôt figure out the issue.&lt;/p&gt;
    &lt;p&gt;A quarter later, I had made good experiences regarding debugging complex issues with the coding assistant Claude Code (Opus 4.5 at the time of writing), so I decided to give it another try. Over two days, I ran a number of tests to narrow down the issue, letting Claude analyze source code (of sway, wlroots, Xorg, mesa, ‚Ä¶) and produce test programs that I could run manually.&lt;/p&gt;
    &lt;p&gt;Ultimately, I ended up with a minimal reproducer program (independent of Wayland) that shows how the &lt;code&gt;SRC_X&lt;/code&gt; DRM property does not work on nVidia (but
does work on Intel, for example!): I posted a bug report with a video in the
nVidia
forum
and hope an nVidia engineer will take a look!&lt;/p&gt;
    &lt;p&gt;Crucially, with the bug now identified, I had Claude implement a workaround: copy the right half of the screen (at &lt;code&gt;SRC_X=3840&lt;/code&gt;) to another buffer, and then
display that buffer, but with &lt;code&gt;SRC_X=0&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;With that patch applied, for the first time, I can use Sway on my 8K monitor! ü•≥&lt;/p&gt;
    &lt;p&gt;By the way, when I mentioned that GNOME successfully configures the native resolution, that doesn‚Äôt mean the monitor is usable with GNOME! While GNOME supports tiled displays, the updates of individual tiles are not synchronized, so you see heavy tearing in the middle of the screen, much worse than anything I have ever observed under X11. GNOME/mutter merge request !4822 should hopefully address this.&lt;/p&gt;
    &lt;head rend="h3"&gt;Software: NixOS&lt;/head&gt;
    &lt;p&gt;During 2025, I switched all my computers to NixOS. Its declarative approach is really nice for doing such tests, because you can reliably restore your system to an earlier version.&lt;/p&gt;
    &lt;p&gt;To make a Wayland/sway session available on my NixOS 25.11 installation, I added the following lines to my NixOS configuration file (&lt;code&gt;configuration.nix&lt;/code&gt;):&lt;/p&gt;
    &lt;code&gt;# GDM display manager (can launch both X11/i3 and Wayland/Sway sessions)
services.displayManager.gdm.enable = true;
services.displayManager.gdm.autoSuspend = false;

# enable GNOME (for testing)
services.desktopManager.gnome.enable = true;

programs.sway = {
  enable = true;
  wrapperFeatures.gtk = true;
  extraOptions = [ "--unsupported-gpu" ];
};
&lt;/code&gt;
    &lt;p&gt;I also added the following Wayland-specific programs to &lt;code&gt;environment.systemPackages&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;environment.systemPackages = with pkgs; [
  # ‚Ä¶
  foot          # terminal emulator
  wtype         # replacement for xdotool type
  fuzzel        # fuzzy matching program starter
  wayland-utils # for wayland-info(1)
  gammastep     # redshift replacement
];
&lt;/code&gt;
    &lt;p&gt;Note that activating this configuration kills your running X11 session, if any.&lt;/p&gt;
    &lt;p&gt;Just to be sure, I rebooted the entire machine after changing the configuration.&lt;/p&gt;
    &lt;head rend="h2"&gt;Experiment results&lt;/head&gt;
    &lt;p&gt;With this setup, I spent about one full work day in a Wayland session. Trying to actually get some work done uncovers issues that might not show in casual testing. Most of the day was spent trying to fix Wayland issues üòÖ. The following sections explain what I have learned/observed.&lt;/p&gt;
    &lt;head rend="h3"&gt;Desktop: i3 ‚Üí sway&lt;/head&gt;
    &lt;p&gt;Many years ago, when Wayland became more popular, people asked on the i3 issue tracker if i3 would be ported to Wayland. I said no: How could I port a program to an environment that doesn‚Äôt even run on any of my computers? But also, I knew that with working a full-time job, I wouldn‚Äôt have time to be an early adopter and shape Wayland development.&lt;/p&gt;
    &lt;p&gt;This attitude resulted in Drew DeVault starting the Sway project around 2016, which aims to be a Wayland version of i3. I don‚Äôt see Sway as competition. Rather, I thought it was amazing that people liked the i3 project so much that they would go through the trouble of creating a similar program for other environments! What a nice compliment! üòä&lt;/p&gt;
    &lt;p&gt;Sway aims to be compatible with i3 configuration files, and it mostly is.&lt;/p&gt;
    &lt;p&gt;If you‚Äôre curious, here is what I changed from the Sway defaults, mostly moving key bindings around for the NEO keyboard layout I use, and configuring &lt;code&gt;input&lt;/code&gt;/&lt;code&gt;output&lt;/code&gt; blocks that I formerly configured in my
&lt;code&gt;~/.xsession&lt;/code&gt;
file:&lt;/p&gt;
    &lt;head&gt;my changes to the default Sway config&lt;/head&gt;
    &lt;code&gt;--- /home/michael/src/sway/config.in	2025-09-24 19:08:38.876573260 +0200
+++ /home/michael/.config/sway/config	2025-12-31 15:50:38.616697542 +0100
@@ -9,19 +9,76 @@
 # Logo key. Use Mod1 for Alt.
 set $mod Mod4
 # Home row direction keys, like vim
-set $left h
-set $down j
-set $up k
-set $right l
+set $left n
+set $down r
+set $up t
+set $right d
 # Your preferred terminal emulator
 set $term foot
 # Your preferred application launcher
-set $menu wmenu-run
+set $menu fuzzel
+
+font pango:Bitstream Vera Sans Mono 8
+
+titlebar_padding 4 2
+
+# Make Xwayland windows recognizeable:
+for_window [shell="xwayland"] title_format "%title [Xwayland]"
+
+workspace_layout stacking
+
+# Open two terminal windows side-by-side on new workspaces:
+# https://github.com/stapelberg/workspace-populate-for-i3
+exec ~/go/bin/workspace-populate-for-i3
+
+exec gammastep -l 47.31:8.50 -b 0.9
+
+input * {
+   xkb_layout "de"
+   xkb_variant "neo"
+	repeat_delay 250
+	repeat_rate 30
+}
+
+input * {
+	accel_profile adaptive
+	pointer_accel 0.2
+}
 
 ### Output configuration
 #
-# Default wallpaper (more resolutions are available in @datadir@/backgrounds/sway/)
-output * bg @datadir@/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
+output * bg /dev/null fill #333333
+output * scale 3
 #
 # Example configuration:
 #
@@ -33,14 +90,41 @@
 #
 # Example configuration:
 #
-# exec swayidle -w \
-#          timeout 300 'swaylock -f -c 000000' \
-#          timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
-#          before-sleep 'swaylock -f -c 000000'
+exec swayidle -w \
+         before-sleep '~/swaylock.sh' \
+         lock '~/swaylock.sh'
 #
 # This will lock your screen after 300 seconds of inactivity, then turn off
 # your displays after another 300 seconds, and turn your screens back on when
 # resumed. It will also lock your screen before your computer goes to sleep.
+bindsym $mod+l exec loginctl lock-session
+
+  # Notifications
+  bindsym $mod+period exec dunstctl close
 
 ### Input configuration
 #
@@ -63,11 +147,13 @@
     # Start a terminal
     bindsym $mod+Return exec $term
 
     # Kill focused window
-    bindsym $mod+Shift+q kill
+    bindsym $mod+Shift+x kill
 
     # Start your launcher
-    bindsym $mod+d exec $menu
+    bindsym $mod+a exec $menu
 
     # Drag floating windows by holding down $mod and left mouse button.
     # Resize them with right mouse button + $mod.
@@ -142,12 +228,11 @@
     bindsym $mod+v splitv
 
     # Switch the current container between different layout styles
-    bindsym $mod+s layout stacking
+    bindsym $mod+i layout stacking
     bindsym $mod+w layout tabbed
-    bindsym $mod+e layout toggle split
 
     # Make the current focus fullscreen
-    bindsym $mod+f fullscreen
+    bindsym $mod+e fullscreen
 
     # Toggle the current focus between tiling and floating mode
     bindsym $mod+Shift+space floating toggle
@@ -156,7 +241,7 @@
     bindsym $mod+space focus mode_toggle
 
     # Move focus to the parent container
-    bindsym $mod+a focus parent
+    bindsym $mod+u focus parent
 #
 # Scratchpad:
 #
@@ -192,37 +277,25 @@
     bindsym Return mode "default"
     bindsym Escape mode "default"
 }
-bindsym $mod+r mode "resize"
+#bindsym $mod+r mode "resize"
 
 #
 # Status Bar:
 #
 # Read `man 5 sway-bar` for more information about this section.
 bar {
-    position top
 
     # When the status_command prints a new line to stdout, swaybar updates.
     # The default just shows the current date and time.
-    status_command while date +'%Y-%m-%d %X'; do sleep 1; done
+    status_command i3status
 }
 
&lt;/code&gt;
    &lt;p&gt;I encountered the following issues with Sway:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;&lt;p&gt;I don‚Äôt know how I can configure the same libinput settings that I had before. See&lt;/p&gt;&lt;code&gt;xinput-list-props-mx-ergo.txt&lt;/code&gt;for what I have on X11. Sway‚Äôs available&lt;code&gt;accel_profile&lt;/code&gt;settings do not seem to match what I used before.&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;The mouse cursor / pointer seems laggy, somehow?! It seems to take longer to react when I move the trackball, and it also seems to move less smoothly across the screen.&lt;/p&gt;
        &lt;p&gt;Simon Ser suspects that this might be because hardware cursor support might not work with the nVidia drivers currently.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;p&gt;No Xwayland scaling: programs started via Xwayland are blurry (by default) or double-scaled (when setting&lt;/p&gt;&lt;code&gt;Xft.dpi: 288&lt;/code&gt;). This is a Sway-specific limitation: KDE fixed this in 2022. From Sway issue #2966, I can tell that Sway developers do not seem to like this approach for some reason, but that‚Äôs very unfortunate for my migration: The backwards compatibility option of running older programs through Xwayland is effectively unavailable to me.&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Sometimes, keyboard shortcuts seem to be executed twice! Like, when I focused the first of five Chrome windows in a stack and moved that window to another workspace, two windows would be moved instead of one. I also see messages like this one (not exactly correlated with the double-shortcut problem, though):&lt;/p&gt;
        &lt;code&gt;[ERROR] [wlr] [libinput] event0 - https: kinT (kint36): client bug: event processing lagging behind by 32ms, your system is too slow&lt;/code&gt;
        &lt;p&gt;‚Ä¶and that seems wrong to me. My high-end Linux PC certainly isn‚Äôt slow by any measure.&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;GTK: Font size&lt;/head&gt;
    &lt;p&gt;When I first started GTK programs like GIMP or Emacs, I noticed all fonts were way too large! Apparently, I still had some scaling-related settings that I needed to reset like so:&lt;/p&gt;
    &lt;code&gt;gsettings reset org.gnome.desktop.interface scaling-factor
gsettings reset org.gnome.desktop.interface text-scaling-factor
&lt;/code&gt;
    &lt;p&gt;Debugging tip: Display GNOME settings using &lt;code&gt;dconf dump /&lt;/code&gt; (stored in
&lt;code&gt;~/.config/dconf&lt;/code&gt;).&lt;/p&gt;
    &lt;head rend="h3"&gt;GTK: Backend&lt;/head&gt;
    &lt;p&gt;Some programs like &lt;code&gt;geeqie&lt;/code&gt; apparently need an explicit &lt;code&gt;export GDK_BACKEND=wayland&lt;/code&gt; environment variable, otherwise they run in
Xwayland. Weird.&lt;/p&gt;
    &lt;head rend="h3"&gt;Font rendering&lt;/head&gt;
    &lt;p&gt;I also noticed that font rendering is different between X11 and Wayland! The difference is visible in Chrome browser tab titles and the URL bar, for example:&lt;/p&gt;
    &lt;p&gt;At first I thought that maybe Wayland defaults to different font-antialiasing and font-hinting settings, but I tried experimenting with the following settings (which default to &lt;code&gt;font-antialiasing=grayscale&lt;/code&gt; and &lt;code&gt;font-hinting=slight&lt;/code&gt;), but
couldn‚Äôt get things to render like they did before:&lt;/p&gt;
    &lt;code&gt;gsettings set org.gnome.desktop.interface font-antialiasing 'rgba'
gsettings set org.gnome.desktop.interface font-hinting 'full'
&lt;/code&gt;
    &lt;p&gt;Update: Thanks to Hugo for pointing out that under Wayland, GTK3 ignores the &lt;code&gt;~/.config/gtk-3.0/settings.ini&lt;/code&gt;
configuration file and uses dconf exclusively! Setting the following dconf
setting makes the font rendering match:&lt;/p&gt;
    &lt;code&gt;gsettings set org.gnome.desktop.interface font-name 'Cantarell 11'
&lt;/code&gt;
    &lt;head rend="h3"&gt;Screen locker: swaylock&lt;/head&gt;
    &lt;p&gt;The obvious replacement for &lt;code&gt;i3lock&lt;/code&gt; is
&lt;code&gt;swaylock&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;I quickly ran into a difference in architecture between the two programs:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;i3lock shows a screen locker window. When you kill i3lock, the screen is unlocked.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;p&gt;When you kill swaylock, you end up in a Red Screen Of Death.&lt;/p&gt;&lt;p&gt;To get out of this state, you need to restart swaylock and unlock. You can unlock from the command line by sending&lt;/p&gt;&lt;code&gt;SIGUSR1&lt;/code&gt;to the&lt;code&gt;swaylock&lt;/code&gt;process.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This was very surprising to me, but is by (Wayland) design! See Sway issue #7046 for details, and this quote from the &lt;code&gt;ext-session-lock-v1&lt;/code&gt; Wayland protocol:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;‚ÄúThe compositor must stop rendering and provide input to normal clients. Instead the compositor must blank all outputs with an opaque color such that their normal content is fully hidden.‚Äù&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;OK, so when you start &lt;code&gt;swaylock&lt;/code&gt; via SSH for testing, remember to always unlock
instead of just cancelling &lt;code&gt;swaylock&lt;/code&gt; with Ctrl+C. And hope it never crashes.&lt;/p&gt;
    &lt;p&gt;I used to start &lt;code&gt;i3lock&lt;/code&gt; via a wrapper script, which turns off the monitor
(input wakes it up):&lt;/p&gt;
    &lt;code&gt;#!/bin/sh
# Turns on DPMS, mutes all output, locks the screen.
# Reverts all settings on unlock, or when killed.

revert() {
    xset dpms 0 0 0
    pactl set-sink-mute @DEFAULT_SINK@ 0
}
trap revert SIGHUP SIGINT SIGTERM
xset +dpms dpms 15 15 15
(sleep 1 &amp;amp;&amp;amp; xset dpms force off) &amp;amp;
pactl set-sink-mute @DEFAULT_SINK@ 1
i3lock --raw 3840x2160:rgb --image ~/i3lock-wallpaper-3840x2160.rgb -n 
revert
&lt;/code&gt;
    &lt;p&gt;With Wayland, the DPMS behavior has to be implemented differently, with &lt;code&gt;swayidle&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;#!/bin/sh
# Turns on DPMS, mutes all output, locks the screen.
# Reverts all settings on unlock, or when killed.

swayidle -w \
  timeout 5 'swaymsg "output * dpms off"' \
  resume 'swaymsg "output * dpms on"' &amp;amp;
swayidle=$!

revert() {
    kill $swayidle
    pactl set-sink-mute @DEFAULT_SINK@ 0
}
trap revert SIGHUP SIGINT SIGTERM

pactl set-sink-mute @DEFAULT_SINK@ 1
swaylock --image ~/i3lock-wallpaper-3840x2160.jpg
revert
&lt;/code&gt;
    &lt;head rend="h3"&gt;i3 IPC automation&lt;/head&gt;
    &lt;p&gt;The i3 window manager can be extended via its IPC interface (interprocess communication).&lt;/p&gt;
    &lt;p&gt;I use a few small tools that use this interface.&lt;/p&gt;
    &lt;p&gt;I noticed the following issues when using these tools with Sway:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;&lt;p&gt;Tools using the&lt;/p&gt;&lt;code&gt;go.i3wm.org/i3/v4&lt;/code&gt;Go package need a special socket path hook currently. We should probably include transparent handling in the package to ease the transition.&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Tools started with&lt;/p&gt;&lt;code&gt;exec&lt;/code&gt;from the Sway config unexpectedly keep running even when you exit Sway (&lt;code&gt;swaymsg exit&lt;/code&gt;) and log into a new session!&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;My workspace-populate-for-i3 did not work:&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Sway does not implement i3‚Äôs layout saving/restoring because Drew decided in 2017 that the feature is ‚Äútoo complicated and hacky for too little benefit‚Äù. Too bad. I have a couple of layouts I liked that I‚Äôll need to replicate differently.&lt;/item&gt;
          &lt;item&gt;Sway does not match workspace nodes with &lt;code&gt;[con_id]&lt;/code&gt;criteria. There‚Äôs pull request #8980 (posted independently, five days ago) to fix that.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;My wsmgr-for-i3 worked partially:&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Restoring workspaces (&lt;code&gt;wsmgr restore&lt;/code&gt;) worked.&lt;/item&gt;
          &lt;item&gt;Sway‚Äôs &lt;code&gt;rename workspace&lt;/code&gt;command implementation does not seem to pick up workspace numbers from the target name.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Restoring workspaces (&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Terminal: foot&lt;/head&gt;
    &lt;p&gt;On X11, I use the rxvt-unicode (URxvt) terminal emulator. It has a couple of quality-of-life features that I don‚Äôt want to lose, aside from being fast and coming with a minimal look:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Backwards search through your scrollback (= command output)&lt;/item&gt;
      &lt;item&gt;Opening URLs in your scrollback using keyboard shortcuts&lt;/item&gt;
      &lt;item&gt;Opening a new terminal window in the same working directory&lt;/item&gt;
      &lt;item&gt;Updating the terminal title from your shell&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;In earlier experiments, I tried Alacritty or Kitty, but wasn‚Äôt happy with either.&lt;/p&gt;
    &lt;p&gt;Thanks to anarcat‚Äôs blog post ‚ÄúWayland: i3 to Sway migration‚Äù, I discovered the &lt;code&gt;foot&lt;/code&gt; terminal emulator, which
looks like a really nice option!&lt;/p&gt;
    &lt;p&gt;I started a &lt;code&gt;foot.ini&lt;/code&gt; config
file
to match my URxvt config, but later I noticed that at least some colors don‚Äôt
seem to match (some text lines with green/red background looked different). I‚Äôm
not sure why and have not yet looked into it any further.&lt;/p&gt;
    &lt;p&gt;I noticed the following issues using &lt;code&gt;foot&lt;/code&gt;:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Pressing Ctrl+Enter (which I seem to do by mistake quite a bit) results in escape sequences, whereas URxvt just treats Ctrl+Enter like Enter.&lt;/p&gt;
        &lt;p&gt;This can be worked around in your shell (Zsh, in my case), see foot issue #628 for details.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Double-clicking on part of a URL with the mouse selects the URL (as expected), but without the&lt;/p&gt;&lt;code&gt;https:&lt;/code&gt;scheme prefix! Annoying when you do want to use the mouse.&lt;p&gt;I can hold Ctrl to work around this, which will make&lt;/p&gt;&lt;code&gt;foot&lt;/code&gt;select everything under the pointer up to, and until, the next space characters.&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Starting&lt;/p&gt;&lt;code&gt;screen(1)&lt;/code&gt;in&lt;code&gt;foot&lt;/code&gt;results in not having color support for programs running inside the&lt;code&gt;screen&lt;/code&gt;session. Probably a terminfo-related problem somehow‚Ä¶? I can also reproduce this issue with GNOME terminal. But with URxvt or xterm, it works.&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Selecting text highlights the text within the line, but not the entire line. This is different from other terminal emulators I am used to, but I don‚Äôt see an option to change it.&lt;/p&gt;&lt;p&gt;Here‚Äôs a screenshot showing&lt;/p&gt;&lt;code&gt;foot&lt;/code&gt;after triple-clicking on the right of ‚Äúkthreadd‚Äù:&lt;p&gt;But triple-clicking on an echo output line highlights only the contents, not the whole line:&lt;/p&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Text editor: Emacs&lt;/head&gt;
    &lt;p&gt;I find Emacs‚Äôs Wayland support rather disappointing. The standard version of Emacs only supports X11, so on Sway, it starts in Xwayland. Because Sway does not support scaling with Xwayland, Emacs shows up blurry (top/background window):&lt;/p&gt;
    &lt;p&gt;Native Wayland support (bottom/foreground window) is only available in the &lt;code&gt;pgtk&lt;/code&gt; Emacs version (&lt;code&gt;emacs-pgtk&lt;/code&gt; on NixOS). &lt;code&gt;pgtk&lt;/code&gt; used to be a separate
branch, but was merged in Emacs¬†29 (July 2023). There seem to be issues
with &lt;code&gt;pgtk&lt;/code&gt; on X11 (you get a warning when starting Emacs-pgtk on X11), so there
have to be two separate versions for now‚Ä¶&lt;/p&gt;
    &lt;p&gt;Unfortunately, the &lt;code&gt;pgtk&lt;/code&gt; text rendering looks different than native X11 text
rendering! The line height and letter spacing seems different:&lt;/p&gt;
    &lt;p&gt;I‚Äôm not sure why it‚Äôs different! Does anybody know how to make it match the old behavior?&lt;/p&gt;
    &lt;p&gt;Aside from the different text rendering, the other major issue for me is input latency: Emacs-pgtk feels significantly slower (less responsive) than Emacs. This was reported on Reddit multiple times (thread 1, thread 2) and Emacs bug #71591, but there doesn‚Äôt seem to be any solution.&lt;/p&gt;
    &lt;p&gt;I‚Äôll also need a solution for running Emacs remotely. Thus far, I use X11 forwarding over SSH (which works fine and with low latency over fiber connections). I should probably check out waypipe, but have not yet had a chance.&lt;/p&gt;
    &lt;head rend="h3"&gt;Browser: Chrome&lt;/head&gt;
    &lt;p&gt;When starting Chrome and checking the &lt;code&gt;chrome://gpu&lt;/code&gt; debug page, things look
good:&lt;/p&gt;
    &lt;p&gt;But rather quickly, after moving and resizing browser windows, the GPU process dies with messages like the following and, for example, WebGL is no longer hardware accelerated:&lt;/p&gt;
    &lt;code&gt;ERROR:ui/ozone/platform/wayland/gpu/gbm_pixmap_wayland.cc:95] Cannot create bo with format=RGBA_8888 and usage=Scanout|Rendering|Texturing
ERROR:ui/gfx/linux/gbm_wrapper.cc:405] Failed to create BO with modifiers: Invalid argument (22)
ERROR:ui/ozone/platform/wayland/gpu/gbm_pixmap_wayland.cc:95] Cannot create bo with format=RGBA_8888 and usage=Texturing
ERROR:gpu/command_buffer/service/shared_image/shared_image_factory.cc:981] CreateSharedImage: could not create backing.
ERROR:gpu/command_buffer/service/shared_image/shared_image_manager.cc:397] SharedImageManager::ProduceSkia: Trying to Produce a Skia representation from a non-existent mailbox.
ERROR:components/viz/service/gl/exit_code.cc:13] Restarting GPU process due to unrecoverable error. Context was lost.
R:gpu/ipc/client/command_buffer_proxy_impl.cc:321] GPU state invalid after WaitForGetOffsetInRange.
ERROR:content/browser/gpu/gpu_process_host.cc:1005] GPU process exited unexpectedly: exit_code=8704
&lt;/code&gt;
    &lt;p&gt;Of course, using a browser without hardware acceleration is very frustrating, especially at high resolutions. Starting Chrome with &lt;code&gt;--disable-gpu-compositing&lt;/code&gt;
seems to work around the GPU process exiting, but Chrome still does not feel as
smooth as on X11.&lt;/p&gt;
    &lt;p&gt;Another big issue for me is that Sway does not open Chrome windows on the workspace on which I closed them. Support for tracking and restoring the &lt;code&gt;_NET_WM_DESKTOP&lt;/code&gt; EWMH atom was added to i3 in January
2016
and to Chrome in May
2016
and Firefox in March
2020.&lt;/p&gt;
    &lt;p&gt;I typically have 5+ workspaces and even more Chrome windows at any given point, so having to sort through 10+ Chrome windows every day (when I boot my work computer) is very annoying.&lt;/p&gt;
    &lt;p&gt;Simon Ser said that this would be addressed with a new Wayland protocol (&lt;code&gt;xdg-session-management&lt;/code&gt;, merge request
!18).&lt;/p&gt;
    &lt;head rend="h3"&gt;Screensharing&lt;/head&gt;
    &lt;p&gt;I work remotely a lot, so screen sharing is a table-stakes feature for me. I use screen sharing in my browser almost every day, in different scenarios and with different requirements.&lt;/p&gt;
    &lt;p&gt;In X11, I am used to the following experience with Chrome. I click the ‚ÄúWindow‚Äù tab and see previews of my windows. When I select the window and confirm, its contents get shared:&lt;/p&gt;
    &lt;p&gt;To get screen sharing to work in Wayland/sway, you need to install &lt;code&gt;xdg-desktop-portal&lt;/code&gt; and &lt;code&gt;xdg-desktop-portal-wlr&lt;/code&gt; (the latter is specific to
wlroots, which sway uses).&lt;/p&gt;
    &lt;p&gt;With these packages set up, this is the behavior I see:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;I can share a Chrome tab.&lt;/item&gt;
      &lt;item&gt;I can share the entire monitor.&lt;/item&gt;
      &lt;item&gt;I cannot share a specific window (the entire monitor shows up as a single window).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This is a limitation of &lt;code&gt;xdg-desktop-portal-wlr&lt;/code&gt; (and
others), which
should be addressed with the upcoming Sway 1.12 release.&lt;/p&gt;
    &lt;p&gt;I changed my NixOS configuration to use sway and wlroots from git to try it out. When I click on the ‚ÄúWindow‚Äù tab, I see a chooser in which I need to select a window:&lt;/p&gt;
    &lt;p&gt;After selecting the window, I see only that window‚Äôs contents previewed in Chrome:&lt;/p&gt;
    &lt;p&gt;After confirming, I get another chooser and need to select the window again. Notably, there is no connection between the previewed window and the chosen window in this second step ‚Äî if I chose a different window, that‚Äôs what will be shared:&lt;/p&gt;
    &lt;p&gt;Now that window is screenshared (so the feature now works; nice!), but unfortunately in low resolution, meaning the text is blurry for my co-workers.&lt;/p&gt;
    &lt;p&gt;I reported this as xdg-desktop-portal-wlr issue #364 and it seems like the issue is that the wrong scale factor is applied. The patch provided in the issue works for me.&lt;/p&gt;
    &lt;p&gt;But, on a high level, the whole flow seems wrong: I shouldn‚Äôt see a chooser when clicking on Chrome‚Äôs ‚ÄúWindow‚Äù tab. I should see previews of all windows. I should be able to select the window in Chrome, not with a separate chooser.&lt;/p&gt;
    &lt;head rend="h3"&gt;Scaling Glitches&lt;/head&gt;
    &lt;p&gt;I also noticed a very annoying glitch when output scaling is enabled: the contents of (some!) windows would ‚Äújump around‚Äù as I was switching between windows (in a tabbed or stacked container) or between workspaces.&lt;/p&gt;
    &lt;p&gt;I first noticed this in the &lt;code&gt;foot&lt;/code&gt; terminal emulator, where the behavior is as follows:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Switch focus to another &lt;code&gt;foot&lt;/code&gt;terminal by changing workspaces, or by switching focus within a stacked or tabbed container.&lt;/item&gt;
      &lt;item&gt;The new &lt;code&gt;foot&lt;/code&gt;terminal shows up with its text contents slightly offset.&lt;/item&gt;
      &lt;item&gt;Within a few milliseconds, &lt;code&gt;foot&lt;/code&gt;‚Äôs text jumps to the correct position.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I captured the following frame with my iPhone just as the content was moving a few pixels, shortly after switching focus to this window:&lt;/p&gt;
    &lt;p&gt;Later, I also noticed that Chrome windows briefly show up blurry after switching.&lt;/p&gt;
    &lt;p&gt;My guess is that because Sway sets the scale factor to 1 for invisible windows, when switching focus you see a scale-1 content buffer until the application provided its scale-3 content buffer.&lt;/p&gt;
    &lt;head rend="h3"&gt;Notifications: dunst&lt;/head&gt;
    &lt;p&gt;dunst supports Wayland natively. I tried dunst 1.13 and did not notice any issues.&lt;/p&gt;
    &lt;head rend="h3"&gt;Picker: rofi&lt;/head&gt;
    &lt;p&gt;rofi works on Wayland since v2.0.0 (2025-09-01).&lt;/p&gt;
    &lt;p&gt;I use rofi with rofimoji as my Emoji picker. For text input, instead of &lt;code&gt;xdotool&lt;/code&gt;, &lt;code&gt;wtype&lt;/code&gt; seems to work. I didn‚Äôt
notice any issues.&lt;/p&gt;
    &lt;head rend="h3"&gt;Screenshots: grim?&lt;/head&gt;
    &lt;p&gt;Instead of my usual choice &lt;code&gt;maim(1)&lt;/code&gt;
, I tried &lt;code&gt;grim(1)&lt;/code&gt;
, but unfortunately &lt;code&gt;grim&lt;/code&gt;‚Äôs &lt;code&gt;-T&lt;/code&gt; flag to select the
window to capture is rather cumbersome to use (and captures in 1x scale).&lt;/p&gt;
    &lt;p&gt;Does anyone have any suggestions for a good alternative?&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusion&lt;/head&gt;
    &lt;p&gt;Finally I made some progress on getting a Wayland session to work in my environment!&lt;/p&gt;
    &lt;p&gt;Before giving my verdict on this Wayland/sway experiment, let me explain that my experience on X11/i3 is really good. I don‚Äôt see any tearing or other artifacts or glitches in my day-to-day computer usage. I don‚Äôt use a compositor, so my input latency is really good: I once measured it to approximately 763 Œºs in Emacs on X11 with my custom-built keyboard (plus output latency), see kinX: latency measurement (2018).&lt;/p&gt;
    &lt;p&gt;So from my perspective, switching from this existing, flawlessly working stack (for me) to Sway only brings downsides. I observe new graphical glitches that I didn‚Äôt have before. The programs I spend most time in (Chrome and Emacs) run noticeably worse. Because of the different implementations, or because I need to switch programs entirely, I encounter a ton of new bugs.&lt;/p&gt;
    &lt;p&gt;For the first time, an on-par Wayland experience seems within reach, but realistically it will require weeks or even months of work still. In my experience, debugging sessions quickly take hours as I need to switch graphics cards and rewire monitors to narrow down bugs. I don‚Äôt have the time to contribute much to fixing these numerous issues unfortunately, so I‚Äôll keep using X11/i3 for now.&lt;/p&gt;
    &lt;p&gt;For me, a Wayland/Sway session will be ready as my daily driver when:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Sway no longer triggers some key bindings twice some times (‚Äúghost key presses‚Äù)&lt;/item&gt;
      &lt;item&gt;I no longer see glitches when switching between windows or workspaces in Sway.&lt;/item&gt;
      &lt;item&gt;Chrome is continuously hardware-accelerated.&lt;/item&gt;
      &lt;item&gt;Chrome windows are restored to their previous workspace when starting.&lt;/item&gt;
      &lt;item&gt;Emacs either: &lt;list rend="ul"&gt;&lt;item&gt;Runs via Xwayland and Sway makes scaling work.&lt;/item&gt;&lt;item&gt;Or if its &lt;code&gt;pgtk&lt;/code&gt;variant fixes its input latency issues and can be made to render text the same as before somehow.&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Did you like this post? Subscribe to this blog‚Äôs RSS feed to not miss any new posts!&lt;/p&gt;
    &lt;p&gt;I run a blog since 2005, spreading knowledge and experience for over 20 years! :)&lt;/p&gt;
    &lt;p&gt;If you want to support my work, you can buy me a coffee.&lt;/p&gt;
    &lt;p&gt;Thank you for your support! ‚ù§Ô∏è&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46485989</guid><pubDate>Sun, 04 Jan 2026 08:11:22 +0000</pubDate></item><item><title>The Gentle Seduction (1989)</title><link>http://www.skyhunter.com/marcs/GentleSeduction.html</link><description>&lt;doc fingerprint="e782cb3e5aa10feb"&gt;
  &lt;main&gt;
    &lt;p&gt;The Gentle Seduction&lt;/p&gt;
    &lt;p&gt;by&lt;/p&gt;
    &lt;p&gt;Marc Stiegler&lt;/p&gt;
    &lt;p&gt;First Published by Analog Magazine in 1989&lt;/p&gt;
    &lt;p&gt;He worked with computers; she worked with trees, and the flowers that took hold on the sides of the Mountain.&lt;/p&gt;
    &lt;p&gt;She was surprised that he was interested in her. He was so smart; she was so ... normal. But he was interesting; he always said something new and different; he was nice.&lt;/p&gt;
    &lt;p&gt;She was 25. He was older, almost 33; sometimes, Jack seemed very old indeed.&lt;/p&gt;
    &lt;p&gt;One day they walked through the mist of a gray day by the Mountain. The forest here on the edge of Rainier glowed in the mist, bright with lush greens. On this day he told her about the future, the future he was building.&lt;/p&gt;
    &lt;p&gt;Other times when he had spoken of the future, a wild look had entered his eyes. But now his eyes were sharply focused as he talked, as if, this time, he could see it all very clearly. He spoke as if he were describing something as real and obvious as the veins of a leaf hanging down before them on the path.&lt;/p&gt;
    &lt;p&gt;"Have you ever heard of Singularity?" he asked.&lt;/p&gt;
    &lt;p&gt;She shook her head. "What's that?"&lt;/p&gt;
    &lt;p&gt;"Singularity is a time in the future. It'll occur when the rate of change of technology is very great--so great that the effort to keep up with the change will overwhelm us. People will face a whole new set of problems that we can't even imagine." A look of great tranquility smoothed the ridges around his eyes. "On the other hand, all our normal, day to day problems fade away. For example, you'll be immortal."&lt;/p&gt;
    &lt;p&gt;She shook her head with distaste. "I don't want to live forever," she said.&lt;/p&gt;
    &lt;p&gt;He smiled, his eyes twinkling. "Of course you do, you just don't know it yet."&lt;/p&gt;
    &lt;p&gt;She shuddered. "The future scares me."&lt;/p&gt;
    &lt;p&gt;"There's no reason to fear it. You'll love it." He looked away from her. His next words were bitter, but his tone was resigned. "It pisses me off that you'll live to see it and I won't."&lt;/p&gt;
    &lt;p&gt;Speaking to the sorrow in his voice, she tried to cheer him. "You'll live to see it too," she replied.&lt;/p&gt;
    &lt;p&gt;He shook his head. "No. I have a bad heart. My father died young from a heart attack, and so did my father's father. If I'm lucky, I have maybe 30 more years. It'll take at least a hundred years for us to get to Singularity. "&lt;/p&gt;
    &lt;p&gt;"Then I'll be dead before it happens, too. Good," she said.&lt;/p&gt;
    &lt;p&gt;He chuckled. "No. You'll live long enough, so that they'll figure out how to make you live long enough so that you can live longer."&lt;/p&gt;
    &lt;p&gt;"You're still only 7 years older than I am."&lt;/p&gt;
    &lt;p&gt;"Ah, but you have your mother's genes. She looks very young."&lt;/p&gt;
    &lt;p&gt;She smiled, and changed the subject. "I'll have to tell her you said that. She'll like it."&lt;/p&gt;
    &lt;p&gt;There was a long pause. Then she confessed, "My grandfather is 92, and he still cuts the grass every week."&lt;/p&gt;
    &lt;p&gt;Jack smiled triumphantly. "See?"&lt;/p&gt;
    &lt;p&gt;She was adamant. "I'll live to be 80 or 90. I don't want to live longer than that."&lt;/p&gt;
    &lt;p&gt;"Not if you're crippled, of course not. But they'll find ways of rejuvenating you." He laughed knowingly. "You'll look older when you're 60 than when you're 120" he said.&lt;/p&gt;
    &lt;p&gt;She just shook her head.&lt;/p&gt;
    &lt;p&gt;Another time, as they walked in the sun along the beach of Fox Island, he told her more about the future. "You'll have a headband." He ran his fingers across his forehead; he squinted as the wind blew sand in his eyes. "It'll allow you to talk right to your computer."&lt;/p&gt;
    &lt;p&gt;She frowned. "I don't want to talk to a computer."&lt;/p&gt;
    &lt;p&gt;"Sure you do. At least, you will. Your computer will watch your baby all night long. If it sees something wrong, it'll wake you." Wicked delight widened his smile, and she knew he would now tell her something outrageous. "While you're laying in bed with your eyes closed, you'll look at your baby through your computer's TV camera to see if it's something serious."&lt;/p&gt;
    &lt;p&gt;"Ugh."&lt;/p&gt;
    &lt;p&gt;"Of course, there's a tiny chance, really tiny, that an accident could scramble your memories."&lt;/p&gt;
    &lt;p&gt;The thought made her dizzy with horror. "I would rather die." She grabbed his arm and pulled him under the bridge, out of the wind. She shuddered, though unsure whether her chill came from the wind or the fear.&lt;/p&gt;
    &lt;p&gt;He changed his tack. Pointing at a scattering of elaborate seaside mansions across the water, he asked, "Would you like to live in one of those?"&lt;/p&gt;
    &lt;p&gt;She studied them. "Maybe that one," she said, pointing at a beautiful old Victorian home. "Or that one." She pointed at another, very different from the first, a series of diagonal slashes with huge windows.&lt;/p&gt;
    &lt;p&gt;"Have you ever heard of nanotechnology?" he asked.&lt;/p&gt;
    &lt;p&gt;"Uh-uh."&lt;/p&gt;
    &lt;p&gt;"Well, with nanotechnology they'll build these tiny little machines--machines the size of molecules." He pointed at the drink in her hand. "They'll put a billion of them in a spaceship the size of a Coke can, and shoot it off to an asteroid. The Coke can will rebuild the asteroid into mansions and palaces. You'll have an asteroid all to your self, if you want one."&lt;/p&gt;
    &lt;p&gt;"I don't want an asteroid. I don't want to go into space."&lt;/p&gt;
    &lt;p&gt;He shook his head. "Don't you want to see Mars?You liked the Grand Canyon; I remember how you told me about it. Mars has huge gorges--they make the Grand Canyon look tiny. Don't you want to see them? Don't you want to hike across them?"&lt;/p&gt;
    &lt;p&gt;It took her a long time to reply. "I guess so," she admitted.&lt;/p&gt;
    &lt;p&gt;"I won't tell you all the things I expect to happen," he smiled mischievously, "I'm afraid I'd really scare you. But you'll see it all. And you'll remember that I told you." His voice grew intense. "And you'll remember that I knew you'd remember."&lt;/p&gt;
    &lt;p&gt;She shook her head. Sometimes Jack was just silly.&lt;/p&gt;
    &lt;p&gt;They never made love, though often, they fell asleep in each other's arms. Sometimes she wondered why; she wondered if he also wondered why. Somehow it just didn't seem important.&lt;/p&gt;
    &lt;p&gt;He seemed so at home in the deep forest, he so clearly belonged on the Mountain, she first thought they might stay together forever. But one day she went with him to his office. She watched as he worked with computers, as he worked with other people. He was as natural a part of their computer world as he was a part of her Mountain world.&lt;/p&gt;
    &lt;p&gt;Working in that alien world, he was a different person. In the woods, he was a calm source of sustaining strength. Here, he was a feverish instructor. His heart belonged to the forest, but his mind, she realized, belonged to the machines that would build his vision.&lt;/p&gt;
    &lt;p&gt;One day he received a call. A distant company gave him an offer he could not refuse. So he went to California, to build great computers, to hurry his vision to fruition.&lt;/p&gt;
    &lt;p&gt;She stayed by the Mountain. She walked the snows, and watched the birds fly overhead. Yet no bird flew so high that she could not climb the slopes of Rainier until she stood above them.&lt;/p&gt;
    &lt;p&gt;He would come to visit on weekends sometimes, and they would backpack, or ski cross country. But his visits became less frequent. He would write instead. That too decreased in regularity. One letter was the last, though neither of them knew it at the time.&lt;/p&gt;
    &lt;p&gt;A year passed. And by then, it just didn't seem to matter.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;She married a forest ranger, a bright, quiet man with dark eyes and a rugged face. They had three small children and two large dogs, friendly dogs with thick soft fur. She loved all the members of her family, almost all the time; it was the theme that never changed though she thought about different things at different times.&lt;/p&gt;
    &lt;p&gt;Her children grew up and moved away.&lt;/p&gt;
    &lt;p&gt;Erich, the beautiful red chou, went to sleep one night and never awakened.&lt;/p&gt;
    &lt;p&gt;A terrible avalanche, from a seemingly safe slope, fell down the Mountain and buried a climbing team, her husband among them.&lt;/p&gt;
    &lt;p&gt;Haikku, her mighty and faithful akita,whimpered in his old age. He crooned his apology for leaving her alone, and that night he joined Erich and her husband.&lt;/p&gt;
    &lt;p&gt;She was 82. She had lived a long and happy life. She was not afraid to die. But she stood outside in the snow and faced a terrible decision.&lt;/p&gt;
    &lt;p&gt;Overnight, a thick blanket of new white powder had fallen, burying her sidewalk. Standing in the snow, she stared at a mechanical beast her children had given her years before. It represented one possible choice.&lt;/p&gt;
    &lt;p&gt;In one hand she held a shovel. In the other hand she held a small capsule. The capsule was another gift her children had given her. They had begged her to take it. Until now, she had refused. The capsule represented another choice.&lt;/p&gt;
    &lt;p&gt;Her back was aching. It was an ache that sometimes expanded, shooting spikes of pain down her legs. Today the pain was great; she could not shovel the sidewalk.&lt;/p&gt;
    &lt;p&gt;The mechanical beast was a robot, a fully automatic snow remover. She could just flip a switch and it would hurl the snow away, but that seemed grotesque; the noise would be terrible, the mounds of thoughtlessly discarded snow would remain as an unseemly scar until late spring.&lt;/p&gt;
    &lt;p&gt;She opened her hand and looked at the capsule. It was not a pill to make her younger; that much her children had promised her. They knew she would reject such a thing out of hand. But the millions of tiny machines tucked inside the capsule would disperse throughout her body and repair every trace of damage to her bones. They would also rebuild her sagging muscle tissue. In short, the pill would cure her back and make the pain go away.&lt;/p&gt;
    &lt;p&gt;The thought of all those little machines inside her made her shudder. But the thought of the automatic snow remover made her sick.&lt;/p&gt;
    &lt;p&gt;She went back inside the house to get a glass of water.&lt;/p&gt;
    &lt;p&gt;In a few days her back felt fine; her healthy muscles gave her a feeling of new vigor, and the vigor gave rise to a yearning to go out and do things that she had not considered for many years. She started to climb the Mountain, but it was too much for her: she huffed and puffed and had to go home. Annoyed, she went to the drug store and bought another capsule, one that restored her circulatory system and her lungs. Her next assault on the Mountain carried her as far as she dared, and the steady beat of her heart urged her to go on despite the crumbling snow.&lt;/p&gt;
    &lt;p&gt;But she was getting increasingly forgetful. Things that had happened years earlier were clear in her mind, but she could not remember what she needed at the store. One day she forgot her daughter's telephone number, and found that she had forgotten where she had misplaced the phone book. The store had another capsule that tightened up her neural circuitry. After taking it, she discovered a side effect no one had bothered to mention. The pill did not merely make her memory effective again; rather, it made her memory perfect. With a brief glance through the pages of the phone book, she found she no longer needed it. She shrugged and continued on with her life.&lt;/p&gt;
    &lt;p&gt;One day as she skied across the slopes, a stranger passed her going the other way. He was tall and rugged, and he reminded her of her husband. She was annoyed that he did not even look at her, though she had smiled at him; when she looked in the mirror upon returning home, she understood why. She was 95 years old; she looked like an old woman. It was ridiculous; fortunately it was easily fixed.&lt;/p&gt;
    &lt;p&gt;When she turned 115 she stabilized her physical appearance. Thereafter, she always appeared to be about the age of 32.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;She still owned the snug little house she thought of as home. But she slept more often in the tent she carried in her pack. Built with nanomachined equipment, the pack was lighter than any other she had ever owned, yet it was impossibly strong. All her tools performed feats she would once have thought miraculous, and none weighed more than a pound. She lived in great comfort despite the inherent rigors of the glacier-crusted slopes.&lt;/p&gt;
    &lt;p&gt;One day, she was climbing along the ancient trail from Camp Muir toward the summit, crossing the ridges to reach Disappointment Cleaver. As she stepped over the last ridge to the broad flat in front of the Cleaver, she saw a man standing alone. He was staring up the steep ice flows overhead. He stepped backward, and backward, and turned to walk briskly in her direction. She continued forward to pass him, but he cried out, "Stop!"&lt;/p&gt;
    &lt;p&gt;She obeyed the fear in his voice. He paused, and his eyes came unfocussed for a moment. He pointed to the right of the ridge she had just crossed, a fin of rock rising rapidly along the mountain's edge. "Up there," he said, "Quickly." He broke into a hobbling run across snow that sometimes collapsed under his heavy step. She followed, her adrenalin rising with her bewilderment.&lt;/p&gt;
    &lt;p&gt;A massive Crack! filled the air. Far above the Cleaver, an overhanging ledge of ice snapped off and fell with an acrobat's graceful tumbling motion to the flat where they had just been standing. The mass qualified as a large hill in its own right. When it landed it broke into a thousand huge pieces. Some of the pieces ground each other to powder, while others bounced off the flat, down another precipice of several thousand feet, to crash again in a duller explosion of sound.&lt;/p&gt;
    &lt;p&gt;The ice fall was an extraordinary event to witness under any circumstance; the narrowness of escape from death that accompanied it overlayed the experience with a religious awe.&lt;/p&gt;
    &lt;p&gt;She heard the man panting next to her. She turned to study him more carefully.&lt;/p&gt;
    &lt;p&gt;He was unremarkable for a mountaineer; his lean form supported long straps of hard muscle, and the reflected sun from the glaciers had given him a coffee-colored tan. Then she noticed the sweatband across his head. It was not just a sweatband: she could see from the stretch marks that a series of thin disks ran across within the cotton layers. She realized he was wearing a nection, a headband to connect his mind with distant computers.&lt;/p&gt;
    &lt;p&gt;She recoiled slightly; he smiled and touched his forehead. "Don't be too upset," he said, "my headband just saved your life."&lt;/p&gt;
    &lt;p&gt;She stuttered. "I wasn't upset," she said, though she knew that he knew she was lying. "I've just never seen one up close before."&lt;/p&gt;
    &lt;p&gt;It was true. Her grandchildren told her that nections were quite common in space, but on Earth they were almost illegal. It was socially unacceptable to wear one, and when the police saw a nection-wearing person they would use any excuse to hassle the individual. But there were no specific laws against them.&lt;/p&gt;
    &lt;p&gt;When her grandchildren had told her that they wore headbands all the time, she had tried only briefly to dissuade them; she had spent more time listening to their descriptions of the headband's capabilities. Her grandchildren's description sounded considerably different from the list of dangers usually described on the news.&lt;/p&gt;
    &lt;p&gt;The man who had saved her life watched her for several more seconds, then apparently made up his mind about something. "You really ought to get one yourself, you know. Do you realize how dangerous this mountain is? And it's getting more dangerous every year."&lt;/p&gt;
    &lt;p&gt;She started to tell him that she knew perfectly well how dangerous it was--then stopped, thinking back over the years, realizing that it had, by gradual degrees, grown worse every year.&lt;/p&gt;
    &lt;p&gt;"With my headband, I see things better," he explained. "I confess I don't understand why very well--I mean, it doesn't affect my eyesight. But I notice more things about what I see, and I can get a view of what the extra things mean--like how that piece of ice would fall, and more or less when."&lt;/p&gt;
    &lt;p&gt;She nodded her head, but her mind was distracted. The Mountain was changing! The Mountain was getting more dangerous! The rapid alternation of clear, sunny days with cool, misty days had become more vigorous over the course of the last 50 years, leading to more weak layers and ice faults. She had never really noticed until now.&lt;/p&gt;
    &lt;p&gt;Then the full impact of her savior's words struck her--she held her hands to her throat as she considered how her husband had died. She realized that, with a nection, his death could have been prevented.&lt;/p&gt;
    &lt;p&gt;She smiled at the man. They talked; she invited him to dinner at Alexander's.&lt;/p&gt;
    &lt;p&gt;When she returned home, she started searching through electronic equipment catalogs. If she bought one mail order and wore it only while hiking, there was no reason for any of her friends ever to know.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;It was a simple white headband, soft absorbent cotton. She slipped it on her head, expecting to feel something special, but nothing happened. She started to clean the house, still waiting for something to happen. It never did. Eventually she sat down and read the instructions that had come with the headband.&lt;/p&gt;
    &lt;p&gt;The instructions told her to start with a simple request, and to visualize herself projecting the request at her forehead. She projected the request, "2 times 2?" just above her eyes. Nothing seemed to happen. She knew the answer was 4.&lt;/p&gt;
    &lt;p&gt;She tried again, and this time she noticed a kind of echo--she knew the answer was 4, but the thought of the answer came to her twice, in rapid succession. The next time she tried it, she noticed that the echo seemed to come from her forehead.&lt;/p&gt;
    &lt;p&gt;Next she projected a request to divide 12345 by 6789. She didn't know the answer--but wait, of course she did, it was 1.81838. Of course, she didn't know the answer to many decimal places--but as she thought about it, she realized the next digit was 2, the next was 6, then at an accelerating pace more digits roared from her memory--she shook her head, and the stream stopped. She took the headband off, shaking a little. She didn't try it again until the next day.&lt;/p&gt;
    &lt;p&gt;A week later, she hiked past Camp Schurman and peered up the slope. She projected her view of the slope through her forehead to study the patterns of snow and ice.&lt;/p&gt;
    &lt;p&gt;It did indeed look different as she looked at it this way. She had a sensation similar to that of looking at the edges of a cube on a sheet of paper: at one moment, the lines formed a cube with the top showing. The next moment it was an alternate cube with the bottom exposed. She could flip the cube, or at least the way she looked at it, at will.&lt;/p&gt;
    &lt;p&gt;In the same manner she could now see patterns of slippage in the layers of ice crystals; then she would flip the image and it was just snow, the beautiful work of nature that she had loved all her life.&lt;/p&gt;
    &lt;p&gt;For a moment she wished she could see it from above as well--and her heart skipped a beat as the wish came true. Suddenly she was looking down from a great height. She saw the long curves of shadows across the snow from high above, and she saw the shorter but distinctive shadow of a woman with a pack standing on the snow field. She threw the headband to the ground even as she realized what she had just seen: a view of the Mountain from a satellite passing by.&lt;/p&gt;
    &lt;p&gt;She stared at the white headband, almost invisible in the white snow, for a long time. She felt distaste, wonder, fear, and curiousity. Curiousity finally won out. She twisted the headband back on. She blinked her mind's eye, blinking from her own eyes to the satellite's eyes and back again, a moment's taste of the new sensation.&lt;/p&gt;
    &lt;p&gt;Vertigo struck her. Though the satellite was interesting, it was not comfortable. She would not look at the world from a satellite's height often, but it was yet another life-saving form of sight: from a distance, it was easy to spot a depression in the snow that might signal an underlying crevasse, even though the depression was too shallow to be seen close up. Such crevasses were invisible until one stepped through to a long fatal plunge to the Mountain's heart.&lt;/p&gt;
    &lt;p&gt;The headband was so clearly a life saving tool, why were people so set against it? Why did some of her friends support laws proscribing it?&lt;/p&gt;
    &lt;p&gt;It didn't make any difference; she had no need of it except here on the Mountain.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;Though the fight over the headband's legal status did not at first interest her, it became an increasing impediment to her life. The headband was quite useful in a number of ways; though each individual use was trivial, in sum they qualitatively effected her life. She stopped tracking her checkbook; it was all in her head, all the transactions, the current balance, and even the encumbrances. When she awoke in the morning she could turn on the coffee pot if she wanted to, without getting up.&lt;/p&gt;
    &lt;p&gt;She wore her headband while hiking, and while working around her house; but she dared not wear it to work. One day an ecologist asked her a question about the marmots that inhabited the park. She grew angry as she had to manually root through the computer systems trying to find the answer, for she knew that the answer was available for the mere thinking about it if she could wear her headband. That night she stopped at the drugstore and bought two more capsules.&lt;/p&gt;
    &lt;p&gt;She swallowed one. This capsule was nastier than the others she had taken in earlier years. Before, the nanomachines she had swallowed had gone through her body, fixing what was not right, then flushing themselves out again. But the machines in this one would build, just under her forehead, a subcutaneous nection.&lt;/p&gt;
    &lt;p&gt;The other capsule would dissolve the nection away if she decided she didn't like it.&lt;/p&gt;
    &lt;p&gt;When she awoke the next morning she was very hungry. She felt her forehead, but there wasn't anything there.&lt;/p&gt;
    &lt;p&gt;The next morning she felt her forehead again, and it was ... different. She looked in the mirror; with the flickering double vision of her eyes and the analysis from her forehead, she could see on the one hand that she looked the same as always. Yet on the other hand, there were curves there she hadn't noticed before. When she went in to work, one man complimented her on her new hair color.&lt;/p&gt;
    &lt;p&gt;No one else commented until her boss arrived. When he entered the reception area and looked at her, his eyes lit up, and he laughed.&lt;/p&gt;
    &lt;p&gt;She looked at him with mild annoyance. Then she noticed, again with her double vision, that there were very shallow curves in his forehead.&lt;/p&gt;
    &lt;p&gt;He came up close, and put his finger to his lips. "Listen," he said.&lt;/p&gt;
    &lt;p&gt;She listened. As she concentrated, she heard heard soft murmurs in the background; as she focussed on the murmurs, they grew louder, until she could hear that he was speaking--but not with his lips, not through her ears. She heard him through her forehead. "Welcome to the gang," he said. "Isn't it great fun, joining a rebellion? I haven't had this much fun since I was a teenager."&lt;/p&gt;
    &lt;p&gt;They both broke into laughter. Everyone else in the room wondered what the joke was about.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;She talked to her children, and her children's children, more often now; though they were spread from Mars to Mercury, they were but a thought away. It surprised her to realize that the simple process of dialing the number, and the uncertainty of whether or not she would get through, had often put her off from calling even though the cost had plummeted in recent years till it was virtually free.&lt;/p&gt;
    &lt;p&gt;She became increasingly comfortable with her distant grandchildren. Through visual links like the one she had with the satellite, they took her on outings into the stunning naked beauty of their home planet Mars. When they asked her for the hundredth time to come for a visit, she agreed.&lt;/p&gt;
    &lt;p&gt;In her youth she had ridden trains across the country. She had expected the space trip to be the same, but it was not. The ship was far more comfortable than any other vehicle she had ridden; it was more comfortable than her own home, though she still did not quite like it as well.&lt;/p&gt;
    &lt;p&gt;When she arrived, she found she loved to hike across the plains and the canyons of an unknown planet. She walked amid forests of alien trees, related to the Earthly trees from which they had been shaped, yet different. Comparing the lands of Mars to the lands of Earth reminded her of watching the sun set two days in a row: though the outcome was the same, the process was nevertheless different. The strange wilderness yielded for her new kinds of solitude.&lt;/p&gt;
    &lt;p&gt;She came to know her grandchildren's children for the first time. Before, these children had represented an unspoken, uncomfortable complication in her thoughts of Mars. They were different. They were of her blood, but not in the manner of normal children. They had been genetically engineered.&lt;/p&gt;
    &lt;p&gt;Her grandchildren had designed them, giving them a parent's loving care long before they had even been conceived. Only the best characteristics of her family had been passed on; she did not know how the other aspects of these radiantly happy children had been chosen. They were very different from her, but not quite alien. With time she learned to love them as they loved her.&lt;/p&gt;
    &lt;p&gt;One day they went on a longview picnic. First they walked to the high edge of a deep canyon. She looked over the rim. The height was not great by comparison with the distances in space she had traveled to come here. Yet this distance impressed her. It impressed her because she could appreciate it: thousands of tiny twists and angles of rock acted as signposts, allowing her to mark off the immense distance in tiny steps. She shook her head, smiled, and stepped over the edge.&lt;/p&gt;
    &lt;p&gt;Together with her family, she descended gently on suspensors; their picnic basket and wine glasses descended with them, on suspensors of their own. They watched the planet come up to meet them as they dined and chatted.&lt;/p&gt;
    &lt;p&gt;The discussion turned to the family's upcoming expedition to Jupiter. They had asked her several times to come along, but she had refused. Now they asked her again. She watched the extraordinary scenery float past her and considered the question one last time. A trip to Jupiter would have been all right if it could have been like Mars. But it could not, and that was both the attraction and the horror.&lt;/p&gt;
    &lt;p&gt;Though humanity had made Mars Earthlike, they could not do the same for Jupiter. Jupiter's methane oceans simply were not amenable to terraforming. No one could go there in person.&lt;/p&gt;
    &lt;p&gt;To see Jupiter, she would in a sense have to leave her body. Oh, she wouldn't have to leave it very far; indeed, in one sense she would stay with her body on Mars throughout the journey. But just as she had seen Rainier through the satellite's eyes rather than her own, just as she spoke to her friends with her headband rather than her voice, now she would have to use her headband for all her senses.&lt;/p&gt;
    &lt;p&gt;And the machine would not merely replace her sight, her hearing, her touch, her smell--it would transform them. Ordinary sight and sound did not work on Jupiter; for each of her old senses a new one would be substituted. She would see ultrasonic vibrations; she would smell ionic changes. For all intents and purposes, she would live as a being designed for the comforts of Jupiter's titanic gravity well.&lt;/p&gt;
    &lt;p&gt;Of course, she would not be marooned there: she could leave at any time.&lt;/p&gt;
    &lt;p&gt;The pleasure of her experience on Mars made her confident; the quiet exhiliaration of the longview picnic made her bold. She agreed to go along.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;For a moment it was dark, a moment too short to launch the panic she held in trip-wired readiness. Then there was light, a confusing light that seemed oddly related to the sounds that joined it. She held up her hands. They were metal, and she looked at them in alarm. She closed her eyes, and it was better.&lt;/p&gt;
    &lt;p&gt;The strange sounds took on rhythm. Instinctively she turned toward them, and her back feet rotated, propelling her closer. When she felt she was too close--she could smell the source of the sounds now, a tangy, pleasant odor--she opened her eyes. Studying the shape as it wavered before her, seemingly separated by shimmering air, she realized it was another robot like herself. Indeed, she recognized it: she was looking at her granddaughter.&lt;/p&gt;
    &lt;p&gt;She looked around and had a sudden overwhelming sensation of immensity.&lt;/p&gt;
    &lt;p&gt;The hugeness of space had seemed dwarfed by the height of the Martian canyon, for she had been able to comprehend it through the tiny weathered etchings of rock she could peer at in the distance. Here on Jupiter her comprehension was even greater, for her senses ranged distance with new clarity. The ultrasonic echoes told her how far it was to each whorl of current she could see; she could see to distances very great indeed. It made her think of the way she had felt as a child, looking across a vast Kansan plain for the first time. It seemed as if infinity was right there, within easy reach. She reveled in it for a moment, then stepped out.&lt;/p&gt;
    &lt;p&gt;She was back in her own body again, sitting on Mars.&lt;/p&gt;
    &lt;p&gt;She dipped back in for ten minutes and stepped out again. Next she went in for half an hour. Then an hour.&lt;/p&gt;
    &lt;p&gt;She had sworn that she would not stay on Jupiter for more than an hour at a time; a longer stay required mechanical operation of parts of her body while she was away. But once she became so absorbed in exploring the Jovian landscape, she stayed for an hour and a half . The maintenance machines disconnected themselves before she returned, and their intervention didn't seem to make a difference. So she stayed longer.&lt;/p&gt;
    &lt;p&gt;Jupiter, she found, was an astonishing world, truly alien from all she had experienced before. And the new senses she acquired through her new robot required extensive exploration of their own. It was all incredibly novel, and she realized she would need at least a year to explore.&lt;/p&gt;
    &lt;p&gt;The linkage between her mind on Mars and her robot body on Jupiter had delays; to have a completely satisfying experience, she would need a temporary residence that didn't require such a commute.&lt;/p&gt;
    &lt;p&gt;So a small cylinder, somewhat smaller than a Coke can, was launched at an asteroid that had been parked in orbit around Jupiter for this purpose. As the billions of robots from the cylinder swarmed across the asteroid, transforming it into a marvelous home, she boarded another ship. It seemed silly to spend any of her transit time stuck in the confines of her cabin; she went to Jupiter for the duration. She intended to return to her own body when it arrived in orbit.&lt;/p&gt;
    &lt;p&gt;But when it arrived, she was busy. She was learning about a new robot designed for the frozen world of Europa, with another whole new set of senses, new novelties to explore. She left her body in storage for a short time longer.&lt;/p&gt;
    &lt;p&gt;A year passed. And by then, it just didn't seem to matter.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;A bubble hung poised on the edge of the solar system, a sphere pockmarked with thousands of holes, each hole the width of a pin. A bolt of light struck the sphere, a bolt powered by kilometers of molecular mirrors near the orbit of Mercury.&lt;/p&gt;
    &lt;p&gt;The bubble seemed to explode as thousands of needles leaped from their cradles, driven forth by tiny beams of laser light, slivers of the titanic bolt from the Sun. The needles accelerated away from the bubble for years, till their speed reached close to that of light. Thereafter they drifted ever outward.&lt;/p&gt;
    &lt;p&gt;Upon occasion, a needle approached a star. The needle would shift, to ensure a close passage. If planets or other items of note beckoned, the needle would swoop in, on a tight spiral to oblivion: its billions of nanomachines would break apart at the touch of an asteroid, and build anew. Where once there had been a needle, now there would be a bubble, and a molecular mirror, and thousands of needles that would explode out and travel forever.&lt;/p&gt;
    &lt;p&gt;But in addition, the nanomachines in that system would continue to build. They would build machines and living flesh well suited to the conditions of the planet. And then the nanomachines would come back together into a single structure--not a needle now, but a communication bubble. Through the bubble and its instantaneous communication she could live across space. She could dwell at home near Jupiter yet roam among the stars.&lt;/p&gt;
    &lt;p&gt;She was often one of the first humans Called to newly opened planets. Her wisdom from earth, her expertise from Jupiter, these made her invaluble as an explorer and a guide. As she had swum within the methane oceans, so now she swam in carbon dioxide atmospheres, or flew through liquid mercury. She imprinted herself upon organic synapses and silicon circuits light years from home, and lived in many places.&lt;/p&gt;
    &lt;p&gt;Mentally she was bigger now than she had been at 25. The meaning of complexity had changed for her; she understood the laws of physics with the same simple clarity that she understood the rules of checkers. She could build a starship as easily as she could pitch a tent.&lt;/p&gt;
    &lt;p&gt;Her mind had grown and spilled from the confines of her original body. She could easily dedicate a part of her mind to each of several different tasks. Notably she could lead several different groups, touring several different planets, all at the same time.&lt;/p&gt;
    &lt;p&gt;But of all her new capacities, it was the boundless singing that filled her with wonder.&lt;/p&gt;
    &lt;p&gt;She was not an introspective person; she did not often think about her own past, and how strange she might have found her present. But when she did think such thoughts, the singing amazed her most of all. When she was 25, she had liked vintage Fleetwood Mac. At 105, she had admitted her growing fondness for Beethoven. Pressing 200, she had fallen in love with Monteverdi. In later centuries she had come to appreciate the double beat of the Echoes of Saturn and the operas of Ro Biljaan. Patterns so subtle that the unaugmented human mind could not even sense them filled her with ecstacy.&lt;/p&gt;
    &lt;p&gt;She no longer listened to one or the other of these musical masters at rare opportunities. Rather, they all played, all the time, each in a different subliminal part of her mind. They gave to her a rippling sensation of love that never quite went away. The constant undertone of the singing formed the theme that bound her mind together, no matter how many different things she might do at one time.&lt;/p&gt;
    &lt;p&gt;As the melodies suffused her mind they intermingled, sometimes playing upon one another in a concordance of point and counterpoint. Once, such a duet evoked from several masterpieces a harmony, which surged to drive the cadence of a grander euphony, that captured and empowered an even greater polyphony, filling her mind with a symphony of symphonies. And on a thousand planets, with a thousand bodies and a thousand voices, she leapt in the air and filled the sky with lilting laughter, a chorus of joy that spanned the arm of a galaxy.&lt;/p&gt;
    &lt;p&gt;Returning to ground on those scattered planets of distant stars, she felt surprised by her outburst. She marveled at herself. In her childhood she never would have laughed in such a way. She had once been so quiet it had been easy to think she was shy. The millennia had changed her, and she was delighted; how sad it would have been, never to express one's deepest joy!&lt;/p&gt;
    &lt;p&gt;Still, she was a woman of simple tastes. In earlier times some would have called her sturdy. Others might have called her childlike.&lt;/p&gt;
    &lt;p&gt;Yet these were not fair descriptions; better to think of her in the terms of ancient mythology. She was an elemental, almost a force of nature, with a core of simplicity that mocked overeager acceptance yet offered adaptability, that rejected panic yet always guaranteed caution.&lt;/p&gt;
    &lt;p&gt;Her elemental qualities were vital, humanity had come to realize. Though the needles traveling through space never found other intelligent beings, they had found scattered remains of what had once been intelligence. Other species had come up to Singularity and had died there.&lt;/p&gt;
    &lt;p&gt;Some had died in a frenzy, as the builders of new technologies indulged an orgy of inventions, releasing just one that destroyed them all. Others had died in despair, as fear-filled leaders beat down the innovators, strangling them, putting the future beyond their grasp. The fear-ridden species settled into a long slide of despair that ended with degenerate descendants no longer able to dream.&lt;/p&gt;
    &lt;p&gt;Only those who knew caution without fear, only those marked by her elemental form of prudence, made it through. Only humanity had survived.&lt;/p&gt;
    &lt;p&gt;And humanity had not survived unscathed. Terrible mistakes had been made, many had been lost. Even millennia later there still remained a form of death--or perhaps not death, but a form of impenetrable isolation. The dreams could become too strong, so strong that the individual lived in dreams always, never reaching out to touch reality. Many of her friends from the early millennia had lost themselves to these enchanted infinities leading nowhere.&lt;/p&gt;
    &lt;p&gt;She did not fear such dream-bound death. Seeing the span and deep intensity of her own dreams, she could almost understand those who wrapped themselves within and disappeared. But the new things humanity found every day were just as wonderful. The volume of space touched by the needleships grew at a geometric pace, opening hundreds of star systems. Even on days when few strikingly new systems were found, there were new planets, constructed by artists, awaiting her exploration. And the new things she learned in the realm of the mind matched these treasures and more.&lt;/p&gt;
    &lt;p&gt;Someday, she believed, she too would dream an endless dream. She did not want to live forever. But the beginning of that dream was far away.&lt;/p&gt;
    &lt;p&gt;The new meaning of death was complimented by a new meaning of life. This new meaning was extremely complex, even for her; life dealt with wholes much greater than the sums of their parts. But she understood it intuitively--it was easy to distinguish an engineering intelligence, good only for manufacture, from a member of the community, even though that member might once have been just an engineering intelligence as well. New members of humanity usually came to life this way: an intelligence designed as a machine or an artwork expressed a special genius, a genius that deserved the ability to appreciate itself through self-awareness. When this happened, the psychological engineers would add those elements of the mind needed for life.&lt;/p&gt;
    &lt;p&gt;In this manner had her great-great grandchildren had been born. Her great grandchildren had envisioned them, giving them a parent's loving care long before they had even been designed. Only the best characteristics of the minds of her family had been passed on to them. They were very different from her, but not quite alien. With time, she learned to love them as they loved her.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;The day came to say goodby to her oldest friend. With her wonderful old earth-born body, she returned to Earth to hike Rainier one last time: Rainier, whose surface lay so cold and eternal, was boiling within. With dawn, she knew, the boiling fury would break through, in the greatest volcanic event in earthly centuries. She stood at the summit the day before the end and surveyed the horizon. Her feeling of appreciation grew till she thought she would burst. This was home in a sense few others could now understand.&lt;/p&gt;
    &lt;p&gt;She descended. A marmot met her on the way down; she swooped him into her arms and carried him to safety, though he fought her and cut her and her bleeding would seem to never end. Still the marmot could not prevent her from saving him.&lt;/p&gt;
    &lt;p&gt;She had considered saving the mountain itself; she could, she knew. She could lace the mountain with billions of tiny tubes, capillaries so small no living thing would notice. She could extract the heat, cool the heart.&lt;/p&gt;
    &lt;p&gt;But to deny the Mountain its moment of brilliance seemed not right: perpetual sameness was never right, though change might often be wrong.&lt;/p&gt;
    &lt;p&gt;So the next day, she and the marmot watched the eruption from afar. It was as beautiful as she had expected. And though the aftermath was gray and dreary, she knew that in a very short time the marmot's children would return to the Mountain, and a new kind of beauty would grow there.&lt;/p&gt;
    &lt;p&gt;Nor was the the Mountain truly lost. Even as her earth-born body returned to her asteroid circling Jupiter, she built an exact replica of the Mountain: an image, molecule for molecule, of the Mountain's surface the day before it erupted. When her body returned, she joined the Mountain, to walk there forever, in another part of her eternal dream.&lt;/p&gt;
    &lt;p&gt;Haikku, her loyal companion, was long dead; but she traced the descendants of his descendants. She arranged a mating. A new pup was born with Haikku's genes, in the image of Haikku. And so Haikku2 came to join her on the slopes of Mt. Rainier, on the orbit of Jupiter.&lt;/p&gt;
    &lt;p&gt;***&lt;/p&gt;
    &lt;p&gt;One day two needleships met in space. This was not uncommon; needles from different launchers often crossed paths and were easy to spot, with the hundreds of kilometers of molecular sensor webs they spun.&lt;/p&gt;
    &lt;p&gt;But this meeting was special, for one of the needles had no link to a human. It belonged to aliens.&lt;/p&gt;
    &lt;p&gt;Aliens! Wild hopes and wilder fears rocked the human community. She watched the hysteria calmly, confident it would pass and wisdom would rule.&lt;/p&gt;
    &lt;p&gt;The needles passed one another, too fast to meet. They swerved in long, graceful arcs to a distant rendezvous.&lt;/p&gt;
    &lt;p&gt;A sense of calm, and prudence, returned to humanity. They selected a contact team to break off and meet the aliens.&lt;/p&gt;
    &lt;p&gt;The needles closed. In their last moments they danced in a tight orbit about one another, a dance of creation: for though the needles died, a bubble formed where they met--a communications bubble.&lt;/p&gt;
    &lt;p&gt;The two communities, human and alien, reached out. They touched--but the touch was jarring. Bafflement ruled. The deadlock of confusion ensued.&lt;/p&gt;
    &lt;p&gt;She watched with interest. She felt sorrow that it was not going well, but her confidence remained.&lt;/p&gt;
    &lt;p&gt;Then from the contact team she received a Call. They needed her; they needed her elemental resilience and adaptability.&lt;/p&gt;
    &lt;p&gt;But in needing her elemental nature, they needed more than she had ever given before. They did not need the thoughts or calculations of her mind: they needed the basic traits of her personality, the very core of her being. To reinforce the team, she would have to expand her communication channels, open them so wide that what she thought, they would also think; there would be no filter protecting her internal thoughts. Far worse, what others thought, she would think; there would be no filter protecting her internal memories. It seemed to her it would be easy for her memories to get scrambled; she would rather die. And so for the first time in millennia, she was afraid. The team asked others of the community that held her special strength to come with them instead; they too were afraid.&lt;/p&gt;
    &lt;p&gt;Meanwhile humanity was failing. The anticipation, the yearning, the hope for contact with new beings developed a tinge of desperation.&lt;/p&gt;
    &lt;p&gt;They showed her how easy it was to open the channels of her mind--but more, they showed her again and again how easy it was to close them. They did not believe they would need her for long, thousands of milliseconds at most. They guaranteed she would be fine afterward. Reluctantly, she agreed.&lt;/p&gt;
    &lt;p&gt;She opened her mind; the shock of raw contact stunned her. A moment's near-panic like that of her first exploration of Jupiter returned.&lt;/p&gt;
    &lt;p&gt;And then she was moving, there within the team, and she grew accustomed. The sensation reminded her of jumping into a mountain lake--the cold plunge that blotted out all thought, the sluggish warmth of her muscles responding, the passing of the coldness from her awareness as she concentrated on the act of swimming. She swam among the members of her team.&lt;/p&gt;
    &lt;p&gt;Here she found many tasks to perform, the calming and soothing of a myriad of panicked souls as they plunged into the ice-cold lake of alien minds. She became the muscle that supplied the warmth, that allowed the awareness of the team to move beyond the cold, to swim.&lt;/p&gt;
    &lt;p&gt;As the team responded, the sensation of cold changed to one of warmth, a merry warmth, and she was a bubble floating on a wide, warm ocean, clinging and bouncing with the other bubbles, some friends, some human, some alien. Then they were bubbles of champagne, effervescent, expanding and floating away.&lt;/p&gt;
    &lt;p&gt;She floated to a greater distance; they no longer needed her; she was free to go. She closed the channels to her mind with slow grace, as would a woman walking from the sea through the sucking motions of the surf. She found herself alone again.&lt;/p&gt;
    &lt;p&gt;In those first moments of solitude, being alone seemed unnatural, as unnatural as the communion had seemed earlier; she felt the coldness that comes after a swim, when breeze strikes bare skin. She shuddered.&lt;/p&gt;
    &lt;p&gt;Was she still herself?&lt;/p&gt;
    &lt;p&gt;Of course you are. You are all you have ever been, and more.&lt;/p&gt;
    &lt;p&gt;The answer was her own, but it had once belonged to another person. For a moment she stumbled; perfect memory did not guarantee instantaneous memory, and she was seeking thoughts from her infancy. Then she remembered.&lt;/p&gt;
    &lt;p&gt;Jack!&lt;/p&gt;
    &lt;p&gt;She remembered, he had known that she'd remember.&lt;/p&gt;
    &lt;p&gt;What had happened to Jack!&lt;/p&gt;
    &lt;p&gt;Could she have missed him all these years? She initiated a search of the community, but knew its futility even as it began; he could not, would not have remained hidden.&lt;/p&gt;
    &lt;p&gt;Yet her need to know him again grew stronger as she opened more of her long unbidden memories.&lt;/p&gt;
    &lt;p&gt;She searched swiftly back through the annals of history. Her search slowed suddenly to a crawl as she reached the early moments of Singularity: before the dawn of civilization, records had been crudely kept, with links insufficient to allow swift scanning. An analogy to cobwebs made her smile for a moment.√°&lt;/p&gt;
    &lt;p&gt;Only a handful of machines maintained this ancient knowledge, older machines in older places. Her search plunged to the surface of Earth. There, in a place once called California, all the remnants of prehistoric information had been collected. But it had not been collated. It would take much time to find Jack in this maze. But she had the time.&lt;/p&gt;
    &lt;p&gt;A salary report from a corporation of long ago ... an article on accelerated technology's impact on the individual ... a program design with its inventor's initials ... and suddenly she found him, in a richly interconnected tiny tapestry within the sparsely connected morass. She read all of it, rapidly, as if she were inhaling fresh air after too long a stay in a stale room.&lt;/p&gt;
    &lt;p&gt;Jack had saved her life, she realized. The capsule she had taken so long ago to heal her backache, that first step on the road to the life she now knew, was his--he had designed the machine that designed the machine that designed that pill. It turned out that he had learned much from her on that day when they walked quietly amidst the lush green wilderness. And it had taken her all these millennia to learn what he had known even then.&lt;/p&gt;
    &lt;p&gt;From her, Jack had learned the importance of making technology's steps small, making its pieces bite-size. He had learned this as he watched, in her disbelieving eyes, her reaction to the world he had planned.&lt;/p&gt;
    &lt;p&gt;For those who loved technology and breathed of it deeply, small bite-size steps were not important. It would have been easy to callously cast off those who did not understand or who were afraid. But Jack had thought of her, and had not wanted her to die.&lt;/p&gt;
    &lt;p&gt;Reading these glimpses of his past, she grew to know Jack better than she had ever known him in life. With her growing wisdom, she soon understood even the clarity of organization that encompassed this lone swatch of antiquity: the clarity too was of his making. He had believed in her. He had believed that one day she would search for him here. And he had known that, when she arrived, her expanded powers of perception would enable her to understand the message embodied in the clarity, and in all his work.&lt;/p&gt;
    &lt;p&gt;I loved you, you know, Jack told her across the millennia.&lt;/p&gt;
    &lt;p&gt;She wanted to answer. But there was no one to hear.&lt;/p&gt;
    &lt;p&gt;It hurt her to think of him lost forever, and she had not felt hurt for a very long time. Feverish, she worked to rebuild him. The Earth-bound computers gave her all the help they had to give, every memory of every moment of Jack they had ever recorded. She traced her own memories, perfect now, of every word he spoke, every phrase he uttered, every look he gave her in their long walks. She built a simulation of him, the best and most perfect simulation she could build with all her resources, resources far beyond those of a million biological human minds. It was illegal to build a simulation such as this, one of the few laws recognized by the community, but this did not deter her.&lt;/p&gt;
    &lt;p&gt;The simulation looked like Jack; it talked like Jack; it even laughed like Jack. But it was not Jack. She then understood why it was illegal to build such a simulation; she also understood why it was not a law that needed to be enforced: such simulations always failed.&lt;/p&gt;
    &lt;p&gt;Jack was gone.&lt;/p&gt;
    &lt;p&gt;What could she do?&lt;/p&gt;
    &lt;p&gt;What did she have to do? Suddenly she realized how silly the simulation had been: how could she have hoped to get closer to him, than to live his vision of the future?&lt;/p&gt;
    &lt;p&gt;Only one small action, one appropriate action, remained that she could perform. She could remember forever.&lt;/p&gt;
    &lt;p&gt;And so, just as a part of her lived forever on the Mountain, just as a part of her lived forever singing, so now she maintained a part of her that would spend all its moments remembering her earlier moments with him. She became in part a living memorial to the one who brought her here.&lt;/p&gt;
    &lt;p&gt;And though no one could hear, the essence of her memory would have been easy to express: Jack. I love you.&lt;/p&gt;
    &lt;p&gt;She turned her attention to the living members of humanity. There were many other places in the community, she realized, where the techniques she employed in contact with the aliens could help; there were many places where they needed her elemental force invested with the fullness of such expanded communion. She was eager to go. But still a question remained.&lt;/p&gt;
    &lt;p&gt;Would she still be herself?&lt;/p&gt;
    &lt;p&gt;The answer Jack had wrought so long ago welled up from within, her rightful inheritance of his understanding. Part of the answer, she knew, lay within another question:&lt;/p&gt;
    &lt;p&gt;Are you still yourself, even now? Were you still yourself, even when you were 25?&lt;/p&gt;
    &lt;p&gt;She looked back with the vision that perfect memory brings. She remembered who she had been when she was 25; she remembered who she had been when she was just 10. Amusingly, she also remembered how, at 25, she had erroneously remembered her thoughts of age 10. The changes she had gone through during those 15 years of dusty antiquity were vast, perhaps as vast as all the changes she had accepted in the millennia thereafter. Certainly, considering the scales involved, she had as much right today to think of herself as the same person as she had had then. Expanded communion would not destroy her; she was her own bubble no matter how frothy the ocean might become.&lt;/p&gt;
    &lt;p&gt;At least, this first time she had remained her own bubble. Would it be so always?&lt;/p&gt;
    &lt;p&gt;She dipped into communion, and withdrew to ask the question. She found the answer, and it was good. She dipped again, for a longer time; and still the answer was good, perhaps better.&lt;/p&gt;
    &lt;p&gt;She dipped much longer still and asked one more time. This time she understood. The answer was so simple, so glorious, so joyful, that she did not ask the question again for a billion years.&lt;/p&gt;
    &lt;p&gt;And by then, it just didn't seem to matter.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486135</guid><pubDate>Sun, 04 Jan 2026 08:35:42 +0000</pubDate></item><item><title>The PGP problem (2019)</title><link>https://www.latacora.com/blog/2019/07/16/the-pgp-problem/</link><description>&lt;doc fingerprint="965b89112f2301dc"&gt;
  &lt;main&gt;
    &lt;p&gt;Cryptography engineers have been tearing their hair out over PGP‚Äôs deficiencies for (literally) decades. When other kinds of engineers get wind of this, they‚Äôre shocked. PGP is bad? Why do people keep telling me to use PGP? The answer is that they shouldn‚Äôt be telling you that, because PGP is bad and needs to go away.&lt;/p&gt;
    &lt;p&gt;There are, as you‚Äôre about to see, lots of problems with PGP. Fortunately, if you‚Äôre not morbidly curious, there‚Äôs a simple meta-problem with it: it was designed in the 1990s, before serious modern cryptography. No competent crypto engineer would design a system that looked like PGP today, nor tolerate most of its defects in any other design. Serious cryptographers have largely given up on PGP and don‚Äôt spend much time publishing on it anymore (with a notable exception). Well-understood problems in PGP have gone unaddressed for over a decade because of this.&lt;/p&gt;
    &lt;p&gt;Two quick notes: first, we wrote this for engineers, not lawyers and activists. Second: ‚ÄúPGP‚Äù can mean a bunch of things, from the OpenPGP standard to its reference implementation in GnuPG. We use the term ‚ÄúPGP‚Äù to cover all of these things.&lt;/p&gt;
    &lt;head rend="h2"&gt;The problems&lt;/head&gt;
    &lt;head rend="h3"&gt;Absurd complexity&lt;/head&gt;
    &lt;p&gt;For reasons none of us here in the future understand, PGP has a packet-based structure. A PGP message (in a ‚Äú.asc‚Äù file) is an archive of typed packets. There are at least 8 different ways of encoding the length of a packet, depending on whether you‚Äôre using ‚Äúnew‚Äù or ‚Äúold‚Äù format packets. The ‚Äúnew format‚Äù packets have variable-length lengths, like BER (try to write a PGP implementation and you may wish for the sweet release of ASN.1). Packets can have subpackets. There are overlapping variants of some packets. The most recent keyserver attack happened because GnuPG accidentally went quadratic in parsing keys, which also follow this deranged format.&lt;/p&gt;
    &lt;p&gt;That‚Äôs just the encoding. The actual system doesn‚Äôt get simpler. There are keys and subkeys. Key IDs and key servers and key signatures. Sign-only and encrypt-only. Multiple ‚Äúkey rings‚Äù. Revocation certificates. Three different compression formats. This is all before we get to smartcard support.&lt;/p&gt;
    &lt;head rend="h3"&gt;Swiss Army knife design&lt;/head&gt;
    &lt;p&gt;If you‚Äôre stranded in the woods and, I don‚Äôt know, need to repair your jean cuffs, it‚Äôs handy if your utility knife has a pair of scissors. But nobody who does serious work uses their multitool scissors regularly.&lt;/p&gt;
    &lt;p&gt;A Swiss Army knife does a bunch of things, all of them poorly. PGP does a mediocre job of signing things, a relatively poor job of encrypting them with passwords, and a pretty bad job of encrypting them with public keys. PGP is not an especially good way to securely transfer a file. It‚Äôs a clunky way to sign packages. It‚Äôs not great at protecting backups. It‚Äôs a downright dangerous way to converse in secure messages.&lt;/p&gt;
    &lt;p&gt;Back in the MC Hammer era from which PGP originates, ‚Äúencryption‚Äù was its own special thing; there was one tool to send a file, or to back up a directory, and another tool to encrypt and sign a file. Modern cryptography doesn‚Äôt work like this; it‚Äôs purpose built. Secure messaging wants crypto that is different from secure backups or package signing.&lt;/p&gt;
    &lt;head rend="h3"&gt;Mired in backwards compatibility&lt;/head&gt;
    &lt;p&gt;PGP predates modern cryptography; there are Hanson albums that have aged better. If you‚Äôre lucky, your local GnuPG defaults to 2048-bit RSA, the 64-bit-block CAST5 cipher in CFB, and the OpenPGP MDC checksum (about which more later). If you encrypt with a password rather than with a public key, the OpenPGP protocol specifies PGP‚Äôs S2K password KDF. These are, to put it gently, not the primitives a cryptography engineer would select for a modern system.&lt;/p&gt;
    &lt;p&gt;We‚Äôve learned a lot since Steve Urkel graced the airwaves during ABC‚Äôs TGIF: that you should authenticate your ciphertexts (and avoid CFB mode) would be an obvious example, but also that 64-bit block ciphers are bad, that we can do much better than RSA, that mixing compression and encryption is dangerous, and that KDFs should be both time- and memory-hard.&lt;/p&gt;
    &lt;p&gt;Whatever the OpenPGP RFCs may say, you‚Äôre probably not doing any of these things if you‚Äôre using PGP, nor can you predict when you will. Take AEAD ciphers: the Rust-language Sequoia PGP defaulted to the AES-EAX AEAD mode, which is great, and nobody can read those messages because most PGP installs don‚Äôt know what EAX mode is, which is not great. Every well-known bad cryptosystem eventually sprouts an RFC extension that supports curves or AEAD, so that its proponents can claim on message boards that they support modern cryptography. RFC‚Äôs don‚Äôt matter: only the installed base does. We‚Äôve understood authenticated encryption for 2 decades, and PGP is old enough to buy me drinks; enough excuses.&lt;/p&gt;
    &lt;p&gt;You can have backwards compatibility with the 1990s or you can have sound cryptography; you can‚Äôt have both.&lt;/p&gt;
    &lt;head rend="h3"&gt;Obnoxious UX&lt;/head&gt;
    &lt;p&gt;We can‚Äôt say this any better than Ted Unangst:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;There was a PGP usability study conducted a few years ago where a group of technical people were placed in a room with a computer and asked to set up PGP. Two hours later, they were never seen or heard from again.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;If you‚Äôd like empirical data of your own to back this up, here‚Äôs an experiment you can run: find an immigration lawyer and talk them through the process of getting Signal working on their phone. You probably don‚Äôt suddenly smell burning toast. Now try doing that with PGP.&lt;/p&gt;
    &lt;head rend="h3"&gt;Long-term secrets&lt;/head&gt;
    &lt;p&gt;PGP begs users to keep a practically forever root key tied to their identity. It does this by making keys annoying to generate and exchange, by encouraging ‚Äúkey signing parties‚Äù, and by creating a ‚Äúweb of trust‚Äù where keys depend on other keys.&lt;/p&gt;
    &lt;p&gt;Long term keys are almost never what you want. If you keep using a key, it eventually gets exposed. You want the blast radius of a compromise to be as small as possible, and, just as importantly, you don‚Äôt want users to hesitate even for a moment at the thought of rolling a new key if there‚Äôs any concern at all about the safety of their current key.&lt;/p&gt;
    &lt;p&gt;The PGP cheering section will immediately reply ‚Äúthat‚Äôs why you keep keys on a Yubikey‚Äù. To a decent first approximation, nobody in the whole world uses the expensive Yubikeys that do this, and you can‚Äôt imagine a future in which that changes (we can barely get U2F rolled out, and those keys are disposable). We can‚Äôt accept bad cryptosystems just to make Unix nerds feel better about their toys.&lt;/p&gt;
    &lt;head rend="h3"&gt;Broken authentication&lt;/head&gt;
    &lt;p&gt;More on PGP‚Äôs archaic primitives: way back in 2000, the OpenPGP working group realized they needed to authenticate ciphertext, and that PGP‚Äôs signatures weren‚Äôt accomplishing that. So OpenPGP invented the MDC system: PGP messages with MDCs attach a SHA-1 of the plaintext to the plaintext, which is then encrypted (as normal) in CFB mode.&lt;/p&gt;
    &lt;p&gt;If you‚Äôre wondering how PGP gets away with this when modern systems use relatively complex AEAD modes (why can‚Äôt everyone just tack a SHA-1 to their plaintext), you‚Äôre not alone. Where to start with this Rube Goldberg contraption? The PGP MDC can be stripped off messages ‚Äì‚Äì it was encoded in such a way that you can simply chop off the last 22 bytes of the ciphertext to do that. To retain backwards compatibility with insecure older messages, PGP introduced a new packet type to signal that the MDC needs to be validated; if you use the wrong type, the MDC doesn‚Äôt get checked. Even if you do, the new SEIP packet format is close enough to the insecure SE format that you can potentially trick readers into downgrading; Trevor Perrin worked the SEIP out to 16 whole bits of security.&lt;/p&gt;
    &lt;p&gt;And, finally, even if everything goes right, the reference PGP implementation will (wait for it) release unauthenticated plaintext to callers, even if the MDC doesn‚Äôt match.&lt;/p&gt;
    &lt;head rend="h3"&gt;Incoherent Identity&lt;/head&gt;
    &lt;p&gt;PGP is an application. It‚Äôs a set of integrations with other applications. It‚Äôs a file format. It‚Äôs also a social network, and a subculture.&lt;/p&gt;
    &lt;p&gt;PGP pushes notion of a cryptographic identity. You generate a key, save it in your keyring, print its fingerprint on your business card, and publish it to a keyserver. You sign other people‚Äôs keys. They in turn may or may not rely on your signatures to verify other keys. Some people go out of their way to meet other PGP users in person to exchange keys and more securely attach themselves to this ‚Äúweb of trust‚Äù. Other people organize ‚Äúkey signing parties‚Äù. The image you‚Äôre conjuring in your head of that accurately explains how hard it is to PGP‚Äôs devotees to switch to newer stuff.&lt;/p&gt;
    &lt;p&gt;None of this identity goop works. Not the key signing web of trust, not the keyservers, not the parties. Ordinary people will trust anything that looks like a PGP key no matter where it came from‚Äîhow could they not, when even an expert would have a hard time articulating how to evaluate a key? Experts don‚Äôt trust keys they haven‚Äôt exchanged personally. Everyone else relies on centralized authorities to distribute keys. PGP‚Äôs key distribution mechanisms are theater.&lt;/p&gt;
    &lt;head rend="h3"&gt;Leaks Metadata&lt;/head&gt;
    &lt;p&gt;Forget the email debacle for a second (we‚Äôll get to that later). PGP by itself leaks metadata. Messages are (in normal usage) linked directly to key identifiers, which are, throughout PGP‚Äôs cobweb of trust, linked to user identity. Further, a rather large fraction of PGP users make use of keyservers, which can themselves leak to the network the identities of which PGP users are communicating with each other.&lt;/p&gt;
    &lt;head rend="h3"&gt;No forward secrecy&lt;/head&gt;
    &lt;p&gt;A good example of that last problem: secure messaging crypto demands forward secrecy. Forward secrecy means that if you lose your key to an attacker today, they still can‚Äôt go back and read yesterday‚Äôs messages; they had to be there with the key yesterday to read them. In modern cryptography engineering, we assume our adversary is recording everything, into infinite storage. PGP‚Äôs claimed adversaries include world governments, many of whom are certainly doing exactly that. Against serious adversaries and without forward secrecy, breaches are a question of ‚Äúwhen‚Äù, not ‚Äúif‚Äù.&lt;/p&gt;
    &lt;p&gt;To get forward secrecy in practice, you typically keep two secret keys: a short term session key and a longer-term trusted key. The session key is ephemeral (usually the product of a DH exchange) and the trusted key signs it, so that a man-in-the-middle can‚Äôt swap their own key in. It‚Äôs theoretically possible to achieve a facsimile of forward secrecy using the tools PGP provides. Of course, pretty much nobody does this.&lt;/p&gt;
    &lt;head rend="h3"&gt;Clumsy keys&lt;/head&gt;
    &lt;p&gt;An OpenBSD signify(1) public key is a Base64 string short enough to fit in the middle of a sentence in an email; the private key, which isn‚Äôt an interchange format, is just a line or so longer. A PGP public key is a whole giant Base64 document; if you‚Äôve used them often, you‚Äôre probably already in the habit of attaching them rather than pasting them into messages so they don‚Äôt get corrupted. Signify‚Äôs key is a state-of-the-art Ed25519 key; PGP‚Äôs is a weaker RSA key.&lt;/p&gt;
    &lt;p&gt;You might think this stuff doesn‚Äôt matter, but it matters a lot; orders of magnitude more people use SSH and manage SSH keys than use PGP. SSH keys are trivial to handle; PGP‚Äôs are not.&lt;/p&gt;
    &lt;head rend="h3"&gt;Negotiation&lt;/head&gt;
    &lt;p&gt;PGP supports ElGamal. PGP supports RSA. PGP supports the NIST P-Curves. PGP supports Brainpool. PGP supports Curve25519. PGP supports SHA-1. PGP supports SHA-2. PGP supports RIPEMD160. PGP supports IDEA. PGP supports 3DES. PGP supports CAST5. PGP supports AES. There is no way this is a complete list of what PGP supports.&lt;/p&gt;
    &lt;p&gt;If we‚Äôve learned 3 important things about cryptography design in the last 20 years, at least 2 of them are that negotiation and compatibility are evil. The flaws in cryptosystems tend to appear in the joinery, not the lumber, and expansive crypto compatibility increases the amount of joinery. Modern protocols like TLS 1.3 are jettisoning backwards compatibility with things like RSA, not adding it. New systems support just a single suite of primitives, and a simple version number. If one of those primitives fails, you bump the version and chuck the old protocol all at once.&lt;/p&gt;
    &lt;p&gt;If we‚Äôre unlucky, and people are still using PGP 20 years from now, PGP will be the only reason any code anywhere includes CAST5. We can‚Äôt say this more clearly or often enough: you can have backwards compatibility with the 1990s or you can have sound cryptography; you can‚Äôt have both.&lt;/p&gt;
    &lt;head rend="h3"&gt;Janky code&lt;/head&gt;
    &lt;p&gt;The standard implementation in practice of PGP is GnuPG. GnuPG is not carefully built. It‚Äôs a sprawling C-language codebase with duplicative functionality (write-ups of the most recent SKS key parsing denial of service noted that it has multiple key parsers, for instance) with a long track record of CVEs ranging from memory corruption to cryptographic side channels. It has at times been possible to strip authenticators off messages without GnuPG noticing. It‚Äôs been possible to feed it keys that don‚Äôt fingerprint properly without it noticing. The 2018 Efail vulnerability was a result of it releasing unauthenticated plaintext to callers. GnuPG is not good.&lt;/p&gt;
    &lt;p&gt;GnuPG is also effectively the reference implementation for PGP, and also the basis for most other tools that integrate PGP cryptography. It isn‚Äôt going anywhere. To rely on PGP is to rely on GPG.&lt;/p&gt;
    &lt;head rend="h2"&gt;The answers&lt;/head&gt;
    &lt;p&gt;One of the rhetorical challenges of persuading people to stop using PGP is that there‚Äôs no one thing you can replace it with, nor should there be. What you should use instead depends on what you‚Äôre doing.&lt;/p&gt;
    &lt;head rend="h3"&gt;Talking to people&lt;/head&gt;
    &lt;p&gt;Use Signal. Or Wire, or WhatsApp, or some other Signal-protocol-based secure messenger.&lt;/p&gt;
    &lt;p&gt;Modern secure messengers are purpose-built around messaging. They use privacy-preserving authentication handshakes, repudiable messages, cryptographic ratchets that rekey on every message exchange, and, of course, modern encryption primitives. Messengers are trivially easy to use and there‚Äôs no fussing over keys and subkeys. If you use Signal, you get even more than that: you get a system so paranoid about keeping private metadata off servers that it tunnels Giphy searches to avoid traffic analysis attacks, and until relatively recently didn‚Äôt even support user profiles.&lt;/p&gt;
    &lt;head rend="h3"&gt;Encrypting email&lt;/head&gt;
    &lt;p&gt;Don‚Äôt.&lt;/p&gt;
    &lt;p&gt;Email is insecure. Even with PGP, it‚Äôs default-plaintext, which means that even if you do everything right, some totally reasonable person you mail, doing totally reasonable things, will invariably CC the quoted plaintext of your encrypted message to someone else (we don‚Äôt know a PGP email user who hasn‚Äôt seen this happen). PGP email is forward-insecure. Email metadata, including the subject (which is literally message content), are always plaintext.&lt;/p&gt;
    &lt;p&gt;If you needed another reason, read the Efail paper. The GnuPG community, which mishandled the Efail disclosure, talks this research down a lot, but it was accepted at Usenix Security (one of the top academic software security venues) and at Black Hat USA (the top industry software security venue), was one of the best cryptographic attacks of the last 5 years, and is a pretty devastating indictment of the PGP ecosystem. As you‚Äôll see from the paper, S/MIME isn‚Äôt better.&lt;/p&gt;
    &lt;p&gt;This isn‚Äôt going to get fixed. To make actually secure email, you‚Äôd have to tunnel another protocol over email (you‚Äôd still be conceding traffic analysis attacks). At that point, why bother pretending?&lt;/p&gt;
    &lt;p&gt;Encrypting email is asking for a calamity. Recommending email encryption to at-risk users is malpractice. Anyone who tells you it‚Äôs secure to communicate over PGP-encrypted email is putting their weird preferences ahead of your safety.&lt;/p&gt;
    &lt;head rend="h3"&gt;Sending files&lt;/head&gt;
    &lt;p&gt;Use Magic Wormhole. Wormhole clients use a one-time password-authenticated key exchange (PAKE) to encrypt files to recipients. It‚Äôs easy (for nerds, at least), secure, and fun: we haven‚Äôt introduced wormhole to anyone who didn‚Äôt start gleefully wormholing things immediately just like we did.&lt;/p&gt;
    &lt;p&gt;Someone stick a Windows installer on a Go or Rust implementation of Magic Wormhole right away; it‚Äôs too great for everyone not to have.&lt;/p&gt;
    &lt;p&gt;If you‚Äôre working with lawyers and not with technologists, Signal does a perfectly cromulent job of securing file transfers. Put a Signal number on your security page to receive bug bounty reports, not a PGP key.&lt;/p&gt;
    &lt;head rend="h3"&gt;Encrypting backups&lt;/head&gt;
    &lt;p&gt;Use Tarsnap. Colin can tell you all about how Tarsnap is optimized to protect backups. Or really, use any other encrypted backup tool that lots of other people use; they won‚Äôt be as good as Tarsnap but they‚Äôll all do a better job than PGP will.&lt;/p&gt;
    &lt;p&gt;Need offline backups? Use encrypted disk images; they‚Äôre built into modern Windows, Linux, and macOS. Full disk encryption isn‚Äôt great, but it works fine for this use case, and it‚Äôs easier and safer than PGP.&lt;/p&gt;
    &lt;head rend="h3"&gt;Signing packages&lt;/head&gt;
    &lt;p&gt;Use Signify/Minisign. Ted Unangst will tell you all about it. It‚Äôs what OpenBSD uses to sign packages. It‚Äôs extremely simple and uses modern signing. Minisign, from Frank Denis, the libsodium guy, brings the same design to Windows and macOS; it has bindings for Go, Rust, Python, Javascript, and .NET; it‚Äôs even compatible with Signify.&lt;/p&gt;
    &lt;head rend="h3"&gt;Encrypting application data&lt;/head&gt;
    &lt;p&gt;Use libsodium It builds everywhere, has interface that‚Äôs designed to be hard to misuse, and you won‚Äôt have to shell out to a binary to use it.&lt;/p&gt;
    &lt;head rend="h3"&gt;Encrypting files&lt;/head&gt;
    &lt;p&gt;This really is a problem. If you‚Äôre/not/making a backup, and you‚Äôre /not/archiving something offline for long-term storage, and you‚Äôre /not/encrypting to securely send the file to someone else, and you‚Äôre /not/encrypting virtual drives that you mount/unmount as needed to get work done, then there‚Äôs no one good tool that does this now. Filippo Valsorda is working on ‚Äúage‚Äù for these use cases, and I‚Äôm super optimistic about it, but it‚Äôs not there yet.&lt;/p&gt;
    &lt;p&gt;Update, February 2020&lt;/p&gt;
    &lt;p&gt;Filippo‚Äôs age has been released. It‚Äôs a solid design with simple, easily auditable implementations in Go and Rust. You can build binaries for it for every mainstream platform. Age is, of course, much younger than PGP. But I would bet all the money in my pocket against all the money in yours that a new vulnerability will be found in the clangorous contraption of PGP before one is found in age. Look into age!&lt;/p&gt;
    &lt;p&gt;Hopefully it‚Äôs clear that this is a pretty narrow use case. We work in software security and handle sensitive data, including bug bounty reports (another super common ‚Äúwe need PGP!‚Äù use case), and we almost never have to touch PGP.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486326</guid><pubDate>Sun, 04 Jan 2026 09:11:47 +0000</pubDate></item><item><title>Anatomy of BoltzGen</title><link>https://huggingface.co/spaces/ludocomito/anatomy-of-boltzgen</link><description>&lt;doc fingerprint="c026ddc3fc7bda32"&gt;
  &lt;main&gt;
    &lt;p&gt;ludocomito / anatomy-of-boltzgen like 19 Refreshing&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486681</guid><pubDate>Sun, 04 Jan 2026 10:28:49 +0000</pubDate></item><item><title>Was it a billion dollar mistake?</title><link>https://www.gingerbill.org/article/2026/01/02/was-it-really-a-billion-dollar-mistake/</link><description>&lt;doc fingerprint="a469d9d932e338d8"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Was it really a Billion Dollar Mistake?&lt;/head&gt;
    &lt;p&gt;2026-01-02&lt;/p&gt;
    &lt;p&gt;TL;DR &lt;code&gt;null&lt;/code&gt; pointer dereferences are empirically the easiest class of invalid memory addresses to catch at runtime, and are the least common kind of invalid memory addresses that happen in memory unsafe languages. The trivial solutions to remove the ‚Äúproblem‚Äù &lt;code&gt;null&lt;/code&gt; pointers have numerous trade-offs which are not obvious, and the cause of why people think it is a ‚Äúproblem‚Äù comes from a specific kind of individual-element mindset.&lt;/p&gt;
    &lt;p&gt;Most people have probably heard of the Billion Dollar Mistake before, which was coined/invented by Tony Hoare: the inventor of null references/pointers.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;I call it my billion-dollar mistake. It was the invention of the null reference in 1965. At that time, I was designing the first comprehensive type system for references in an object oriented language (ALGOL W). My goal was to ensure that all use of references should be absolutely safe, with checking performed automatically by the compiler. But I couldn‚Äôt resist the temptation to put in a null reference, simply because it was so easy to implement. This has led to innumerable errors, vulnerabilities, and system crashes, which have probably caused a billion dollars of pain and damage in the last forty years.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;‚Äî Tony Hoare, 2009&lt;/p&gt;
    &lt;p&gt;One thing I‚Äôd like to remark is that a Billion Dollars over a forty years over an entire industry is literally nothing, and close to a rounding error. I assume the number is just hyperbole, and not a real estimate, since there are loads of software industries today which make much more expensive mistakes than this one. However, I would still like to discuss this ‚Äúproblem‚Äù onwards.&lt;/p&gt;
    &lt;p&gt;If you have ever used pretty much any programming language that deals with memory, you will have encountered &lt;code&gt;null&lt;/code&gt; pointers, sometimes referred to as &lt;code&gt;nullptr&lt;/code&gt;, &lt;code&gt;NULL&lt;/code&gt;, &lt;code&gt;nil&lt;/code&gt;, or many other similar names. It is typically used as a pointer/reference that does not refer to a valid object. However another way to think about &lt;code&gt;null&lt;/code&gt; is that it is just one of many invalid memory addresses.&lt;/p&gt;
    &lt;p&gt;In many memory-managed garbaged collected languages, it will be the most common invalid memory address since it is very difficult to reach other invalid memory states. However, the general criticism of null arises more commonly in systems-level programming languages such as C or Odin, and I am going to argue that in practice, most invalid memory addresses are not null in those languages.&lt;/p&gt;
    &lt;p&gt;This issue of null pointers is related to the drunkard‚Äôs search principle (a drunk man looks for his lost keys at night under a lamppost because he can see in that area). I have found that null pointers are usually very easy to find and fix, especially since most are caused by trivial bugs (usually typos).&lt;/p&gt;
    &lt;p&gt;In theory, null is still a perfectly valid memory address, but as a practical matter, we have decided on the convention that null being zero is useful for marking a pointer as unset. Modern platforms reserve the first few pages of (virtual) memory to check for these errors. Typically on all modern systems, that memory address is located at &lt;code&gt;0&lt;/code&gt;1, but it didn‚Äôt always used to be on all platforms2. Meaning that null is just a kind of sentinel value for memory addresses.&lt;/p&gt;
    &lt;p&gt;But the real question of all of this is: if &lt;code&gt;null&lt;/code&gt; is generally considered to be a mistake, what is the cause of this mistake and is it actually a problem?&lt;/p&gt;
    &lt;head rend="h2"&gt;The Symptom&lt;/head&gt;
    &lt;p&gt;The problem with a null pointer in practice is not the existence of the null pointer itself, but rather the dereferencing of them causing a runtime panic. As I‚Äôve previously stated, a null pointer is just one kind of invalid memory address, and in languages like C or Odin, it is much more common to get other kinds of invalid memory addresses which are not solved by removing the symptom of null pointer dereferencing. Other common forms of invalid memory address are use-after-free, incorrect pointer-arithmetic calculations, unmapped memory regions, and many more, which are not trivially solvable in the same way that null pointers could be.&lt;/p&gt;
    &lt;p&gt;Compile-time memory safety is not something I require for my kinds of systems level programming, but languages such as Rust and Ada are usually the go-to languages for when that is a need.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Cause and ‚ÄúSolutions‚Äù&lt;/head&gt;
    &lt;p&gt;For Odin, I decided to not remove the existence of &lt;code&gt;nil&lt;/code&gt; pointers. Why I have not tried to ‚Äúsolve‚Äù this ‚Äúproblem‚Äù is due to it being a trade-off in programming language design which is not immediately obvious.&lt;/p&gt;
    &lt;p&gt;If you want to make pointers not have a &lt;code&gt;nil&lt;/code&gt; state by default, this requires one of two possibilities: requiring the programmer to test every pointer on use, or assume pointers cannot be &lt;code&gt;nil&lt;/code&gt;. The former is really annoying, and the latter requires something which I did not want to do (which you will most likely not agree with just because it doesn‚Äôt seem like a bad thing from the start): explicit initialization of every value everywhere.&lt;/p&gt;
    &lt;p&gt;Fundamentally the problem of &lt;code&gt;nil&lt;/code&gt; pointers/references arising comes from the ability of not having to explicitly initialize individual-elements on creation, allowing them to be in a ‚Äúnil‚Äù state by default.&lt;/p&gt;
    &lt;p&gt;The first option is solved in many languages (partially including Odin) with having support for maybe/option types or nullable types (monads), however I am still not a huge fan of them in practice as I rarely require them in systems-level programming. I know very well this is a ‚Äúcontroversial‚Äù opinion, but systems-level programming languages deal with memory all the time and can easily get into ‚Äúunsafe‚Äù states on purpose. Restricting this can actually make constructs (like custom allocators) very difficult to implement, along with other things.&lt;/p&gt;
    &lt;p&gt;Odin does have &lt;code&gt;Maybe(^T)&lt;/code&gt;, and that‚Äôs fine that it does exist, but it‚Äôs actually rare it is needed in practice. When it is needed, it‚Äôs either for documenting foreign code‚Äôs usage of pointers (i.e. non-Odin code), or it‚Äôs for things which are not pointers at all (in Odin code). And coupled with many of the other features of Odin (multiple return values, &lt;code&gt;or_return&lt;/code&gt; et al, proper array types, etc), a lot of the need disappears in most cases.&lt;/p&gt;
    &lt;p&gt;n.b. For the ML/Rust users, Odin‚Äôs &lt;code&gt;Maybe(^T)&lt;/code&gt; is identical to &lt;code&gt;Option&amp;lt;&amp;amp;T&amp;gt;&lt;/code&gt; in Rust in terms of semantics and optimizations.&lt;/p&gt;
    &lt;p&gt;The second option is a subtle one: it forces a specific style and architectural practices whilst programming. Odin is designed around two things: to be a C alternative which still feels like C whilst programming and ‚Äútry to make the zero value useful‚Äù, and as such, a lot of the constructs in the language and core library have been structured around this. Odin is trying to be a C alternative, and as such it is not trying to change how most C programmers actually program in the first place. This is why you are allowed to declare variables without an explicit initializer, but the difference to that of C is that variables will be zero-initialized by default3.&lt;/p&gt;
    &lt;p&gt;Fundamentally this idea of explicit individual-element based initialization everywhere is a viral concept which does lead to what I think are bad architectural decisions in the long run. Compilers are dumb‚Äîthey cannot do everything for you, especially know the cost of the architectural decisions throughout your code, which requires knowing the (global) intent of your code. When people argue that a lot of the explicit initialization can be ‚Äúoptimized‚Äù out, this is only thinking from a local position of individual-elements, which does total up to being slower in some cases at a more global scale.&lt;/p&gt;
    &lt;p&gt;To give an example of what I mean, take &lt;code&gt;make([]Some_Struct, N)&lt;/code&gt;. In Odin, it just zeroes the memory because in some cases, it is literally free (i.e. &lt;code&gt;mmap&lt;/code&gt; must zero). However, when you need to initialize each value of that slice, you are now turning a O(1) problem into a O(N) problem. And it can get worse if each field in the struct also needs its own form of construction.&lt;/p&gt;
    &lt;p&gt;I do not think the &lt;code&gt;nil&lt;/code&gt; pointer problem is as much of an empirical problem in practice. I know a lot of people want to ‚Äúprove‚Äù things whenever they can at compile-time, but I still have to test a lot of code in the first place, and for this very very specific example, it is a trivial one to catch.&lt;/p&gt;
    &lt;p&gt;And I‚Äôd argue a lot (not all) of the &lt;code&gt;NULL&lt;/code&gt; pointer problems in C are caused by the lack of a proper array type. C‚Äôs biggest mistake in my opinion is conflating a pointer with an array. Odin has solved this by having different bounds-checked array types.&lt;/p&gt;
    &lt;p&gt;A general habit of people who criticize newer languages is to say the problems exist in C and therefore must exist in this new language, without even doing basic research if that‚Äôs true in the first place4.&lt;/p&gt;
    &lt;head rend="h2"&gt;The ‚ÄúGotcha‚Äù&lt;/head&gt;
    &lt;p&gt;I find this ‚Äúgotcha‚Äù that people bring up5 is probably one of the most common ones because it seems like an ‚Äúobvious‚Äù and ‚Äúsimple‚Äù win, and I‚Äôd argue it‚Äôs the exact opposite of either ‚Äúsimple‚Äù and even a ‚Äúwin‚Äù. Language design is all about trade-offs and compromises as there is never going to be a perfect language for anyone‚Äôs problem. Even if you designed the Domain Specific Language (DSL) for your task, you‚Äôll still have loads of issues, especially with specific semantics (not just syntax).&lt;/p&gt;
    &lt;p&gt;Languages like Rust were designed from day zero around explicit individual-element based initialization, however when designing Odin, from day zero I wanted to still keep the feel of C (along without other design philosophies) so I explicitly wanted implicit zero based initialization (e.g. &lt;code&gt;x: T&lt;/code&gt; has zeroed memory). This ever so minor choice might not seem like a big thing to you, but it leads to MASSIVE architectural decisions later on when developing a program.&lt;/p&gt;
    &lt;p&gt;Odin could not ‚Äújust add‚Äù non-nil pointers and it be ‚Äúfine‚Äù. It would actually not be Odin any more, and the entire language would not even be a C alternative any more, and feel much more like C++, Rust, or OCaml. Rust and OCaml (which Rust is based off) are different kinds of languages to Odin and their approach does not translate well to what Odin (or C) is trying to do.&lt;/p&gt;
    &lt;p&gt;The analogy I like to use is complaining that French cannot do the English equivalent of Iambic Pentameter. Different languages just have different approaches to doing things.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Problem of the Individual-Element Mindset&lt;/head&gt;
    &lt;p&gt;I believe this general local based thinking leads to poor architectural decisions at the global scope. It is unfortunately one of the most common mindsets in programming but it is a phase that every programmer does go through in their journey. I and many others have evolved how we think about architecting programs, but most programmers in their journey usually go through a few phases.&lt;/p&gt;
    &lt;p&gt;A good explanation of this general thinking is presented in this video with Casey Muratori:&lt;/p&gt;
    &lt;p&gt;On this journey/life-cycle, no-one is born knowing how to program: you learn how to do it. And when it comes to programming, you think in stages (at least in my personal experience) that are usually quite consistent in their ordering amongst most people. At some point during this stage of thinking, people reach a point of what I‚Äôll dub the Individual-Element Mindset. This mindset is when you think of each specific piece of data (element) as having its own lifetime. This leads to common approaches of thinking each element having to be constructed/&lt;code&gt;malloc&lt;/code&gt;ed individually with its own unique lifetime, then it‚Äôs destructed/&lt;code&gt;free&lt;/code&gt;d individually (or automatically by a garbage collector).&lt;/p&gt;
    &lt;p&gt;The architectures that arise from this mindset tends to be based around things like:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Thousands/millions of &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;or&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;Data structures full of pointers which point to other things&lt;/item&gt;
      &lt;item&gt;RAII&lt;/item&gt;
      &lt;item&gt;‚ÄúSmart‚Äù pointers and reference counting&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;RAII and ‚Äúsmart‚Äù pointers6 are both mitigations to get around many of the architectural issues of this mindset. RAII will handle the construction and destruction of elements automatically by the compiler. ‚ÄúSmart‚Äù pointers are there to help with the problems with forgetting to free allocations and to prevent use-after-frees, by tying the lifetime of the usage of the object with its allocation.&lt;/p&gt;
    &lt;p&gt;This architectural mindset does lead to loads of problems as a project scales. Unfortunately, a lot of people never move past this point on their journey as a programmer. Sometimes they do not move past this point as they only program in a language with automatic memory management (e.g. garbage collection or automatic reference counting), and when you are in such a language, you pretty much never think about these aspects as much. And if you ever do think about these, it‚Äôs usually because you are trying to do something performance-oriented and you have to pretend you are managing your own memory. It is common for many games that have been written with garbage collected languages to try to get around the inadequacies of not being able to manage your own memory. But if you are never writing performance-critical code, it would be very unlikely that you would know that you have to get past this point.&lt;/p&gt;
    &lt;p&gt;If you were having to manage these millions of individual allocations manually, it does make sense why people recommend things like RAII or ‚Äúsmart‚Äù pointers as the compiler will add the constructors and destructors automatically for you. You can see why a person at this stage of their programming journey can think it would be a good thing to do, since it removes a lot of the boilerplate and minimizes the possible errors due to forgetting to write things.&lt;/p&gt;
    &lt;p&gt;I am not saying people who do this are stupid‚Äîfar from it! I‚Äôve had this mindset before in my journey as a programmer, as have most programmers. It‚Äôs something you either come to naturally or you are taught from the general programming culture on the internet. I cannot think of any one who has shipped software who has NOT been at this phase/stage at some point in their life.&lt;/p&gt;
    &lt;p&gt;The problem with this mindset and the solutions it produces is that you are effectively patching over a flaw in your architecture. If two things are inextricably linked such that you have one thing getting automatically freed when the other thing gets freed (in all but the rarest of circumstances) this means that those things should have a combined lifetime. The better approach to this is to have one large ‚Äúpool‚Äù/‚Äúarena‚Äù that all of those things got created in, so that things from that ‚Äúpool‚Äù get freed together.&lt;/p&gt;
    &lt;p&gt;The stage of the individual-element mindset is stupid, as in the code that you write whilst in this mindset will not be good, but you are not stupid. Especially since everyone will be at this stage at some point. The next stage to get to after this is the grouped-element mindset.&lt;/p&gt;
    &lt;p&gt;n.b. I call myself an idiot/numpty/moron on a daily basis for things that I do, so don‚Äôt think I am saying I am ‚Äúsmart‚Äù. I am just as ‚Äústupid‚Äù as most. Stupid is as stupid does.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Grouped-Element Mindset&lt;/head&gt;
    &lt;p&gt;When you move from the Individual-Element Mindset to the Grouped-Element Mindset, things like smart-pointers and RAII7 become mostly irrelevant. This is because ownership and lifetime concerns are not as much of a problem any more, like the kind you had in the previous mindset. Ownership is a constant concern and mental overhead when thinking in an individual-element mindset. Whilst ownership is obvious (and usually trivial) in the vast majority (99+%) of cases when you are in the grouped-element mindset.&lt;/p&gt;
    &lt;p&gt;This grouped-element mindset tends to be based around things like:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Large collections created/destroyed at the same time&lt;/item&gt;
      &lt;item&gt;Very limited uses of &lt;code&gt;new&lt;/code&gt;/&lt;code&gt;delete&lt;/code&gt;or&lt;code&gt;malloc&lt;/code&gt;/&lt;code&gt;free&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;Heavy use of scratch space&lt;/item&gt;
      &lt;item&gt;Hashing and the reuse of elements&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Most of the advice (and criticisms) online that you will read are for/from the Individual-Element Mindset, and I‚Äôd argue the goal is to get to the Group-Element Mindset (and even pass it). It‚Äôs still a way of thinking for people who are not that good at programming as they could be yet. They are still in a stage of architecture which is very limited, and not appropriate for modern high-performance well-architected code. It is an old way thinking which is still very prevalent, and people need to get past it. I‚Äôd argue there is no ‚Äúgood code‚Äù that is written in the Individual-Element Mindset. It might do the job, but the code itself won‚Äôt be ‚Äúgood‚Äù, at best it will be adequate, but the mindset is inherently inefficient and bug-prone.&lt;/p&gt;
    &lt;p&gt;n.b. In many ways, this individual-element mindset is a hell of a lot more costly than worrying about the ‚ÄúBillion Dollar Mistake‚Äù of this article. The performance losses alone are probably wasting BILLIONS PER DAY as an industry.&lt;/p&gt;
    &lt;p&gt;The grouped-element mindset does tend solve a lot of other kinds of invalid memory addresses too (such as use-after-free) because the lifetime and ownership of things is made a lot clearer just by thinking about large collections.&lt;/p&gt;
    &lt;p&gt;Use-after-free is usually another symptom of poor architectural decisions, and the common ‚Äúsolution‚Äù that some languages do without garbage collection is to add even more complex lifetime and ownership semantics to the language (e.g. Rust). Not everything has to be nor needs to be solved in the language if memory safety is not of paramount concern, of which I‚Äôd argue most pieces of software are not in that realm. I think it‚Äôs another ‚Äúmistake‚Äù to think everything need to be as temporally memory safe as randos on the internet claim. Odin already has a lot of features in it which solve the spatial memory safety problems already; it just doesn‚Äôt try to ‚Äúsolve‚Äù temporal memory safety at the language level as much as other popular languages. It‚Äôs all about these trade-offs in design between compile-time enforcement, run-time catching, and architectural design.&lt;/p&gt;
    &lt;p&gt;It‚Äôd even argue the individual-element mindset is a reason why a lot of people still love the OOP approach to programming. You only have to think, and can only think, about a very small piece. OOP allows you to think very small and not how the whole program works. This was its initial goal too of both the Alan Kay style OOP (message passing) and the Java style OOP (inheritance-based encapsulation).&lt;/p&gt;
    &lt;p&gt;As you get a little bit larger and start thinking about systems within your code, then you can see how things cohere and bind together much more easily. Once you are at this systems level of grouped-elements, you‚Äôre at this next phase of thinking.&lt;/p&gt;
    &lt;p&gt;However, I do not think you can skip past the individual-element mindset and jump straight to the group-element mindset, at least not the majority of people. I think it‚Äôs probably a necessary phase of thinking from understanding the fundamental unit of data within a problem, from the individual to the group8.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Consequences of These Mindsets Applied to Language Design&lt;/head&gt;
    &lt;p&gt;When designing Odin, I had a lot of these distinctions of mindsets explicitly in mind. Most of my choices were conscious about what I wanted and did not want from a language. A lot of Odin‚Äôs design has been around this ‚Äúnudging‚Äù to a certain style away from mindsets I do not feel are good in the long run.&lt;/p&gt;
    &lt;p&gt;However these design decisions do come into conflict with the common mindset that a lot of programmers have. If you don‚Äôt agree with the design decisions of Odin, that‚Äôs fine, and Odin might not be the language for you, but don‚Äôt think you can trivially wedge an idea/feature/construct into another language and think it will just work as you expect.&lt;/p&gt;
    &lt;p&gt;A lot of language design is thinking about these local decisions and how they will affect the landscape of the global possibilities. We want to be able to think locally about something most of the time, but when it comes to architectural decisions, we need to think as global as we possibly can.&lt;/p&gt;
    &lt;p&gt;Designing a language isn‚Äôt just about adding cool new features, or syntactic sugar, or whatever. It‚Äôs about thinking what you are trying to achieve for the problem space you are designing for, and how the individual features and constructs interact with each other and the consequences that they produce whether they improve or restrict things as things scale.&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusion&lt;/head&gt;
    &lt;p&gt;&lt;code&gt;null&lt;/code&gt; pointer dereferences are empirically the easiest class of invalid memory addresses to catch at runtime, and are the least common kind of invalid memory addresses that happen in memory unsafe languages. And the cause of why people think it is a ‚Äúproblem‚Äù comes from a specific kind of individual-element mindset.&lt;/p&gt;
    &lt;p&gt;In statically typed compiled manual-memory managed languages, it‚Äôs not as much of a problem empirically compared to the set of invalid memory address problems, of which most of them are solved with a different mindset.&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;&lt;code&gt;#define NULL ((void *)0)&lt;/code&gt;in C99, or&lt;code&gt;nullptr&lt;/code&gt;in C++11 and C23. ‚Ü©Ô∏é&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Historically, the Prime 50, CDC Cyber 180, and some Honeywell-Bull machines all had nonzero null, as might DG Eclipse MV, HP 3000, Lisp Machine, some 64-bit Cray, ‚Ü©Ô∏é&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;p&gt;You can do&lt;/p&gt;&lt;code&gt;x: T = ---&lt;/code&gt;to make it uninitialized stack memory, if that is necessary for certain optimizations. ‚Ü©Ô∏é&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;If you didn‚Äôt guess, this is kind of tiresome when I am trying to explain Odin to other people who just want to dismiss it out-right because of some preconceived notion of the problems in C. Most of these people are generally not serious, but they are the loudest on the social media sites. ‚Ü©Ô∏é&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;I find it mainly as a excuse to not try Odin, which is fine, I don‚Äôt care if you use Odin or not, but be honest that it‚Äôs just not a language for you rather than finding excuses. ‚Ü©Ô∏é&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;I am placing quotes around ‚Äúsmart‚Äù to emphasize that they are not really ‚Äúsmart‚Äù in their construction nor ‚Äúsmart‚Äù in their usage. ‚Ü©Ô∏é&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Note I am not saying things like an explicit&lt;/p&gt;&lt;code&gt;defer&lt;/code&gt;statement is not useful, but rather the need for the implicit RAII style of lifetime handling of individual-elements is bad. If I thought&lt;code&gt;defer&lt;/code&gt;was bad, I would not have added it to Odin. ‚Ü©Ô∏é&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;This should probably be its own article, not a footnote, but with a poor analogy, this grouped-element mindset is actually akin to ‚Äúcommunism‚Äù, and that the individual-element mindset is closer to ‚Äúcapitalism‚Äù. Please note I think ‚Äúcommunism‚Äù is evil, but the analogy of the politico-economics systems mirror quite well due to the thinking of element-based-lifetimes rather than system-based-lifetimes. ‚Ü©Ô∏é&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486730</guid><pubDate>Sun, 04 Jan 2026 10:35:58 +0000</pubDate></item><item><title>Maybe comments should explain 'what' (2017)</title><link>https://www.hillelwayne.com/post/what-comments/</link><description>&lt;doc fingerprint="56309d2470a41897"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Maybe Comments SHOULD Explain 'What'&lt;/head&gt;
    &lt;p&gt;People say ‚ÄúComments should explain why, not what.‚Äù I feel like starting a flame war today so I‚Äôm going to argue that comments should explain ‚Äòwhat‚Äô too. Please don‚Äôt use this as justification to write bad code, okay? Okay.&lt;/p&gt;
    &lt;p&gt;First of all, why shouldn‚Äôt comments explain ‚Äòwhat‚Äô? If you need comments to explain what‚Äôs going on, it suggests your code is unclear. If I write&lt;/p&gt;
    &lt;code&gt;//weight, radius, price
w = 10, r = 9, p = 1
&lt;/code&gt;
    &lt;p&gt;That‚Äôs not as clear as saying&lt;/p&gt;
    &lt;code&gt;weight = 10, radius = 9, price = 3
&lt;/code&gt;
    &lt;p&gt;‚ÄúBut it‚Äôs obvious that &lt;code&gt;w&lt;/code&gt; is &lt;code&gt;weight&lt;/code&gt;!‚Äù Sure, if you‚Äôre seeing those lines back-to-back. But presumably you‚Äôre initializing the variable to use it, which means that it‚Äôs going to appear later. When you see &lt;code&gt;w&lt;/code&gt; later in the body, you need to go back and check what it is. That‚Äôs a frustrating context switch and you may skip it, possibly assuming that &lt;code&gt;w&lt;/code&gt; is‚Ä¶ width. Then bad things happen. So comments are not a substitute for clean code.&lt;/p&gt;
    &lt;p&gt;Okay, so why should comments explain why? Some people argue that we should instead store the ‚Äòwhy‚Äô in commit messages or tests. Most people feel icky about this, though. Given:&lt;/p&gt;
    &lt;code&gt;// Clear twice to deal with bug ABC in library XYZ, see [link]
XYZ.clear(); XYZ.clear();
&lt;/code&gt;
    &lt;p&gt;Would you prefer that comment be removed and placed in the commit message? Then if you want to learn why &lt;code&gt;XYZ.clear()&lt;/code&gt; is repeated twice, you have to dig up the commit. That can be a difficult and tedious job, especially if the line was reformatted, moved between files, anything that makes &lt;code&gt;git blame&lt;/code&gt; not work. Searching all that is a context switch and you may skip it, possibly assuming that it‚Äôs a bug you can remove. Then bad things happen.&lt;/p&gt;
    &lt;p&gt;Both of these cases share the same problem: looking things up is hard. Best case it‚Äôs a context switch that takes time away from understanding the problem. Worst case you don‚Äôt look it up and make a potentially-dangerous assumption. It‚Äôs better to keep the information in the exact same place that you need it, whether that‚Äôs via descriptive code or comments over commits.&lt;/p&gt;
    &lt;p&gt;Now for the weird part. What if your descriptive code forces a context switch? Let‚Äôs take the code from Bob Martin‚Äôs Extract Till You Drop.1&lt;/p&gt;
    &lt;code&gt;    String replace() {
      Pattern symbolPattern = Pattern.compile("\\$([a-zA-Z]\\w*)");
      Matcher symbolMatcher = symbolPattern.matcher(stringToReplace);
      while (symbolMatcher.find()) {
        String symbolName = symbolMatcher.group(1);
        if (getSymbol(symbolName) != null &amp;amp;&amp;amp; !alreadyReplaced.contains(symbolName)) {
          alreadyReplaced.add(symbolName);
          stringToReplace = stringToReplace.replace("$" + symbolName, translate(symbolName));
        }
      }
      return stringToReplace;
&lt;/code&gt;
    &lt;p&gt;To make it more understandable, he replaces it with this:&lt;/p&gt;
    &lt;code&gt;  String replace() {
      replaceAllSymbols();
      return stringToReplace;
    }

    private void replaceAllSymbols() {
      for (String symbolName = nextSymbol(); symbolName != null; symbolName = nextSymbol())
        replaceAllInstances(symbolName);
    }

    private String nextSymbol() {
      return symbolMatcher.find() ? symbolMatcher.group(1) : null;
    }

    private void replaceAllInstances(String symbolName) {
      if (shouldReplaceSymbol(symbolName))
        replaceSymbol(symbolName);
    }

    private boolean shouldReplaceSymbol(String symbolName) {
      return getSymbol(symbolName) != null &amp;amp;&amp;amp; !alreadyReplaced.contains(symbolName);
    }

    private void replaceSymbol(String symbolName) {
      alreadyReplaced.add(symbolName);
      stringToReplace = stringToReplace.replace(
        symbolExpression(symbolName),
        translate(symbolName));
    }

    private String symbolExpression(String symbolName) {
      return "$" + symbolName;
    }
&lt;/code&gt;
    &lt;p&gt;So much better, right?! &lt;code&gt;replace&lt;/code&gt; is now two lines instead of ten. But now there‚Äôs six other methods you have to read to understand how the class works. ‚ÄúBut it‚Äôs easier to follow.‚Äù Not if I‚Äôm trying to track down a bug and I have to keep scrolling up and down, jumping from method to method to understand the whole. Is that really so much better than using comments?&lt;/p&gt;
    &lt;code&gt;    String replace() {
      Pattern symbolPattern = Pattern.compile("\\$([a-zA-Z]\\w*)"); //f.ex $F1a3
      Matcher symbolMatcher = symbolPattern.matcher(stringToReplace);

      // Replace all symbols
      while (symbolMatcher.find()) {
        String symbolName = symbolMatcher.group(1);
        // translate will replace all instances; only need to run it once
        if (getSymbol(symbolName) != null &amp;amp;&amp;amp; !alreadyReplaced.contains(symbolName)) {
          alreadyReplaced.add(symbolName);
          stringToReplace = stringToReplace.replace("$" + symbolName, translate(symbolName));
        }
      }
      return stringToReplace;
&lt;/code&gt;
    &lt;p&gt;I think that‚Äôs more understandable than either the original case or the clean code case, because you don‚Äôt have to context switch to a different method to understand what‚Äôs going on. Obviously this isn‚Äôt always the case, and often comments are superfluous. I‚Äôm just saying that there are at least a few cases where writing a ‚Äòwhat‚Äô comment is the right choice, so we shouldn‚Äôt reject them out-of-hand.&lt;/p&gt;
    &lt;p&gt;Welp that‚Äôs my argument so flame war awaaaaaaaaaay&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486780</guid><pubDate>Sun, 04 Jan 2026 10:43:38 +0000</pubDate></item><item><title>JavaScript engines zoo ‚Äì Compare every JavaScript engine</title><link>https://zoo.js.org/</link><description>&lt;doc fingerprint="5d5ffb21f9156e19"&gt;
  &lt;main&gt;
    &lt;p&gt;JavaScript engines zoo amd64: i9-10900K 3.7-5.3GHz - Linux arm64: Mac M4 4.5GHz - Linux VM Show variants JITless only Only v8-v7 benchmarks Engine Score Binary LOC Language JIT Years Target ES1-5 ES6 ES2016+ Stars Contributors Org License Description&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46486978</guid><pubDate>Sun, 04 Jan 2026 11:23:23 +0000</pubDate></item><item><title>FreeBSD Home NAS, part 3: WireGuard VPN, routing, and Linux peers</title><link>https://rtfm.co.ua/en/freebsd-home-nas-part-3-wireguard-vpn-linux-peer-and-routing/</link><description>&lt;doc fingerprint="f7d17d09e5228ce3"&gt;
  &lt;main&gt;
    &lt;p&gt;I am continuing to set up my home server on FreeBSD 14.3, which is intended to serve as a NAS.&lt;/p&gt;
    &lt;p&gt;In the previous post, FreeBSD: introduction to Packet Filter (PF) firewall, we got acquainted with firewalls; the next step is to configure a VPN for access.&lt;/p&gt;
    &lt;p&gt;The main idea is to (finally!) connect my ‚Äúoffice‚Äù and my apartment, and later, perhaps, also connect the server where rtfm.co.ua is currently running so that blog files and database backups can be stored directly on the ZFS mirror pool of the home server.&lt;/p&gt;
    &lt;p&gt;All posts in this blog series:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;FreeBSD: Home NAS, part 1 ‚Äì configuring ZFS mirror (RAID1)&lt;/item&gt;
      &lt;item&gt;FreeBSD: Home NAS, part 2 ‚Äì introduction to Packet Filter (PF) firewall&lt;/item&gt;
      &lt;item&gt;(current) FreeBSD: Home NAS, part 3 ‚Äì WireGuard VPN, Linux peer, and routing&lt;/item&gt;
      &lt;item&gt;FreeBSD: Home NAS, part 4 ‚Äì Local DNS with Unbound&lt;/item&gt;
      &lt;item&gt;FreeBSD: Home NAS, part 5 ‚Äì ZFS pool, datasets, snapshots, and ZFS monitoring&lt;/item&gt;
      &lt;item&gt;FreeBSD: Home NAS, part 6 ‚Äì Samba server and client connections&lt;/item&gt;
      &lt;item&gt;‚Ä¶ to be continued&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Contents&lt;/p&gt;
    &lt;head rend="h1"&gt;WireGuard vs OpenVPN&lt;/head&gt;
    &lt;p&gt;When it came to choosing which specific VPN server to use, I initially thought about OpenVPN ‚Äì since I‚Äôve worked with it for years, and there are even some blog posts about it on RTFM.&lt;/p&gt;
    &lt;p&gt;However, after giving it some thought, I decided that for a home VPN, solutions like OpenVPN or Pritunl would be a bit of overkill, and I could give WireGuard a try.&lt;/p&gt;
    &lt;p&gt;The systems are very different, but in short:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;WireGuard has a much smaller codebase ‚Äì for example, the Linux implementation is about 4,000 lines in the kernel, while OpenVPN is about 100,000 lines in user space&lt;/item&gt;
      &lt;item&gt;WireGuard works as a kernel module ‚Äì packet processing and cryptography are performed directly in kernel space, whereas OpenVPN is a user space service that operates through a TCP or UDP socket and interacts with the kernel via the standard kernel network stack&lt;/item&gt;
      &lt;item&gt;The same applies to encryption, as WireGuard has built-in cryptography that is part of the protocol itself and runs in kernel space, while OpenVPN uses the standard SSL/TLS stack (OpenSSL, LibreSSL, etc.) in user space, which adds complexity and CPU/RAM overhead&lt;/item&gt;
      &lt;item&gt;WireGuard‚Äôs operational model is peer-to-peer ‚Äì meaning the protocol has no built-in ‚Äúserver‚Äù or ‚Äúclient‚Äù roles, only Peers with keys and allowed IPs, whereas OpenVPN is built around a classic client-server architecture&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;As a result, WireGuard can be perceived not as a separate service, but as an encrypted network interface, while OpenVPN remains a classic application-based VPN service.&lt;/p&gt;
    &lt;p&gt;Even the official WireGuard whitepaper is titled ‚ÄúNext Generation Kernel Network Tunnel‚Äú.&lt;/p&gt;
    &lt;head rend="h1"&gt;Network Architecture&lt;/head&gt;
    &lt;p&gt;So, here is what I have:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;‚Äúoffice‚Äù: a separate local network 192.168.0.0/24, with a TP-LINK Archer AX12 router at the entry &lt;list rend="ul"&gt;&lt;item&gt;this network contains a work laptop with Arch Linux and a Lenovo ThinkCentre with FreeBSD&lt;/item&gt;&lt;item&gt;the FreeBSD machine will host the NAS, NFS, and WireGuard itself &lt;list rend="ul"&gt;&lt;item&gt;although the Archer AX12 has its own built-in OpenVPN and WireGuard ‚Äì I want to do it myself, manually, for more control&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;home: a 192.168.100.0/24 network with the exact same Archer AX12 router &lt;list rend="ul"&gt;&lt;item&gt;the only client there is a home laptop with Arch Linux&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;And here is what I want to achieve:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;FreeBSD will act as the WireGuard VPN server&lt;/item&gt;
      &lt;item&gt;The Archer AX12 router will have NAT port-forwarding to connect to WireGuard on FreeBSD&lt;/item&gt;
      &lt;item&gt;VPN network ‚Äì 10.8.0.1/24&lt;/item&gt;
      &lt;item&gt;Packet Filter firewall on FreeBSD to control traffic&lt;/item&gt;
      &lt;item&gt;Both laptops should have access to each other and to the future NAS on FreeBSD&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Here is how it looks schematically:&lt;/p&gt;
    &lt;head rend="h1"&gt;Running WireGuard on FreeBSD&lt;/head&gt;
    &lt;p&gt;In FreeBSD (just like in Linux), WireGuard consists of a kernel module + userspace tools: the main ‚Äúworking‚Äù part is loaded as a kernel module, and a separate package is installed to interact with it.&lt;/p&gt;
    &lt;p&gt;Install &lt;code&gt;wireguard-tools&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # pkg install wireguard-tools&lt;/quote&gt;
    &lt;p&gt;Load the module:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # kldload if_wg&lt;/quote&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # kldstat | grep wg 8 1 0xffffffff82a47000 2f5c0 if_wg.ko&lt;/quote&gt;
    &lt;p&gt;Enable WireGuard in &lt;code&gt;/etc/rc.conf&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # sysrc wireguard_enable=YES wireguard_enable: -&amp;gt; YES root@setevoy-nas:/home/setevoy # sysrc wireguard_interfaces=wg0 wireguard_interfaces: -&amp;gt; wg0&lt;/quote&gt;
    &lt;p&gt;Don‚Äôt start it yet ‚Äì let‚Äôs move on to network configuration.&lt;/p&gt;
    &lt;head rend="h2"&gt;Network configuration&lt;/head&gt;
    &lt;p&gt;Next, the system needs to be configured to route packets between the physical interface and the WireGuard interface, and the firewall config needs an update.&lt;/p&gt;
    &lt;head rend="h3"&gt;IP forwarding configuration&lt;/head&gt;
    &lt;p&gt;Enable IP forwarding from the &lt;code&gt;wg0&lt;/code&gt; interface (which doesn‚Äôt exist yet, it will appear when WireGuard starts) to the LAN interface, &lt;code&gt;em0&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Update the autostart in &lt;code&gt;/etc/rc.conf&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # sysrc gateway_enable="YES" gateway_enable: NO -&amp;gt; YES&lt;/quote&gt;
    &lt;p&gt;To enable forwarding immediately without a reboot ‚Äì turn it on using &lt;code&gt;sysctl&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # sysctl net.inet.ip.forwarding=1 net.inet.ip.forwarding: 0 -&amp;gt; 1&lt;/quote&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # sysctl net.inet.ip.forwarding net.inet.ip.forwarding: 1&lt;/quote&gt;
    &lt;p&gt;The next step is configuring Packet Filter.&lt;/p&gt;
    &lt;head rend="h3"&gt;Packet Filter Configuration&lt;/head&gt;
    &lt;p&gt;So, here is what we have:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;VPN network: 10.8.0.0/24&lt;/item&gt;
      &lt;item&gt;Office network where FreeBSD/VPN is located: 192.168.0.0/24 &lt;list rend="ul"&gt;&lt;item&gt;FreeBSD LAN IP: 192.168.0.2&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Routing internet through VPN is not required ‚Äì only traffic between the home and office networks&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The current &lt;code&gt;pf&lt;/code&gt; config is minimalist, from the previous post:&lt;/p&gt;
    &lt;quote&gt;allowed_tcp_ports = "{ 22 }" allowed_clients = "{ 192.168.0.0/24, 192.168.1.0/24 }" set skip on lo block all # allow ssh only from specific hosts pass in proto tcp from $allowed_clients to any port $allowed_tcp_ports keep state # allow all outgoing traffic pass out all keep state&lt;/quote&gt;
    &lt;p&gt;What needs to be added:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;allow inbound UDP connections to the WireGuard port (51820) for the handshake&lt;/item&gt;
      &lt;item&gt;allow traffic from the VPN network 10.8.0.0/24 to the FreeBSD host itself (ping, SSH)&lt;/item&gt;
      &lt;item&gt;allow transit traffic from the VPN network 10.8.0.0/24 to the local office and home networks (192.168.0.0/24 and 192.168.100.0/24)&lt;/item&gt;
      &lt;item&gt;allow ICMP and SSH from the VPN network and the home network to the FreeBSD host&lt;/item&gt;
      &lt;item&gt;allow outbound traffic from FreeBSD&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I‚Äôve added macros to the config, but while writing and testing ‚Äì I specify all ports and addresses explicitly in the config for better readability.&lt;/p&gt;
    &lt;p&gt;Now &lt;code&gt;/etc/pf.conf&lt;/code&gt; will look like this:&lt;/p&gt;
    &lt;quote&gt;################## ### Interfaces ### ################## # lan_if = "em0" # wg_if = "wg0" ################ ### Networks ### ################ # lan_net = "192.168.0.0/24" # home_net = "192.168.100.0/24" # wg_net = "10.8.0.0/24" # vpn_nets = "{ 10.8.0.0/24, 192.168.100.0/24 }" ################ ### Services ### ################ # ssh_ports = "{ 22 }" # wg_port = "51820" ###################### ### Basic settings ### ###################### # do not filter loopback traffic set skip on lo ###################### ### Default policy ### ###################### # block everything by default block all ####################### ### Inbound traffic ### ####################### ### SSH # allow SSH from Office LAN (192.168.0.0/24) to FreeBSD host pass in log on em0 proto tcp from 192.168.0.0/24 to (em0) port 22 keep state # allow SSH from Home network (192.168.100.0/24) to FreeBSD host pass in log on em0 proto tcp from 192.168.100.0/24 to (em0) port 22 keep state # allow SSH from VPN clients to FreeBSD host pass in on wg0 proto tcp from 10.8.0.0/24 to (wg0) port 22 keep state ### VPN # allow WireGuard handshake (UDP/51820) on LAN interface pass in on em0 proto udp to (em0) port 51820 keep state # allow VPN clients (10.8.0.0/24) to access FreeBSD host itself # this allows ping, ssh, etc. to the wg0 address pass in on wg0 from 10.8.0.0/24 to (wg0) keep state # allow VPN clients to access Office LAN (192.168.0.0/24) pass in on wg0 from 10.8.0.0/24 to 192.168.0.0/24 keep state # allow VPN clients to access Home network (192.168.100.0/24) pass in on wg0 from 10.8.0.0/24 to 192.168.100.0/24 keep state # allow ICMP (ping) from VPN clients to FreeBSD host pass in on wg0 proto icmp from 10.8.0.0/24 to (wg0) keep state # allow ICMP (ping) from Home network to FreeBSD host pass in on em0 proto icmp from 192.168.100.0/24 to (em0) keep state ############################ ### outbound traffic ### ############################ # allow all outbound traffic from FreeBSD pass out keep state&lt;/quote&gt;
    &lt;p&gt;Verify the syntax:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # pfctl -vnf /etc/pf.conf set skip on { lo } block drop all pass in log on em0 inet proto tcp from 192.168.0.0/24 to (em0) port = ssh flags S/SA keep state pass in log on em0 inet proto tcp from 192.168.100.0/24 to (em0) port = ssh flags S/SA keep state pass in on wg0 inet from 10.8.0.0/24 to (wg0) flags S/SA keep state pass in on wg0 inet proto icmp from 10.8.0.0/24 to (wg0) keep state pass in on wg0 inet from 10.8.0.0/24 to 192.168.0.0/24 flags S/SA keep state pass in on wg0 inet from 10.8.0.0/24 to 192.168.100.0/24 flags S/SA keep state pass in on em0 inet proto icmp from 192.168.100.0/24 to (em0) keep state pass in on em0 proto udp from any to (em0) port = 51820 keep state pass out all flags S/SA keep state&lt;/quote&gt;
    &lt;p&gt;Reload the rules:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # service pf reload Reloading pf rules.&lt;/quote&gt;
    &lt;p&gt;Now we can prepare to start WireGuard.&lt;/p&gt;
    &lt;head rend="h2"&gt;WireGuard Configuration&lt;/head&gt;
    &lt;p&gt;Everything is very simple here ‚Äì create the keys, write the config file.&lt;/p&gt;
    &lt;head rend="h3"&gt;Creating Keys&lt;/head&gt;
    &lt;p&gt;Communication and cryptography in WireGuard are built on a standard asymmetric key scheme:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The private key is stored on the ‚Äúserver‚Äù&lt;/item&gt;
      &lt;item&gt;The public key is specified on the client&lt;/item&gt;
      &lt;item&gt;During the handshake, the client verifies it is connecting to the correct server whose public key it knows&lt;/item&gt;
      &lt;item&gt;Afterward, data encryption is performed using these keys&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;See Key Exchange and Data Packets.&lt;/p&gt;
    &lt;p&gt;I‚Äôm putting the word ‚Äúserver‚Äù in quotes because, as mentioned earlier, WireGuard is P2P, not client-server.&lt;/p&gt;
    &lt;p&gt;After installing &lt;code&gt;wireguard-tools&lt;/code&gt;, the &lt;code&gt;/usr/local/etc/wireguard&lt;/code&gt; directory is created ‚Äì navigate there and create the private and public keys using &lt;code&gt;wg genkey&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # cd /usr/local/etc/wireguard root@setevoy-nas:/usr/local/etc/wireguard # wg genkey | tee server.key | wg pubkey &amp;gt; server.pub&lt;/quote&gt;
    &lt;p&gt;Change the permissions for the private key:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # chmod 600 server.key&lt;/quote&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # ll total 12 -rw------- 1 root wheel 45 Dec 17 15:58 server.key -rw-r--r-- 1 root wheel 45 Dec 17 15:58 server.pub&lt;/quote&gt;
    &lt;head rend="h3"&gt;Basic WireGuard config&lt;/head&gt;
    &lt;p&gt;You can create several different configurations in &lt;code&gt;/usr/local/etc/wireguard/&lt;/code&gt;, each on its own port and/or IP and with its own key, to have multiple distinct VPN connections, managing them by filename ‚Äì &lt;code&gt;wg0&lt;/code&gt;, &lt;code&gt;wg1&lt;/code&gt;, etc.&lt;/p&gt;
    &lt;p&gt;There are even config generators available ‚Äì https://www.wireguardconfig.com.&lt;/p&gt;
    &lt;p&gt;Syntax documentation ‚Äì Wireguard Configuration File Format.&lt;/p&gt;
    &lt;p&gt;Retrieve the private key:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # cat server.key cLS***GQ=&lt;/quote&gt;
    &lt;p&gt;Create the file &lt;code&gt;/usr/local/etc/wireguard/wg0.conf&lt;/code&gt; ‚Äì just the ‚Äúserver‚Äù for now:&lt;/p&gt;
    &lt;quote&gt;[Interface] Address = 10.8.0.1/24 ListenPort = 51820 PrivateKey = cLS***sGQ=&lt;/quote&gt;
    &lt;p&gt;The Interface block defines the parameters for the WireGuard interface &lt;code&gt;wg0&lt;/code&gt; ‚Äì its IP address, UDP port, and the private key used for traffic encryption.&lt;/p&gt;
    &lt;p&gt;You can also specify which DNS to use, whether to update the routing tables on clients (default is true), and script execution with &lt;code&gt;PreUp&lt;/code&gt;, &lt;code&gt;PostUp&lt;/code&gt;, &lt;code&gt;PreDown&lt;/code&gt;, and &lt;code&gt;PostDown&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Start WireGuard itself:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # wg-quick up wg0 [#] ifconfig wg create name wg0 [#] wg setconf wg0 /dev/stdin [#] ifconfig wg0 inet 10.8.0.1/24 alias [#] ifconfig wg0 mtu 1420 [#] ifconfig wg0 up [+] Backgrounding route monitor&lt;/quote&gt;
    &lt;p&gt;Verify the interface:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # ifconfig wg0 wg0: flags=10080c1&amp;lt;UP,RUNNING,NOARP,MULTICAST,LOWER_UP&amp;gt; metric 0 mtu 1420 options=80000&amp;lt;LINKSTATE&amp;gt; inet 10.8.0.1 netmask 0xffffff00 groups: wg nd6 options=109&amp;lt;PERFORMNUD,IFDISABLED,NO_DAD&amp;gt;&lt;/quote&gt;
    &lt;p&gt;And the WireGuard status:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # wg show interface: wg0 public key: xLWA/FgF3LBswHD5Z1uZZMOiCbtSvDaUOOFjH4IF6W8= private key: (hidden) listening port: 51820&lt;/quote&gt;
    &lt;p&gt;Since we don‚Äôt have any clients yet ‚Äì let‚Äôs move on to setting them up.&lt;/p&gt;
    &lt;head rend="h1"&gt;TP-Link Dynamic DNS and NAT port-forwarding&lt;/head&gt;
    &lt;p&gt;To connect from home to the FreeBSD host with WireGuard ‚Äì add port forwarding on the office router:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;protocol: UDP&lt;/item&gt;
      &lt;item&gt;external port on the router: 51830 (to mask it slightly from bots)&lt;/item&gt;
      &lt;item&gt;forward to: 192.168.0.2 (the FreeBSD host)&lt;/item&gt;
      &lt;item&gt;forward to port: 51830 (WireGuard on &lt;code&gt;em0&lt;/code&gt;on FreeBSD)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;On the TP-Link Archer AX12, it looks like this:&lt;/p&gt;
    &lt;p&gt;If the internet IP in the office is dynamic ‚Äì the Archer AX12 has a Dynamic DNS setting:&lt;/p&gt;
    &lt;p&gt;Although mine is static, I set up DDNS out of interest using https://www.noip.com.&lt;/p&gt;
    &lt;head rend="h1"&gt;Running WireGuard on Arch Linux&lt;/head&gt;
    &lt;p&gt;On Linux, the process is identical ‚Äì the modules are in the kernel, so we just need to install the package with the tools.&lt;/p&gt;
    &lt;p&gt;Check the modules:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/home/setevoy # lsmod | grep wireguard wireguard 122880 0 curve25519_x86_64 36864 1 wireguard libcurve25519_generic 45056 2 curve25519_x86_64,wireguard ip6_udp_tunnel 16384 1 wireguard udp_tunnel 32768 1 wireguard&lt;/quote&gt;
    &lt;p&gt;Install the package:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/home/setevoy # pacman -S wireguard-tools&lt;/quote&gt;
    &lt;p&gt;Navigate to &lt;code&gt;/etc/wireguard/&lt;/code&gt; and create the keys:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/home/setevoy # cd /etc/wireguard/ root@setevoy-home:/etc/wireguard # wg genkey | tee client1.key | wg pubkey &amp;gt; client1.pub&lt;/quote&gt;
    &lt;p&gt;Change the permissions for the private key:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # chmod 600 client1.key&lt;/quote&gt;
    &lt;p&gt;Now we can add Peers ‚Äì clients.&lt;/p&gt;
    &lt;p&gt;To do this, we need to add keys on the client and the server:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;on the server: &lt;list rend="ul"&gt;&lt;item&gt;In &lt;code&gt;Interface&lt;/code&gt;‚Äì&lt;code&gt;PrivateKey&lt;/code&gt;: this is&lt;code&gt;/usr/local/etc/wireguard/server.key&lt;/code&gt;on the FreeBSD host&lt;/item&gt;&lt;item&gt;In &lt;code&gt;Peer&lt;/code&gt;‚Äì&lt;code&gt;PublicKey&lt;/code&gt;: this is&lt;code&gt;/etc/wireguard/client1.pub&lt;/code&gt;on the Arch Linux laptop&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;In &lt;/item&gt;
      &lt;item&gt;on the client: &lt;list rend="ul"&gt;&lt;item&gt;In &lt;code&gt;Interface&lt;/code&gt;‚Äì&lt;code&gt;PrivateKey&lt;/code&gt;: this is&lt;code&gt;/etc/wireguard/client1.key&lt;/code&gt;&lt;/item&gt;&lt;item&gt;In &lt;code&gt;Peer&lt;/code&gt;‚Äì&lt;code&gt;PublicKey&lt;/code&gt;: this is&lt;code&gt;/usr/local/etc/wireguard/server.pub&lt;/code&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;In &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Define the config **on the client**, file &lt;code&gt;/etc/wireguard/wg0.conf&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;[Interface] PrivateKey = 0Cu***UWU= Address = 10.8.0.3/24 [Peer] PublicKey = xLWA/FgF3LBswHD5Z1uZZMOiCbtSvDaUOOFjH4IF6W8= Endpoint = setevoy-***.ddns.me:51830 AllowedIPs = 10.8.0.1/32, 192.168.0.0/24 PersistentKeepalive = 25&lt;/quote&gt;
    &lt;p&gt;In &lt;code&gt;AllowedIPs&lt;/code&gt;, we specify the networks that will be accessible and added to the routing table (‚ÄúActs as a routing table and access control list‚Äú).&lt;/p&gt;
    &lt;p&gt;Start it on the client:&lt;/p&gt;
    &lt;quote&gt;[root@setevoy-wg-test setevoy]# wg-quick up wg0 [#] ip link add dev wg0 type wireguard [#] wg setconf wg0 /dev/fd/63 [#] ip -4 address add 10.8.0.3/24 dev wg0 [#] ip link set mtu 1420 up dev wg0 [#] ip -4 route add 10.8.0.3/32 dev wg0 [#] ip -4 route add 192.168.0.0/24 dev wg0&lt;/quote&gt;
    &lt;p&gt;Here:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;ip -4 address add&lt;/code&gt;: the&lt;code&gt;Interface - Address&lt;/code&gt;set for&lt;code&gt;wg0&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;ip -4 route add 10.8.0.3/32&lt;/code&gt;and&lt;code&gt;192.168.0.0/24&lt;/code&gt;: new routes added via the&lt;code&gt;wg0&lt;/code&gt;interface for the VPN and office local networks&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip r s 10.8.0.0/24 10.8.0.0/24 dev wg0 proto kernel scope link src 10.8.0.3 root@setevoy-home:/etc/wireguard # ip r s 192.168.0.0/24 192.168.0.0/24 dev wg0 scope link&lt;/quote&gt;
    &lt;p&gt;Add the Peer **on the server**, the &lt;code&gt;/usr/local/etc/wireguard/wg0.conf&lt;/code&gt; file will now look like this:&lt;/p&gt;
    &lt;quote&gt;[Interface] Address = 10.8.0.1/24 ListenPort = 51820 PrivateKey = cLS***sGQ= [Peer] PublicKey = d7yqxOky4qOI/NTl/qbUnijfICwmbe/e/ulSVuQKLhk= AllowedIPs = 10.8.0.3/32, 192.168.100.0/24&lt;/quote&gt;
    &lt;p&gt;Restart:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # wg-quick down wg0 [#] ifconfig wg0 destroy root@setevoy-nas:/usr/local/etc/wireguard # wg-quick up wg0 [#] ifconfig wg create name wg0 [#] wg setconf wg0 /dev/stdin [#] ifconfig wg0 inet 10.8.0.1/24 alias [#] ifconfig wg0 mtu 1420 [#] ifconfig wg0 up [#] route -q -n add -inet 10.8.0.2/32 -interface wg0 [+] Backgrounding route monitor&lt;/quote&gt;
    &lt;p&gt;Check the status on the client:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # wg show interface: wg0 public key: d7yqxOky4qOI/NTl/qbUnijfICwmbe/e/ulSVuQKLhk= private key: (hidden) listening port: 36864 peer: xLWA/FgF3LBswHD5Z1uZZMOiCbtSvDaUOOFjH4IF6W8= endpoint: 178.***.***.184:51830 allowed ips: 10.8.0.1/32, 192.168.0.0/24 latest handshake: 1 minute, 44 seconds ago transfer: 4.35 KiB received, 5.84 KiB sent persistent keepalive: every 25 seconds&lt;/quote&gt;
    &lt;p&gt;The most important thing to look for is ‚Äúlatest handshake‚Äù ‚Äì it means the client has connected to the server.&lt;/p&gt;
    &lt;p&gt;Check on the server:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/home/setevoy # wg show interface: wg0 public key: xLWA/FgF3LBswHD5Z1uZZMOiCbtSvDaUOOFjH4IF6W8= private key: (hidden) listening port: 51820 peer: d7yqxOky4qOI/NTl/qbUnijfICwmbe/e/ulSVuQKLhk= endpoint: 178.***.***.236:56432 allowed ips: 192.168.100.0/24, 10.8.0.3/32 latest handshake: 15 seconds ago transfer: 1.69 KiB received, 3.87 KiB sent&lt;/quote&gt;
    &lt;p&gt;Verify SSH from the client to the server:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ssh [email protected] ([email protected]) Password for setevoy@setevoy-nas: ... FreeBSD 14.3-RELEASE (GENERIC) releng/14.3-n271432-8c9ce319fef7 Welcome to FreeBSD! ... setevoy@setevoy-nas:~ $&lt;/quote&gt;
    &lt;p&gt;Or:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-home ~]$ ssh 192.168.0.2 ([email protected]) Password for setevoy@setevoy-nas:&lt;/quote&gt;
    &lt;p&gt;Enable the &lt;code&gt;wg0&lt;/code&gt; profile on autostart:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-home ~]$ sudo systemctl enable wg-quick@wg0 Created symlink '/etc/systemd/system/multi-user.target.wants/[email protected]' ‚Üí '/usr/lib/systemd/system/[email protected]'.&lt;/quote&gt;
    &lt;p&gt;At this point, almost everything is ready ‚Äì access is established, and everything is working.&lt;/p&gt;
    &lt;p&gt;However, I also want to have direct access from the home laptop to the work laptop and vice versa, as the work laptop doesn‚Äôt have a VPN ‚Äì it doesn‚Äôt need one because FreeBSD/NAS is in the same local network.&lt;/p&gt;
    &lt;head rend="h1"&gt;Cross-LAN access configuration&lt;/head&gt;
    &lt;p&gt;So what needs to be done is to set up direct access between the laptops in the home network (192.168.100.0/24) and the office network (192.168.0.0/24), because currently access between the work laptop and the home laptop doesn‚Äôt work.&lt;/p&gt;
    &lt;p&gt;The situation is currently as follows:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Office laptop IP: 192.168.0.165&lt;/item&gt;
      &lt;item&gt;Home laptop IP: 192.168.100.205&lt;/item&gt;
      &lt;item&gt;No WireGuard on the work laptop&lt;/item&gt;
      &lt;item&gt;No connection from the office to the home laptop&lt;/item&gt;
      &lt;item&gt;No connection from home to the work laptop&lt;/item&gt;
      &lt;item&gt;Connection from home to FreeBSD exists&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Routing Table Setup&lt;/head&gt;
    &lt;p&gt;While setting this up ‚Äì comment out &lt;code&gt;block all&lt;/code&gt; in &lt;code&gt;/etc/pf.conf&lt;/code&gt;; we‚Äôll return to it later.&lt;/p&gt;
    &lt;p&gt;The result of what we‚Äôre about to do will look like this: the key is the routes. I‚Äôve specifically made this as a diagram to make the following steps easier to understand:&lt;/p&gt;
    &lt;p&gt;Check the routes from the home laptop to FreeBSD:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip route get 192.168.0.2 192.168.0.2 dev wg0 src 10.8.0.3 uid 0&lt;/quote&gt;
    &lt;p&gt;And to the work laptop:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip route get 192.168.0.165 192.168.0.165 dev wg0 src 10.8.0.3 uid 0&lt;/quote&gt;
    &lt;p&gt;Traffic goes through &lt;code&gt;wg0&lt;/code&gt;, and the Source Address for the packet is set as &lt;code&gt;10.8.0.3&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;However, on the work laptop, the route to the home laptop goes through 192.168.0.1:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ip route get 192.168.100.205 192.168.100.205 via 192.168.0.1 dev wlan0 src 192.168.0.165 uid 1000&lt;/quote&gt;
    &lt;p&gt;Here, 192.168.0.1 is the default gateway, the office router, which knows nothing about the home network 192.168.100.0/24.&lt;/p&gt;
    &lt;p&gt;So first ‚Äì add a route to the home network via the FreeBSD host:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ sudo ip route add 192.168.100.0/24 via 192.168.0.2&lt;/quote&gt;
    &lt;p&gt;Check again:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ip route get 192.168.100.205 192.168.100.205 via 192.168.0.2 dev wlan0 src 192.168.0.165 uid 1000&lt;/quote&gt;
    &lt;p&gt;Now there is contact from the office to home:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ping 192.168.100.205 -c 1 PING 192.168.100.205 (192.168.100.205) 56(84) bytes of data. 64 bytes from 192.168.100.205: icmp_seq=1 ttl=63 time=62.0 ms --- 192.168.100.205 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;p&gt;But from home, it still doesn‚Äôt work, because from home we send:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;from the home laptop with IP 192.168.100.205 &lt;list rend="ul"&gt;&lt;item&gt;through FreeBSD with IP 192.168.0.2 &lt;list rend="ul"&gt;&lt;item&gt;to the work laptop with IP 192.168.0.165&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;through FreeBSD with IP 192.168.0.2 &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;But from the home laptop, the Source IP is set as &lt;code&gt;10.8.0.3&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip route get 192.168.0.165 192.168.0.165 dev wg0 src 10.8.0.3 uid 0&lt;/quote&gt;
    &lt;p&gt;Because the route to 192.168.0.0/24 is specified via the VPN interface &lt;code&gt;wg0&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip r s 192.168.0.0/24 192.168.0.0/24 dev wg0 scope link&lt;/quote&gt;
    &lt;p&gt;And &lt;code&gt;wg0&lt;/code&gt; has the IP 10.8.0.3:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ip a s wg0 20: wg0: &amp;lt;POINTOPOINT,NOARP,UP,LOWER_UP&amp;gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000 link/none inet 10.8.0.3/24 scope global wg0&lt;/quote&gt;
    &lt;p&gt;The work laptop knows nothing about the 10.8.0.0/24 network and cannot return a response.&lt;/p&gt;
    &lt;p&gt;So, add another route on the work laptop:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ sudo ip route add 10.8.0.0/24 via 192.168.0.2 dev wlan0&lt;/quote&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ip r s 10.8.0.0/24 10.8.0.0/24 via 192.168.0.2 dev wlan0&lt;/quote&gt;
    &lt;p&gt;And now there is also access from the home laptop to the work laptop:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ping -c1 192.168.0.165 PING 192.168.0.165 (192.168.0.165) 56(84) bytes of data. 64 bytes from 192.168.0.165: icmp_seq=1 ttl=63 time=6.19 ms --- 192.168.0.165 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;p&gt;To make these routes permanent ‚Äì you can do it via NetworkManager CLI.&lt;/p&gt;
    &lt;p&gt;Delete the ones added manually:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ sudo ip route del 10.8.0.0/24 via 192.168.0.2 [setevoy@setevoy-work ~] $ sudo ip route del 192.168.100.0/24 via 192.168.0.2&lt;/quote&gt;
    &lt;p&gt;Find the connection name:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ nmcli connection show NAME UUID TYPE DEVICE setevoy-tp-link-21-5 3a12a60d-7b37-4c20-b573-d27c47a94ae5 wifi wlan0 ...&lt;/quote&gt;
    &lt;p&gt;Add the routes:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ nmcli connection modify setevoy-tp-link-21-5 +ipv4.routes "10.8.0.0/24 192.168.0.2,192.168.100.0/24 192.168.0.2"&lt;/quote&gt;
    &lt;p&gt;Verify:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ nmcli connection show setevoy-tp-link-21-5 | grep ipv4.routes ipv4.routes: { ip = 10.8.0.0/24, nh = 192.168.0.2 }; { ip = 192.168.100.0/24, nh = 192.168.0.2 }&lt;/quote&gt;
    &lt;p&gt;Restart the connection:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ sudo nmcli connection down setevoy-tp-link-21-5 &amp;amp;&amp;amp; sudo nmcli connection up setevoy-tp-link-21-5 Connection 'setevoy-tp-link-21-5' successfully deactivated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/15) Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/16)&lt;/quote&gt;
    &lt;p&gt;Check the routes now:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ip route get 10.8.0.3 10.8.0.3 via 192.168.0.2 dev wlan0 src 192.168.0.165 uid 1000 [setevoy@setevoy-work ~] $ ip route get 192.168.100.205 192.168.100.205 via 192.168.0.2 dev wlan0 src 192.168.0.165 uid 1000&lt;/quote&gt;
    &lt;p&gt;Now we have &lt;code&gt;ping&lt;/code&gt; from the office laptop to the home laptop:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ping -c1 192.168.100.205 PING 192.168.100.205 (192.168.100.205) 56(84) bytes of data. 64 bytes from 192.168.100.205: icmp_seq=1 ttl=63 time=5.95 ms --- 192.168.100.205 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;p&gt;And from home to the work laptop:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ping -c1 192.168.0.165 PING 192.168.0.165 (192.168.0.165) 56(84) bytes of data. 64 bytes from 192.168.0.165: icmp_seq=1 ttl=63 time=5.67 ms --- 192.168.0.165 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;head rend="h2"&gt;Packet Filter Configuration&lt;/head&gt;
    &lt;p&gt;However, if we enable &lt;code&gt;block all&lt;/code&gt; in &lt;code&gt;pf&lt;/code&gt;, the connection from the office to the home laptop will break, because we currently only have rules for the FreeBSD host:&lt;/p&gt;
    &lt;quote&gt;... # allow SSH from Office LAN (192.168.0.0/24) to FreeBSD host pass in log on em0 proto tcp from 192.168.0.0/24 to (em0) port 22 keep state ... # allow ICMP (ping) from Home network to FreeBSD host pass in on em0 proto icmp from 192.168.100.0/24 to (em0) keep state ...&lt;/quote&gt;
    &lt;p&gt;Here:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The first rule ‚Äì allows SSH from the office network to the IP of the &lt;code&gt;em0&lt;/code&gt;interface on the FreeBSD host&lt;/item&gt;
      &lt;item&gt;The second rule ‚Äì allows ping from the home network to the IP of the &lt;code&gt;em0&lt;/code&gt;interface on the FreeBSD host&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;So, let‚Äôs add two more rules ‚Äì for SSH and ping from the office to the home network:&lt;/p&gt;
    &lt;quote&gt;... # allow SSH from Office network to Home network pass in on em0 proto tcp from 192.168.0.0/24 to 192.168.100.0/24 port 22 keep state ... # allow ICMP from Home network to Office network pass in on em0 proto icmp from 192.168.0.0/24 to 192.168.100.0/24 keep state ...&lt;/quote&gt;
    &lt;p&gt;Verify and reload the &lt;code&gt;pf&lt;/code&gt; config:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-nas:/usr/local/etc/wireguard # pfctl -vnf /etc/pf.conf &amp;amp;&amp;amp; service pf reload set skip on { lo } block drop log all pass in log on em0 inet proto tcp from 192.168.0.0/24 to (em0) port = ssh flags S/SA keep state pass in log on em0 inet proto tcp from 192.168.100.0/24 to (em0) port = ssh flags S/SA keep state pass in on wg0 inet from 10.8.0.0/24 to (wg0) flags S/SA keep state pass in on wg0 inet proto icmp from 10.8.0.0/24 to (wg0) keep state pass in on wg0 inet from 10.8.0.0/24 to 192.168.0.0/24 flags S/SA keep state pass in on wg0 inet from 10.8.0.0/24 to 192.168.100.0/24 flags S/SA keep state pass in on em0 inet proto tcp from 192.168.0.0/24 to 192.168.100.0/24 port = ssh flags S/SA keep state pass in on em0 inet proto icmp from 192.168.0.0/24 to 192.168.100.0/24 keep state pass in on em0 proto udp from any to (em0) port = 51820 keep state pass out all flags S/SA keep state Reloading pf rules.&lt;/quote&gt;
    &lt;p&gt;And now we have ping from home to the office:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ping -c1 192.168.0.165 PING 192.168.0.165 (192.168.0.165) 56(84) bytes of data. 64 bytes from 192.168.0.165: icmp_seq=1 ttl=63 time=8.09 ms --- 192.168.0.165 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;p&gt;SSH from home to the office:&lt;/p&gt;
    &lt;quote&gt;root@setevoy-home:/etc/wireguard # ssh 192.168.0.165 [email protected]'s password:&lt;/quote&gt;
    &lt;p&gt;Ping from the office to home:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ping -c1 192.168.100.205 PING 192.168.100.205 (192.168.100.205) 56(84) bytes of data. 64 bytes from 192.168.100.205: icmp_seq=1 ttl=63 time=60.5 ms --- 192.168.100.205 ping statistics --- 1 packets transmitted, 1 received, 0% packet loss, time 0ms&lt;/quote&gt;
    &lt;p&gt;And SSH from the office to home:&lt;/p&gt;
    &lt;quote&gt;[setevoy@setevoy-work ~] $ ssh 192.168.100.205 [email protected]'s password:&lt;/quote&gt;
    &lt;p&gt;Everything is working.&lt;/p&gt;
    &lt;p&gt;The full &lt;code&gt;/etc/pf.conf&lt;/code&gt; is now as follows:&lt;/p&gt;
    &lt;quote&gt;################## ### Interfaces ### ################## # lan_if = "em0" # wg_if = "wg0" ################ ### Networks ### ################ # lan_net = "192.168.0.0/24" # home_net = "192.168.100.0/24" # wg_net = "10.8.0.0/24" # vpn_nets = "{ 10.8.0.0/24, 192.168.100.0/24 }" ################ ### Services ### ################ # ssh_ports = "{ 22 }" # wg_port = "51820" ###################### ### Basic settings ### ###################### # do not filter loopback traffic set skip on lo ###################### ### Default policy ### ###################### # block everything by default block log all ####################### ### Inbound traffic ### ####################### ### SSH # allow SSH from Office LAN (192.168.0.0/24) to FreeBSD host pass in log on em0 proto tcp from 192.168.0.0/24 to (em0) port 22 keep state # allow SSH from Home network (192.168.100.0/24) to FreeBSD host pass in log on em0 proto tcp from 192.168.100.0/24 to (em0) port 22 keep state # allow SSH from VPN clients to FreeBSD host pass in on wg0 proto tcp from 10.8.0.0/24 to (wg0) port 22 keep state ### NEW # allow SSH from Office netwrok to Home network pass in on em0 proto tcp from 192.168.0.0/24 to 192.168.100.0/24 port 22 keep state ### TEST # allow Office LAN to reach Home LAN via WireGuard #pass in on em0 from 192.168.0.0/24 to 192.168.100.0/24 keep state #pass out on wg0 from 192.168.0.0/24 to 192.168.100.0/24 keep state # allow Home LAN to reach Office LAN via WireGuard #pass in on wg0 from 192.168.100.0/24 to 192.168.0.0/24 keep state #pass out on em0 from 192.168.100.0/24 to 192.168.0.0/24 keep state ### VPN # allow WireGuard handshake (UDP/51820) on LAN interface pass in on em0 proto udp to (em0) port 51820 keep state # allow VPN clients (10.8.0.0/24) to access FreeBSD host itself # this allows ping, ssh, etc. to the wg0 address pass in on wg0 from 10.8.0.0/24 to (wg0) keep state # allow VPN clients to access Office LAN (192.168.0.0/24) pass in on wg0 from 10.8.0.0/24 to 192.168.0.0/24 keep state # allow VPN clients to access Home network (192.168.100.0/24) pass in on wg0 from 10.8.0.0/24 to 192.168.100.0/24 keep state # #pass in on em0 from 192.168.0.0/24 to 192.168.100.0/24 keep state #pass in on wg0 from 192.168.100.0/24 to 192.168.0.0/24 keep state ### ICMP # allow ICMP from VPN clients to FreeBSD host pass in on wg0 proto icmp from 10.8.0.0/24 to (wg0) keep state # allow ICMP from Home network to FreeBSD host #pass in on em0 proto icmp from 192.168.100.0/24 to (em0) keep state # allow ICMP from Home network to Office network pass in on em0 proto icmp from 192.168.0.0/24 to 192.168.100.0/24 keep state ############################ ### outbound traffic ### ############################ # allow all outbound traffic from FreeBSD pass out keep state&lt;/quote&gt;
    &lt;p&gt;Active connections in &lt;code&gt;pftop&lt;/code&gt;:&lt;/p&gt;
    &lt;p&gt;Where:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;In 192.168.0.165:50286&lt;/code&gt;=&amp;gt;&lt;code&gt;192.168.0.2:22&lt;/code&gt;: SSH from work laptop to FreeBSD&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;In 178.***.***.236:56432&lt;/code&gt;=&amp;gt;&lt;code&gt;192.168.0.2:51820&lt;/code&gt;: connection from home via NAT Port-forwarding on the office router to VPN on FreeBSD&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;In 10.8.0.3:39442&lt;/code&gt;=&amp;gt;&lt;code&gt;192.168.0.165:22&lt;/code&gt;: SSH from home to the work laptop&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Out 10.8.0.1:50589&lt;/code&gt;=&amp;gt;&lt;code&gt;10.8.0.3:22&lt;/code&gt;: SSH from FreeBSD to the home laptop&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;P.S. What an absolute blast ‚Äì this ‚Äútraditional networking‚Äù instead of all those AWS VPCs and their subnets‚Ä¶&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487120</guid><pubDate>Sun, 04 Jan 2026 11:55:34 +0000</pubDate></item><item><title>Nightshade: Make images unsuitable for model training</title><link>https://nightshade.cs.uchicago.edu/whatis.html</link><description>&lt;doc fingerprint="3053a434e9bc15f1"&gt;
  &lt;main&gt;
    &lt;p&gt;A simple, powerful Bash script to batch download and organize YouTube playlists by channel name using &lt;code&gt;yt-dlp&lt;/code&gt;.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Organized Structure: Creates separate directories for each channel.&lt;/item&gt;
      &lt;item&gt;Smart Sync: Skips files that have already been downloaded (&lt;code&gt;--no-overwrites&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Clean Naming: Saves files as &lt;code&gt;Playlist Title/Video Title.mp4&lt;/code&gt;(no numeric prefixes).&lt;/item&gt;
      &lt;item&gt;Batch Processing: Reads multiple playlists from a &lt;code&gt;playlists.txt&lt;/code&gt;file.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;yt-dlp: Make sure you have yt-dlp installed.&lt;/item&gt;
      &lt;item&gt;FFmpeg: Required for merging video and audio streams.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;git clone https://github.com/Linuxmaster14/yt-playlist-downloader.git
cd yt-playlist-downloader
chmod +x download_playlists.sh
./download_playlists.sh&lt;/code&gt;
    &lt;p&gt;1. Add your playlists: Edit &lt;code&gt;playlists.txt&lt;/code&gt; and add your channels and playlist URLs in the format:&lt;/p&gt;
    &lt;code&gt;Channel Name|PlaylistURL
&lt;/code&gt;
    &lt;p&gt;Example:&lt;/p&gt;
    &lt;code&gt;Linux Tips|https://www.youtube.com/playlist?list=PLT98CRl2KxKF26ekyZUT_XtQ9HPciZKHX
&lt;/code&gt;
    &lt;p&gt;2. Cookies Place your &lt;code&gt;cookies.txt&lt;/code&gt; file in the same directory.
How do I pass cookies to yt-dlp?&lt;/p&gt;
    &lt;p&gt;You can customize the script by editing the variables at the top of &lt;code&gt;download_playlists.sh&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;MIT&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487342</guid><pubDate>Sun, 04 Jan 2026 12:32:30 +0000</pubDate></item><item><title>YouTube Playlist Downloader</title><link>https://github.com/Linuxmaster14/yt-playlist-downloader</link><description>&lt;doc fingerprint="3053a434e9bc15f1"&gt;
  &lt;main&gt;
    &lt;p&gt;A simple, powerful Bash script to batch download and organize YouTube playlists by channel name using &lt;code&gt;yt-dlp&lt;/code&gt;.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Organized Structure: Creates separate directories for each channel.&lt;/item&gt;
      &lt;item&gt;Smart Sync: Skips files that have already been downloaded (&lt;code&gt;--no-overwrites&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Clean Naming: Saves files as &lt;code&gt;Playlist Title/Video Title.mp4&lt;/code&gt;(no numeric prefixes).&lt;/item&gt;
      &lt;item&gt;Batch Processing: Reads multiple playlists from a &lt;code&gt;playlists.txt&lt;/code&gt;file.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;yt-dlp: Make sure you have yt-dlp installed.&lt;/item&gt;
      &lt;item&gt;FFmpeg: Required for merging video and audio streams.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;git clone https://github.com/Linuxmaster14/yt-playlist-downloader.git
cd yt-playlist-downloader
chmod +x download_playlists.sh
./download_playlists.sh&lt;/code&gt;
    &lt;p&gt;1. Add your playlists: Edit &lt;code&gt;playlists.txt&lt;/code&gt; and add your channels and playlist URLs in the format:&lt;/p&gt;
    &lt;code&gt;Channel Name|PlaylistURL
&lt;/code&gt;
    &lt;p&gt;Example:&lt;/p&gt;
    &lt;code&gt;Linux Tips|https://www.youtube.com/playlist?list=PLT98CRl2KxKF26ekyZUT_XtQ9HPciZKHX
&lt;/code&gt;
    &lt;p&gt;2. Cookies Place your &lt;code&gt;cookies.txt&lt;/code&gt; file in the same directory.
How do I pass cookies to yt-dlp?&lt;/p&gt;
    &lt;p&gt;You can customize the script by editing the variables at the top of &lt;code&gt;download_playlists.sh&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;MIT&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487351</guid><pubDate>Sun, 04 Jan 2026 12:34:14 +0000</pubDate></item><item><title>Moir√© Explorer</title><link>https://play.ertdfgcvb.xyz/#/src/demos/moire_explorer</link><description>&lt;doc fingerprint="250dfc665464f02e"&gt;
  &lt;main&gt;
    &lt;p&gt;ASCII play a project by ertdfgcvb About/Manual Run Cmd+Enter Immediate mode Cmd+I Toggle view Cmd+Period Fullscreen Cmd+Shift+F Copy a frame Cmd+Shift+C Save Cmd+S Share Cmd+Shift+U Download script L.S.D. Examples basics 10 PRINT Coordinates: index Coordinates: x, y Cursor How to draw a circle How to draw a square How to log Name game Perfomance test Canvas renderer Sequence export Simple output Time: frames Time: milliseconds sdf Balls Circle Wireframe cube Rectangles Two circles demos Box fun Chroma Spiral Donut Doom Flame Doom Flame (full color) Dyna Golgol Hotlink Mod Xor Moir√É¬© explorer Numbers Plasma Sin Sin Sin Sin Spiral Wobbly camera Camera double resolution Camera grayscale Camera RGB contributed Color Waves Emoji Wave EQUAL TEA TALK, #65 oe√É¬∂ GOL Pathfinder Sand game Slime Dish Stacked sin waves&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487472</guid><pubDate>Sun, 04 Jan 2026 12:54:20 +0000</pubDate></item><item><title>Jeffgeerling.com has been Migrated to Hugo</title><link>https://www.jeffgeerling.com/blog/2026/migrated-to-hugo/</link><description>&lt;doc fingerprint="10501d1109842718"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;JeffGeerling.com has been Migrated to Hugo&lt;/head&gt;
    &lt;p&gt;Since 2009, this website has run on Drupal. Starting with Drupal 6, and progressing through major site upgrades and migrations to 7, 8, 9, and 10, I used the site as a way to dogfood the same CMS (Content Management System) I used in my day job for over a decade.&lt;/p&gt;
    &lt;p&gt;But as time progressed√¢especially after completing a grueling upgrade from Drupal 7 to 8√¢my enthusiasm for maintaining what's now a more enterprise-focused Digital Experience Platform or 'DXP' for a personal blog has waned.&lt;/p&gt;
    &lt;p&gt;Not to mention, the blog is a passion project. I use it as a scratchpad for thoughts, and deeper dives for my YouTube videos. Time spent maintaining a complex CMS is time I can't spend actually writing (not to mention time spent on everything else in life!).&lt;/p&gt;
    &lt;head rend="h2"&gt;Why Hugo?&lt;/head&gt;
    &lt;p&gt;I've moved other hobby sites to static hosting. For older sites I don't actively update, I scrape and mothball them. But for sites I wanted to keep active, I converted them to Jekyll or Hugo, both of which are competent and full-featured modern SSGs (Static Site Generators).&lt;/p&gt;
    &lt;p&gt;Jekyll is perfect for the static sites I host for free on GitHub Pages, like the Raspberry Pi PCIe Database or Project MINI RACK, but I'm not a Ruby programmer, so I like Hugo for anything I run on my own infrastructure (like Geerling Engineering). It's simpler to set up and a little faster.&lt;/p&gt;
    &lt;head rend="h2"&gt;Housekeeping&lt;/head&gt;
    &lt;p&gt;Anyway, I've been working on the migration in this GitHub issue, and there are bound to be mistakes, broken image references, and probably some old URLs that just go poof!&lt;/p&gt;
    &lt;p&gt;I try to keep everything where it is, or add redirects. But with 20 years of baggage and 3500+ posts (many of those were individual photos converted into 'blog' nodes in a prior upgrade... oops!), it's hard to run a perfect migration.&lt;/p&gt;
    &lt;head rend="h2"&gt;Markdown Workflow&lt;/head&gt;
    &lt;p&gt;I've been writing all my posts in Markdown since 2020, and even before that, was drafting them in Markdown in Sublime Text, then exporting that to HTML via MarkdownPreview.&lt;/p&gt;
    &lt;p&gt;So having a tool (Hugo) that uses Markdown natively is a breath of fresh air.&lt;/p&gt;
    &lt;p&gt;Beyond that, I've grown fond of 'sticking to the defaults' over the years. On my initial Drupal 6 site, I installed something like 30 modules (plugins in Drupal parlance), but almost all of those modules bit me in one way or another as I upgraded to Drupal 7, 8, 9, or 10...&lt;/p&gt;
    &lt;p&gt;Honestly, upgrading from 8 to 9 to 10 was easier than 6 to 7 and 7 to 8, simply because I had stripped my site down to the basics.&lt;/p&gt;
    &lt;p&gt;However, in so doing, I also made my content authoring experience a bit horrid:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Write a blog post on my computer in a Markdown file&lt;/item&gt;
      &lt;item&gt;Create new unpublished Drupal blog post&lt;/item&gt;
      &lt;item&gt;Paste the Markdown content into the body and add a title&lt;/item&gt;
      &lt;item&gt;Individually upload each picture&lt;/item&gt;
      &lt;item&gt;Put cursor where each picture goes in the content, scroll down to the uploaded picture, click 'Insert' to insert the preformatted &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt;markup, and rinse-and-repeat for all images (sometimes up to 25-30 per post!).&lt;/item&gt;
      &lt;item&gt;Clear out the 'Authored on' field to make sure the date would update when I publish the post&lt;/item&gt;
      &lt;item&gt;Toggle the 'Published' option and save the node&lt;/item&gt;
      &lt;item&gt;Run an Ansible playbook to drop Drupal caches, Nginx caches, and trigger a Cloudflare purge of the relevant URLs (ongoing DDoSes since 2022 caused me to really lock down my caching)...&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;It was a lot. Just to publish a blog post√¢and none of that helped with writing or being creative, it was just a bunch of work.&lt;/p&gt;
    &lt;p&gt;Yes, I could automate each step in Drupal. There are even modules for Drupal, like Scheduler for scheduling posts and updating publish dates, and Cloudflare for purging CDN cache... but you know what? I used to use those modules, but after four Drupal upgrade cycles, I was burned out on managing patches for months, years, or indefinitely since some of the modules took that long to have a stable release for [current Drupal version].&lt;/p&gt;
    &lt;p&gt;And don't get me started on having to rebuild entire content authoring workflows (e.g. WYSIWYG editors, media management, and content fields) every time a major Drupal version was released! That specific type of churn, thankfully, is not as bad these days, but it was really bad prior to Drupal 10 or so.&lt;/p&gt;
    &lt;p&gt;For Hugo, since my workflow already started with a Markdown file... the whole process is done after step 1, basically.&lt;/p&gt;
    &lt;p&gt;To publish, I guess I do have to update the &lt;code&gt;date&lt;/code&gt; in my post's frontmatter, and change &lt;code&gt;draft&lt;/code&gt; to &lt;code&gt;false&lt;/code&gt;, but that's about it. &lt;code&gt;hugo &amp;amp;&amp;amp; git commit -m "Updated post." &amp;amp;&amp;amp; git push&lt;/code&gt; and the blog is up to date!&lt;/p&gt;
    &lt;p&gt;And for maintenance, don't get me started on managing Composer, Drush, PHP, MariaDB, Nginx, Cloudflare, etc. √¢ for an enterprise website, with multiple content workflows, dozens or hundreds of users with RBAC, etc., sure, it's fine. But for a blog where I just want to write and publish, it has been wearing me down for the past few years.&lt;/p&gt;
    &lt;head rend="h2"&gt;TODOs&lt;/head&gt;
    &lt;p&gt;Comments will be missing site-wide initially, as I've chosen to tackle a self-hosted static site commenting system in a 'phase two'. I love having comments enabled, despite the moderation overhead, and don't think blogging is the same without them.&lt;/p&gt;
    &lt;p&gt;I also loved having integrated site search, since I use my blog as a project journal, referencing it often. The Drupal site was integrated into an Apache Solr search instance I also ran as part of Hosted Apache Solr... which I sunset years ago at this point. So I'll have to decide how I want to implement search within Hugo.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487498</guid><pubDate>Sun, 04 Jan 2026 12:57:40 +0000</pubDate></item><item><title>Understanding the bin, sbin, usr/bin, usr/sbin split (2010)</title><link>https://lists.busybox.net/pipermail/busybox/2010-December/074114.html</link><description>&lt;doc fingerprint="3f89995337a506ed"&gt;
  &lt;main&gt;&lt;head rend="h1"&gt;Understanding the bin, sbin, usr/bin , usr/sbin split&lt;/head&gt; Rob Landley rob at landley.net &lt;lb/&gt;Thu Dec 9 15:45:39 UTC 2010&lt;quote&gt;On Tuesday 30 November 2010 15:58:00 David Collier wrote: &amp;gt; I see that busybox spreads it's links over these 4 directories. &amp;gt; &amp;gt; Is there a simple rule which decides which directory each link lives &amp;gt; in..... &amp;gt; &amp;gt; For instance I see kill is in /bin and killall in /usr/bin.... I don't &amp;gt; have a grip on what might be the logic for that. You know how Ken Thompson and Dennis Ritchie created Unix on a PDP-7 in 1969? Well around 1971 they upgraded to a PDP-11 with a pair of RK05 disk packs (1.5 megabytes each) for storage. When the operating system grew too big to fit on the first RK05 disk pack (their root filesystem) they let it leak into the second one, which is where all the user home directories lived (which is why the mount was called /usr). They replicated all the OS directories under there (/bin, /sbin, /lib, /tmp...) and wrote files to those new directories because their original disk was out of space. When they got a third disk, they mounted it on /home and relocated all the user directories to there so the OS could consume all the space on both disks and grow to THREE WHOLE MEGABYTES (ooooh!). Of course they made rules about "when the system first boots, it has to come up enough to be able to mount the second disk on /usr, so don't put things like the mount command /usr/bin or we'll have a chicken and egg problem bringing the system up." Fairly straightforward. Also fairly specific to v6 unix of 35 years ago. The /bin vs /usr/bin split (and all the others) is an artifact of this, a 1970's implementation detail that got carried forward for decades by bureaucrats who never question _why_ they're doing things. It stopped making any sense before Linux was ever invented, for multiple reasons: 1) Early system bringup is the provice of initrd and initramfs, which deals with the "this file is needed before that file" issues. We've already _got_ a temporary system that boots the main system. 2) shared libraries (introduced by the Berkeley guys) prevent you from independently upgrading the /lib and /usr/bin parts. They two partitions have to _match_ or they won't work. This wasn't the case in 1974, back then they had a certain level of independence because everything was statically linked. 3) Cheap retail hard drives passed the 100 megabyte mark around 1990, and partition resizing software showed up somewhere around there (partition magic 3.0 shipped in 1997). Of course once the split existed, some people made other rules to justify it. Root was for the OS stuff you got from upstream and /usr was for your site- local files. Then / was for the stuff you got from AT&amp;amp;T and /usr was for the stuff that your distro like IBM AIX or Dec Ultrix or SGI Irix added to it, and /usr/local was for your specific installation's files. Then somebody decided /usr/local wasn't a good place to install new packages, so let's add /opt! I'm still waiting for /opt/local to show up... Of course given 30 years to fester, this split made some interesting distro- specific rules show up and go away again, such as "/tmp is cleared between reboots but /usr/tmp isn't". (Of course on Ubuntu /usr/tmp doesn't exist and on Gentoo /usr/tmp is a symlink to /var/tmp which now has the "not cleared between reboots" rule. Yes all this predated tmpfs. It has to do with read- only root filesystems, /usr is always going to be read only in that case and /var is where your writable space is, / is _mostly_ read only except for bits of /etc which they tried to move to /var but really symlinking /etc to /var/etc happens more often than not...) Standards bureaucracies like the Linux Foundation (which consumed the Free Standards Group in its' ever-growing accretion disk years ago) happily document and add to this sort of complexity without ever trying to understand why it was there in the first place. 'Ken and Dennis leaked their OS into the equivalent of home because an RK05 disk pack on the PDP-11 was too small" goes whoosh over their heads. I'm pretty sure the busybox install just puts binaries wherever other versions of those binaries have historically gone. There's no actual REASON for any of it anymore. Personally, I symlink /bin /sbin and /lib to their /usr equivalents on systems I put together. Embedded guys try to understand and simplify... Rob -- GPLv3: as worthy a successor as The Phantom Menace, as timely as Duke Nukem Forever, and as welcome as New Coke. &lt;/quote&gt;&lt;lb/&gt;More information about the busybox
mailing list&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46487921</guid><pubDate>Sun, 04 Jan 2026 13:49:04 +0000</pubDate></item><item><title>Cold-Blooded Software (2023)</title><link>https://dubroy.com/blog/cold-blooded-software/</link><description>&lt;doc fingerprint="77337152bfe70f19"&gt;
  &lt;main&gt;&lt;head rend="h1"&gt;Cold-blooded software&lt;/head&gt;December 28, 2023&lt;p&gt;It√¢s 2004 and I√¢m sitting in one of the largest lecture halls at my university. I√¢m a computer science major but I√¢m taking a course on natural history √¢ plants and animals √¢ as one of my electives.&lt;/p&gt;&lt;p&gt;The professor tells us that he√¢s brought something from home, something he found in his freezer. He reaches down behind his desk, and then holds his arm out to show us what√¢s sitting in his palm: a baby painted turtle. We√¢re learning about cold-blooded animals, and it turns out that painted turtle hatchlings are pretty special √¢ they√¢re one of only a few species that can survive being frozen.&lt;/p&gt;&lt;p&gt;Now, the lecture hall is pretty modern for 2004: there‚Äôs an overhead camera at the podium, where the professor can write notes that are displayed on screens around the hall. But instead of writing notes, he puts the turtle under the camera and starts his lecture.&lt;/p&gt;&lt;p&gt;Over the next hour, we watch this little reptile slowly come to life as the professor lectures. The first movements were nearly imperceptible. An eyelid cracking open, a leg inching forward. By the end of the lecture, the turtle has moved about halfway across our screens.&lt;/p&gt;&lt;p&gt;I√¢ll never forget that class, because it√¢s where I really understood what it means for an animal to be cold blooded. You see, warm-blooded animals √¢ like humans or mice √¢ have a stable body temperature that stays within a pretty narrow range. For humans, it√¢s around 37 degrees Celsius. A few degrees higher or lower and we√¢re in big trouble. Cold-blooded animals like the painted turtle can adapt their metabolism to the temperature around them. They√¢re active when it√¢s warm out, and as the environment (and their bodies) get cooler, they move more slowly. Very few of them can survive being frozen like the baby painted turtle can.&lt;/p&gt;&lt;p&gt;I see a similar dichotomy with software projects. Certain technology decisions lead to projects that are warm-blooded: everything is great when there‚Äôs constant motion on the project, generating heat. But put warm-blooded software in the freezer, and you‚Äôll pull out a corpse six months later.&lt;/p&gt;&lt;p&gt;Maybe your CI isn‚Äôt working because one of the services you depend on got bought or ran out of money. You add a new dependency and find yourself needing to upgrade your compiler. Another package you depend on is deprecated, and doesn‚Äôt work with the latest version of the compiler.&lt;/p&gt;&lt;p&gt;Some projects are different. You work alone, make some changes when you√¢re inspired, and then don√¢t touch it again for another year, or two, or three. You can√¢t run something like that as a warm-blooded project. There√¢s not enough activity to keep the temperature up.&lt;/p&gt;&lt;p&gt;A cold-blooded project is like the baby painted turtle. You can freeze it for a year and then pick it back up right where you left off.&lt;/p&gt;&lt;p&gt;A cold-blooded project uses boring technology. The build and test scripts don√¢t depend on external services that might change, break, or disappear entirely. It uses vendored dependencies.&lt;/p&gt;&lt;p&gt;The software that powers this blog is cold-blooded. The first commit was nearly twelve years ago √¢ a simple little static site generator to replace my out-of-date Wordpress installation:&lt;/p&gt;&lt;code&gt;commit 68949229ad426c1e8795ee640808db9987ab30ab
Author: Patrick Dubroy &amp;lt;pdubroy@gmail.com&amp;gt;
Date:   Sun Jan 8 19:10:24 2012 +0100

    Add templates and site-building script.&lt;/code&gt;


&lt;p&gt;It√¢s written in Python (2, not 3). It depends on four third-party modules, and they√¢re all committed to the project repository. Everything runs locally, and I deploy the result with rsync over ssh.&lt;/p&gt;&lt;p&gt;And boy am I glad I decided to do it that way. I√¢ve made a few small improvements over the years, but otherwise it√¢s continued to work without modification. And I fully expect that it will still be working in another twelve years.&lt;/p&gt;&lt;p&gt;√∞¬¢&lt;/p&gt;&lt;p&gt;√∞ You might also want to check out the discussion on Hacker News.&lt;/p&gt;&lt;p&gt;Thanks to Thorsten Ball for helpful suggestions on this post.&lt;/p&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488261</guid><pubDate>Sun, 04 Jan 2026 14:28:56 +0000</pubDate></item><item><title>Street Fighter II, the World Warrier (2021)</title><link>https://fabiensanglard.net/sf2_warrier/</link><description>&lt;doc fingerprint="16c6587e2ae6353e"&gt;
  &lt;main&gt;&lt;p&gt;This article is part of a series about Street Fighter II and the CPS-1. It is recommended to read the previous entries before reading this one.&lt;/p&gt;&lt;p&gt;One of my favorite anecdote about Street Fighter II is Akiman's account of an issue discovered shortly before shipping.&lt;/p&gt;&lt;quote&gt;Just three days before the deadline, I discovered something horrible. I had made a mistake with the subtitle ‚ÄúWorld Warrior‚Äù, mis-spelling it ‚ÄúWorld Warrier.‚ÄùA recreation of the problem. Ouch!&lt;lb/&gt;- Akiman, Lead graphic design on SF2 (translated by Shmuplation)&lt;/quote&gt;&lt;p&gt;To fully understand the issue, we need to dig into how the arcade hardware works. The CPS-1 is a super tile drawing machine. It can draw a lot of tiles but cannot alter them. They are taken from the GFX ROM as they are and sent to the screen (although they can be flipped horizontally or vertically).&lt;/p&gt;&lt;p&gt;The GFX ROM and the 68000 instructions ROM as burned separately. The problem Akiman describe is that the GFX ROM had been burned but he could still make changes to the instructions.&lt;/p&gt;&lt;p&gt;But how could he fix the mistake if the artwork was set in stone at this point?&lt;/p&gt;&lt;quote&gt;Now I can safely tell this story too, but we actually didn‚Äôt discover it until several months after all the sprite work had been done. Since the logo had already been created, I couldn‚Äôt just go in and change the letter at this point.&lt;lb/&gt;"Maybe I can just force it to look like an ‚Äòo‚Äô," I thought. I tried layering various other sprites over it until finally, it looked like an ‚Äòo‚Äô. Phew!&lt;lb/&gt;- Akiman, Lead graphic design on SF2 (translated by Shmuplation)&lt;/quote&gt;&lt;p&gt; Akiman description of the solution left me wanting more details. How did he turn an 'e' into an 'o'? Since I had a sheet extractor, I looked for the text and sure enough, the logo and the typo were found on sheet &lt;code&gt;0x7B00&lt;/code&gt;.
&lt;/p&gt;&lt;p&gt; The logo is drawn via 16 draw calls using tiles &lt;code&gt;0xC8&lt;/code&gt;, &lt;code&gt;0xC9&lt;/code&gt;, &lt;code&gt;0xCA&lt;/code&gt;, &lt;code&gt;0xCB&lt;/code&gt;, &lt;code&gt;0xCC&lt;/code&gt;, &lt;code&gt;0xCD&lt;/code&gt;, &lt;code&gt;0xCE&lt;/code&gt;, &lt;code&gt;0xCF&lt;/code&gt;, &lt;code&gt;0xD8&lt;/code&gt;, &lt;code&gt;0xD9&lt;/code&gt;, &lt;code&gt;0xDA&lt;/code&gt;, &lt;code&gt;0xDB&lt;/code&gt;, &lt;code&gt;0xDC&lt;/code&gt;, &lt;code&gt;0xDD&lt;/code&gt;, &lt;code&gt;0xDE&lt;/code&gt;, and &lt;code&gt;0xDF&lt;/code&gt;.
&lt;/p&gt;&lt;p&gt; The way Akiman solved his problem show that you have to be practical in order to ship. He noticed that there was an 'or' in 'World' which would kinda fit in place of the 'ier'. So, he dropped the three last tiles &lt;code&gt;0xDD&lt;/code&gt;, &lt;code&gt;0xDE&lt;/code&gt;, and &lt;code&gt;0xDF&lt;/code&gt; and replaced them with &lt;code&gt;0xCD&lt;/code&gt; and &lt;code&gt;0xCE&lt;/code&gt;.
&lt;/p&gt;&lt;p&gt;That was better but it only displaced the problem since the borrowed right leg of the 'W' looked like an 'l' instead of an 'i'. The logo now read 'The World Warrlor'.&lt;/p&gt;&lt;p&gt;At this point, what was needed was a way to slice the top of the 'l' to make it look like a dot on top of an 'i' but how could he do that since the 68000 cannot write in a tile?&lt;/p&gt;&lt;p&gt; The last part of the puzzle comes from Guile's calves. If you look closely at tile &lt;code&gt;0x96&lt;/code&gt; you will notice that it has only one pixel visible in the lower left corner.
&lt;/p&gt;&lt;table&gt;&lt;row span="17"/&gt;&lt;row span="17"&gt;&lt;cell&gt;Guile palette&lt;/cell&gt;&lt;/row&gt;&lt;row span="17"/&gt;&lt;row&gt;&lt;cell&gt;World Warrier palette&lt;/cell&gt;&lt;/row&gt;&lt;/table&gt;&lt;p&gt;Something that I omitted to mention earlier is that the palette management is entirely under the 68000 control. The CPU is free to issue a tile drawing command using whatever palette it pleases.&lt;/p&gt;&lt;p&gt; Guile's green palette is not useful since the logo uses blue colors. But if we place them side by side, we notice that index &lt;code&gt;14&lt;/code&gt; is dark green in Guile's palette but dark blue in the logo palette. 
&lt;/p&gt;&lt;p&gt; Using tile &lt;code&gt;0x96&lt;/code&gt; with the logo palette allows the 68000 to have a (very expensive) system where 255 pixels are wasted to transparency but the 256th can be used like a pencil.
&lt;/p&gt;&lt;p&gt;That pencil-tile is used to issue three draw command with coordinates overlapping the 'l'. This effectively creates a line which cuts the top part and make it look like the dot at the top of an 'i'.&lt;/p&gt;&lt;p&gt;If you ever wondered why the 'i' of 'Warrior' looked weird all these years, now you know.&lt;/p&gt;Et voila!&lt;p&gt;The typo was fixed in later versions of Street Fighter 2 where the "World Warrior" set of tiles features a proper "IOR".&lt;/p&gt;&lt;p&gt;Ironically these are not used since the sub-title was changed from "World Warrior" to "Champion Edition" and then "Hyper-fighting".&lt;/p&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488278</guid><pubDate>Sun, 04 Jan 2026 14:30:29 +0000</pubDate></item><item><title>AI Sycophancy Panic</title><link>https://github.com/firasd/vibesbench/blob/main/docs/ai-sycophancy-panic.md</link><description>&lt;doc fingerprint="3b74d0de090e4684"&gt;
  &lt;main&gt;
    &lt;p&gt;We read every piece of feedback, and take your input very seriously.&lt;/p&gt;
    &lt;p&gt;To see all available qualifiers, see our documentation.&lt;/p&gt;
    &lt;p&gt;There was an error while loading. Please reload this page.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488396</guid><pubDate>Sun, 04 Jan 2026 14:41:28 +0000</pubDate></item><item><title>Web development is fun again</title><link>https://ma.ttias.be/web-development-is-fun-again/</link><description>&lt;doc fingerprint="2a84c01b5e640578"&gt;
  &lt;main&gt;
    &lt;p&gt;I remember when PHP 4 was a thing. jQuery was new and shiny. Sites were built with tables, not divs. Dreamweaver felt like a life hack. Designs were sliced in Photoshop. Databases lived in phpMyAdmin.&lt;/p&gt;
    &lt;p&gt;It probably didn‚Äôt feel like it at the time, but looking back, those were simpler days. The entire concept of the development cycle could fit in my head. There was complexity in building web applications, but it was all manageable. If you had an idea, you could probably build it.&lt;/p&gt;
    &lt;p&gt;As a solo developer, you could manage everything. From idea to execution. Or at least, it felt that way.&lt;/p&gt;
    &lt;p&gt;I‚Äôm probably romanticizing the past, but you get the idea.&lt;/p&gt;
    &lt;head rend="h2"&gt;Complexity outgrew my ability to follow#&lt;/head&gt;
    &lt;p&gt;Today, it‚Äôs hard to do web development right.&lt;/p&gt;
    &lt;p&gt;On the frontend, you have build pipelines, bundlers, CSS frameworks with their own toolchains, progressive web apps, Core Web Vitals, SEO, layout shifts, srcset/responsive images‚Ä¶ I remember when the biggest challenge was IE6 compatibility.&lt;/p&gt;
    &lt;p&gt;On the backend, there are design patterns, unit tests, code coverage, APIs, performance concerns, dependency management, infrastructure, monitoring, log tracing, observability‚Ä¶&lt;/p&gt;
    &lt;p&gt;Each area of expertise has grown up - probably for the better - but it also demands deeper domain knowledge. I chose to specialize in backend and server infrastructure. I had to step back from frontend work because I couldn‚Äôt keep up with its tooling while developing my backend skills.&lt;/p&gt;
    &lt;p&gt;As a solo developer, it‚Äôs now a lot harder to manage everything.&lt;/p&gt;
    &lt;head rend="h2"&gt;Leveling the playing field#&lt;/head&gt;
    &lt;quote&gt;
      &lt;p&gt;AI has entered the chat.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;They‚Äôre far from perfect, but &lt;code&gt;claude&lt;/code&gt; and &lt;code&gt;codex&lt;/code&gt; gave me the leverage I desperately needed. They‚Äôve brought me back to levels of productivity I haven‚Äôt felt in years. I feel like I can manage the entire stack again - with confidence.&lt;/p&gt;
    &lt;p&gt;I can go from idea to execution in days.&lt;/p&gt;
    &lt;p&gt;Suddenly, the complexity of each domain matters a lot less.&lt;/p&gt;
    &lt;head rend="h2"&gt;Pattern recognition#&lt;/head&gt;
    &lt;quote&gt;
      &lt;p&gt;Oh no, you‚Äôre vibe coding - bet it‚Äôs all slop and code noise!&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;Over the past two decades, I‚Äôve worked with a lot of talented people: backend developers, frontend developers, marketers, leaders, and more. I can lean on those experiences, fall back on how they did things, and implement their methods with AI.&lt;/p&gt;
    &lt;p&gt;I can reliably reproduce their coding standards, tone of voice, tactics, and processes. Starting a new project once felt insurmountable. Now, it feels realistic again.&lt;/p&gt;
    &lt;p&gt;When AI generates code, I know when it‚Äôs good and when it‚Äôs not. I‚Äôve seen the good and the bad, and I can iterate from there. Even with refinement and back-and-forth prompting, I‚Äôm easily 10x more productive with AI than without it.&lt;/p&gt;
    &lt;p&gt;The goal hasn‚Äôt changed: build quality software that meets modern standards. The goalpost is still far out. But now I have a rocket-powered soccer ball - and I can finally reach it again.&lt;/p&gt;
    &lt;head rend="h2"&gt;Room for creativity#&lt;/head&gt;
    &lt;p&gt;There‚Äôs mental space for creativity in building software again.&lt;/p&gt;
    &lt;p&gt;My head isn‚Äôt constantly full of build pipelines, testability concerns, code patterns, unfixed bugs‚Ä¶ I‚Äôm confident I can cover that with help from AI. It still needs to be done, but it‚Äôs done so much faster - and it no longer feels overwhelming.&lt;/p&gt;
    &lt;p&gt;That leaves room to experiment with UI and UX, to try ideas and throw them away. To add small quality-of-life improvements I couldn‚Äôt justify before, because there was always something more urgent.&lt;/p&gt;
    &lt;p&gt;It‚Äôs also not the typing of code that I really enjoy, nor is it the syntax or structure or boilerplate that‚Äôs required to build anything. It‚Äôs the fact you get to build something out of nothing, writing code was just how you got there. And with today‚Äôs tooling, that saves a ton of time.&lt;/p&gt;
    &lt;p&gt;AI really has made web development fun again.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488576</guid><pubDate>Sun, 04 Jan 2026 15:00:18 +0000</pubDate></item><item><title>Show HN: An interactive guide to how browsers work</title><link>https://howbrowserswork.com/</link><description>&lt;doc fingerprint="d261d58ed2a8a9d"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;How Browsers Work&lt;/head&gt;
    &lt;p&gt;An interactive guide to how browsers work.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why?&lt;/head&gt;
    &lt;p&gt;The guide is for engineers and curious people who use the web every day, but never built a mental model of how browsers work.&lt;/p&gt;
    &lt;p&gt;I find most guides too technical, too detailed, or too shallow, so I have decided to take a different approach.&lt;/p&gt;
    &lt;p&gt;I built the guide with many tiny interactive examples you can play with to help you go get through the technical details and build an intuition of how browsers work.&lt;/p&gt;
    &lt;p&gt;To keep it short and straight to the point, many critical details are omitted like different versions of the HTTP protocol, SSL, TLS, nuances of the DNS, and many more.&lt;/p&gt;
    &lt;p&gt;I made the guide open source. Feel free to suggest improvements by creating an issue or a pull request.&lt;/p&gt;
    &lt;head rend="h2"&gt;Browsers work with URLs&lt;/head&gt;
    &lt;p&gt;You can type literally anything in the address bar. But under the hood, browsers work with URLs:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A random text like pizza will be transformed into a "search" URL like https://google.com/search?q=pizza (or https://duckduckgo.com/?q=pizza depending on your preferences).&lt;/item&gt;
      &lt;item&gt;A domain name like example.com will be normalized as a full URL: https://example.com&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;To see how this works in practice, type something in the address bar and press Enter (or click the "Go" button):&lt;/p&gt;
    &lt;head rend="h2"&gt;Turning a URL into an HTTP request&lt;/head&gt;
    &lt;p&gt;Once we know the exact URL we want to visit, we can send a request to the server to fetch the resource and display it in the browser. Browsers communicate with servers using the HTTP protocol.&lt;/p&gt;
    &lt;p&gt;To see how a URL is translated into an HTTP request format, enter a full URL like https://example.com and press Enter (or click the "Go" button):&lt;/p&gt;
    &lt;p&gt;HTTP requests have headers in the format like:&lt;/p&gt;
    &lt;code&gt;Host: example.com
Accept: text/html
&lt;/code&gt;
    &lt;p&gt;One of the headers is the host header. It is used to identify the server to which the request is sent: example.com.&lt;/p&gt;
    &lt;head rend="h2"&gt;Resolving the server address&lt;/head&gt;
    &lt;p&gt;Browsers can't send requests to names like example.com.&lt;/p&gt;
    &lt;p&gt;Computers talk to IP addresses, so the browser first asks the DNS system to resolve the domain name into an IP address before it can connect to the server and send the HTTP request.&lt;/p&gt;
    &lt;p&gt;Type a domain name in the input and press Enter to resolve it into an IP address:&lt;/p&gt;
    &lt;head rend="h2"&gt;Establishing the TCP connection&lt;/head&gt;
    &lt;p&gt;After DNS gives the browser an IP address, it still needs a reliable connection to the server. TCP is the protocol that sets up this connection before any HTTP data is sent.&lt;/p&gt;
    &lt;p&gt;TCP establishes the connection using a three-step handshake that confirms both sides are ready to send and receive data.&lt;/p&gt;
    &lt;p&gt;These numbers are how the client and the server keep track of the conversation. They count bytes, so both sides agree on where the data stream starts and what should come next. If some data doesn't arrive, the sender can see the gap and retransmit the missing bytes. This is how TCP keeps data ordered and reliable once the connection is established.&lt;/p&gt;
    &lt;p&gt;Start sending packets and try to disrupt the network to see what happens.&lt;/p&gt;
    &lt;head rend="h2"&gt;HTTP requests and responses&lt;/head&gt;
    &lt;p&gt;Once the TCP connection is established, the browser can send an HTTP request to the server.&lt;/p&gt;
    &lt;p&gt;Click the "Go" button to watch the HTTP request travel to the server and the HTTP response return to the browser:&lt;/p&gt;
    &lt;p&gt;When the HTTP response arrives, the browser reads the raw HTTP response and starts rendering the HTML content.&lt;/p&gt;
    &lt;head rend="h2"&gt;Parsing HTML to build the DOM tree&lt;/head&gt;
    &lt;p&gt;After the HTTP response arrives, the browser separates the headers from the body and feeds the HTML bytes into the parser. The parser turns tags like &amp;lt;h1&amp;gt; into tokens and builds a DOM tree.&lt;/p&gt;
    &lt;p&gt;Click the "Parse" button to watch the HTML stream being parsed into the DOM tree:&lt;/p&gt;
    &lt;code&gt;&amp;lt;!doctype html&amp;gt;&amp;lt;html&amp;gt;  &amp;lt;head&amp;gt;    &amp;lt;title&amp;gt;Example Domain&amp;lt;/title&amp;gt;  &amp;lt;/head&amp;gt;  &amp;lt;body&amp;gt;    &amp;lt;main&amp;gt;      &amp;lt;h1 style="color: red;"&amp;gt;Example Domain&amp;lt;/h1&amp;gt;      &amp;lt;p&amp;gt;An example paragraph.&amp;lt;/p&amp;gt;      &amp;lt;p&amp;gt;
             &amp;lt;a href="https://example.com"&amp;gt;An example link&amp;lt;/a&amp;gt;
           &amp;lt;/p&amp;gt;    &amp;lt;/main&amp;gt;  &amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;/code&gt;
    &lt;code&gt;Document|- &amp;lt;!doctype html&amp;gt;`- html   |- head   |  `- title   |     `- "Example Domain"   `- body      `- main         |- h1 (style: color: red)         |  `- "Example Domain"         |- p         |  `- "An example paragraph."         `- p            `- a (href="https://example.com")               `- "An example link"&lt;/code&gt;
    &lt;p&gt;Parsing is streaming and error-tolerant: the browser starts building nodes before the full document is downloaded, and it inserts missing tags to keep the tree valid. When a &amp;lt;script&amp;gt; tag appears, parsing may pause so the script can run.&lt;/p&gt;
    &lt;p&gt;The DOM tree then combines with CSS to produce the render tree that layout and paint use to draw pixels.&lt;/p&gt;
    &lt;head rend="h2"&gt;On the importance of the DOM&lt;/head&gt;
    &lt;p&gt;The DOM is the browser's in-memory model of the document. It is the shared contract between the HTML parser, CSS selector engine, and JavaScript runtime, so changes to it immediately affect layout, styling, and what users can interact with.&lt;/p&gt;
    &lt;p&gt;The DOM powers everything from query selection to dynamic styling and event handling. Try editing the script and watch how the DOM changes on the right.&lt;/p&gt;
    &lt;head rend="h2"&gt;Layout, Paint, and Composite&lt;/head&gt;
    &lt;p&gt;Once the DOM and CSS are ready, the browser runs the rendering pipeline: Layout (reflow) to calculate sizes and positions,Paint to fill pixels, then Composite to stitch layers together on the GPU.&lt;/p&gt;
    &lt;p&gt;Not every change reruns every stage. Changing colors usually repaints, while changing sizes forces layout and paint to recompute.&lt;/p&gt;
    &lt;p&gt;This is why layout-heavy pages feel slower: more work needs to happen before the next frame can be shown.&lt;/p&gt;
    &lt;head rend="h2"&gt;Summary&lt;/head&gt;
    &lt;p&gt;That is it! If you completed all the examples, you should have a clear mental model of how browsers work.&lt;/p&gt;
    &lt;p&gt;Thank you for reading the guide, I hope you enjoyed it.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488654</guid><pubDate>Sun, 04 Jan 2026 15:08:02 +0000</pubDate></item><item><title>How I archived 10 years of memories using Spotify</title><link>https://notes.xdavidhu.me/notes/how-i-archived-10-years-of-memories-using-spotify</link><description>&lt;doc fingerprint="94d6d139a5b8c9d2"&gt;
  &lt;main&gt;
    &lt;p&gt;Music and smells are two of the most effective ways to re-experience the emotions of a specific time in the past. Listening to a song from a particular time of my life brings me back to how I felt at that point in ways photos can‚Äôt. Sometimes I can even recall exact visuals of what I was doing or where I was walking when listening.&lt;/p&gt;
    &lt;p&gt;Over the last 10 years, I followed a system that allows me to re-experience any specific time of any year.&lt;/p&gt;
    &lt;p&gt;Every January 1st, from desktop/web, I:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Create a new playlist. Title it the past year.&lt;/item&gt;
      &lt;item&gt;Copy all of my liked songs and paste them into the new playlist. This will maintain the order.&lt;/item&gt;
      &lt;item&gt;Empty my liked songs.&lt;/item&gt;
      &lt;item&gt;Save an out-of-bounds backup of the new playlist, in case my Spotify account messes up in the future. I select all &amp;amp; paste it into a sheet in Google Drive.&lt;/item&gt;
      &lt;item&gt;Start listening to new music, like them over the year.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Since the archive saves the order of likes, it grants more granular access than just years. For example, if I want to re-experience how the fall of 2016 felt, I open the corresponding year‚Äôs list, scroll 1/4 down from the top, and start listening.&lt;/p&gt;
    &lt;p&gt;During the year, when I listen to my liked songs, I usually start from the top of the stack, without shuffle. This is natural for me, since the newly saved songs are the ones I like the most at a given time. This causes me to listen to a ‚Äúrolling window‚Äù of my liked songs as time passes, linking specific music to specific dates.&lt;/p&gt;
    &lt;p&gt;In addition to saving songs that I find myself and particularly like, I like to save songs that are playing around me, on the radio, or at places I visit, and somehow stand out. Even if I might not fully like them at first, I find that they serve as great anchor points, and they usually grow on me after a few listens.&lt;/p&gt;
    &lt;p&gt;To maintain the integrity &amp;amp; not override the memories associated with specific songs, I rarely listen to or re-save songs from the past years. Sometimes I give myself exceptions, though, especially with remixes. ;)&lt;/p&gt;
    &lt;p&gt;See my last 10 years: https://open.spotify.com/user/xdavidhu&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46488696</guid><pubDate>Sun, 04 Jan 2026 15:11:19 +0000</pubDate></item></channel></rss>