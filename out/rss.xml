<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Hacker News: Front Page</title><link>https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml</link><description>Hacker News RSS</description><atom:link href="https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml" rel="self"/><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><language>en</language><lastBuildDate>Sat, 29 Nov 2025 11:08:04 +0000</lastBuildDate><item><title>Don't tug on that, you never know what it might be attached to (2016)</title><link>https://blog.plover.com/2016/07/01/#tmpdir</link><description>&lt;doc fingerprint="92a889b52e379ace"&gt;
  &lt;main&gt;
    &lt;cell class="mainsection" bgcolor="#fdfdfd"&gt;
      &lt;p&gt; Don't tug on that, you never know what it might be attached to &lt;/p&gt;
      &lt;p&gt;This is a story about a very interesting bug that I tracked down yesterday. It was causing a bad effect very far from where the bug actually was.&lt;/p&gt;
      &lt;head rend="h3"&gt;emacsclient&lt;/head&gt;
      &lt;p&gt;The &lt;code&gt;emacs&lt;/code&gt; text editor comes with a separate utility, called
&lt;code&gt;emacsclient&lt;/code&gt;, which can communicate with the main editor process and
tell it to open files for editing.  You have your main &lt;code&gt;emacs&lt;/code&gt;
running. Then somewhere else you run the command&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;     emacsclient some-files...
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;and it sends the main &lt;code&gt;emacs&lt;/code&gt;  a message that you want to edit
&lt;code&gt;some-files&lt;/code&gt;.  Emacs gets the message and pops up new windows for editing
those files.  When you're done editing &lt;code&gt;some-files&lt;/code&gt; you tell Emacs, by
typing &lt;code&gt;C-#&lt;/code&gt; or something, it
it communicates back to &lt;code&gt;emacsclient&lt;/code&gt; that the editing is done, and
&lt;code&gt;emacsclient&lt;/code&gt; exits.&lt;/p&gt;
      &lt;p&gt;This was more important in the olden days when Emacs was big and bloated and took a long time to start up. (They used to joke that √¢Emacs√¢ was an abbreviation for √¢Eight Megs And Constantly Swapping√¢. Eight megs!) But even today it's still useful, say from shell scripts that need to run an editor.&lt;/p&gt;
      &lt;p&gt;Here's the reason I was running it. I have a very nice shell script, called &lt;code&gt;also&lt;/code&gt;, that does something like this:&lt;/p&gt;
      &lt;list rend="ul"&gt;
        &lt;item&gt;Interpret command-line arguments as patterns&lt;/item&gt;
        &lt;item&gt;Find files matching those patterns&lt;/item&gt;
        &lt;item&gt;Present a menu of the files&lt;/item&gt;
        &lt;item&gt;Wait for me to select files of interest&lt;/item&gt;
        &lt;item&gt;Run &lt;code&gt;emacsclient&lt;/code&gt; on the selected files&lt;/item&gt;
      &lt;/list&gt;
      &lt;p&gt;It is essentially a wrapper around &lt;code&gt;menupick&lt;/code&gt;,
a menu-picking utility I wrote which has seen use as a component of
several other tools.
I can type &lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    also Wizard
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;in the shell and get a menu of the files related to the wizard, select the ones I actually want to edit, and they show up in Emacs. This is more convenient than using Emacs itself to find and open them. I use it many times a day.&lt;/p&gt;
      &lt;p&gt;Or rather, I did until this week, when it suddenly stopped working. Everything ran fine until the execution of &lt;code&gt;emacsclient&lt;/code&gt;, which would
fail, saying:&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt; emacsclient: can't find socket; have you started the server?
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;(A socket is a facility that enables interprocess communication, in this case between &lt;code&gt;emacs&lt;/code&gt; and &lt;code&gt;emacsclient&lt;/code&gt;.)&lt;/p&gt;
      &lt;p&gt;This message is familiar. It usually means that I have forgotten to tell Emacs to start listening for &lt;code&gt;emacsclient&lt;/code&gt;, by running &lt;code&gt;M-x
server-start&lt;/code&gt;.  (I should have Emacs do this when it starts up, but I
don't.  Why not?  I'm not sure.) So the first time it happened I went
to Emacs and ran &lt;code&gt;M-x server-start&lt;/code&gt;.  Emacs announced that it had
started the server, so I reran &lt;code&gt;also&lt;/code&gt;.  And the same thing happened.&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt; emacsclient: can't find socket; have you started the server?
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;head rend="h3"&gt;Finding the socket&lt;/head&gt;
      &lt;p&gt;So the first question is: why can't &lt;code&gt;emacsclient&lt;/code&gt; find the socket?
And this resolves naturally into two subquestions: where is the
socket, and where is &lt;code&gt;emacsclient&lt;/code&gt; looking?&lt;/p&gt;
      &lt;p&gt;The second one is easily answered; I ran &lt;code&gt;strace emacsclient&lt;/code&gt; (hi
Julia!) and saw that the last interesting thing &lt;code&gt;emacsclient&lt;/code&gt; did
before emitting the error message was&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    stat("/mnt/tmp/emacs2017/server", 0x7ffd90ec4d40) = -1 ENOENT (No such file or directory)
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;which means it's looking for the socket at &lt;code&gt;/mnt/tmp/emacs2017/server&lt;/code&gt;
but didn't find it there.&lt;/p&gt;
      &lt;p&gt;The question of where Emacs actually put the socket file was a little trickier. I did not run Emacs under &lt;code&gt;strace&lt;/code&gt; because I felt sure that
the output would be voluminous and it would be tedious to grovel over
it.&lt;/p&gt;
      &lt;p&gt;I don't exactly remember now how I figured this out, but I think now that I probably made an educated guess, something like: &lt;code&gt;emacsclient&lt;/code&gt;
is looking in &lt;code&gt;/mnt/tmp&lt;/code&gt;; this seems unusual.  I would expect the
socket to be under &lt;code&gt;/tmp&lt;/code&gt;.  Maybe it is under &lt;code&gt;/tmp&lt;/code&gt;?  So I looked
under &lt;code&gt;/tmp&lt;/code&gt; and there it was, in &lt;code&gt;/tmp/emacs2017/server&lt;/code&gt;:&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    srwx------ 1 mjd mjd 0 Jun 27 11:43 /tmp/emacs2017/server
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;(The &lt;code&gt;s&lt;/code&gt; at the beginning there means that the file is a √¢Unix-domain
socket√¢.  A socket is an endpoint for interprocess communication.  The
most familiar sort is a TCP socket, which has a TCP address, and which
enables communication over the internet.  But since ancient times Unix
has also supported Unix-domain sockets, which enable communication
between two processes on the same machine.  Instead of TCP addresses,
such sockets are addressed using paths in the filesystem, in this case
&lt;code&gt;/tmp/emacs2017/server&lt;/code&gt;.  When the server creates such a socket, it
appears in the filesystem as a special type of file, as here.)&lt;/p&gt;
      &lt;p&gt;I confirmed that this was the correct file by typing &lt;code&gt;M-x
server-force-delete&lt;/code&gt; in Emacs; this immediately caused
&lt;code&gt;/tmp/emacs2017/server&lt;/code&gt; to disappear.  Similarly &lt;code&gt;M-x server-start&lt;/code&gt;
made it reappear.&lt;/p&gt;
      &lt;head rend="h3"&gt;Why the disagreement?&lt;/head&gt;
      &lt;p&gt;Now the question is: Why is &lt;code&gt;emacsclient&lt;/code&gt; looking for the socket under
&lt;code&gt;/mnt/tmp&lt;/code&gt; when Emacs is putting it in &lt;code&gt;/tmp&lt;/code&gt;?  They used to
rendezvous properly; what has gone wrong?  I recalled that there was
some environment variable for controlling where temporary files are
put, so I did&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;       env | grep mnt
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;to see if anything relevant turned up. And sure enough there was:&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;       TMPDIR=/mnt/tmp
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;When programs want to create tmporary files and directories, they normally do it in &lt;code&gt;/tmp&lt;/code&gt;.  But
if there is a &lt;code&gt;TMPDIR&lt;/code&gt; setting, they use that directory instead.  This
explained why &lt;code&gt;emacsclient&lt;/code&gt; was looking for
&lt;code&gt;/mnt/tmp/emacs2017/socket&lt;/code&gt;.  And the explanation for why Emacs itself
was creating the socket in &lt;code&gt;/tmp&lt;/code&gt; seemed clear: Emacs was failing to
honor the &lt;code&gt;TMPDIR&lt;/code&gt; setting.&lt;/p&gt;
      &lt;p&gt;With this clear explanation in hand, I began to report the bug in Emacs, using &lt;code&gt;M-x report-emacs-bug&lt;/code&gt;. (The folks in the &lt;code&gt;#emacs&lt;/code&gt; IRC
channel on Freenode suggested this.  I had a bad
experience last time I tried
&lt;code&gt;#emacs&lt;/code&gt;, and then people mocked me for even trying to get useful
information out of IRC.  But this time it went pretty well.)&lt;/p&gt;
      &lt;p&gt;Emacs popped up a buffer with full version information and invited me to write down the steps to reproduce the problem. So I wrote down&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;     % export TMPDIR=/mnt/tmp
     % emacs
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;and as I did that I ran those commands in the shell.&lt;/p&gt;
      &lt;p&gt;Then I wrote&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;     In Emacs:
     M-x getenv TMPDIR
     (emacs claims there is no such variable)
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;and I did that in Emacs also. But instead of claiming there was no such variable, Emacs cheerfully informed me that the value of &lt;code&gt;TMPDIR&lt;/code&gt;
was &lt;code&gt;/mnt/tmp&lt;/code&gt;.&lt;/p&gt;
      &lt;p&gt;(There is an important lesson here! To submit a bug report, you find a minimal demonstration. But then you also try the minimal demonstration exactly as you reported it. Because of what just happened! Had I sent off that bug report, I would have wasted everyone else's time, and even worse, I would have looked like a fool.)&lt;/p&gt;
      &lt;p&gt;My minimal demonstration did not demonstrate. Something else was going on.&lt;/p&gt;
      &lt;head rend="h3"&gt;Why no &lt;code&gt;TMPDIR&lt;/code&gt;?&lt;/head&gt;
      &lt;p&gt;This was a head-scratcher. All I could think of was that &lt;code&gt;emacsclient&lt;/code&gt; and Emacs were somehow getting different environments,
one with the &lt;code&gt;TMPDIR&lt;/code&gt; setting and one without.  Maybe I had run them
from different shells, and only one of the shells had the setting?&lt;/p&gt;
      &lt;p&gt;I got on a sidetrack at this point to find out why &lt;code&gt;TMPDIR&lt;/code&gt; was set in
the first place; I didn't think I had set it. I looked for it in
&lt;code&gt;/etc/profile&lt;/code&gt;, which is the default Bash startup instructions, but it
wasn't there.  But I also noticed an &lt;code&gt;/etc/profile.d&lt;/code&gt; which seemed
relevant.  (I saw later that the &lt;code&gt;/etc/profile&lt;/code&gt; contained instructions
to load everything under &lt;code&gt;/etc/profile.d&lt;/code&gt;.)  And when I grepped for
&lt;code&gt;TMPDIR&lt;/code&gt; in the &lt;code&gt;profile.d&lt;/code&gt; files, I found that it was being set by
&lt;code&gt;/etc/profile.d/ziprecruiter_environment.sh&lt;/code&gt;, which the sysadmins had
installed.  So that mystery at least was cleared up.&lt;/p&gt;
      &lt;p&gt;That got me on a second sidetrack, looking through our Git history for recent changes involving &lt;code&gt;TMPDIR&lt;/code&gt;.  There weren't any, so that was a
dead end.&lt;/p&gt;
      &lt;p&gt;I was still puzzled about why Emacs sometimes got the &lt;code&gt;TMPDIR&lt;/code&gt; setting
and sometimes not.  That's when I realized that my original Emacs
process, the one that had failed to rendezvous with &lt;code&gt;emacsclient&lt;/code&gt;,
had not been started in the usual way.  Instead of simply running
&lt;code&gt;emacs&lt;/code&gt;, I had run&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    git re-edit
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;which invokes Git, which then runs&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    /home/mjd/bin/git-re-edit
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;which is a Perl program I wrote that does a bunch of stuff to figure out which files I was editing recently and then execs &lt;code&gt;emacs&lt;/code&gt; to edit
them some more.  So there are several programs here that could be
tampering with the environment and removing the &lt;code&gt;TMPDIR&lt;/code&gt; setting.&lt;/p&gt;
      &lt;p&gt;To more accurately point the finger of blame, I put some diagnostics into the &lt;code&gt;git-re-edit&lt;/code&gt; program to have it print out the value of
&lt;code&gt;TMPDIR&lt;/code&gt;.  Indeed, &lt;code&gt;git-re-edit&lt;/code&gt; reported that &lt;code&gt;TMPDIR&lt;/code&gt; was unset.
Clearly, the culprit was Git, which must have been removing &lt;code&gt;TMPDIR&lt;/code&gt;
from the environment before invoking my Perl program.&lt;/p&gt;
      &lt;head rend="h3"&gt;Who is stripping the environment?&lt;/head&gt;
      &lt;p&gt;To confirm this conclusion, I created a tiny shell script, &lt;code&gt;/home/mjd/bin/git-env&lt;/code&gt;, which simply printed out the environment, and
then I ran &lt;code&gt;git env&lt;/code&gt;, which tells Git to find &lt;code&gt;git-env&lt;/code&gt; and run it.
If the environment it printed were to omit &lt;code&gt;TMPDIR&lt;/code&gt;, I would know Git
was the culprit.  But &lt;code&gt;TMPDIR&lt;/code&gt; was in the output.&lt;/p&gt;
      &lt;p&gt;So I created a Perl version of &lt;code&gt;git-env&lt;/code&gt;, called &lt;code&gt;git-perlenv&lt;/code&gt;, which
did the same thing, and I ran it via &lt;code&gt;git perlenv&lt;/code&gt;.  And this time
&lt;code&gt;TMPDIR&lt;/code&gt; was not in the output. I ran diff on the outputs of &lt;code&gt;git
env&lt;/code&gt; and &lt;code&gt;git perlenv&lt;/code&gt; and they were identical√¢except that &lt;code&gt;git
perlenv&lt;/code&gt; was missing &lt;code&gt;TMPDIR&lt;/code&gt;.&lt;/p&gt;
      &lt;p&gt;So it was Perl's fault! And I verified this by running &lt;code&gt;perl
/home/mjd/bin/git-re-edit&lt;/code&gt; directly, without involving Git at all.
The diagnostics I had put in reported that &lt;code&gt;TMPDIR&lt;/code&gt; was unset.&lt;/p&gt;
      &lt;head rend="h3"&gt;WTF Perl?&lt;/head&gt;
      &lt;p&gt;At this point I tried getting rid of &lt;code&gt;get-re-edit&lt;/code&gt; itself, and ran the
one-line program&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    perl -le 'print $ENV{TMPDIR}'
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;which simply runs Perl and tells it to print out the value of the &lt;code&gt;TMPDIR&lt;/code&gt; environment variable. It should print &lt;code&gt;/mnt/tmp&lt;/code&gt;, but instead
it printed the empty string.  This is a smoking gun, and Perl no
longer has anywhere to hide.&lt;/p&gt;
      &lt;p&gt;The mystery is not cleared up, however. Why was Perl doing this? Surely not a bug; someone else would have noticed such an obvious bug sometime in the past 25 years. And it only failed for &lt;code&gt;TMPDIR&lt;/code&gt;, not
for other variables.  For example&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    FOO=bar perl -le 'print $ENV{FOO}'
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;printed out &lt;code&gt;bar&lt;/code&gt; as one would expect.  This was weird: how could
Perl's environment handling be broken for just the &lt;code&gt;TMPDIR&lt;/code&gt; variable?&lt;/p&gt;
      &lt;p&gt;At this point I got Rik Signes and Frew Schmidt to look at it with me. They confirmed that the problem was not in Perl generally, but just in this Perl. Perl on other systems did not display this behavior. &lt;/p&gt;
      &lt;p&gt;I looked in the output of &lt;code&gt;perl -V&lt;/code&gt;, which says what version of Perl
you are using and which patches have been applied, and wasted a lot of
time looking into
CVE-2016-2381,
which seemed relevant.  But it turned out to be a red herring.&lt;/p&gt;
      &lt;head rend="h3"&gt;Working around the problem, 1.&lt;/head&gt;
      &lt;p&gt;While all this was going on I was looking for a workaround. Finding one is at least as important as actually tracking down the problem because ultimately I am paid to do something other than figure out why Perl is losing &lt;code&gt;TMPDIR&lt;/code&gt;.  Having a workaround in hand means that when
I get sick and tired of looking into the underlying problem I can
abandon it instantly instead of having to push onward.&lt;/p&gt;
      &lt;p&gt;The first workaround I found was to not use the Unix-domain socket. Emacs has an option to use a TCP socket instead, which is useful on systems that do not support Unix-domain sockets, such as non-Unix systems. (I am told that some do still exist.)&lt;/p&gt;
      &lt;p&gt;You set the &lt;code&gt;server-use-tcp&lt;/code&gt; variable to a true value, and when you
start the server, Emacs creates a TCP socket and writes a description
of it into a √¢server file√¢, usually &lt;code&gt;~/.emacs.d/server/server&lt;/code&gt;.  Then
when you run &lt;code&gt;emacsclient&lt;/code&gt; you  tell it to connect to the socket that
is described in the file, with&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    emacsclient --server-file=~/.emacs.d/server/server
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;or by setting the &lt;code&gt;EMACS_SERVER_FILE&lt;/code&gt; environment variable. I tried
this, and it worked, once I figured out the thing about
&lt;code&gt;server-use-tcp&lt;/code&gt; and what a √¢server file√¢ was.  (I had misunderstood
at first, and thought that √¢server file√¢ meant the Unix-domain socket
itself, and I tried to get &lt;code&gt;emacsclient&lt;/code&gt; to use the right one by
setting &lt;code&gt;EMACS_SERVER_FILE&lt;/code&gt;, which didn't work at all.  The resulting
error message was obscure enough to lead me to IRC to ask about it.)&lt;/p&gt;
      &lt;head rend="h3"&gt;Working around the problem, 2.&lt;/head&gt;
      &lt;p&gt;I spent quite a while looking for an environment variable analogous to &lt;code&gt;EMACS_SERVER_FILE&lt;/code&gt; to tell &lt;code&gt;emacsclient&lt;/code&gt; where the Unix-domain socket
was.  But while there is a &lt;code&gt;--socket-name&lt;/code&gt; command-line argument to
control this, there is inexplicably no environment variable.  I hacked
my &lt;code&gt;also&lt;/code&gt; command (responsible for running &lt;code&gt;emacsclient&lt;/code&gt;) to look for
an environment variable named &lt;code&gt;EMACS_SERVER_SOCKET&lt;/code&gt;, and to pass its
value to &lt;code&gt;emacsclient --socket-name&lt;/code&gt; if there was one.  (It probably
would have been better to write a wrapper for &lt;code&gt;emacsclient&lt;/code&gt;, but I
didn't.)  Then I put&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;    EMACS_SERVER_SOCKET=$TMPDIR/emacs$(id -u)/server
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;in my Bash profile, which effectively solved the problem. This set &lt;code&gt;EMACS_SERVER_SOCKET&lt;/code&gt; to &lt;code&gt;/mnt/tmp/emacs2017/server&lt;/code&gt; whenever I
started a new shell.  When I ran &lt;code&gt;also&lt;/code&gt; it would notice the setting
and pass it along to &lt;code&gt;emacsclient&lt;/code&gt; with &lt;code&gt;--socket-name&lt;/code&gt;, to tell
&lt;code&gt;emacsclient&lt;/code&gt; to look in the right place.  Having set this up I could
forget all about the original problem if I wanted to.&lt;/p&gt;
      &lt;head rend="h3"&gt;But but but WHY?&lt;/head&gt;
      &lt;p&gt;But why was Perl removing &lt;code&gt;TMPDIR&lt;/code&gt; from the environment?  I didn't
figure out the answer to this; Frew took it to the &lt;code&gt;#p5p&lt;/code&gt; IRC channel
on &lt;code&gt;perl.org&lt;/code&gt;, where the answer was eventually tracked down by Matthew
Horsfall and Zefrem.&lt;/p&gt;
      &lt;p&gt;The answer turned out to be quite subtle. One of the classic attacks that can be mounted against a process with elevated privileges is as follows. Suppose you know that the program is going to write to a temporary file. So you set &lt;code&gt;TMPDIR&lt;/code&gt; beforehand and trick it into
writing in the wrong place, possibly overwriting or destroying
something important.&lt;/p&gt;
      &lt;p&gt;When a program is loaded into a process, the dynamic loader does the loading. To protect against this attack, the loader checks to see if the program it is going to run has elevated privileges, say because it is setuid, and if so it sanitizes the process√¢ environment to prevent the attack. Among other things, it removes &lt;code&gt;TMPDIR&lt;/code&gt; from the
environment.&lt;/p&gt;
      &lt;p&gt;I hadn't thought of exactly this, but I had thought of something like it: If Perl detects that it is running setuid, it enables a secure mode which, among other things, sanitizes the environment. For example, it ignores the &lt;code&gt;PERL5LIB&lt;/code&gt; environment variable that
normally tells it where to look for loadable modules, and instead
loads modules only from a few compiled-in trustworthy directories.  I
had checked early on to see if this was causing the &lt;code&gt;TMPDIR&lt;/code&gt; problem,
but the &lt;code&gt;perl&lt;/code&gt; executable was not setuid and Perl was not running in
secure mode.&lt;/p&gt;
      &lt;p&gt;But Linux supports a feature called √¢capabilities√¢, which is a sort of partial superuser privilege. You can give a program some of the superuser's capabilities without giving away the keys to the whole kingdom. Our systems were configured to give &lt;code&gt;perl&lt;/code&gt; one extra
capability, of binding to low-numbered TCP ports, which is normally
permitted only to the superuser.  And when the dynamic loader ran
&lt;code&gt;perl&lt;/code&gt;, it saw this additional capability and removed &lt;code&gt;TMPDIR&lt;/code&gt; from
the environment for safety.&lt;/p&gt;
      &lt;quote&gt;
        &lt;p&gt;This is why Emacs had the &lt;code&gt;TMPDIR&lt;/code&gt; setting when run from the command
  line, but not when run via &lt;code&gt;git-re-edit&lt;/code&gt;.&lt;/p&gt;
      &lt;/quote&gt;
      &lt;p&gt;Until this came up, I had not even been aware that the √¢capabilities√¢ feature existed.&lt;/p&gt;
      &lt;head rend="h3"&gt;A red herring&lt;/head&gt;
      &lt;p&gt;There was one more delightful confusion on the way to this happy ending. When Frew found out that it was just the Perl on my development machine that was misbehaving, he tried logging into his own, nearly identical development machine to see if it misbehaved in the same way. It did, but when he ran a system update to update Perl, the problem went away. He told me this would fix the problem on my machine. But I reported that I had updated my system a few hours before, so there was nothing to update!&lt;/p&gt;
      &lt;p&gt;The elevated capabilities theory explained this also. When Frew updated his system, the new Perl was installed without the elevated capability feature, so the dynamic loader did not remove &lt;code&gt;TMPDIR&lt;/code&gt; from
the environment.  &lt;/p&gt;
      &lt;p&gt;When I had updated my system earlier, the same thing happened. But as soon as the update was complete, I reloaded my system configuration, which reinstated the capability setting. Frew hadn't done this.&lt;/p&gt;
      &lt;head rend="h3"&gt;Summary&lt;/head&gt;
      &lt;list rend="ul"&gt;
        &lt;item&gt;The system configuration gave &lt;code&gt;perl&lt;/code&gt; a special capability&lt;/item&gt;
        &lt;item&gt;so the dynamic loader sanitized its environment&lt;/item&gt;
        &lt;item&gt;so that when &lt;code&gt;perl&lt;/code&gt; ran &lt;code&gt;emacs&lt;/code&gt;,&lt;/item&gt;
        &lt;item&gt;the Emacs process didn't have the &lt;code&gt;TMPDIR&lt;/code&gt; environment setting&lt;/item&gt;
        &lt;item&gt;which caused Emacs to create its listening socket in the usual place&lt;/item&gt;
        &lt;item&gt;but because &lt;code&gt;emacsclient&lt;/code&gt; did get the setting, it looked in the wrong place&lt;/item&gt;
      &lt;/list&gt;
      &lt;head rend="h3"&gt;Conclusion&lt;/head&gt;
      &lt;p&gt;This computer stuff is amazingly complicated. I don't know how anyone gets anything done.&lt;/p&gt;
      &lt;p&gt;[ Addendum 20160709: Frew Schmidt has written up the same incident, but covers different ground than I do. ]&lt;/p&gt;
      &lt;p&gt;[ Addendum 20160709: A Hacker News comment asks what changed to cause the problem? Why was Perl losing &lt;code&gt;TMPDIR&lt;/code&gt; this week but not the week
before?  Frew and I don't know!¬†]&lt;/p&gt;
      &lt;p&gt; [Other articles in category /tech] permanent link &lt;/p&gt;
    &lt;/cell&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46079785</guid><pubDate>Fri, 28 Nov 2025 16:01:01 +0000</pubDate></item><item><title>True P2P Email on Top of Yggdrasil Network</title><link>https://github.com/JB-SelfCompany/Tyr</link><description>&lt;doc fingerprint="bf9ce940ed102acf"&gt;
  &lt;main&gt;
    &lt;p&gt;We're taught that email must go through servers. Why? Because the Internet was built around centralized infrastructure. Every email you send travels through multiple servers - your provider's server, maybe a few relay servers, and finally your recipient's provider's server. Each hop is a potential point of surveillance, censorship, or failure.&lt;/p&gt;
    &lt;p&gt;Even "encrypted" email solutions still rely on these centralized servers. They encrypt the message content but the metadata - who you're talking to, when, how often - is visible to anyone watching the servers.&lt;/p&gt;
    &lt;p&gt;But there is a network, called Yggdrasil, that gives everyone a free IPv6 and doesn't need a blessing from your ISP. We finally have this possibility to use true P2P email. And moreover, this network has strong encryption to protect all data that flows from one IP to another.&lt;/p&gt;
    &lt;p&gt;Tyr brings true peer-to-peer email to your Android device using these unusual conditions. Unlike traditional email clients, Tyr doesn't need:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;‚ùå Centralized mail servers (the connections are straight P2P)&lt;/item&gt;
      &lt;item&gt;‚ùå Message encryption layers (the network takes care of that)&lt;/item&gt;
      &lt;item&gt;‚ùå Port forwarding or STUN/TURN servers (Yggdrasil handles NAT traversal)&lt;/item&gt;
    &lt;/list&gt;
    &lt;table&gt;
      &lt;row span="2"&gt;
        &lt;cell role="head"&gt;Feature&lt;/cell&gt;
        &lt;cell role="head"&gt;Description&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üîó Full DeltaChat/ArcaneChat Integration&lt;/cell&gt;
        &lt;cell&gt;Seamless setup with the best decentralized messengers&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üìß Local SMTP/IMAP Server&lt;/cell&gt;
        &lt;cell&gt;Complete mail server running directly on your device&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üîê Cryptographic Identity&lt;/cell&gt;
        &lt;cell&gt;Automatic Ed25519 key generation - your mail identity cannot be spoofed&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üåç Yggdrasil Network&lt;/cell&gt;
        &lt;cell&gt;Connect via configurable peers - censorship-resistant by design&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üöÄ Auto-Start on Boot&lt;/cell&gt;
        &lt;cell&gt;Always-on availability for incoming messages&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;üíæ Encrypted Backup &amp;amp; Restore&lt;/cell&gt;
        &lt;cell&gt;Password-protected configuration with optional key export&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;üîã Battery Optimized&lt;/cell&gt;
        &lt;cell&gt;Sophisticated power management with timed wake locks&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;code&gt;graph LR
    A[DeltaChat/ArcaneChat] --&amp;gt;|SMTP/IMAP| B[Tyr Service]
    B --&amp;gt;|Yggmail Protocol| C[Yggdrasil Network]
    C --&amp;gt;|P2P Encrypted| D[Recipient's Tyr]
    D --&amp;gt;|SMTP/IMAP| E[Recipient's Chat App]
&lt;/code&gt;
    &lt;p&gt;Tyr runs a complete email server right on your Android device, using the Yggdrasil network for transport. The Yggmail mail server (built in Go) is embedded as a library inside the app and runs as a foreground service.&lt;/p&gt;
    &lt;p&gt;On top of Yggdrasil, it provides standard SMTP and IMAP protocols on localhost (&lt;code&gt;127.0.0.1:1025&lt;/code&gt; and &lt;code&gt;127.0.0.1:1143&lt;/code&gt;). Any email client can connect to these ports - but we recommend DeltaChat or ArcaneChat for the best P2P messaging experience.&lt;/p&gt;
    &lt;p&gt;Every Tyr installation generates unique Ed25519 cryptographic keys. Your mail address is derived from your public key:&lt;/p&gt;
    &lt;code&gt;&amp;lt;64-hex-characters&amp;gt;@yggmail
&lt;/code&gt;
    &lt;p&gt;This means your identity is cryptographically verifiable and cannot be spoofed.&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Install Tyr and complete the onboarding (set password, configure peers)&lt;/item&gt;
      &lt;item&gt;Start the Yggmail service in Tyr&lt;/item&gt;
      &lt;item&gt;Install DeltaChat or ArcaneChat&lt;/item&gt;
      &lt;item&gt;In Tyr's main screen, tap "Setup DeltaChat/ArcaneChat"&lt;/item&gt;
      &lt;item&gt;Tyr will automatically open your chat app with pre-configured settings&lt;/item&gt;
      &lt;item&gt;Complete the setup and start chatting!&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;If automatic setup doesn't work:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Complete Tyr onboarding and start the service&lt;/item&gt;
      &lt;item&gt;Copy your mail address from Tyr's main screen (looks like &lt;code&gt;abc123...@yggmail&lt;/code&gt;)&lt;/item&gt;
      &lt;item&gt;In DeltaChat/ArcaneChat, create a new profile&lt;/item&gt;
      &lt;item&gt;Tap "Use a different server"&lt;/item&gt;
      &lt;item&gt;Enter your Yggmail address and the password you set in Tyr&lt;/item&gt;
      &lt;item&gt;Tap "‚úì" to complete setup&lt;/item&gt;
    &lt;/list&gt;
    &lt;quote&gt;
      &lt;p&gt;Important: Tyr must be running for your chat app to send and receive messages. Enable auto-start in Tyr settings for seamless experience.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Password Encryption: Android Keystore System with AES-256-GCM&lt;/item&gt;
      &lt;item&gt;Automatic Keystore Recovery: Handles Android Keystore issues on Samsung and other devices&lt;/item&gt;
      &lt;item&gt;Network Encryption: All P2P communications encrypted by Yggdrasil Network&lt;/item&gt;
      &lt;item&gt;Local-Only Access: SMTP/IMAP ports bound to localhost only&lt;/item&gt;
      &lt;item&gt;Cryptographic Identity: Ed25519 keys ensure your mail address cannot be spoofed&lt;/item&gt;
      &lt;item&gt;Encrypted Backups: Configuration and keys backed up with password protection&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Android Studio (latest version)&lt;/item&gt;
      &lt;item&gt;JDK 17&lt;/item&gt;
      &lt;item&gt;Android SDK (API 23-36)&lt;/item&gt;
      &lt;item&gt;Go 1.21+ and gomobile (only if rebuilding yggmail.aar)&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;# Clone the repository
git clone https://github.com/JB-SelfCompany/Tyr.git
cd Tyr

# Build debug APK
./gradlew assembleDebug

# Install to connected device
./gradlew installDebug&lt;/code&gt;
    &lt;p&gt;APKs will be in &lt;code&gt;app/build/outputs/apk/debug/&lt;/code&gt; or &lt;code&gt;app/build/outputs/apk/release/&lt;/code&gt;&lt;/p&gt;
    &lt;code&gt;cd ../yggmail/mobile

# Windows
..\build-android.bat

# Unix
gomobile bind -target=android -androidapi 23 -javapkg=com.jbselfcompany.tyr -ldflags="-checklinkname=0" -o yggmail.aar .&lt;/code&gt;
    &lt;p&gt;Then copy &lt;code&gt;yggmail.aar&lt;/code&gt; to &lt;code&gt;Tyr/app/libs/&lt;/code&gt;&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="2"&gt;
        &lt;cell role="head"&gt;Component&lt;/cell&gt;
        &lt;cell role="head"&gt;Details&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Language&lt;/cell&gt;
        &lt;cell&gt;Kotlin 2.2.20&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Min SDK&lt;/cell&gt;
        &lt;cell&gt;23 (Android 6.0)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Target SDK&lt;/cell&gt;
        &lt;cell&gt;33 (Android 13)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Compile SDK&lt;/cell&gt;
        &lt;cell&gt;36&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Architecture&lt;/cell&gt;
        &lt;cell&gt;Layered (UI ‚Üí Service ‚Üí Data)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Mail Server&lt;/cell&gt;
        &lt;cell&gt;Yggmail (Go library via gomobile)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Network&lt;/cell&gt;
        &lt;cell&gt;Yggdrasil overlay mesh network&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Localization&lt;/cell&gt;
        &lt;cell&gt;English, Russian&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Native Library&lt;/cell&gt;
        &lt;cell&gt;yggmail.aar (located in &lt;code&gt;app/libs/&lt;/code&gt;)&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Yggmail: The mail transfer agent that powers Tyr&lt;/item&gt;
      &lt;item&gt;Mimir: P2P messenger on Yggdrasil (sister project)&lt;/item&gt;
      &lt;item&gt;Yggdrasil Network: The mesh network infrastructure&lt;/item&gt;
      &lt;item&gt;DeltaChat: Recommended email-based messenger client&lt;/item&gt;
      &lt;item&gt;ArcaneChat: Alternative email-based messenger client&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Tyr is open source software. The Yggmail library uses Mozilla Public License v. 2.0.&lt;/p&gt;
    &lt;p&gt;See LICENSE file for full details.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Censorship Circumvention: Connect to any of hundreds of available Yggdrasil nodes, host your own, or even build a private network. Email freedom is literally in your hands.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;quote&gt;
      &lt;p&gt;Privacy by Design: No metadata collection, no server logs, no third-party surveillance. Your conversations belong to you.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;quote&gt;
      &lt;p&gt;Decentralization: No single point of failure, no corporate control. True peer-to-peer architecture.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;Made with ‚ù§Ô∏è for the decentralized web&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46080143</guid><pubDate>Fri, 28 Nov 2025 16:35:24 +0000</pubDate></item><item><title>Airloom ‚Äì 3D Flight Tracker</title><link>https://objectiveunclear.com/airloom.html</link><description>&lt;doc fingerprint="77ed4fa771de6491"&gt;
  &lt;main&gt;
    &lt;p&gt;W/A/S/D - Move forward/left/back/right&lt;/p&gt;
    &lt;p&gt;Space - Move up&lt;/p&gt;
    &lt;p&gt;Shift - Move down&lt;/p&gt;
    &lt;p&gt;Mouse - Look around&lt;/p&gt;
    &lt;p&gt;Click anywhere to start flying&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46080289</guid><pubDate>Fri, 28 Nov 2025 16:49:12 +0000</pubDate></item><item><title>So you wanna build a local RAG?</title><link>https://blog.yakkomajuri.com/blog/local-rag</link><description>&lt;doc fingerprint="fb5fccd27d06c5d6"&gt;
  &lt;main&gt;
    &lt;p&gt;When we launched Skald, we wanted it to not only be self-hostable, but also for one to be able to run it without sending any data to third-parties.&lt;/p&gt;
    &lt;p&gt;With LLMs getting better and better, privacy-sensitive organizations shouldn't have to choose between being left behind by not accessing frontier models and doing away with their committment to (or legal requirement for) data privacy.&lt;/p&gt;
    &lt;p&gt;So here's what we did to support this use case and also some benchmarks comparing performance when using proprietary APIs vs self-hosted open-source tech.&lt;/p&gt;
    &lt;head rend="h2"&gt;RAG components and their OSS alternatives&lt;/head&gt;
    &lt;p&gt;A basic RAG usually has the following core components:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A vector database&lt;/item&gt;
      &lt;item&gt;A vector embeddings model&lt;/item&gt;
      &lt;item&gt;An LLM&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;And most times it also has these as well:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A reranker&lt;/item&gt;
      &lt;item&gt;Document parsing (for PDFs, PowerPoints, etc)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;What that means is that when you're looking to build a fully local RAG setup, you'll need to substitute whatever SaaS providers you're using for a local option for each of those components.&lt;/p&gt;
    &lt;p&gt;Here's a table with some examples of what we might use in a scenario where we can use third-party Cloud services and one where we can't:&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Component&lt;/cell&gt;
        &lt;cell role="head"&gt;Proprietary Options&lt;/cell&gt;
        &lt;cell role="head"&gt;Open-Source Options&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;Vector Database&lt;/cell&gt;
        &lt;cell&gt;Pinecone, Turbopuffer, Weaviate Cloud, Qdrant Cloud&lt;/cell&gt;
        &lt;cell&gt;Qdrant, Weaviate, Postgres with pgvector&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;Vector Embeddings Provider&lt;/cell&gt;
        &lt;cell&gt;OpenAI, Cohere, Voyage&lt;/cell&gt;
        &lt;cell&gt;Sentence Transformers, BGE, E5&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;LLM&lt;/cell&gt;
        &lt;cell&gt;GPT, Claude, Gemini&lt;/cell&gt;
        &lt;cell&gt;Llama, Mistral, GPT-OSS&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;Reranker&lt;/cell&gt;
        &lt;cell&gt;Cohere, Voyage&lt;/cell&gt;
        &lt;cell&gt;BGE Reranker, Sentence Transformers Cross-Encoder&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Document Parsing&lt;/cell&gt;
        &lt;cell&gt;Reducto, Datalab&lt;/cell&gt;
        &lt;cell&gt;Docling&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;quote&gt;
      &lt;p&gt;Do note that running something locally does not mean it needs to be open-source, as one could pay for a license to self-host proprietary software. But at Skald our goal was to use fully open-source tech, which is what I'll be convering here.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;The table above is far from covering all available options on both columns, but basically it gives you an indication of what to research into in order to pick a tool that works for you.&lt;/p&gt;
    &lt;p&gt;As with anything, what works for you will greatly depend on your use case. And you need to be prepared to run a few more services than you're used to if you've just been calling APIs.&lt;/p&gt;
    &lt;p&gt;For our local stack, we went with the easiest setup for now to get it working (and it does! see writeup on this lower down) but will be running benchmarks on all other options to determine the best possible setup.&lt;/p&gt;
    &lt;p&gt;This is what we have today:&lt;/p&gt;
    &lt;p&gt;Vector DB: Postgres + pgvector. We already use Postgres and didn't want to bundle another service into our stack, but this is controversial and we will be running benchmarks to make a better informed decision here. Note that pgvector will serve a lot of use cases well all the way up to hundreds of thousands of documents, though.&lt;/p&gt;
    &lt;p&gt;Vector embeddings: Users can configure this in Skald and we use Sentence Transformers (all-MiniLM-L6-v2) as our default (solid all-around performer for speed and retrieval, English-only). I also ran Skald with bge-m3 (larger, multi-language) and share the results later in this post.&lt;/p&gt;
    &lt;p&gt;LLM: We don't even bundle a default with Skald and it's up to the users to run and manage this. I tested our setup with GPT-OSS 20B on EC2 (results shown below).&lt;/p&gt;
    &lt;p&gt;Reranker: Users can also configure this in Skald, and the default is the Sentence Transformers cross encoder (solid, English-only). I've also used bge-reranker-v2-m3 and mmarco-mMiniLMv2-L12-H384-v1 which offer multi-lingual support.&lt;/p&gt;
    &lt;p&gt;Document parsing: There isn't much of a question on this one. We're using Docling. It's great. We run it via docling-serve.&lt;/p&gt;
    &lt;head rend="h2"&gt;Does it perform though?&lt;/head&gt;
    &lt;p&gt;So the main goal here was first to get something working then ensure it worked well with our platform and could be easily deployed. From here we'll be running extensive benchmarks and working with our clients to provide a solid setup that both performs well but is also not a nightmare to deploy and manage.&lt;/p&gt;
    &lt;p&gt;From that perspective, this was a great success.&lt;/p&gt;
    &lt;p&gt;Deploying a production instance of Skald with this whole stack took me 8 minutes, and that comes bundled with the vector database (well, Postgres), a reranking and embedding service, and Docling.&lt;/p&gt;
    &lt;p&gt;The only thing I needed to run separately was the LLM, which I did via llama.cpp.&lt;/p&gt;
    &lt;p&gt;Having gotten this sorted, I imported all the content from the PostHog website [1] and set up a tiny dataset [2] of questions and expected answers inside of Skald, then used our Experiments feature to run the RAG over this dataset.&lt;/p&gt;
    &lt;p&gt;I explicitly kept the topK values really high (100 for the vector search and 50 for post-reranking), as I was mostly testing for accuracy and wanted to see the performance when questions required e.g. aggregating context over 15+ documents.&lt;/p&gt;
    &lt;head&gt;Full config&lt;/head&gt;
    &lt;p&gt;Here are the params configured in the Skald UI for the the experiment.&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="2"&gt;
        &lt;cell role="head"&gt;Config option&lt;/cell&gt;
        &lt;cell role="head"&gt;Selection&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Extra system prompt&lt;/cell&gt;
        &lt;cell&gt;Be really concise in your answers&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Query rewriting&lt;/cell&gt;
        &lt;cell&gt;Off&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Vector search topK&lt;/cell&gt;
        &lt;cell&gt;100&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Vector search distance threshold&lt;/cell&gt;
        &lt;cell&gt;0.8&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Reranking&lt;/cell&gt;
        &lt;cell&gt;On&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;Reranking topK&lt;/cell&gt;
        &lt;cell&gt;50&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;References&lt;/cell&gt;
        &lt;cell&gt;Off&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;So without any more delay, here are the results of my not-very-scientific at all benchmark using the experimentation platform inside of Skald.&lt;/p&gt;
    &lt;head rend="h3"&gt;Voyage + Claude&lt;/head&gt;
    &lt;p&gt;This is our default Cloud setup. We use voyage-3-large and rerank-2.5 from Voyage AI as our embedding and reranking models respectively, and we default to Claude Sonnet 3.7 for responses (users can configure the model though).&lt;/p&gt;
    &lt;p&gt;It passed with flying colors.&lt;/p&gt;
    &lt;p&gt;Our LLM-as-a-Judge gave an average score of 9.45 to the responses, and I basically agree with the assessment. All answers were correct, with one missing a few extra bits of context.&lt;/p&gt;
    &lt;head rend="h3"&gt;Voyage + GPT-OSS 20B&lt;/head&gt;
    &lt;p&gt;With the control experiment done, I then moved on to a setup where I kept Voyage as the embeddings provider and reranker, and then used GPT-OSS 20B running on a llama.cpp server on a g5.2xlarge EC2 instance as the LLM.&lt;/p&gt;
    &lt;p&gt;The goal here was to see how well the open-source LLM model itself stacked up against a frontier model accessed via API.&lt;/p&gt;
    &lt;p&gt;And it did great!&lt;/p&gt;
    &lt;p&gt;We don't yet support LLM-as-a-Judge on fully local deployments, so the only score we have here is mine. I scored the answers an average of 9.18 and they were all correct, with two of them just missing a few bits of information or highlighting less relevant information from the context.&lt;/p&gt;
    &lt;head rend="h3"&gt;Fully local + GPT-OSS 20B&lt;/head&gt;
    &lt;p&gt;Lastly, it was time for the moment of truth: running a fully local setup.&lt;/p&gt;
    &lt;p&gt;For this I ran two tests:&lt;/p&gt;
    &lt;p&gt;1. Default sentence transformers embedding and reranking models&lt;/p&gt;
    &lt;p&gt;The most popular open-source models are all-MiniLM-L6-v2 for embeddings and ms-marco-MiniLM-L6-v2 as the reranker, so I used those for my first benchmark.&lt;/p&gt;
    &lt;p&gt;Here the average score was 7.10. Not bad, but definitely not great. However, when we dig into the results, we can get a better understanding of how this setup fails.&lt;/p&gt;
    &lt;p&gt;Basically, it got all point queries right, which are questions where the answer is somewhere in the mess of documents, but can be found from one specific place.&lt;/p&gt;
    &lt;p&gt;Where it failed was:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Non-english query: The embeddings model and the reranker are English-based, so my question in Portuguese obviously got no answer&lt;/item&gt;
      &lt;item&gt;An ambiguous question with very little context ("what's ch")&lt;/item&gt;
      &lt;item&gt;Aggregating information from multiple documents/chunks e.g. it only found 5 out of PostHog's 7 funding rounds, and only a subset of the PostHog competitors that offer session replay (as mentioned in the source data)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;In my view, this is good news. That means that the default options will go a long way and should give you very good performance if your use case is only doing point queries in English. The other great thing is that these models are also fast.&lt;/p&gt;
    &lt;p&gt;Now, if you need to handle ambiguity better, or handle questions in other languages, then this setup is simply not for you.&lt;/p&gt;
    &lt;p&gt;2. Multi-lingual models&lt;/p&gt;
    &lt;p&gt;The next test I did used bge-m3 as the embeddings model and mmarco-mMiniLMv2-L12-H384-v1 as the reranker. The embeddings model is supposedly much better than the one used in the previous test and is also multi-lingual. The reranker on the other hand uses the same cross-encoder from the previous test as the base model but also adds multi-lingual support. The more standard option here would have been the much more popular bge-reranker-v2-m3 model, but I found it to be much slower. I intend to tweak my setup and test it again, however.&lt;/p&gt;
    &lt;p&gt;Anyway, onto the results! I scored it 8.63 on average, which is very good. There were no complete failures, and it handled the question in Portuguese well.&lt;/p&gt;
    &lt;p&gt;The mistakes it made were:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;This new setup also did not do the best job at aggregating information, missing 2 of PostHog's funding rounds, and a couple of its session replay competitors&lt;/item&gt;
      &lt;item&gt;It also answered a question correctly, but added incorrect additional context after it&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;So overall it performed quite well. Again what we what saw was the main problem is when the context needed for the response is scattered across multiple documents. There are various techniques to help with this and we'll be trialing some soon! They haven't been needed on the Cloud version because better models save you from having to add complexity for minimal performance gains, but as we're focused on building a really solid setup for local deploys, we'll be looking into this more and more.&lt;/p&gt;
    &lt;head rend="h2"&gt;Now what?&lt;/head&gt;
    &lt;p&gt;I hope this writeup has provided you with at least some insight and context into building a local RAG, and also the fact that it does work, it can serve a lot of use cases, and that the tendency is for this setup to get better and better as a) models improve b) we get more open-source models across the board, with both being things that we seem to be trending towards.&lt;/p&gt;
    &lt;p&gt;As for us at Skald, we intend to polish this setup further in order to serve even more use cases really well, as well as intend to soon be publishing more legitimate benchmarks for models in the open-source space, from LLMs to rerankers.&lt;/p&gt;
    &lt;p&gt;If you're a company that needs to run AI tooling in air-gapped infrastructure, let's chat -- feel free to email me at yakko [at] useskald [dot] com.&lt;/p&gt;
    &lt;p&gt;Lastly, if you want to get involved, feel free to chat to us over on our GitHub repo (MIT-licensed) or catch us on Slack.&lt;/p&gt;
    &lt;head rend="h2"&gt;Footnotes&lt;/head&gt;
    &lt;p&gt;[1] I used the PostHog website here because the website content is MIT-licensed (yes, wild) and readily-available as markdown on GitHub and having worked there I know a lot of answers off the top of my head making it a great dataset of ~2000 documents that I know well.&lt;/p&gt;
    &lt;p&gt;[2] The questions and answers dataset I used for the experiments was the following:&lt;/p&gt;
    &lt;head&gt;Dataset&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Question&lt;/cell&gt;
        &lt;cell role="head"&gt;Expected answer&lt;/cell&gt;
        &lt;cell role="head"&gt;Comments&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;How many raises did PostHog do?&lt;/cell&gt;
        &lt;cell&gt;PostHog has raised money 7 times: it raised $150k from YCombinator, then did a seed round ($3.025M), a series A ($12M), a series B ($15M), a series C ($10M), a series D ($70M), and a series E ($75M).&lt;/cell&gt;
        &lt;cell&gt;Requires aggregating context from at least 7 documents&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;When did group analytics launch?&lt;/cell&gt;
        &lt;cell&gt;December 16, 2021.&lt;/cell&gt;
        &lt;cell&gt;Point query, multiple mentions to "group analytics" in the source docs&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;Why was the sessions page removed?&lt;/cell&gt;
        &lt;cell&gt;The sessions page was removed because it was confusing and limited in functionality. It was replaced by the 'Recordings' tab.&lt;/cell&gt;
        &lt;cell&gt;Point query, multiple mentions to "sessions" in the source docs&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;What's the difference between a product engineer and other roles?&lt;/cell&gt;
        &lt;cell&gt;Compared to product managers, product engineers focus more on building rather than deep research and planning. When it comes to software engineers, both product and software engineers write code, but software engineers focus on building great software, whereas product engineers focus on building great products.&lt;/cell&gt;
        &lt;cell&gt;Requires aggregating context from multiple docs + there are a ton of mentions of "product engineer" in the source docs&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;What were the main benefits of YC?&lt;/cell&gt;
        &lt;cell&gt;The main benefits of YC were: Network Access, Investor Reviews, Office Hours, Funding Opportunities, Hiring Resources, Angel Investing Opportunities, Accelerated Growth and Experience, Shift in Self-Perception, Customer Acquisition, Product Market Fit, Ambitious Goal Setting, Access to Thought Leaders, Community Support&lt;/cell&gt;
        &lt;cell&gt;Point query&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;quem foi o primeiro investidor da posthogg?&lt;/cell&gt;
        &lt;cell&gt;O primeiro investidor da PostHog foi o YCombinator.&lt;/cell&gt;
        &lt;cell&gt;Question in Portuguese, with PostHog misspelled&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;what posthog competitors also offer session replays&lt;/cell&gt;
        &lt;cell&gt;LogRocket, Smartlook, FullStory, Microsoft Clarity, Contentsquare, Mouseflow, Heap, Pendo, Hotjar, Glassbox, and Amplitude.&lt;/cell&gt;
        &lt;cell&gt;Requires aggregating content from at least 11 docs (more because I actually missed some in my expected answer)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;top tips find client&lt;/cell&gt;
        &lt;cell&gt;1. Leverage your inner circle 2. Join relevant communities 3. Be laser-focused 4. Set achievable goals 5. Frame conversations properly&lt;/cell&gt;
        &lt;cell&gt;Point query, worded weirdly&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;what's ch&lt;/cell&gt;
        &lt;cell&gt;CH most likely refers to ClickHouse, a column-oriented OLAP database.&lt;/cell&gt;
        &lt;cell&gt;Really ambiguous. I meant ClickHouse with my question.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;what is mixedpanel&lt;/cell&gt;
        &lt;cell&gt;Mixpanel is a popular product analytics tool that was founded in 2009&lt;/cell&gt;
        &lt;cell&gt;Mixpanel misspelled as Mixedpanel&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;how was prpoerty filtering made faster?&lt;/cell&gt;
        &lt;cell&gt;Using materialized columns allowed ClickHouse to skip JSON parsing during queries and made queries with property filtering 25x faster.&lt;/cell&gt;
        &lt;cell&gt;Point query with a typo&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46080364</guid><pubDate>Fri, 28 Nov 2025 16:54:56 +0000</pubDate></item><item><title>Molly: An Improved Signal App</title><link>https://molly.im/</link><description>&lt;doc fingerprint="fa4c68be1bd036dc"&gt;
  &lt;main&gt;
    &lt;head rend="h2"&gt;An improved Signal app&lt;/head&gt;
    &lt;p&gt;Molly is an independent Signal fork for Android with improved features:&lt;/p&gt;
    &lt;p&gt; Fully FOSS Contains no proprietary blobs, unlike Signal &lt;/p&gt;
    &lt;p&gt; Encrypted Protects database with Passphrase Encryption &lt;/p&gt;
    &lt;p&gt; Multi-Device Pair multiple devices to a single account &lt;/p&gt;
    &lt;p&gt; Material You Extra theme that follows your device palette &lt;/p&gt;
    &lt;p&gt; UnifiedPush Ungoogled notification system &lt;/p&gt;
    &lt;p&gt; Automatic Locking When you are gone for a set period of time &lt;/p&gt;
    &lt;p&gt; RAM Shredding Securely shreds sensitive data &lt;/p&gt;
    &lt;p&gt; And more New and better features to come &lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46080916</guid><pubDate>Fri, 28 Nov 2025 17:48:25 +0000</pubDate></item><item><title>28M Hacker News comments as vector embedding search dataset</title><link>https://clickhouse.com/docs/getting-started/example-datasets/hackernews-vector-search-dataset</link><description>&lt;doc fingerprint="11938b322ad7669e"&gt;
  &lt;main&gt;
    &lt;div&gt;
      &lt;head rend="h3"&gt;Generate embeddings for search query&lt;/head&gt;
      &lt;p&gt;Sentence Transformers provide local, easy to use embedding models for capturing the semantic meaning of sentences and paragraphs.&lt;/p&gt;
      &lt;p&gt;The dataset in this HackerNews dataset contains vector emebeddings generated from the all-MiniLM-L6-v2 model.&lt;/p&gt;
      &lt;p&gt;An example Python script is provided below to demonstrate how to programmatically generate embedding vectors using &lt;code&gt;sentence_transformers1 Python package. The search embedding vector is then passed as an argument to the [&lt;/code&gt;cosineDistance()&lt;code&gt;](/sql-reference/functions/distance-functions#cosineDistance) function in the &lt;/code&gt;SELECT` query.&lt;/p&gt;
      &lt;div&gt;
        &lt;div&gt;
          &lt;quote&gt;
            &lt;code&gt;from sentence_transformers import SentenceTransformer
import sys

import clickhouse_connect

print("Initializing...")

model = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')

chclient = clickhouse_connect.get_client() # ClickHouse credentials here

while True:
    # Take the search query from user
    print("Enter a search query :")
    input_query = sys.stdin.readline();
    texts = [input_query]

    # Run the model and obtain search vector
    print("Generating the embedding for ", input_query);
    embeddings = model.encode(texts)

    print("Querying ClickHouse...")
    params = {'v1':list(embeddings[0]), 'v2':20}
    result = chclient.query("SELECT id, title, text FROM hackernews ORDER BY cosineDistance(vector, %(v1)s) LIMIT %(v2)s", parameters=params)
    print("Results :")
    for row in result.result_rows:
        print(row[0], row[2][:100])
        print("---------")

&lt;/code&gt;
          &lt;/quote&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;p&gt;An example of running the above Python script and similarity search results are shown below (only 100 characters from each of the top 20 posts are printed):&lt;/p&gt;
      &lt;div&gt;
        &lt;div&gt;
          &lt;quote&gt;
            &lt;code&gt;Initializing...

Enter a search query :
Are OLAP cubes useful

Generating the embedding for  "Are OLAP cubes useful"

Querying ClickHouse...

Results :

27742647 smartmic:
slt2021: OLAP Cube is not dead, as long as you use some form of:&amp;lt;p&amp;gt;1. GROUP BY multiple fi
---------
27744260 georgewfraser:A data mart is a logical organization of data to help humans understand the schema. Wh
---------
27761434 mwexler:&amp;amp;quot;We model data according to rigorous frameworks like Kimball or Inmon because we must r
---------
28401230 chotmat:
erosenbe0: OLAP database is just a copy, replica, or archive of data with a schema designe
---------
22198879 Merick:+1 for Apache Kylin, it&amp;amp;#x27;s a great project and awesome open source community. If anyone i
---------
27741776 crazydoggers:I always felt the value of an OLAP cube was uncovering questions you may not know to as
---------
22189480 shadowsun7:
_Codemonkeyism: After maintaining an OLAP cube system for some years, I&amp;amp;#x27;m not that
---------
27742029 smartmic:
gengstrand: My first exposure to OLAP was on a team developing a front end to Essbase that
---------
22364133 irfansharif:
simo7: I&amp;amp;#x27;m wondering how this technology could work for OLAP cubes.&amp;lt;p&amp;gt;An OLAP cube
---------
23292746 scoresmoke:When I was developing my pet project for Web analytics (&amp;lt;a href="https:&amp;amp;#x2F;&amp;amp;#x2F;github
---------
22198891 js8:It seems that the article makes a categorical error, arguing that OLAP cubes were replaced by co
---------
28421602 chotmat:
7thaccount: Is there any advantage to OLAP cube over plain SQL (large historical database r
---------
22195444 shadowsun7:
lkcubing: Thanks for sharing. Interesting write up.&amp;lt;p&amp;gt;While this article accurately capt
---------
22198040 lkcubing:Thanks for sharing. Interesting write up.&amp;lt;p&amp;gt;While this article accurately captures the issu
---------
3973185 stefanu:
sgt: Interesting idea. Ofcourse, OLAP isn't just about the underlying cubes and dimensions,
---------
22190903 shadowsun7:
js8: It seems that the article makes a categorical error, arguing that OLAP cubes were r
---------
28422241 sradman:OLAP Cubes have been disrupted by Column Stores. Unless you are interested in the history of
---------
28421480 chotmat:
sradman: OLAP Cubes have been disrupted by Column Stores. Unless you are interested in the
---------
27742515 BadInformatics:
quantified: OP posts with inverted condition: ‚ÄúOLAP != OLAP Cube‚Äù is the actual titl
---------
28422935 chotmat:
rstuart4133: I remember hearing about OLAP cubes donkey&amp;amp;#x27;s years ago (probably not far
---------
&lt;/code&gt;
          &lt;/quote&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;head rend="h2"&gt;Summarization demo application&lt;/head&gt;
      &lt;p&gt;The example above demonstrated semantic search and document retrieval using ClickHouse.&lt;/p&gt;
      &lt;p&gt;A very simple but high potential generative AI example application is presented next.&lt;/p&gt;
      &lt;p&gt;The application performs the following steps:&lt;/p&gt;
      &lt;list class="custom-ol" rend="ol"&gt;
        &lt;item class="custom-li"&gt;Accepts a topic as input from the user&lt;/item&gt;
        &lt;item class="custom-li"&gt;Generates an embedding vector for the topic by using the &lt;code&gt;SentenceTransformers&lt;/code&gt; with model &lt;code&gt;all-MiniLM-L6-v2&lt;/code&gt;&lt;/item&gt;
        &lt;item class="custom-li"&gt;Retrieves highly relevant posts/comments using vector similarity search on the &lt;code&gt;hackernews&lt;/code&gt; table&lt;/item&gt;
        &lt;item class="custom-li"&gt;Uses &lt;code&gt;LangChain&lt;/code&gt; and OpenAI &lt;code&gt;gpt-3.5-turbo&lt;/code&gt; Chat API to summarize the content retrieved in step #3.
The posts/comments retrieved in step #3 are passed as context to the Chat API and are the key link in Generative AI.&lt;/item&gt;
      &lt;/list&gt;
      &lt;p&gt;An example from running the summarization application is first listed below, followed by the code for the summarization application. Running the application requires an OpenAI API key to be set in the environment variable &lt;code&gt;OPENAI_API_KEY&lt;/code&gt;. The OpenAI API key can be obtained after registering at https://platform.openai.com.&lt;/p&gt;
      &lt;p&gt;This application demonstrates a Generative AI use-case that is applicable to multiple enterprise domains like : customer sentiment analysis, technical support automation, mining user conversations, legal documents, medical records, meeting transcripts, financial statements, etc&lt;/p&gt;
      &lt;div&gt;
        &lt;div&gt;
          &lt;quote&gt;
            &lt;code&gt;$ python3 summarize.py

Enter a search topic :
ClickHouse performance experiences

Generating the embedding for ----&amp;gt;  ClickHouse performance experiences

Querying ClickHouse to retrieve relevant articles...

Initializing chatgpt-3.5-turbo model...

Summarizing search results retrieved from ClickHouse...

Summary from chatgpt-3.5:
The discussion focuses on comparing ClickHouse with various databases like TimescaleDB, Apache Spark,
AWS Redshift, and QuestDB, highlighting ClickHouse's cost-efficient high performance and suitability
for analytical applications. Users praise ClickHouse for its simplicity, speed, and resource efficiency
in handling large-scale analytics workloads, although some challenges like DMLs and difficulty in backups
are mentioned. ClickHouse is recognized for its real-time aggregate computation capabilities and solid
engineering, with comparisons made to other databases like Druid and MemSQL. Overall, ClickHouse is seen
as a powerful tool for real-time data processing, analytics, and handling large volumes of data
efficiently, gaining popularity for its impressive performance and cost-effectiveness.
&lt;/code&gt;
          &lt;/quote&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;p&gt;Code for the above application :&lt;/p&gt;
      &lt;div&gt;
        &lt;div&gt;
          &lt;quote&gt;
            &lt;code&gt;print("Initializing...")

import sys
import json
import time
from sentence_transformers import SentenceTransformer

import clickhouse_connect

from langchain.docstore.document import Document
from langchain.text_splitter import CharacterTextSplitter
from langchain.chat_models import ChatOpenAI
from langchain.prompts import PromptTemplate
from langchain.chains.summarize import load_summarize_chain
import textwrap
import tiktoken

def num_tokens_from_string(string: str, encoding_name: str) -&amp;gt; int:
    encoding = tiktoken.encoding_for_model(encoding_name)
    num_tokens = len(encoding.encode(string))
    return num_tokens

model = SentenceTransformer('sentence-transformers/all-MiniLM-L6-v2')

chclient = clickhouse_connect.get_client(compress=False) # ClickHouse credentials here

while True:
    # Take the search query from user
    print("Enter a search topic :")
    input_query = sys.stdin.readline();
    texts = [input_query]

    # Run the model and obtain search or reference vector
    print("Generating the embedding for ----&amp;gt; ", input_query);
    embeddings = model.encode(texts)

    print("Querying ClickHouse...")
    params = {'v1':list(embeddings[0]), 'v2':100}
    result = chclient.query("SELECT id,title,text FROM hackernews ORDER BY cosineDistance(vector, %(v1)s) LIMIT %(v2)s", parameters=params)

    # Just join all the search results
    doc_results = ""
    for row in result.result_rows:
        doc_results = doc_results + "\n" + row[2]

    print("Initializing chatgpt-3.5-turbo model")
    model_name = "gpt-3.5-turbo"

    text_splitter = CharacterTextSplitter.from_tiktoken_encoder(
        model_name=model_name
    )

    texts = text_splitter.split_text(doc_results)

    docs = [Document(page_content=t) for t in texts]

    llm = ChatOpenAI(temperature=0, model_name=model_name)

    prompt_template = """
Write a concise summary of the following in not more than 10 sentences:


{text}


CONSCISE SUMMARY :
"""

    prompt = PromptTemplate(template=prompt_template, input_variables=["text"])

    num_tokens = num_tokens_from_string(doc_results, model_name)

    gpt_35_turbo_max_tokens = 4096
    verbose = False

    print("Summarizing search results retrieved from ClickHouse...")

    if num_tokens &amp;lt;= gpt_35_turbo_max_tokens:
        chain = load_summarize_chain(llm, chain_type="stuff", prompt=prompt, verbose=verbose)
    else:
        chain = load_summarize_chain(llm, chain_type="map_reduce", map_prompt=prompt, combine_prompt=prompt, verbose=verbose)

    summary = chain.run(docs)

    print(f"Summary from chatgpt-3.5: {summary}")
&lt;/code&gt;
          &lt;/quote&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46081053</guid><pubDate>Fri, 28 Nov 2025 18:02:04 +0000</pubDate></item><item><title>Imgur geo-blocked the UK, so I geo-unblocked my network</title><link>https://blog.tymscar.com/posts/imgurukproxy/</link><description>&lt;doc fingerprint="b582e1f56725aa92"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Imgur Geo-Blocked the UK, So I Geo-Unblocked My Entire Network&lt;/head&gt;
    &lt;p&gt;Imgur decided to block UK users. Honestly? I don‚Äôt really care that much. I haven‚Äôt actively browsed the site in years. But it used to be everywhere. Back when Reddit embedded everything on Imgur, maybe fifteen years ago, it was genuinely useful. Then Reddit built their own image hosting, Discord did the same, and Imgur slowly faded into the background.&lt;/p&gt;
    &lt;p&gt;Except it never fully disappeared. And since the block, I keep stumbling across Imgur links that just show ‚Äúunavailable.‚Äù It‚Äôs mildly infuriating.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Minecraft shader problem#&lt;/head&gt;
    &lt;p&gt;Here‚Äôs a concrete example. I was playing Minecraft with some work colleagues and wanted to try different shaders. Most shader pages embed preview images hosted on Imgur. So I‚Äôd click through shader after shader, and every single preview was just gone. I couldn‚Äôt see what any of them looked like without the images.&lt;/p&gt;
    &lt;p&gt;This kind of thing happens constantly now. Old forum posts, Reddit threads, documentation pages, random project READMEs. Imgur links are still scattered across the internet, and in the UK, they‚Äôre all broken.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why I didn‚Äôt just install a VPN#&lt;/head&gt;
    &lt;p&gt;The obvious solution is to use a VPN. Change your location, problem solved. But I have a few issues with that approach.&lt;/p&gt;
    &lt;p&gt;First, I just upgraded to 2.5 Gbps internet and I don‚Äôt want to route all my traffic through a VPN and take the speed hit. I have this bandwidth for a reason.&lt;/p&gt;
    &lt;p&gt;Second, even if I installed a VPN on my main machine, what about my phone? My laptop? My desktop? Every device would need the VPN running, and I‚Äôd have to remember to connect it before browsing. It‚Äôs messy.&lt;/p&gt;
    &lt;p&gt;I wanted something cleaner: a solution that works for every device on my network, automatically, without any client-side configuration.&lt;/p&gt;
    &lt;head rend="h2"&gt;The network-level approach#&lt;/head&gt;
    &lt;p&gt;I already run a homelab with Traefik as my reverse proxy, Pi-hole for DNS, and everything declaratively configured with NixOS. If you‚Äôve read my previous post on Docker containers with secrets, you‚Äôll recognise the pattern.&lt;/p&gt;
    &lt;p&gt;The idea was simple: intercept all requests to &lt;code&gt;i.imgur.com&lt;/code&gt; at the DNS level, route them through a VPN-connected container, and serve the images back. Every device on my network automatically uses Pi-hole for DNS via DHCP, so this would be completely transparent.&lt;/p&gt;
    &lt;p&gt;Here‚Äôs the flow:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Device requests &lt;code&gt;i.imgur.com&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;Pi-hole returns my Traefik instance‚Äôs IP instead&lt;/item&gt;
      &lt;item&gt;Traefik sees the SNI hostname and routes to Gluetun&lt;/item&gt;
      &lt;item&gt;Gluetun tunnels the request through a VPN&lt;/item&gt;
      &lt;item&gt;Nginx (attached to Gluetun‚Äôs network) proxies to the real Imgur&lt;/item&gt;
      &lt;item&gt;Image comes back through the tunnel to the device&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Why Nginx when I already have Traefik?#&lt;/head&gt;
    &lt;p&gt;Good question. Gluetun isn‚Äôt a reverse proxy. It‚Äôs a container that provides VPN connectivity to other containers attached to its network namespace. So I needed something inside Gluetun‚Äôs network to actually handle the proxying. Nginx was the simplest choice.&lt;/p&gt;
    &lt;p&gt;The Nginx config is minimal. It just does TCP passthrough with SNI:&lt;/p&gt;
    &lt;code&gt;user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
}

stream {
    resolver 127.0.0.1 valid=30s;
    resolver_timeout 5s;

    server {
        listen 443;
        ssl_preread on;
        proxy_pass i.imgur.com:443;
        proxy_connect_timeout 10s;
        proxy_timeout 60s;
    }
}
&lt;/code&gt;
    &lt;p&gt;This listens on port 443, reads the SNI header to confirm the destination, and passes the connection through to the real &lt;code&gt;i.imgur.com&lt;/code&gt;. The TLS handshake happens end-to-end; Nginx never sees the decrypted traffic.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Docker setup#&lt;/head&gt;
    &lt;p&gt;The compose file runs two containers. Gluetun handles the VPN connection, and Nginx attaches to Gluetun‚Äôs network:&lt;/p&gt;
    &lt;code&gt;version: '3.8'

services:
  gluetun:
    image: qmcgaw/gluetun:latest
    container_name: gluetun
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    environment:
      - VPN_SERVICE_PROVIDER=${VPN_SERVICE_PROVIDER}
      - VPN_TYPE=wireguard
      - WIREGUARD_PRIVATE_KEY=${WIREGUARD_PRIVATE_KEY}
      - SERVER_COUNTRIES=${SERVER_COUNTRIES}
      - FIREWALL=on
      - FIREWALL_INPUT_PORTS=443
      - FIREWALL_OUTBOUND_SUBNETS=10.0.0.0/8
      - DOT=on
      - DOT_PROVIDERS=cloudflare
      - HEALTH_VPN_DURATION_INITIAL=30s
    volumes:
      - ./gluetun:/gluetun
    restart: unless-stopped
    networks:
      - proxy
    healthcheck:
      test: ["CMD", "/gluetun-entrypoint", "healthcheck"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s

  imgur-proxy:
    image: nginx:alpine
    container_name: imgur-proxy
    depends_on:
      gluetun:
        condition: service_healthy
    network_mode: "service:gluetun"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
    restart: unless-stopped

networks:
  proxy:
    external: true
&lt;/code&gt;
    &lt;p&gt;The key detail is &lt;code&gt;network_mode: "service:gluetun"&lt;/code&gt;. This makes Nginx share Gluetun‚Äôs network stack, so all its traffic automatically goes through the VPN tunnel.&lt;/p&gt;
    &lt;p&gt;I‚Äôm not going to mention which VPN provider I use. It‚Äôs one of the major ones with WireGuard support, but honestly I‚Äôm not thrilled with it. Use whatever you have.&lt;/p&gt;
    &lt;head rend="h2"&gt;Traefik routing#&lt;/head&gt;
    &lt;p&gt;The final piece is telling Traefik to route &lt;code&gt;i.imgur.com&lt;/code&gt; traffic to the Gluetun container. This uses TCP routing with TLS passthrough:&lt;/p&gt;
    &lt;code&gt;tcp:
  routers:
    imgur-router:
      rule: "HostSNI(`i.imgur.com`)"
      entryPoints:
        - https
      service: imgur-service
      tls:
        passthrough: true
  services:
    imgur-service:
      loadBalancer:
        servers:
          - address: "gluetun:443"
&lt;/code&gt;
    &lt;p&gt;The &lt;code&gt;passthrough: true&lt;/code&gt; is important. It means Traefik doesn‚Äôt terminate TLS; it just inspects the SNI header and forwards the connection.&lt;/p&gt;
    &lt;head rend="h2"&gt;NixOS integration#&lt;/head&gt;
    &lt;p&gt;Following the same pattern from my Docker with secrets post, I created a systemd service that runs the compose stack with Agenix-managed secrets:&lt;/p&gt;
    &lt;code&gt;{ pkgs, config, ... }:
let
  docker-env = config.age.secrets.docker-imgur-proxy.path;
in
{
  systemd.services.imgur-proxy = {
    description = "Imgur Proxy with VPN";
    after = [
      "network.target"
      "docker.service"
      "docker-create-proxy-network.service"
    ];
    wants = [
      "docker.service"
      "docker-create-proxy-network.service"
    ];
    serviceConfig = {
      ExecStart = "${pkgs.docker}/bin/docker compose --env-file ${docker-env} -f docker-compose.yml up --force-recreate";
      ExecStop = "${pkgs.docker}/bin/docker compose -f docker-compose.yml down";
      WorkingDirectory = "/home/tymscar/dotfiles/apps/nixos/docker/imgur-proxy";
      Restart = "always";
    };
    wantedBy = [ "multi-user.target" ];
  };
}
&lt;/code&gt;
    &lt;p&gt;The VPN credentials are stored encrypted with Agenix, so my entire dotfiles repo stays public while keeping secrets safe.&lt;/p&gt;
    &lt;head rend="h2"&gt;The result#&lt;/head&gt;
    &lt;p&gt;Now when any device on my network requests an Imgur image, it works. My phone, my laptop, guest devices, everything. No VPN apps to install, no browser extensions, no manual configuration. Pi-hole intercepts the DNS, Traefik routes the connection, and Gluetun tunnels it through a non-UK exit point.&lt;/p&gt;
    &lt;p&gt;The latency increase is negligible for loading images, and it only affects Imgur traffic. Everything else still goes direct at full speed.&lt;/p&gt;
    &lt;p&gt;Is this overkill for viewing the occasional Imgur image? Probably. But it‚Äôs a clean solution that requires minimal ongoing maintenance, and it scratches the homelab itch. Plus I can finally see what those Minecraft shaders look like.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46081188</guid><pubDate>Fri, 28 Nov 2025 18:15:50 +0000</pubDate></item><item><title>The original ABC language, Python's predecessor (1991)</title><link>https://github.com/gvanrossum/abc-unix</link><description>&lt;doc fingerprint="2fe8520fe9cb456a"&gt;
  &lt;main&gt;
    &lt;p&gt;ABC was Python's most direct predecessor; I worked on it from around 1983-1986.&lt;/p&gt;
    &lt;p&gt;I downloaded these sources from cwi.nl, specifically the abc-unix tarball.&lt;/p&gt;
    &lt;p&gt;Another copy of the ABC sources lives in Luciano Ramalho's GitHub. I hope one day to compare the two trees and unify them.&lt;/p&gt;
    &lt;p&gt;Most files have 1991 as their latest modification time in the tar ball; a few have 1996 or 2021.&lt;/p&gt;
    &lt;p&gt;The old README file has build instructions.&lt;/p&gt;
    &lt;p&gt;The current sources assume a 32-bit system where int and pointers have the same size. I hope to eventually upgrade the source code to work on 64-bit systems too (where int is 32 bits and pointers are 64 bits).&lt;/p&gt;
    &lt;p&gt;CWI never put a license on ABC, but it says:&lt;/p&gt;
    &lt;p&gt;Copyright (c) Stichting Mathematisch Centrum, Amsterdam, 1988-2011.&lt;/p&gt;
    &lt;p&gt;I'll try to negotiate with Steven Pemberton eventually (hopefully MIT).&lt;/p&gt;
    &lt;p&gt;Eddy Boeve, Frank van Dijk, Leo Geurts, Timo Krijnen, Lambert Meertens, Steven Pemberton, Guido van Rossum.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Leo Geurts, Lambert Meertens and Steven Pemberton, The ABC Programmer's Handbook, Prentice-Hall, Englewood Cliffs, New Jersey, 1990, ISBN 0-13- 000027-2.&lt;/item&gt;
      &lt;item&gt;Steven Pemberton, An Alternative Simple Language and Environment for PCs, IEEE Software, Vol. 4, No. 1, January 1987, pp. 56-64. http://www.cwi.nl/~steven/abc.html&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Steven Pemberton's home page. https://homepages.cwi.nl/~steven/abc/&lt;/item&gt;
      &lt;item&gt;Lambert Meertens, The Origins of Python. https://inference-review.com/article/the-origins-of-python&lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46082204</guid><pubDate>Fri, 28 Nov 2025 19:58:13 +0000</pubDate></item><item><title>How good engineers write bad code at big companies</title><link>https://www.seangoedecke.com/bad-code-at-big-companies/</link><description>&lt;doc fingerprint="bf4d91149e3463d6"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;How good engineers write bad code at big companies&lt;/head&gt;
    &lt;p&gt;Every couple of years somebody notices that large tech companies sometimes produce surprisingly sloppy code. If you haven‚Äôt worked at a big company, it might be hard to understand how this happens. Big tech companies pay well enough to attract many competent engineers. They move slowly enough that it looks like they‚Äôre able to take their time and do solid work. How does bad code happen?&lt;/p&gt;
    &lt;head rend="h3"&gt;Most code changes are made by relative beginners&lt;/head&gt;
    &lt;p&gt;I think the main reason is that big companies are full of engineers working outside their area of expertise. The average big tech employee stays for only a year or two1. In fact, big tech compensation packages are typically designed to put a four-year cap on engineer tenure: after four years, the initial share grant is fully vested, causing engineers to take what can be a 50% pay cut. Companies do extend temporary yearly refreshes, but it obviously incentivizes engineers to go find another job where they don‚Äôt have to wonder if they‚Äôre going to get the other half of their compensation each year.&lt;/p&gt;
    &lt;p&gt;If you count internal mobility, it‚Äôs even worse. The longest I have ever stayed on a single team or codebase was three years, near the start of my career. I expect to be re-orged at least every year, and often much more frequently.&lt;/p&gt;
    &lt;p&gt;However, the average tenure of a codebase in a big tech company is a lot longer than that. Many of the services I work on are a decade old or more, and have had many, many different owners over the years. That means many big tech engineers are constantly ‚Äúfiguring it out‚Äù. A pretty high percentage of code changes are made by ‚Äúbeginners‚Äù: people who have onboarded to the company, the codebase, or even the programming language in the past six months.&lt;/p&gt;
    &lt;head rend="h3"&gt;Old hands&lt;/head&gt;
    &lt;p&gt;To some extent, this problem is mitigated by ‚Äúold hands‚Äù: engineers who happen to have been in the orbit of a particular system for long enough to develop real expertise. These engineers can give deep code reviews and reliably catch obvious problems. But relying on ‚Äúold hands‚Äù has two problems.&lt;/p&gt;
    &lt;p&gt;First, this process is entirely informal. Big tech companies make surprisingly little effort to develop long-term expertise in individual systems, and once they‚Äôve got it they seem to barely care at all about retaining it. Often the engineers in question are moved to different services, and have to either keep up their ‚Äúold hand‚Äù duties on an effectively volunteer basis, or abandon them and become a relative beginner on a brand new system.&lt;/p&gt;
    &lt;p&gt;Second, experienced engineers are always overloaded. It is a busy job being one of the few engineers who has deep expertise on a particular service. You don‚Äôt have enough time to personally review every software change, or to be actively involved in every decision-making process. Remember that you also have your own work to do: if you spend all your time reviewing changes and being involved in discussions, you‚Äôll likely be punished by the company for not having enough individual output.&lt;/p&gt;
    &lt;head rend="h3"&gt;The median productive engineer&lt;/head&gt;
    &lt;p&gt;Putting all this together, what does the median productive2 engineer at a big tech company look like? They are usually:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;competent enough to pass the hiring bar and be able to do the work, but either&lt;/item&gt;
      &lt;item&gt;working on a codebase or language that is largely new to them, or&lt;/item&gt;
      &lt;item&gt;trying to stay on top of a flood of code changes while also juggling their own work.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;They are almost certainly working to a deadline, or to a series of overlapping deadlines for different projects. In other words, they are trying to do their best in an environment that is not set up to produce quality code.&lt;/p&gt;
    &lt;p&gt;That‚Äôs how ‚Äúobviously‚Äù bad code happens. For instance, a junior engineer picks up a ticket for an annoying bug in a codebase they‚Äôre barely familiar with. They spend a few days figuring it out and come up with a hacky solution. One of the more senior ‚Äúold hands‚Äù (if they‚Äôre lucky) glances over it in a spare half-hour, vetoes it, and suggests something slightly better that would at least work. The junior engineer implements that as best they can, tests that it works, it gets briefly reviewed and shipped, and everyone involved immediately moves on to higher-priority work. Five years later somebody notices this3 and thinks ‚Äúwow, that‚Äôs hacky - how did such bad code get written at such a big software company‚Äù?&lt;/p&gt;
    &lt;head rend="h3"&gt;Big tech companies are fine with this&lt;/head&gt;
    &lt;p&gt;I have written a lot about the internal tech company dynamics that contribute to this. Most directly, in Seeing like a software company I argue that big tech companies consistently prioritize internal legibility - the ability to see at a glance who‚Äôs working on what and to change it at will - over productivity. Big companies know that treating engineers as fungible and moving them around destroys their ability to develop long-term expertise in a single codebase. That‚Äôs a deliberate tradeoff. They‚Äôre giving up some amount of expertise and software quality in order to gain the ability to rapidly deploy skilled engineers onto whatever the problem-of-the-month is.&lt;/p&gt;
    &lt;p&gt;I don‚Äôt know if this is a good idea or a bad idea. It certainly seems to be working for the big tech companies, particularly now that ‚Äúhow fast can you pivot to something AI-related‚Äù is so important. But if you‚Äôre doing this, then of course you‚Äôre going to produce some genuinely bad code. That‚Äôs what happens when you ask engineers to rush out work on systems they‚Äôre unfamiliar with.&lt;/p&gt;
    &lt;p&gt;Individual engineers are entirely powerless to alter this dynamic. This is particularly true in 2025, when the balance of power has tilted away from engineers and towards tech company leadership. The most you can do as an individual engineer is to try and become an ‚Äúold hand‚Äù: to develop expertise in at least one area, and to use it to block the worst changes and steer people towards at least minimally-sensible technical decisions. But even that is often swimming against the current of the organization, and if inexpertly done can cause you to get PIP-ed or worse.&lt;/p&gt;
    &lt;head rend="h3"&gt;Pure and impure engineering&lt;/head&gt;
    &lt;p&gt;I think a lot of this comes down to the distinction between pure and impure software engineering. To pure engineers - engineers working on self-contained technical projects, like a programming language - the only explanation for bad code is incompetence. But impure engineers operate more like plumbers or electricians. They‚Äôre working to deadlines on projects that are relatively new to them, and even if their technical fundamentals are impeccable, there‚Äôs always something about the particular setup of this situation that‚Äôs awkward or surprising. To impure engineers, bad code is inevitable. As long as the overall system works well enough, the project is a success.&lt;/p&gt;
    &lt;p&gt;At big tech companies, engineers don‚Äôt get to decide if they‚Äôre working on pure or impure engineering work. It‚Äôs not their codebase! If the company wants to move you from working on database infrastructure to building the new payments system, they‚Äôre fully entitled to do that. The fact that you might make some mistakes in an unfamiliar system - or that your old colleagues on the database infra team might suffer without your expertise - is a deliberate tradeoff being made by the company, not the engineer.&lt;/p&gt;
    &lt;p&gt;It‚Äôs fine to point out examples of bad code at big companies. If nothing else, it can be an effective way to get those specific examples fixed, since execs usually jump at the chance to turn bad PR into good PR. But I think it‚Äôs a mistake4 to attribute primary responsibility to the engineers at those companies. If you could wave a magic wand and make every engineer twice as strong, you would still have bad code, because almost nobody can come into a brand new codebase and quickly make changes with zero mistakes. The root cause is that most big company engineers are forced to do most of their work in unfamiliar codebases.&lt;/p&gt;
    &lt;p&gt;edit: this post got lots of comments on both Hacker News and lobste.rs.&lt;/p&gt;
    &lt;p&gt;It was surprising to me that many commenters find this point of view unplesasantly nihilistic. I consider myself fairly optimistic about my work. In fact, I meant this post as a rousing defence of big tech software engineers from their critics! Still, I found this response blog post to be an excellent articulation of the ‚Äúthis is too cynical‚Äù position, and will likely write a followup post about it soon. If you can‚Äôt wait, I wrote a bit on this topic at the start of 2025 in Is it cynical to do what your manager wants?.&lt;/p&gt;
    &lt;p&gt;Some Hacker News commenters had alternate theories for why bad code happens: lack of motivation, deliberately demoralizing engineers so they won‚Äôt unionize, or just purely optimizing for speed. I don‚Äôt find these compelling, based on my own experience. Many of my colleagues are highly motivated, and I just don‚Äôt believe any tech company is deliberately trying to make its engineers demoralized and unhappy.&lt;/p&gt;
    &lt;p&gt;A few readers disagreed with me about RSUs providing an incentive to leave, because their companies give stock refreshers. I don‚Äôt know about this. I get refreshers too, but if they‚Äôre not in the contract, then I don‚Äôt think it matters - the company can decide not to give you 50% of your comp at-will by just pausing the refreshers, which is an incentive to move jobs so it‚Äôs locked in for four more years.&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;&lt;p&gt;I struggled to find a good original source on this. There‚Äôs a 2013 PayScale report citing a 1.1 year median turnover at Google, which seems low.&lt;/p&gt;‚Ü©&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Many engineers at big tech companies are not productive, but that‚Äôs a post all to itself. I don‚Äôt want to get into it here for two reasons. First, I think competent engineers produce enough bad code that it‚Äôs fine to be a bit generous and just scope the discussion to them. Second, even if an incompetent engineer wrote the code, there‚Äôs almost always competent engineers who could have reviewed it, and the question of why that didn‚Äôt happen is still interesting.&lt;/p&gt;‚Ü©&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;The example I‚Äôm thinking of here is not the recent GitHub Actions one, which I have no first-hand experience of. I can think of at least ten separate instances of this happening to me.&lt;/p&gt;‚Ü©&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;In my view, mainly a failure of imagination: thinking that your own work environment must be pretty similar to everyone else‚Äôs.&lt;/p&gt;‚Ü©&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;If you liked this post, consider subscribing to email updates about my new posts, or sharing it on Hacker News. Here's a preview of a related post that shares tags with this one.&lt;/p&gt;
    &lt;quote&gt;&lt;p&gt;How I influence tech company politics as a staff software engineer&lt;/p&gt;&lt;p&gt;Many software engineers are fatalistic about company politics. They believe that it‚Äôs pointless to get involved, because:&lt;/p&gt;&lt;p&gt;The general idea here is that software engineers are simply not equipped to play the game at the same level as real political operators. This is true! It would be a terrible mistake for a software engineer to think that you ought to start scheming and plotting like you‚Äôre in Game of Thrones. Your schemes will be immediately uncovered and repurposed to your disadvantage and other people‚Äôs gain. Scheming takes practice and power, and neither of those things are available to software engineers.&lt;/p&gt;&lt;lb/&gt;Continue reading...&lt;/quote&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46082223</guid><pubDate>Fri, 28 Nov 2025 19:59:32 +0000</pubDate></item><item><title>Electron vs. Tauri</title><link>https://www.dolthub.com/blog/2025-11-13-electron-vs-tauri/</link><description>&lt;doc fingerprint="a50a94511423a794"&gt;
  &lt;main&gt;
    &lt;p&gt;The Dolt Workbench is an open-source SQL workbench supporting MySQL, Postgres, Dolt, and Doltgres databases. We built the workbench using Electron, which is a popular framework that allows you to convert web apps built with traditional web technologies like HTML, CSS, and Javascript to desktop applications. Since the workbench shares much in common with DoltHub and Hosted Dolt, the architecture is very similar to those products. That is, the workbench uses Next.js for the frontend with an additional GraphQL layer that handles database interactions. For this reason, it made a lot of sense to use Electron to get the desktop version of our application up and running.&lt;/p&gt;
    &lt;p&gt;That said, Electron comes with a few rather significant drawbacks, and those drawbacks have started to become more apparent as the workbench has matured. Because of this, I spent some time exploring Tauri, a newer framework that supports the same web-to-desktop use case as Electron. In this article, we√¢ll discuss how well Electron and Tauri integrate with the workbench, and weigh some pros and cons between the two frameworks.&lt;/p&gt;
    &lt;head rend="h2"&gt;Next.js Support#&lt;/head&gt;
    &lt;p&gt;Next.js doesn√¢t translate very cleanly to a desktop application context. This is primarily due to the framework√¢s architecture around server-side rendering and API routing features. In a desktop app, there√¢s no application server interacting with a client; we just need to render HTML, CSS, and JavaScript in a window. For these reasons, Electron only loosely supports Next.js applications. That√¢s not to say you can√¢t build an Electron app with Next.js, but it requires some workarounds to make it function properly. One of the more popular workarounds is a project called Nextron, which aims to wire Next.js applications to the Electron framework and streamline the build process. This is the project we use for the workbench. The issue is that, at the time of writing, it appears that Nextron is no longer being maintained, and we started hitting a few bugs with it.&lt;/p&gt;
    &lt;p&gt;Tauri is largely frontend-framework agnostic. For Next, specifically, you still can√¢t use the server-side features, but Tauri makes the integration process much simpler by relying on Next√¢s static-site generation capabilities. To make a Next app work with Tauri, you just need to set &lt;code&gt;output: 'export'&lt;/code&gt; in your Next configuration file, and Tauri handles the rest.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Webview#&lt;/head&gt;
    &lt;p&gt;The biggest difference between Electron and Tauri comes from how they render the UI. The Electron framework comes with a full Chromium browser engine bundled in your application, which is the same engine that backs Google Chrome. This is useful because it means you don√¢t have to worry about browser compatibility issues. Regardless of the end user√¢s machine or architecture, the same Chromium instance renders your application UI. This results in a very standardized experience that ensures your app will look the same regardless of where it√¢s running. However, this also results in a fair amount of bloat. For the vast majority of desktop apps, a full Chromium browser engine is overkill. Even the simplest √¢Hello World√¢ applications using Electron can run you up to 150 megabytes of disk space.&lt;/p&gt;
    &lt;p&gt;Tauri solves this problem by leveraging the system√¢s native webview. Instead of bundling a full browser engine, Tauri uses a library called WRY, which provides a cross-platform interface to the appropriate webview for the operating system. As you√¢d expect, this makes Tauri apps far more lightweight. The downside here is that you no longer have a hard guarantee on compatibility. From what I can tell, however, this mostly seems to be a non-issue. Compatibility issues across system webviews are exceedingly rare, especially for the major operating systems.&lt;/p&gt;
    &lt;head rend="h2"&gt;Node.js vs. Rust#&lt;/head&gt;
    &lt;p&gt;Another major difference between the two frameworks is how they handle the √¢main√¢ process. This refers to the backend process that orchestrates the application windows, menus, and other components of a desktop app that require interaction with system APIs. In Electron, the main process runs in a Node.js environment. This means you get access to all the typical Node APIs, you can import things like normal, and, perhaps most importantly, you can write your Electron-specific code in pure JavaScript. This is a huge bonus for Electron√¢s target audience: web developers.&lt;/p&gt;
    &lt;p&gt;Tauri, on the other hand, uses Rust. All the framework code and the main process entrypoint are written in Rust. Obviously, this makes it a bit less accessible to the average web developer. That said, Tauri provides a fairly robust set of JavaScript APIs to interact with the Rust layer. For most applications, these APIs will be sufficient to do what you need to do. In the case of the workbench, I was able to fully replicate the functionality of the Electron version using the JavaScript APIs and some minimal Rust code.&lt;/p&gt;
    &lt;p&gt;In my experience, I found the Tauri APIs to fit more naturally in our application code. With Electron, if you need the main process to do something, you must always use inter-process communication, even for the simplest of tasks. If you want to write to a file on the host machine, for instance, your frontend needs to send a signal to the Electron main process, which will then spawn a new process and run the function you wrote that performs the write. With Tauri, you can just use Tauri√¢s filesystem API directly in your application code. Under the hood, the same sort of IPC pattern is happening, but I think the Tauri abstraction is a bit nicer.&lt;/p&gt;
    &lt;head rend="h2"&gt;Sidecars#&lt;/head&gt;
    &lt;p&gt;Since Electron runs on Node.js, it also bundles a full Node.js runtime with your application. This comes with some pros and cons. For the workbench, specifically, this is beneficial because the GraphQL layer is itself a separate Node.js application that needs to run alongside the frontend. Since Electron ships with Node.js, this means we can directly spin up the GraphQL server from the Electron main process using the Node runtime. This eliminates a lot of the headache associated with bundling and running a typical sidecar process. For instance, our app also ships with a copy of Dolt, which allows users to start up local Dolt servers directly from the workbench. To make this work, we have to bundle the appropriate Dolt binary with each workbench release that corresponds to the correct architecture. Without the Node runtime, we√¢d have to do something similar for the GraphQL layer.&lt;/p&gt;
    &lt;p&gt;With Tauri, this is exactly the problem we run into. To get around it, we need to compile the GraphQL server into a binary using a tool like &lt;code&gt;pkg&lt;/code&gt;, then run it as a sidecar the same way we run Dolt. Thankfully, this seems to be a fairly common use case for Tauri applications, and they have a useful guide on how to run Node.js apps as a sidecar.&lt;/p&gt;
    &lt;p&gt;It√¢s also worth mentioning that the full Node.js runtime is quite heavy, which also contributes to bloated Electron app sizes. After building the workbench using both Electron and Tauri, the difference in size was substantial. The left is the Electron version and the right is Tauri:&lt;/p&gt;
    &lt;head rend="h2"&gt;Limitations#&lt;/head&gt;
    &lt;p&gt;After replicating the workbench√¢s functionality in Tauri, we√¢re holding off on making the full transition for a couple reasons:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Lack of support for .appx and .msix bundles on Windows - Currently, Tauri only support .exe and .msi bundles on Windows. This means your Microsoft Store entry will only link to the unpacked application. The workbench is currently bundled and published using the .appx format. To address this, we would need to take down the workbench entirely from the Microsoft store and create a new application that uses the .exe format.&lt;/item&gt;
      &lt;item&gt;Issues with MacOS universal binaries - This is more an annoyance than a bug, but I ran into a few issues related to codesigning universal binaries for MacOS. Namely, Tauri doesn√¢t seem to be able to create Mac universal binaries from their arm64 and x64 subcomponents. It also seems to be codesigning the Mac builds twice.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Neither of these are hard blockers, but they√¢re annoying enough that I√¢m holding off on migrating until they√¢re resolved or our issues with Nextron become more problematic. For now, I√¢m leaving my branch with the migration open and hope to revisit soon. If you√¢re on the Tauri team, let us know if you have solutions!&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusion#&lt;/head&gt;
    &lt;p&gt;Overall, I√¢m impressed with Tauri. It eliminates much of the classic Electron bloat and integrates naturally with our existing codebase. If you√¢re curious about Tauri or the Dolt Workbench, let us know on Discord.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46082291</guid><pubDate>Fri, 28 Nov 2025 20:06:30 +0000</pubDate></item><item><title>Flight disruption warning as Airbus requests modifications to 6k planes</title><link>https://www.bbc.com/news/live/cvg4y6g74ert</link><description>&lt;doc fingerprint="7d1bddd78b37b35b"&gt;
  &lt;main&gt;
    &lt;head rend="h3"&gt;What we know about Airbus disruption so farpublished at 02:34 GMT&lt;/head&gt;
    &lt;p&gt;The discovery that computers installed on one of the most widely operated passenger planes could be vulnerable to interference from the sun has led to mass cancellations. Here is what we know.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;European aerospace giant Airbus has warned flights will be disrupted after it said it must carry out immediate software updates to thousands of its planes&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Over 6,000 planes, mainly the A320 model, are thought to be affected&lt;/item&gt;
      &lt;item&gt;The disruption has fallen on a major holiday weekend in the US, which is home to four of the biggest A320 model operators: American Airlines, Delta Air Lines, JetBlue and United Airlines&lt;/item&gt;
      &lt;item&gt;The issue was discovered after a JetBlue aircraft en-route from Mexico to the United States experienced a "sudden drop in altitude" in October&lt;/item&gt;
      &lt;item&gt;It√¢s thought the incident was caused by interference from intense solar radiation, which corrupted data in a computer which controls the aircraft's elevation&lt;/item&gt;
      &lt;item&gt;Disruption at UK airports has been fairly limited so far, though several airlines around the world have reported cancellations&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;We are pausing our live coverage for now, but you can read our latest updates on the story here.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46082825</guid><pubDate>Fri, 28 Nov 2025 21:16:46 +0000</pubDate></item><item><title>Airbus A320 ‚Äì intense solar radiation may corrupt data critical for flight</title><link>https://www.airbus.com/en/newsroom/press-releases/2025-11-airbus-update-on-a320-family-precautionary-fleet-action</link><description>&lt;doc fingerprint="359e27eeea79718f"&gt;
  &lt;main&gt;
    &lt;p&gt;Toulouse, France, 28 November 2025 ‚Äì Analysis of a recent event involving an A320 Family aircraft has revealed that intense solar radiation may corrupt data critical to the functioning of flight controls.&lt;/p&gt;
    &lt;p&gt;Airbus has consequently identified a significant number of A320 Family aircraft currently in-service which may be impacted.&lt;/p&gt;
    &lt;p&gt;Airbus has worked proactively with the aviation authorities to request immediate precautionary action from operators via an Alert Operators Transmission (AOT) in order to implement the available software and/or hardware protection, and ensure the fleet is safe to fly. This AOT will be reflected in an Emergency Airworthiness Directive from the European Union Aviation Safety Agency (EASA).&lt;/p&gt;
    &lt;p&gt;Airbus acknowledges these recommendations will lead to operational disruptions to passengers and customers. We apologise for the inconvenience caused and will work closely with operators, while keeping safety as our number one and overriding priority.&lt;/p&gt;
    &lt;head rend="h2"&gt;Contacts&lt;/head&gt;
    &lt;head rend="h3"&gt;Guillaume Steuer&lt;/head&gt;
    &lt;p&gt;AIRBUS&lt;/p&gt;
    &lt;head rend="h3"&gt;Sara Ricci&lt;/head&gt;
    &lt;p&gt;AIRBUS | Commercial Aircraft&lt;/p&gt;
    &lt;head rend="h3"&gt;Justin Dubon&lt;/head&gt;
    &lt;p&gt;AIRBUS | Commercial Aircraft&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46083004</guid><pubDate>Fri, 28 Nov 2025 21:40:21 +0000</pubDate></item><item><title>A first look at Django's new background tasks</title><link>https://roam.be/notes/2025/a-first-look-at-djangos-new-background-tasks/</link><description>&lt;doc fingerprint="7f08801f19f010ee"&gt;
  &lt;main&gt;
    &lt;p&gt;Django 6.0 introduces a built-in background tasks framework in &lt;code&gt;django.tasks&lt;/code&gt;. But don't expect to phase out Celery, Huey or other preferred solutions just yet. &lt;/p&gt;
    &lt;p&gt;The release notes are quite clear on this:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Django handles task creation and queuing, but does not provide a worker mechanism to run tasks. Execution must be managed by external infrastructure, such as a separate process or service.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;The main purpose of the new &lt;code&gt;django.tasks&lt;/code&gt; module is to provide a common API for task queues implementations. Jake Howard is the driving force behind this enhancement. Check out the introduction on the Django forum.&lt;/p&gt;
    &lt;p&gt;His reference implementation, and simultaneously a backport for earlier versions of Django, is available as &lt;code&gt;django-tasks&lt;/code&gt; on GitHub.&lt;/p&gt;
    &lt;p&gt;But let's ignore that and play with the more minimal version included in Django 6.0 instead. By creating our very own backend and worker.&lt;/p&gt;
    &lt;head rend="h2"&gt;Our project: notifications&lt;/head&gt;
    &lt;p&gt;We're going to create an app to send notifications to phones and other devices using ntfy.sh. (I'm a fan!)&lt;/p&gt;
    &lt;p&gt;If you prefer to dive into the code yourself, check out the final version of the project on GitHub.&lt;/p&gt;
    &lt;p&gt;All that's required to send a notification to your phone using nfty is:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Register for an account&lt;/item&gt;
      &lt;item&gt;Create a topic.&lt;/item&gt;
      &lt;item&gt;Install the app for your phone and log in.&lt;/item&gt;
      &lt;item&gt;Send HTTP requests to &lt;code&gt;https://ntfy.sh/&amp;lt;yourtopic&amp;gt;&lt;/code&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The free version only provides public topics and messages. Meaning anyone can see the stuff you're sending if they subscribe to the topic. For our purpose we can simply create a topic with a randomized name, like a UUID.&lt;/p&gt;
    &lt;p&gt;The project's settings expect the URL from step 4 to be supplied as an environment variable. For example:&lt;/p&gt;
    &lt;p&gt;
      &lt;code&gt;NTFY_URL=https://ntfy.sh/062519693d9c4913826f0a39aeea8a4c&lt;/code&gt;
    &lt;/p&gt;
    &lt;p&gt;Here's our function that does the heavy lifting:&lt;/p&gt;
    &lt;code&gt;import httpx
from django.conf import settings

def send_notification(message: str, title: str | None):
    # Pass the title if specified.
    headers = {"title": title} if title else {}
    httpx.post(
        settings.NTFY_URL,
        content=message,
        headers=headers,
    )
&lt;/code&gt;
    &lt;p&gt;Really. That's all there is to it to start sending and receiving notifications.&lt;/p&gt;
    &lt;head rend="h2"&gt;A quick primer&lt;/head&gt;
    &lt;p&gt;You really should have a look at the Django documentation on the Task framework for details, but we'll save you a bit of time and give a quick primer.&lt;/p&gt;
    &lt;head rend="h3"&gt;Defining a task&lt;/head&gt;
    &lt;p&gt;This is the main goal of the new framework: defining tasks using Django's standard API, rather than using task queue specific decorators, or other methods.&lt;/p&gt;
    &lt;p&gt;So here it goes:&lt;/p&gt;
    &lt;code&gt;# ...
from django.tasks import task

@task
def send_notification(message: str, title: str | None):
    # ...as before
&lt;/code&gt;
    &lt;p&gt;Our function is now a task. In fact it's a &lt;code&gt;django.tasks.Task&lt;/code&gt;. &lt;/p&gt;
    &lt;p&gt;You cannot call &lt;code&gt;send_notification&lt;/code&gt; directly anymore. Tasks can only be run by using the &lt;code&gt;enqueue&lt;/code&gt; method. It might not be the behavior you'd expect or want, but this seems to be the best option. This design eliminates the possibility of accidentally invoking a task in-process, rather than in the background.&lt;/p&gt;
    &lt;p&gt;The &lt;code&gt;task&lt;/code&gt; decorator allows you to specify the task's priority, queue name and backend name. You can override these settings with the &lt;code&gt;using&lt;/code&gt; method, which returns a new &lt;code&gt;django.tasks.Task&lt;/code&gt; instance.&lt;/p&gt;
    &lt;p&gt;If you need more control over task behavior, you can set &lt;code&gt;takes_context&lt;/code&gt; to &lt;code&gt;True&lt;/code&gt; in the decorator and add &lt;code&gt;context&lt;/code&gt; as the first argument. This context currently provides you with access to the task result and thereby useful information like the number of attempts. &lt;/p&gt;
    &lt;p&gt;There's no way of defining retries and backoffs, or other fancy things you might expect from a full-blown task queue implementation. But that's not what this is. You can easily add your own retry logic by inspecting the task context if needed.&lt;/p&gt;
    &lt;head rend="h3"&gt;Enqueuing a task&lt;/head&gt;
    &lt;p&gt;Adding a task to the queue is easy:&lt;/p&gt;
    &lt;code&gt;task_result = send_notification.enqueue(
    message="Season's greeting!", 
    title="Santa has something to tell you"
)
&lt;/code&gt;
    &lt;head rend="h3"&gt;Executing a task&lt;/head&gt;
    &lt;p&gt;This is where things start to fall short. At least right now. Django 6.0 will ship with the &lt;code&gt;ImmediateBackend&lt;/code&gt; and the &lt;code&gt;DummyBackend&lt;/code&gt;. The first will execute the task immediately, while the latter will not execute the task at all. &lt;/p&gt;
    &lt;p&gt;Which is why our project includes a (demo) backend backed by the database and a worker process!&lt;/p&gt;
    &lt;head rend="h3"&gt;Fetching the result&lt;/head&gt;
    &lt;p&gt;If you're not going to wait around for the result, you can get a hold of it later on using its id. Simply call &lt;code&gt;get_result(result_id)&lt;/code&gt; on your task. &lt;/p&gt;
    &lt;p&gt;Our project includes a view that's polled periodically for outstanding results using htmx.&lt;/p&gt;
    &lt;p&gt;The list underneath the form shows the results for each execution of our task. When the form's submitted, a new result is added to the top of the list. Htmx is instructed to keep polling for changes as long as the result's status isn't &lt;code&gt;FAILED&lt;/code&gt; or &lt;code&gt;SUCCESSFUL&lt;/code&gt;.&lt;/p&gt;
    &lt;code&gt;def task_result(request, result_id, status):
    result = send_notification.get_result(result_id)
    if result.status == status:
        # No need to swap the result.
        return HttpResponse(status=204)
    return TemplateResponse(request, "index.html#result", {"result": result})
&lt;/code&gt;
    &lt;p&gt;Wondering what &lt;code&gt;index.html#results&lt;/code&gt; is doing? Django 6.0 also introduces template partials. In this case our view effectively sends a response containing only the template partial named &lt;code&gt;result&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h2"&gt;Behind the scenes&lt;/head&gt;
    &lt;p&gt;When you decorate a callable with &lt;code&gt;task&lt;/code&gt;, the configured backend's &lt;code&gt;task_class&lt;/code&gt; is used to wrap the callable. The default's &lt;code&gt;django.task.Task&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;That class's &lt;code&gt;enqueue&lt;/code&gt; method will in turn invoke the configured backend's &lt;code&gt;enqueue&lt;/code&gt; method.&lt;/p&gt;
    &lt;p&gt;Calling its &lt;code&gt;get_result&lt;/code&gt; method is similar: call the configured backend's &lt;code&gt;get_result&lt;/code&gt; method and pass on the result.&lt;/p&gt;
    &lt;p&gt;Since there's no workers, that's basically all a task backend needs to provide. Cool. Let's add one, shall we?&lt;/p&gt;
    &lt;head rend="h2"&gt;A task database backend&lt;/head&gt;
    &lt;p&gt;Our goals:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A basic task backend, backed by our database.&lt;/item&gt;
      &lt;item&gt;We want to support "automagic" retries&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Our &lt;code&gt;enqueue&lt;/code&gt; and &lt;code&gt;get_result&lt;/code&gt; methods will return an instance of the default &lt;code&gt;django.tasks.TaskResult&lt;/code&gt;. This determines the minimum amount of data we need to store, and we're going to do so in a model called &lt;code&gt;Task&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h3"&gt;Models&lt;/head&gt;
    &lt;p&gt;Let's create a first draft of our &lt;code&gt;Task&lt;/code&gt; model, based on the properties of &lt;code&gt;TaskResult&lt;/code&gt; and &lt;code&gt;Task&lt;/code&gt; in &lt;code&gt;django.tasks&lt;/code&gt; (the "dataclasses"):&lt;/p&gt;
    &lt;code&gt;class Task(models.Model):
    priority = models.IntegerField(default=0)
    callable_path = models.CharField(max_length=255)
    backend = models.CharField(max_length=200)
    queue_name = models.CharField(max_length=100)
    run_after = models.DateTimeField(null=True, blank=True)
    takes_context = models.BooleanField(default=False)
    # Stores args and kwargs
    arguments = models.JSONField(null=True, blank=True)
    status = models.CharField(
        choices=TaskResultStatus.choices, max_length=10, default=TaskResultStatus.READY
    )
    enqueued_at = models.DateTimeField()
    started_at = models.DateTimeField(blank=True, null=True)
    finished_at = models.DateTimeField(blank=True, null=True)
    last_attempted_at = models.DateTimeField(blank=True, null=True)
    return_value = models.JSONField(null=True, blank=True)
&lt;/code&gt;
    &lt;p&gt;What's missing? For one, the &lt;code&gt;TaskResult&lt;/code&gt; also includes a list of encountered errors, and ids of the workers that processed the task. Something that we could perhaps ignore. &lt;/p&gt;
    &lt;p&gt;Except the &lt;code&gt;TaskResult.attempts&lt;/code&gt; property is based on the number of worker ids. And if you're using the task context within a task, you're bound to be relying on that type of information.&lt;/p&gt;
    &lt;p&gt;We could add these details to the &lt;code&gt;Task&lt;/code&gt; model by adding a &lt;code&gt;JSONField&lt;/code&gt; for each. This is the current approach in the reference implementation. &lt;/p&gt;
    &lt;p&gt;But let's be more explicit in our approach and define models for these as well. We'll record each attempt to execute a task and its potential error, linking them to the task with a foreign key:&lt;/p&gt;
    &lt;code&gt;class Error(models.Model):
    exception_class_path = models.TextField()
    traceback = models.TextField()

class AttemptResultStatus(TextChoices):
    # Subset of TaskResultStatus.
    FAILED = TaskResultStatus.FAILED
    SUCCESSFUL = TaskResultStatus.SUCCESSFUL

class Attempt(models.Model):
    task = models.ForeignKey(Task, related_name="attempts", on_delete=models.CASCADE)
    error = models.OneToOneField(
        Error, related_name="attempt", on_delete=models.CASCADE, null=True, blank=True
    )
    worker_id = models.CharField(max_length=MAX_LENGTH_WORKER_ID)
    started_at = models.DateTimeField()
    stopped_at = models.DateTimeField(blank=True, null=True)
    status = models.CharField(
        choices=AttemptResultStatus.choices, max_length=10, blank=True
    )
&lt;/code&gt;
    &lt;p&gt;This setup ensures we have all necessary information to execute a task, plus we can provide every single bit of detail when a &lt;code&gt;TaskResult&lt;/code&gt; is requested.&lt;/p&gt;
    &lt;p&gt;All fine and dandy, but we need to think about the worker's requirements as well. It needs to be able to:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Quickly check for outstanding tasks&lt;/item&gt;
      &lt;item&gt;Claim one of those tasks&lt;/item&gt;
      &lt;item&gt;Process that task and either mark it as failed, successful or ready (to retry later)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;We could do all of that with how it's set up right now, but I'd like to refine things a bit.&lt;/p&gt;
    &lt;code&gt;class Task(models.Model):
    # ...
    # This field is used to keep track of when to run a task (again).
    # run_after remains unchanged after enqueueing.
    available_after = models.DateTimeField()
    # Denormalized count of attempts.
    attempt_count = models.IntegerField(default=0)
    # Set when a worker starts processing this task.
    worker_id = models.CharField(max_length=MAX_LENGTH_WORKER_ID, blank=True)
    # ...
&lt;/code&gt;
    &lt;p&gt;The &lt;code&gt;available_after&lt;/code&gt; field will contain the earliest time at which the task can be executed. If the task's &lt;code&gt;run_after&lt;/code&gt; is specified (which can be done by using a task's... &lt;code&gt;using()&lt;/code&gt; method), &lt;code&gt;available_after&lt;/code&gt; is set to that value. Otherwise we're using the current datetime; all in UTC.&lt;/p&gt;
    &lt;p&gt;Once a task needs to be retried, &lt;code&gt;available_after&lt;/code&gt; will be set to the next possible point in time the task can be executed. In other words: we can back off.&lt;/p&gt;
    &lt;p&gt;The &lt;code&gt;attempt_count&lt;/code&gt; field makes querying for available tasks a bit easier. Any tasks with an &lt;code&gt;attempt_count&lt;/code&gt; greater than the maximum allowed value can be ignored. Yes, their status should have been set to &lt;code&gt;FAILED&lt;/code&gt; which means they should be excluded by default, but we could change the configuration and tweak the maximum number of attempts.&lt;/p&gt;
    &lt;p&gt;The &lt;code&gt;worker_id&lt;/code&gt; field is filled when a worker claims a task. This, among other things, prevents any other workers from picking up the task. Assuming the worker id is unique.&lt;/p&gt;
    &lt;head rend="h3"&gt;Enqueueing and fetching a result&lt;/head&gt;
    &lt;p&gt;Enqueueing a task could not be easier: create a &lt;code&gt;Task&lt;/code&gt; model instance from the &lt;code&gt;Task&lt;/code&gt; dataclass instance, save it, done! Well, at least after turning the end result into a &lt;code&gt;TaskResult&lt;/code&gt;. &lt;/p&gt;
    &lt;p&gt;We use the string version of the model's database id as the id of the result.&lt;/p&gt;
    &lt;p&gt;Retrieving a result is likewise only a matter of loading the task and its attempts, and turning that into a &lt;code&gt;TaskResult&lt;/code&gt;. &lt;/p&gt;
    &lt;p&gt;Here's a simplified version of our task backend as it stands:&lt;/p&gt;
    &lt;code&gt;class DatabaseBackend(BaseTaskBackend):
    supports_defer = True
    supports_async_task = False
    supports_get_result = True
    supports_priority = True

    def enqueue(self, task: Task, args, kwargs):
        self.validate_task(task)
        model = self.queue_store.enqueue(task, args, kwargs)
        task_result = TaskResult(
            task=task,
            id=str(model.pk),
            # ...
            # More properties being set
            # ...
        )
        return task_result

    def get_result(self, result_id):
        return self.model_to_result(
            self.queue_store.get(result_id)
        )

    def model_to_result(self, model: models.Task) -&amp;gt; TaskResult:
        ...
&lt;/code&gt;
    &lt;p&gt;At lot of functionality is deferred to this &lt;code&gt;queue_store&lt;/code&gt; property. Before we dive into that, we'll explain the configuration options for this backend.&lt;/p&gt;
    &lt;head rend="h3"&gt;Configuration&lt;/head&gt;
    &lt;p&gt;We want to be able to specify defaults for:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;the maximum number of attempts (retries)&lt;/item&gt;
      &lt;item&gt;the backoff factor; i.e. we'll back off using &lt;code&gt;math.pow(factor, attempts)&lt;/code&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;These can be customized for each individual queue. So we end up with something like this in our &lt;code&gt;OPTIONS&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;TASKS = {
    "default": {
        "BACKEND": "messagecenter.dbtasks.backend.DatabaseBackend",
        "OPTIONS": {
            "queues": {
                "low_priority": {
                    "max_attempts": 5,
                }
            },
            "max_attempts": 10,
            "backoff_factor": 3,
            "purge": {"finished": "10 days", "unfinished": "20 days"},
        },
    }
}
&lt;/code&gt;
    &lt;p&gt;A task added to the &lt;code&gt;low_priority&lt;/code&gt; queue will be attempted up to five times, with a backoff factor of &lt;code&gt;3&lt;/code&gt;. Other tasks will be attempted up to ten times with the same backoff factor.&lt;/p&gt;
    &lt;head rend="h3"&gt;Queue store&lt;/head&gt;
    &lt;p&gt;The &lt;code&gt;QueueStore&lt;/code&gt; class is a companion of our backend. It's focus is on retrieving and enqueueing tasks, checking for tasks to execute and claiming tasks. &lt;/p&gt;
    &lt;p&gt;However the main reason it's included is to simplify the worker. As we'll see, the worker gets it's own copy of the queue store, limited to the queues it needs to process.&lt;/p&gt;
    &lt;head rend="h3"&gt;The worker&lt;/head&gt;
    &lt;p&gt;The worker's job, at least in this project, is to provide information on outstanding tasks to the runner and to drive the processing of those tasks by the backend. Which means it looks like this:&lt;/p&gt;
    &lt;code&gt;class Worker:
    def __init__(
        self,
        id_: str | None,
        backend_name: str,
        only: set[str] | None,
        excluding: set[str] | None,
    ):
        # Grab the backend and its queue_store.
        self.backend = task_backends[backend_name]
        queue_store: QueueStore = self.backend.queue_store
        # Limit the queue_store to the select queues.
        if only or excluding:
            queue_store = queue_store.subset(only=only, excluding=excluding)
        self.queue_store = queue_store
        # Use or create and id. "Must" be unique.
        self.id = (
            id_ if id_ else create_id(backend_name, queues=queue_store.queue_names)
        )

    def has_more(self) -&amp;gt; bool:
        return self.queue_store.has_more()

    def process(self):
        with transaction.atomic():
            tm = self.queue_store.claim_first_available(worker_id=self.id)
        if tm is not None:
            self.backend.process_task(tm)
&lt;/code&gt;
    &lt;p&gt;All we need to do to have a functioning worker runner:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Create an instance of the worker.&lt;/item&gt;
      &lt;item&gt;Ask it if there's tasks to execute using &lt;code&gt;has_more&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;If so: tell it to &lt;code&gt;process&lt;/code&gt;the first available task. If not: go to 4.&lt;/item&gt;
      &lt;item&gt;Wait, then return to 2.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;That's what our &lt;code&gt;dbtasks_worker&lt;/code&gt; command does.&lt;/p&gt;
    &lt;head rend="h3"&gt;Claiming a task&lt;/head&gt;
    &lt;p&gt;Our queue store provides a &lt;code&gt;peek&lt;/code&gt; method which returns the id of the task in our queues with the most urgency; a combination of &lt;code&gt;available_after&lt;/code&gt;, &lt;code&gt;priority&lt;/code&gt; and &lt;code&gt;attempt_count&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;This lets the runner know whether there's more tasks to process. The next step is to claim one of those tasks. So we call &lt;code&gt;peek&lt;/code&gt; again and if it returns a task id, we'll try to claim that particular task.&lt;/p&gt;
    &lt;p&gt;Here's a more basic, clearer version than the one included in our project's &lt;code&gt;QueueStore&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;def claim_first_available(
    self, worker_id: str, attempts: int = 3
) -&amp;gt; models.Task | None:
    qs = models.Task.filter(
        worker_id="", 
        status=TaskResultStatus.READY,
    )
    for _ in range(attempts):
        task_id = self.peek()
        if not task_id:
            return None
        count = qs.filter(pk=task_id).update(
            worker_id=self.id_,
            status=TaskResultStatus.RUNNING,
        )
        if count:
            return models.Task.objects.get(pk=task_id)
    return None
&lt;/code&gt;
    &lt;p&gt;If the &lt;code&gt;count&lt;/code&gt; is zero, we failed to claim the task. Otherwise we retrieve it from the database and can start processing. &lt;/p&gt;
    &lt;p&gt;The loop is included because we ended up here after trying to claim the task identified by &lt;code&gt;peek&lt;/code&gt;. Which apparently has already been picked up by another worker. We might as well make the most of it and try to grab another task from the queue.&lt;/p&gt;
    &lt;head rend="h3"&gt;Processing the task&lt;/head&gt;
    &lt;p&gt;And finally the thing that actually does something!&lt;/p&gt;
    &lt;p&gt;The &lt;code&gt;process_task&lt;/code&gt; method of our backend:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Creates an &lt;code&gt;Attempt&lt;/code&gt;and constructs the current&lt;code&gt;TaskResult&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;Executes the task, capturing anything extending &lt;code&gt;BaseException&lt;/code&gt;, or returning the&lt;code&gt;return_value&lt;/code&gt;of the task when everything went according to plan.&lt;/item&gt;
      &lt;item&gt;Either updates the &lt;code&gt;Task&lt;/code&gt;model, the&lt;code&gt;Attempt&lt;/code&gt;and the&lt;code&gt;TaskResult&lt;/code&gt;with the final details of the successful execution, or with details about the failure to do so.&lt;/item&gt;
      &lt;item&gt;And in the latter case: check if the task can be retried.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Again: if you want to dive into the details, have a look at the repository.&lt;/p&gt;
    &lt;head rend="h2"&gt;That's it&lt;/head&gt;
    &lt;p&gt;Of course this demo project leaves out all the things you really need to think hard about. Like signals for the worker. Or database transaction logic. That's not to say it's impossible. Far from it. It just wasn't the goal of this article.&lt;/p&gt;
    &lt;p&gt;The inclusion of this functionality in Django will certainly allow new libraries or adapters for existing task queues to pop up. And we'll probably soon see some complaints that &lt;code&gt;django.tasks&lt;/code&gt; isn't extensive enough.&lt;/p&gt;
    &lt;p&gt;Because, if you're currently using the more advanced functionality of your task queue, there's probably a few things you're missing in &lt;code&gt;django.tasks&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h3"&gt;Complex orchestration&lt;/head&gt;
    &lt;p&gt;Some task queue libraries, like Celery, provide ways of combining tasks. You can feed the result of one task into another, enqueue tasks for each item in a list, and so on.&lt;/p&gt;
    &lt;p&gt;It should be clear by now that supporting this kind of orchestration isn't the goal of &lt;code&gt;django.tasks&lt;/code&gt;. And I don't mind at all. There's no feasible way of creating a unified API to support this. I've had my share of problems with libraries that do claim to support it.&lt;/p&gt;
    &lt;head rend="h3"&gt;Retry&lt;/head&gt;
    &lt;p&gt;As mentioned before, there's currently no way to automatically retry a failed task, unless your backend does the heavy lifting. Like ours does.&lt;/p&gt;
    &lt;p&gt;Depending on your backend this might be easy enough to handle yourself. For example using a decorator:&lt;/p&gt;
    &lt;code&gt;def retry(func):
    @functools.wraps(func)
    def wrapper(context: TaskContext, *args, **kwargs):
        try:
            return func(context, *args, **kwargs)
        except BaseException as e:
            result = context.task_result
            backoff = math.pow(2, result.attempts)
            run_after = datetime.now(tz=UTC) + timedelta(seconds=backoff)
            result.task.using(run_after=run_after).enqueue(*args, **kwargs)
            raise e
    return wrapper


@task(takes_context=True)
@retry
def send_email(context: TaskContext, to: str, subject: str, body: str):
    # Do your thing 
    ...
&lt;/code&gt;
    &lt;head rend="h3"&gt;An actual worker mechanism&lt;/head&gt;
    &lt;p&gt;True. But the reference implementation does provide actual workers. Be patient, or even better: start helping out!&lt;/p&gt;
    &lt;head rend="h2"&gt;There is no perfect solution&lt;/head&gt;
    &lt;p&gt;I reckon &lt;code&gt;django.tasks&lt;/code&gt; will soon result in covering at least the most common 80% of use cases. Yes, its API is simple and limited, but to me that's more a benefit rather than a fault. I think this is as close as you can get to a standardized approach.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46083051</guid><pubDate>Fri, 28 Nov 2025 21:46:07 +0000</pubDate></item><item><title>Confessions of a Software Developer: No More Self-Censorship</title><link>https://kerrick.blog/articles/2025/confessions-of-a-software-developer-no-more-self-censorship/</link><description>&lt;doc fingerprint="2f4551170fb65fb1"&gt;
  &lt;main&gt;
    &lt;p&gt;I haven‚Äôt published since April because I‚Äôve been afraid. I also avoided social media, news aggregators, and discussion forums for months. I‚Äôm done letting fear stop me. What was I afraid of? In this post I detail every single thing I‚Äôve avoided admitting on this blog.&lt;/p&gt;
    &lt;head rend="h2"&gt;Knowledge Gap Confessions&lt;/head&gt;
    &lt;p&gt;First, why am I admitting these things now? I realized I am not the only working software developer missing crucial skills. My learning path through my career looked a lot like a slime mold seeking morsels of food: strengthening what has utility, but letting the rest wither. But lately, I‚Äôve been building a better base of knowledge. Writing or speaking about what I learn‚Äìwhich helps me learn better‚Äìrequires me to admit I didn‚Äôt know. Plus, I‚Äôd like to show others in my situation that it‚Äôs never too late to learn what you don‚Äôt know. I can fill in those fundamentals, and so can you.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;It‚Äôs from that very ignorance that sprouts the drive for knowledge.&lt;/p&gt;
      &lt;p&gt;‚Äî Leticia Portella, A Friendly Guide to Software Development&lt;/p&gt;
    &lt;/quote&gt;
    &lt;head rend="h3"&gt;I Didn‚Äôt Understand Polymorphism For a Decade&lt;/head&gt;
    &lt;p&gt;Learning about polymorphism over the past twelve months was the first time I was embarrassed to admit I didn‚Äôt already know something. I‚Äôve been writing ostensibly object-oriented software since 2012. And yet, my lack of awareness of polymorphism showed me I‚Äôve been writing little more than structured programs. That I could replace conditionals and case staments with specialized classes had never crossed my mind.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;As a hiring manager I interviewed software engineers and tried to filter for object-oriented knowledge. Retroactively, it‚Äôs clear I was hypocritical. This gap reveals that I spent the early part of my career learning tools, not principles. Plus, it highlights my lack of formal education. Polymorphism is covered in every college OO course.&lt;/p&gt;
    &lt;head rend="h3"&gt;I Forgot SQL&lt;/head&gt;
    &lt;p&gt;I took a college database course as a student. As a working professional, I read and worked through the exercises in Learning SQL, 3rd Edition. For a while, I could write SQL. But I specialized in front-end web development, and had no professional use for SQL. Like any unused skill, it atrophied. I remember how to write basic queries, but not much more. For example, I cannot tell you the difference between a left inner join and an outer join without looking it up.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;I‚Äôm not accustomed to forgetting. Growing up I had a remarkable ability to remember almost everything. It didn‚Äôt matter whether I did it, read it, or heard it. It could be a fact, a skill, or an event. Four years later I could access that knowledge, with the slightest reminder unlocking a flood of memories. Now that I‚Äôm in my mid-thirties, that isn‚Äôt always true. SQL is the first time I‚Äôve lost an entire skill to atrophy. It‚Äôs tough to come to terms with the start of aging. It‚Äôs tougher to admit it publicly.&lt;/p&gt;
    &lt;head rend="h3"&gt;I Don‚Äôt Write Automated Tests&lt;/head&gt;
    &lt;p&gt;An estimated 95% of the code I‚Äôve shipped to production had no automated tests. Early in my career, I had no exposure to the concept. Later, I was writing front-ends in Ember, whose testing story was looked good but felt pretty bad at the time. More recently, I‚Äôve been working legacy code, and I haven‚Äôt put in the work to make it testable. The only time I tend to write new tests is when I‚Äôm writing a new subsystem, which can be designed testable from the start. I‚Äôm convinced that writing automated tests needs to be part of my daily practice, but I haven‚Äôt gotten there yet.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;This may be my most professionally-damaging confession. If you believe Uncle Bob, shipping production code without tests is not more than risky, it‚Äôs unethical. I stopped myself from posting about my learning journey for fear that a future hiring manager would decide that I was unfit to work with them on this basis.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;How much of the code should be tested with these automated unit tests? Do I really need to answer that question? All of it! All. Of. It.&lt;/p&gt;
      &lt;p&gt;Am I suggesting 100% test coverage? No, I‚Äôm not suggesting it. I‚Äôm demanding it. Every single line of code that you write should be tested. Period.&lt;/p&gt;
      &lt;p&gt;Isn‚Äôt that unrealistic? Of course not. You only write code because you expect it to get executed. If you expect it to get executed, you ought to know that it works. The only way to know this is to test it.&lt;/p&gt;
      &lt;p&gt;‚Äî Robert C. Martin, The Clean Coder, Chapter 1: Professionalism&lt;/p&gt;
    &lt;/quote&gt;
    &lt;head rend="h2"&gt;Personal Confessions&lt;/head&gt;
    &lt;head rend="h3"&gt;I Didn‚Äôt End Up Learning Blazor&lt;/head&gt;
    &lt;p&gt;People have been waiting for a follow-up from me about my journey learning C#, .NET, and Blazor. This isn‚Äôt that post. I don‚Äôt know if that post will ever come.&lt;/p&gt;
    &lt;p&gt;C# was never the language I wanted to learn for side projects. .NET was never the platform I wanted to work with professionally. I was learning them for one reason: my job. My engineering department decided to switch our tech stack from Angular to Blazor. I was the only person on the team with no C# skills. I started fixing that immediately.&lt;/p&gt;
    &lt;p&gt;A couple months later, almost as suddenly, the decision was undone. Our tech stack would not change after all. With no intrinsic motivation to push me along, I abandoned the C# / .NET book I was reading without finishing. I‚Äôve got more important things to learn.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;No matter what software thoughts crossed my mind, I intended to post about them. Writing helps me solidify ephemeral thoughts. Publishing offers an opportunity for feedback. But I made two errors that locked me into a pattern of fear. First, I promised a follow up article at the end of my last post about the Blazor stack. I then felt worse every time I published an article other than the promised follow-up. Second, I began to see value in the amount of traffic a blog post got. The posts about my first steps in that learning journey were the winners. Admitting I changed tack when the company did felt like admitting defeat.&lt;/p&gt;
    &lt;head rend="h3"&gt;I Want to Write More Ruby&lt;/head&gt;
    &lt;p&gt;I love Ruby. I use it in my code examples. It‚Äôs my default language for open source projects. I write Ruby for code katas, etudes, and hackathons. But I haven‚Äôt been paid to write Ruby since 2013.&lt;/p&gt;
    &lt;p&gt;The best possible option‚Äìand yet the most improbable‚Äìwould be for my current employer to start a Ruby project. I‚Äôve worked with a few of my teammates for 12 years across two companies. I‚Äôve always chosen to keep working with fantastic people at the cost of working with a less-than-fantastic language.&lt;/p&gt;
    &lt;p&gt;Sadly that means I‚Äôm limited to being a Rubyist after work and on weekends. I spend fewer of those hours than I‚Äôd like writing Ruby, instead favoring other obligations, hobbies, and professional development goals. The only way I foresee getting to work with Ruby as much as I‚Äôd like would be to paid for it.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;My manager and his manager, the CTO, read this blog. I found it difficult to write freely about my distaste for the tools I use every day. I found it ever harder to admit that I actively want my daily job duties to be different. I feared they might take it as a hint that I‚Äôm quitting (I‚Äôm not), or that I‚Äôd push to use a tool at work nobody else is familiar with at work (I won‚Äôt).&lt;lb/&gt;A bonus, even more personal confession‚Ä¶&lt;/p&gt;
    &lt;head&gt;A bonus, even more personal confession‚Ä¶&lt;/head&gt;
    &lt;head rend="h3"&gt;Cyber Bullying Hurts, Even as an Adult&lt;/head&gt;
    &lt;p&gt;I spent a lot of my young adulthood online. My early days on the internet were spent in intellectual spaces, where the interactions felt like The Nets of Ender‚Äôs Game: a marketplace of ideas. Strong criticism came swiftly, but it was about the ideas, not the person. Even Reddit and Hacker News‚Äìforums which have a reputation for harsh comments sections‚Äìdon‚Äôt bother me, because the vitriol is aimed at taking down bad ideas, not insulting people.&lt;/p&gt;
    &lt;p&gt;Other websites, though, are different. I learned this when I got bullied on a different online forum. I was called incapable, sneaky, disgusting, incompetent, uncaring, and a representative of a threat to human expression.&lt;/p&gt;
    &lt;p&gt;What triggered this vitriol? I requested a small feature in an open source project, and the maintainer said they would accept a PR. The project was written in a language I haven‚Äôt used. I used an LLM to generate a small commit (a few dozen lines), reviewed and tested the patch, and submitted a pull request. This was months ago‚Äìthere were few social norms around AI-assisted patches, and AI policies were rare. Since the project didn‚Äôt have a policy, I did not disclose my use of AI.&lt;/p&gt;
    &lt;p&gt;When I told the story of that pull request on the forum and defended my ethical position, the bullying started. I was followed across websites, contacted via email and SMS, and even called on the phone. I no longer felt safe having a presence on that website. I deleted my comments, removed PII from my profile, and asked the administrators of the forum to scrub my real name to prevent further harassment. Instead, they attached more PII to my profile, locked me out of editing it, and permanently vandalized it with the false claim that I lied about being contacted about the discussion outside the forum.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;This incident was one of the most toxic things I‚Äôve ever experienced, and it lasted for days. Writing about it leaves me feeling its echoes even now. I was afraid that one of these people will use the comments section, or email, or even my phone number, to re-litigate the issue. Even now, I am afraid that the administrator‚Äôs (possibly defamatory) statement on my profile will make me less employable.&lt;/p&gt;
    &lt;head rend="h2"&gt;Workplace Confessions&lt;/head&gt;
    &lt;head rend="h3"&gt;Your SaaS Team Doesn‚Äôt Need a Special Process&lt;/head&gt;
    &lt;p&gt;Hundreds of companies, thousands of researchers, tens of thousands of workers, and millions of dollars have gone into shaping our industry‚Äôs best practices. The agile manifesto is old enough to drink. Software as a Service has dominated the market for over a decade. Your company has a limited innovation budget. Do you want to spend it on coming up with a custom software development lifecycle, or making a product that wins in the marketplace? Follow Scrum, Lean / Kanban, or eXtreme Programming to the letter, and let your team focus on the product.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;Like any author, I write what I know. Here, I was motivated to write because a co-worker pushed to create a custom software development process. I don‚Äôt know that I have the tact to avoid it seeming to be a takedown of that person or their ideas. I admire the ability of authors like Kent Beck and Martin Fowler to write about how to work better without calling out coworkers who made mistakes.&lt;/p&gt;
    &lt;head rend="h3"&gt;Remote Work Sucks&lt;/head&gt;
    &lt;p&gt;Remote work eliminates a lot of problems with office work: commutes, inefficient use of real estate, and land value distortion. But software development is better when you breathe the same air as the folks you work with. Even with a camera-on policy, video calls are a low-bandwidth medium. You lose ambient awareness of coworkers‚Äô problems, and asking for help is a bigger burden. Pair programming is less fruitful. Attempts to represent ideas spatially get mutilated by online whiteboard and sticky note software. Even conflict gets worse: it‚Äôs easy to form an enemy image of somebody at the end of video call, but difficult to keep that image when you share a room with them and sense their pain.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why I Was Afraid to Admit It&lt;/head&gt;
    &lt;p&gt;When COVID-19 hit, the company I worked for went remote ‚Äúfor a couple of weeks.‚Äù After a few months of productive work without an office and with no vaccine in sight, it became permanent. I took the opportunity to move to a rural area. Geographic arbitrage meant I could afford 27 acres, and I even bought a family milking cow. My family has since put down roots: close friendships, community involvement, and a lifestyle built around the lack of a commute.&lt;/p&gt;
    &lt;p&gt;I feared that writing negatively about remote work might jeopardize my current remote job‚Äìand every future remote job I might look for. I thought, ‚Äúwho would hire a remote worker who prefers in-office work?‚Äù Because even though I prefer working side-by-side with others, I won‚Äôt likely move for a job. I have a 30-year mortgage with a low interest rate. My house was purchased before the post-pandemic price spike. I have an acre of lawn &amp;amp; garden, not to mention the farm acreage. I‚Äôd need to double my current income to maintain my current lifestyle in a city, which is unlikely.&lt;/p&gt;
    &lt;head rend="h2"&gt;What Now?&lt;/head&gt;
    &lt;p&gt;Now that the dam has burst, nothing is holding me back from publishing. I‚Äôm going to continue to work on skill building, but now I feel free to write about it. If this article resonated with you‚Äìwhether you also have knowledge gaps you‚Äôd like to fill, you‚Äôd like to help me fill mine, or you just want to see what happens‚Äìplease let me know in the comments. Subscribe via Mastodon to see everything I post, use RSS to customize your subscription, or subscribe to my mailing list to get notified when I post a larger article.&lt;/p&gt;
    &lt;head rend="h3"&gt;Mastodon &amp;amp; Fediverse&lt;/head&gt;
    &lt;p&gt;To help you follow along, I‚Äôve enabled ActivityPub on this blog, meaning it‚Äôs a fully-functioning Mastodon account: &lt;code&gt;@[email¬†protected]&lt;/code&gt;. &lt;/p&gt;
    &lt;head rend="h3"&gt;RSS &amp;amp; Feed Readers&lt;/head&gt;
    &lt;p&gt;If you prefer to kick it old school, grab an XML feed reader like NetNewsWire for MacOS, Feedmill for Windows, or Newsflash for Linux and choose one or more feeds:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The ‚ÄúEverything‚Äù feed &lt;list rend="ul"&gt;&lt;item&gt;Just the ‚ÄúArticles‚Äù feed &lt;list rend="ul"&gt;&lt;item&gt;Specifically the ‚ÄúAdvice‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúBlog Posts‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúBook Reviews‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúNews‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúTutorials‚Äù feed&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;&lt;item&gt;Just the ‚ÄúMicro-Posts‚Äù feed &lt;list rend="ul"&gt;&lt;item&gt;Specifically the ‚ÄúResponses‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúQuick Tips‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúShared Links‚Äù feed&lt;/item&gt;&lt;item&gt;Specifically the ‚ÄúTutorials‚Äù feed&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Just the ‚ÄúArticles‚Äù feed &lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Email Newsletter&lt;/head&gt;
    &lt;p&gt;Of course, the classic (and my favorite) way is to subscribe to email notifications. I‚Äôll only send emails when I publish a new article, not for every micro-post.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46083303</guid><pubDate>Fri, 28 Nov 2025 22:21:25 +0000</pubDate></item><item><title>Fabric Project</title><link>https://github.com/Fabric-Project/Fabric</link><description>&lt;doc fingerprint="ab5bd85145309005"&gt;
  &lt;main&gt;
    &lt;p&gt;Fabric is a creative code and rapid prototyping environment focusing on interactive visuals, image and video processing and analysis and 3D content authoring.&lt;/p&gt;
    &lt;p&gt;Fabric&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Provides an intuitive Visual Node based content authoring environment&lt;/item&gt;
      &lt;item&gt;Provides an SDK to load an common interchange file format&lt;/item&gt;
      &lt;item&gt;Provides an SDK to extend Fabric by creating custom nodes via a plugin architecture&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Fabric is inspired by Apple's deprecated Quartz Composer ecosystem, and its design philosophy.&lt;/p&gt;
    &lt;p&gt;Fabric is intended to be used as&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A Creative coding tool requires little to no programming experience.&lt;/item&gt;
      &lt;item&gt;Pro User tool to create reusable documents (similar to Quartz Composer Compositions) that can be loaded in the Fabric runtime and embedded into 3rd party applications.&lt;/item&gt;
      &lt;item&gt;Developer environment built on Satin that can render high fidelity visual output in a procedural way, using modern rendering techniques.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;An early alpha of Satin rendering a instances of a sphere geometry, along with an HDRI environment and a PBR Shader at 120Hz:&lt;/p&gt;
    &lt;p&gt;Think of Fabric as a playground of visual capabilies you can combine together.&lt;/p&gt;
    &lt;p&gt;Author&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Interacive 3D graphics&lt;/item&gt;
      &lt;item&gt;Image processing and effects&lt;/item&gt;
      &lt;item&gt;Audio reactive scenes&lt;/item&gt;
      &lt;item&gt;images and video analysis pipelines&lt;/item&gt;
      &lt;item&gt;embed your scenes into your own apps&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Check out the Samples&lt;/p&gt;
    &lt;p&gt;Fabric supports, thanks to Satin and Lygia, high fidelity modern rendering techniques including&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Physically based rendering&lt;/item&gt;
      &lt;item&gt;Scene graph&lt;/item&gt;
      &lt;item&gt;Lighting and Shadow casting&lt;/item&gt;
      &lt;item&gt;Realtime shader editing (live coding, hot reloading)&lt;/item&gt;
      &lt;item&gt;GPU Compute&lt;/item&gt;
      &lt;item&gt;Image Based Lighting&lt;/item&gt;
      &lt;item&gt;3D Model Loading&lt;/item&gt;
      &lt;item&gt;Material System&lt;/item&gt;
      &lt;item&gt;ML based realtime segmentation and keypoint detection&lt;/item&gt;
      &lt;item&gt;Shader based Image Processing and Mixing&lt;/item&gt;
      &lt;item&gt;Local LLM calling&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Fabric is authored by by Anton Marini.&lt;/p&gt;
    &lt;p&gt;Fabric uses Satin 3D engine Satin rendering engine written by @Reza Ali.&lt;/p&gt;
    &lt;p&gt;Fabric includes a licensed Metal port of Lygia shader library, powering Image effects and more, written by @Patricio Gonzalez Vivo and contributors.&lt;/p&gt;
    &lt;p&gt;Warning&lt;/p&gt;
    &lt;p&gt;Please note Fabric is heavily under construction.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;macOS 14 +&lt;/item&gt;
      &lt;item&gt;XCode 15 +&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Please See Releases for code signed App downloads.&lt;/p&gt;
    &lt;p&gt;For Developers:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Checkout Fabric and ensure you check out with submodules enabled, as Satin is a dependency.&lt;/item&gt;
      &lt;item&gt;Open the XCode project&lt;/item&gt;
      &lt;item&gt;Ensure that &lt;code&gt;Fabric Editor&lt;/code&gt;is the active target.&lt;/item&gt;
      &lt;item&gt;Build and run.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Checkout our Architecture Document to understand the underlying paradigms of working with Fabric's Nodes and execution model, learn what a &lt;code&gt;Node&lt;/code&gt; and a &lt;code&gt;Port&lt;/code&gt; is, the types of data Fabric can generate and process, and how Fabric executes your compositions.&lt;/p&gt;
    &lt;p&gt;We also provide a set of evolving tutorial / getting started and sample Fabric compositions along with a readme walk through. You can use the Sample Compositions to learn and build off of.&lt;/p&gt;
    &lt;p&gt;You can view a comprehensive list of available and planned Nodes here to explore and learn how to compose more advanced and custom setups with Fabric.&lt;/p&gt;
    &lt;p&gt;Don't hesitate to file a feature request if a Node is missing!&lt;/p&gt;
    &lt;p&gt;Checkout our Roadmap Document&lt;/p&gt;
    &lt;p&gt;I ( Anton Marini ) are looking to build a community of developers who long for the ease of use and interoperability of Quartz Composer, its ecosystem and plugin community.&lt;/p&gt;
    &lt;p&gt;If you are interested in contributing, please do not hesitate to reach out / comment in the git repository, or join our discord via invite&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Will Fabric ever be cross platform?&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;No. Fabric is purpose built on top of Satin and aims to provide a best in class Apple platform experience using Metal.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;What languages are used?&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Fabric Editor is written in Swift and SwiftUI. Satin is written in Swift and C++&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Why not just use Vuo or Touch Designer or some other node based tool?&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;I do not like them.&lt;/item&gt;
          &lt;item&gt;Don't get me wrong, they are incredible tools, but they are not for me.&lt;/item&gt;
          &lt;item&gt;They do not think the way I think.&lt;/item&gt;
          &lt;item&gt;They do not expose the layers of abstraction I want to work with.&lt;/item&gt;
          &lt;item&gt;They do not provide the user experience I want.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46083375</guid><pubDate>Fri, 28 Nov 2025 22:32:03 +0000</pubDate></item><item><title>A triangle whose interior angles sum to zero</title><link>https://www.johndcook.com/blog/2025/11/28/tricusp-triangle/</link><description>&lt;doc fingerprint="eb9b90f084dff3a0"&gt;
  &lt;main&gt;
    &lt;head rend="h2"&gt;Spherical geometry&lt;/head&gt;
    &lt;p&gt;In spherical geometry, the interior angles of a triangle add up to more than œÄ. And in fact you can determine the area of a spherical triangle by how much the angle sum exceeds œÄ. On a sphere of radius 1, the area equals the triangle excess&lt;/p&gt;
    &lt;p&gt;Area = E = interior angle sum ‚àí œÄ.&lt;/p&gt;
    &lt;p&gt;Small triangles have interior angle sum near œÄ. But you could, for example, have a triangle with three right angles: put a vertex on the north pole and two vertices on the equator 90¬∞ longitude apart.&lt;/p&gt;
    &lt;head rend="h2"&gt;Hyperbolic geometry&lt;/head&gt;
    &lt;p&gt;In hyperbolic geometry, the sum of the interior angles of a triangle is always less than œÄ. In a space with curvature ‚àí1, the area equals the triangle defect, the difference between œÄ and the angle sum.&lt;/p&gt;
    &lt;p&gt;Area = D = œÄ ‚àí interior angle sum.&lt;/p&gt;
    &lt;p&gt;Again small triangles have an interior angle sum near œÄ. Both spherical and hyperbolic geometry are locally Euclidean.&lt;/p&gt;
    &lt;p&gt;The interior angle sum can be any value less than œÄ, and so as the angle sum goes to 0, the triangle defect, and hence the area, goes to œÄ. Since the minimum angle sum is 0, the maximum area of a triangle is œÄ.&lt;/p&gt;
    &lt;p&gt;The figure below has interior angle sum 0 and area œÄ in hyperbolic geometry.&lt;/p&gt;
    &lt;p&gt;Strictly speaking this is an improper triangle because the three hyperbolic lines (i.e. half circles) don‚Äôt intersect within the hyperbolic plane per se but at ideal points on the real axis. But you could come as close to this triangle as you like, staying within the hyperbolic plane.&lt;/p&gt;
    &lt;p&gt;Note that the radii of the (Euclidean) half circles doesn‚Äôt change the area. Any three semicircles that intersect on the real line as above make a triangle with the same area. Note also that the triangle has infinite perimeter but finite area.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46084122</guid><pubDate>Sat, 29 Nov 2025 00:26:42 +0000</pubDate></item><item><title>Every mathematician has only a few tricks (2020)</title><link>https://mathoverflow.net/questions/363119/every-mathematician-has-only-a-few-tricks</link><description>&lt;doc fingerprint="3758f87a661d0767"&gt;
  &lt;main&gt;
    &lt;div&gt;
      &lt;p&gt;From a physicist point of view I want to mention this trick and its generalization for operators:&lt;/p&gt;
      &lt;quote&gt;
        &lt;code&gt;      "Two commuting matrices are simultaneously diagonalizable"
&lt;/code&gt;
      &lt;/quote&gt;
      &lt;p&gt;(for physicists all matrices are diagonalizable). Of course the idea is that if you know the eigenvectors of one matrix/operator then diagonalizing the other one is much easier. Here are some applications.&lt;/p&gt;
      &lt;p&gt;1)The system is translation invariant : Because the eigenvectors of the translation operator are $e^{ik.x}$, then one should use the Fourier transform. It solves all the wave equations for light, acoustics, of free quantum electrons or the heat equation in homogeneous media.&lt;/p&gt;
      &lt;p&gt;2)The system has a discrete translation symmetry: The typical system is the atoms in a solid state that form a crystal. We have a discrete translation operator $T_a\phi(x)=\phi(x+a)$ with $a$ the size of the lattice and then we should try $\phi_k(x+a)=e^{ik.a}\phi_k(x)$ as it is an eigenvector of $T_a$. This gives the Bloch-Floquet theory where the spectrum is divided into band structure. It is one of the most famous model of condensed matter as it explains the different between conductors or insulators.&lt;/p&gt;
      &lt;p&gt;3)The system is rotational invariant: One should then use and diagonalize the rotation operator first. This will allow us to find the eigenvalue/eigenvectors of the Hydrogen atom. By the way we notice the eigenspace of the Hydrogen are stable by rotation and are therefore finite dimension representations of $SO(3)$. The irreducible representations of $SO(3)$ have dimension 1,3,5,... and they appears, considering also the spin of the electron, as the columns of the periodic table of the elements (2,6,10,14,...).&lt;/p&gt;
      &lt;p&gt;4)$SU(3)$ symmetry: Particle physics is extremely complicated. However physicists have discovered that there is an underlying $SU(3)$ symmetry. Then considering the representations of $SU(3)$ the zoology of particles seems much more organized (A, B).&lt;/p&gt;
    &lt;/div&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46084535</guid><pubDate>Sat, 29 Nov 2025 01:37:42 +0000</pubDate></item><item><title>System 7 natively boots on the Mac mini G4</title><link>https://macos9lives.com/smforum/index.php?topic=7711.0</link><description>&lt;doc fingerprint="b63c99572fc08fad"&gt;
  &lt;main&gt;
    &lt;div&gt;&lt;p&gt;(And Mac OS 8!)&lt;/p&gt;&lt;p&gt;Hey, guys!&lt;/p&gt;&lt;p&gt;Surely y'all know and have enjoyed Mac OS 9.2.2 booting and beautifully-running on all four Mac mini G4 models for close to 8 years now. (Wow!)&lt;/p&gt;&lt;p&gt;Well, that was one massive revolution...&lt;/p&gt;&lt;p&gt;... But most of us did not think we would live to see the day New World ROM machines, even more so the likes of the Mac mini G4, to NATIVELY boot System 7:&lt;/p&gt;&lt;p&gt;(Gotta love it trying to display 1 GB RAM capacity.)&lt;/p&gt;&lt;p&gt;Before your eyeballs leave your eyesockets completely, I ought to warn that there's still much to be sorted out in this, especially sound, video and networking (the usual suspects). In other words, your mileage may vary, so keep expectations in check!&lt;/p&gt;========================================================&lt;lb/&gt;OK, so HOW in the WORLD is any of this possible?&lt;lb/&gt;========================================================&lt;p&gt;It turned out "New World ROM" Macs had a cousin born out of the clone program (until the usual villain, Steve Jobs, came and killed it), which was an architecture called "&lt;/p&gt;CHRP&lt;p&gt;" (pronounced "chirp"). It was the successor to &lt;/p&gt;PReP&lt;p&gt;, but, unlike PReP, Mac OS was also going to be officially-bootable on it. Close to no CHRP machines ever saw the light of the day, thanks to Jobs' return. Nonetheless, Apple internally developed Mac OS 7.6 ~ 8.0 for CHRP systems before it got axed. It's just that they never released it, but the development was done regardless. On October 2025, it turned out someone preserved some of these Mac versions, which were then acquired and preserved and shared with the world. (&lt;/p&gt;Macintosh Garden link&lt;p&gt;, &lt;/p&gt;archive.org link&lt;p&gt;.)&lt;/p&gt;&lt;p&gt;Although CHRP was left to die, the so-called "New World ROM" Macs inherited much of its architecture and design. As you probably know, these Macs rely on an extra system file called "Mac OS ROM", whereas "Old World ROM" Macs do not need it, and can use their own actual ROM to get Mac OS going. This meant any Mac OS version unaware of the concept of a Mac OS ROM file could not just simply boot in a New World ROM Mac normally. People were able to boot Mac OS versions as low as 8.1, but not any lower, and that too only for the very first few New World ROM Macs, but none of the later ones, which increasingly had a higher and higher minimum OS version.&lt;/p&gt;&lt;p&gt;But not anymore, as the following major events happened:&lt;/p&gt;&lt;p&gt;- The recent Mac OS 8.0 CHRP leaks provided an earlier ROM file that, it turns out, allows regular Mac OS 8.0 to boot, as well. Or, alternatively, the Mac OS ROM file that always worked with Mac OS 8.1 also worked on these Mac OS 8.0 CHRP releases. (Exact details are fuzzy in my memory by now, so someone else might want to correct me if I got something wrong.)&lt;/p&gt;&lt;p&gt;- The recent Mac OS 7.6 CHRP leak provided an additional System Enabler file, which could be exploited for loading Mac OS ROM files. I forget if that's how it worked out-of-the-box, or if a bit of hacking to the System Enabler was required for that, however what I do remember clearly is that, while the System Enabler was hardcoded so that artifically no OS earlier than 7.6 could use it, the OS version check could be patched out of it, so that System 7.5.x (and potentially earlier) can also use it.&lt;/p&gt;&lt;p&gt;In other words, &lt;/p&gt;this file is the reason that earlier Mac OS versions can make use of the Mac OS ROM file&lt;p&gt;, thus bringing Mac OS 7.6.1 and earlier potentially to ALL New World ROM Macs!&lt;/p&gt;&lt;p&gt;(Trivia tidbit: Apparently this enabler was also present in certain archives of the Mac OS 8.0 betas from when it was still known as "Mac OS 7.7". Oops! This thing was right under our nose all this while!)&lt;/p&gt;&lt;p&gt;- Of course, as hinted at previously, a System Enabler _alone_ is NOT enough to boot System 7 and the like when even much newer systems that were already aware of the Mac OS ROM file could not boot. The newer the model of the New World ROM Mac, the less you could actually "go back". The reason is simple: Mac OS ROM files, over time through its various versions, would get new features added, BUT also would remove older ones which were required by older OS versions. The solution? Using &lt;/p&gt;ELN's great Mac OS ROM patching tools&lt;p&gt; (plus other tools of his own), "Rairii" AKA "Wack0", known for his amazing PPC Windows NT 3.51 / NT 4.0 project on &lt;/p&gt;PowerMacs&lt;p&gt; and the &lt;/p&gt;Nintendo GC / Wii / Wii U&lt;p&gt;, analyzed many of these Mac OS ROM files, and fixed + patched + stitched together new Mac OS ROM files that attempt to keep ALL the old features that were removed AND all the new features that were added. In other words, the ultimate Mac OS ROM file that boots everything and runs everything (roughly-speaking). He also is the one who figured out and hacked the System Enabler to also accept OSes earlier than Mac OS 7.6.&lt;/p&gt;&lt;p&gt;Keep in mind, however, that this effort essentially allows Macs that are already able to boot SOME version of Mac OS to ALSO boot older versions. But if a given machine cannot boot ANY Mac OS version, such as the two DLSD PowerBook G4s (&lt;/p&gt;15"&lt;p&gt;, &lt;/p&gt;17"&lt;p&gt;), these patches cannot do anything about that: Their incompatibilities need to be addressed first and separately.&lt;/p&gt;&lt;p&gt;One more interesting thing to note about the similarity between CHRP systems and New World ROM Macs: If you check ANY "Mac OS ROM" file to see its TYPE and CREATOR codes, you will see they are "tbxi" and, you guessed it, "&lt;/p&gt;chrp&lt;p&gt;", respectively. I couldn't believe "chrp" was in ALL the Mac OS ROM files all these years!&lt;/p&gt;========================================================&lt;lb/&gt;Where can I get ahold of this EPIC stuff ? ? ? ? ?&lt;lb/&gt;========================================================&lt;p&gt;Rairii's "super" ROMs are available on &lt;/p&gt;this GitHub repository&lt;p&gt;, under &lt;/p&gt;releases&lt;p&gt;. You may also fetch the patched System Enabler for Mac OS 7.6.1 and earlier from there, and place it in the System Folder. Make sure to download the files from the latest release there.&lt;/p&gt;&lt;p&gt;Note that he applied his patches to 3 different versions of the (US) ROMs:&lt;/p&gt;&lt;p&gt;- 10.2.1 with CPU Software 5.9: The "latest and greatest" Mac OS ROM file of all Mac OS. For reference, this is also the ROM version that the &lt;/p&gt;1.628 GB max RAM Mac OS ROM we have was based on (thus going beyond the 1.5 GB limit)&lt;p&gt;, although do note that the RAM limit break patches are NOT included in this, at least not yet as of the time of writing.&lt;/p&gt;&lt;p&gt;- 2.5.1: A much earlier version of the ROM, but still new enough to support USB. See the GitHub page for details.&lt;/p&gt;&lt;p&gt;- 1.7.1: A very early ROM, which can be well-leveraged by very early New World ROM Macs. See the GitHub page for details.&lt;/p&gt;&lt;p&gt;Note you need ROM version 9.1 or higher to use ATA-6 AKA Ultra ATA/100 AKA Kauai drivers, which are essential on the likes of the Mac mini G4 and the MDD. Special notes for the Mac mini G4 are further down.&lt;/p&gt;========================================================&lt;lb/&gt;What is the COMPLETE list of Mac OS versions that now boot?&lt;lb/&gt;========================================================&lt;p&gt;To be exact, this is the complete list of OSes I have attempted, all on the Mac mini G4 1.5GHz model, with the following results:&lt;/p&gt;&lt;p&gt;- System 6.0.8: &lt;/p&gt;No boot&lt;p&gt;. You get a Happy Mac, followed by a blinking question mark in a floppy icon. (Note: Although this very attempt is UTTERLY insane for multiple technical reasons, it might be not AS seemingly-impossible as one may think, as the 68k emulator resides within the Mac OS ROM file.)&lt;/p&gt;&lt;p&gt;- System 7.0: &lt;/p&gt;No boot&lt;p&gt;. You get a Happy Mac, but then a warning window pops up saying System 7.0 cannot boot on this computer.&lt;/p&gt;&lt;p&gt;- System 7.1.2: &lt;/p&gt;No boot&lt;p&gt;. You get a Happy Mac, but then a warning window pops up saying System 7.1 cannot boot on this computer.&lt;/p&gt;&lt;p&gt;- System 7.5: &lt;/p&gt;BOOTS AND IS STABLE&lt;p&gt;. It requires you to hold shift to turn Extensions (and Control Panels / INITs) off, though, or to get rid of the "Mouse" Control Panel (and possibly more). The system is surprisingly stable! I tested the British version of this one, as Apple's Mac OS Anthology discs did not include the US installers, for some very slacker-y reason.&lt;/p&gt;&lt;p&gt;- System 7.5.2: &lt;/p&gt;Boots, but very broken, close to nothing works&lt;p&gt;. It could be because System 7.5.2 was always VERY machine-specific, and is apparently one of the most broken versions of Mac OS of ALL time, regardless. The machine-specific enablers, and other things, might be what is making it so unstable.&lt;/p&gt;&lt;p&gt;- System 7.5.3: &lt;/p&gt;BOOTS AND IS STABLE&lt;p&gt;. It requires you to hold shift to turn Extensions (and Control Panels / INITs) off, though, or to get rid of the "Mouse" Control Panel (and possibly more). The system is surprisingly stable!&lt;/p&gt;&lt;p&gt;- Mac OS 7.6: &lt;/p&gt;BOOTS AND IS STABLE&lt;p&gt;. Holding shift is not required here. What else can I say? It "works".&lt;/p&gt;&lt;p&gt;- Mac OS 8.1: &lt;/p&gt;BOOTS AND IS STABLE&lt;p&gt;. Holding shift is not required here, either. Behaves much the same as the others, except we now have HFS+ by default. Still, it did NOT like me having a 940 GB HFS+ partition, and prompted me to either eject it or format it. (To be fair, older OSes tried to do that, too, but Mac OS 8.1 was THE OS to _officially_ be able to handle HFS+ properly, so there are no excuses for it to fail here. Mac OS 9.2 ~ 9.2.2 all work perfectly with it.)&lt;/p&gt;&lt;p&gt;- Mac OS 8.5: No boot. Rather, it seems like it WOULD boot, but starting with Mac OS 8.5, Mac OS now always checks to see if the machine you are booting from is within a list of Apple-endorsed machine IDs for the given Mac OS version. In other words, Mac OS 8.5 does not know what the Mac mini G4 is, nor what a G4 Cube is (our Mac mini G4 ROM file makes the mini pretend to be the latter). It seems it should be possible to patch out the machine check. According to Rairii, this should be able to be patched out by disabling such a check on the "boot" resource in the Resource Fork of the System file, in ID 3 (also known as "boot3"). For Mac OS 8.6, it seems like this check happens at the end of boot3, wherever a check for machine ID 406 is located, in which after it's detected, the code checks to see if the exact Mac model is whitelisted or not.&lt;/p&gt;&lt;p&gt;- Mac OS 8.5.1: &lt;/p&gt;No boot&lt;p&gt;. All that applies to Mac OS 8.5 also applies to Mac OS 8.5.1.&lt;/p&gt;&lt;p&gt;- Mac OS 8.6: &lt;/p&gt;No boot&lt;p&gt;. It crashes during the start screen, when the loading bar appears, but before the first extension gets to load. See the top-left corner of the picture for a glitchy visual artifact. Same happens if you try to boot with Extensions off.&lt;/p&gt;&lt;p&gt;- Mac OS 9.0.4: No boot. It crashes during the start screen, when the loading bar appears, but before the first extension gets to load. Same happens if you try to boot with Extensions off. Exact same symptoms as when trying to boot Mac OS 8.6 at least on this mini model, including the visual artifact on the top-left corner.&lt;/p&gt;&lt;p&gt;- Mac OS 9.1: &lt;/p&gt;No boot&lt;p&gt;. It crashes during the start screen, when the loading bar appears, but before the first extension gets to load. Same happens if you try to boot with Extensions off. Exact same symptoms as when trying to boot Mac OS 8.6 and Mac OS 9.0.4 at least on this mini model, including the visual artifact on the top-left corner.&lt;/p&gt;&lt;p&gt;- Mac OS 9.2 ~ 9.2.2: BEST OS EVER, BOOTS AND RUNS BEAUTIFULLY. 'Nuff said.&lt;/p&gt;&lt;p&gt;Note that, although I describe many of these as "stable", I mean you can use much of it normally (sound/video/networking aside) without it crashing or misbehaving, at least not too hard, but that is not to say everything works, because that is just not the case. For example, when present, avoid opening the Apple System Profiler, unless you want a massive crash as it struggles trying to profile and gather all the information about your system. Some other apps or Control Panels might either not work, or work up to a certain point, after which they might freeze, requiring you to Force Quit the Finder to keep on going. And so on.&lt;/p&gt;&lt;p&gt;As you can see, I did not yet try System 7.5.5, Mac OS 7.6.1 and Mac OS 8.0. That's because they all are most likely working exactly as their neighbouring versions. But feel free to confirm.&lt;/p&gt;&lt;p&gt;Most non-mini systems should be able to boot Mac OS 8.6 ~ Mac OS 9.1 just fine. A "Mac OS 8.6 Enabler", so to speak, by LightBulbFun, can be renamed as e.g. "Sawteeth" and put inside the System Folder for some machines that cannot boot Mac OS 8.6 normally, so that they can, then, boot it. It is actually a Mac OS ROM file, but can function as a complementary, helper file to aid the actual Mac OS ROM file in this case. If you'd like, check &lt;/p&gt;here&lt;p&gt; for more info. I have attached "Sawteeth.bin" to this post for convenience. LightBulbFun first shared it on &lt;/p&gt;this post&lt;p&gt;, specifically through this &lt;/p&gt;MEGA link&lt;p&gt;.&lt;/p&gt;&lt;p&gt;Most non-mini systems should also be able to boot Mac OS 8.5 and 8.5.1, especially on G3s and earlier. Some G4 Macs might need to spoof the Mac model in Open Firmware (or some other Forth script added to ROM) to boot, though, or patch the check out like I mentioned for the mini earlier. The reason the mini doesn't have the spoofing as an option is that any spoofing in OF would be overwritten by its own specialized Mac OS ROM, which spoofs a G4 Cube, which is clearly not in the whitelist of supported machines for Mac OS 8.5 and 8.5.1.&lt;/p&gt;&lt;p&gt;Also note that the mini behaves as reported above with Mac OS 8.6 with or without this "8.6 enabler" file (and with or without the System Enabler for Mac OS 7.6.1 and earlier, both of which don't seem to get in the way of later, nor earlier, OSes).&lt;/p&gt;&lt;p&gt;Most importantly, I did &lt;/p&gt;not&lt;p&gt; yet attempt to identify which are the latest versions of each Control Panel and Extension for each of these OSes. If I did, I'm sure it would help a lot, and perhaps address quite a number of these problems. The more people chime in on this effort, the better! Imagine if we had a proper "Mac mini G4 System 7.5.5" CD, then an "MDD Mac OS 8.5.1" CD, then an "iBook G3 Mac OS 7.6.1" CD, and so on. Everyone with a G3 or G4 Mac can help by trying things out!&lt;/p&gt;&lt;p&gt;Namely, something akin to MacTron's efforts highlighting the latest Extensions for Mac OS 9.2.2 and Mac OS 8.6 like this, but also for every other Mac OS version:&lt;/p&gt;========================================================&lt;lb/&gt;But how did you get the mini to boot? It requires its own special ROM!&lt;lb/&gt;========================================================&lt;p&gt;Indeed it does! All credit goes to ELN and all of those who helped him on Mac OS 9 Lives!: you can simply use his tooling (which was also very useful for Rairii) to re-apply the Mac-mini-G4-specific ROM patches to Rairii's latest 10.2.1 ROM, and voila! It works as well as you would hope it to! &lt;/p&gt;&lt;p&gt;You can even use the resulting ROM for Mac OS 9.2.2, as well, even though you don't have to: Originally, the Mac mini G4 ROM as we see them in RossDarker's Mac mini G4 CDs version 8 and 9 (AKA v8 and v9), as well as in all the previous versions, were based on the US ROM v9.6.1. I could not find an explanation as to why ROM v10.2.1 wasn't used in the end, even when digging the old Mac mini G4 thread again that started it all. Perhaps because we already had a working ROM with v9.6.1 and did not want to risk breaking anything, or who knows. However, I have thoroughly tested Mac OS 9.2.2 with this new ROM combination (latest Rairii 10.2.1 + latest Mac mini G4 patches AKA v9 patches), and from what I could tell, everything behaves &lt;/p&gt;exactly&lt;p&gt; the same as with the previous ROM we always used. Except now we have the ability to use the same ROM to also boot System 7.5 (I still can't believe this, even though it is true).&lt;/p&gt;&lt;p&gt;(For the record, while the 9.6.1 ROM was also modified to spoof the Mac mini G4 model identifier as a G4 Cube, we also tried to spoof it as a QuickSilver 2002 at one point, but someone reported sound issues with that, and so it was quickly changed back to a G4 Cube and such a change never made it into one of RossDarker's CDs. So just about everyone using Mac OS on the mini for all these years has had a ROM reporting to the OS as a G4 Cube, exclusively.)&lt;/p&gt;&lt;p&gt;To apply the Mac mini G4 patches, I used ELN's &lt;/p&gt;tbxi&lt;p&gt; and &lt;/p&gt;tbxi-patches&lt;p&gt; to apply his "macmini.py" script. You can follow the instructions as per the tbxi-patches page, which you should not let intimidate you even if you are not used to this kind of thing. It's quick and easy, and the scripts are also fully-commentated very nicely by ELN if you are curious about what it is doing and why.&lt;/p&gt;&lt;p&gt;In my case, first I tried using the latest Python 3.13.9 both from Windows 7 (bad idea due to resource fork loss) and macOS 10.14.6 Mojave, but neither worked: it seems like that version of Python was just too new. I then retried with &lt;/p&gt;Python 3.8.10&lt;p&gt; instead (which I chose thinking it might be more period-appropriate for the script's age) on Mojave, which worked &lt;/p&gt;flawlessly&lt;p&gt;. I didn't try it, but perhaps an older Python version might work on PowerPC OS X, as well.&lt;/p&gt;&lt;p&gt;I used the Python installer &lt;/p&gt;from the official website&lt;p&gt;, and I also used an "official" Git installer from &lt;/p&gt;here&lt;p&gt; (thus avoiding any package manager headache... man, how I hate non-Mac-OS systems, including OS X, and package managers in general...)&lt;/p&gt;&lt;p&gt;If somehow someone with plenty of Python knowledge and the willingness to put enough time into it wished to, both tbxi and tbxi-tools could, perhaps, be ported to &lt;/p&gt;MacPython 2.3.5&lt;p&gt;, so that we could do all this patching from Mac OS 9.2.2 directly and natively without leaving our main OS. That would also be awesome! (Of course, it helps that this is also available on more recent systems nonetheless, because then everyone gets to join in on the fun with all kinds of different backgrounds and setups.)&lt;/p&gt;&lt;p&gt;For convenience, I attached the final patched ROM to this post, so that anyone can go wild on their minis right away!&lt;/p&gt;========================================================&lt;lb/&gt;Why should I care when Mac OS 9.2.2 already boots, and runs better?&lt;lb/&gt;========================================================&lt;p&gt;It is also my opinion Mac OS 9.2.2 is the greatest OS, and Mac OS, ever, but not everything that is possible in earlier Mac OS versions is possible in Mac OS 9.2.2. For example, some software requires Mac OS 9.0.4 or earlier to work. A lot of software is System-7-exclusive.&lt;/p&gt;&lt;p&gt;Some people also just prefer the likes of System 7 for its even-lighter memory footprint, lack of mandated Appearance Manager and the like. Mac OS 9.2.2 is already overkill-fast on the mini, and on most New World ROM Macs, but the likes of System 7.5 are just RIDICULOUSLY fast. Even more ridiculously. I still am trying to come into terms with how indescribably fast using it on the mini was. It got even faster when I thought there was no way to get "faster than instantaneous", as Mac OS 9.2.2 always felt instantaneous like no other system already!&lt;/p&gt;&lt;p&gt;People might also have some other kind of reason and/or special attachment to an earlier OS version. Or maybe people want to explore older OS APIs and behaviors, perhaps even make a new application they want to know how it will behave on bare-metal not just on Mac OS 9, but also System 7 etc..&lt;/p&gt;&lt;p&gt;The value is in opening up the doors that give us, the users, more options that help us all out. &lt;/p&gt;========================================================&lt;lb/&gt;Final remarks&lt;lb/&gt;========================================================&lt;p&gt;Above all, thank you to everyone that made this possible. But I wanted to emphasize and give special thanks to Rairii for engineering all these ROMs, Mac84 for archiving and sharing all the CHRP discs, ELN for engineering all the Mac mini G4 ROM compatibility scripts and creating all the ROM and other Mac OS tooling, and to the Mac community at large everywhere that assisted in all of this into becoming reality. There's honestly many, many people to thank we owe over this one way or another, both in small and big ways.&lt;/p&gt;&lt;p&gt;I can't wait to see what people will do with all these new Mac OS versions on their New World ROM systems over the course of time!&lt;/p&gt;&lt;/div&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46084956</guid><pubDate>Sat, 29 Nov 2025 03:26:01 +0000</pubDate></item><item><title>The 'S&amp;P 493' reveals a different U.S. economy</title><link>https://www.msn.com/en-us/money/markets/the-s-p-493-reveals-a-very-different-us-economy/ar-AA1R1VUJ</link><guid isPermaLink="false">https://news.ycombinator.com/item?id=46085344</guid><pubDate>Sat, 29 Nov 2025 05:22:13 +0000</pubDate></item><item><title>Garfield's Proof of the Pythagorean Theorem</title><link>https://en.wikipedia.org/wiki/Garfield%27s_proof_of_the_Pythagorean_theorem</link><description>&lt;doc fingerprint="cf79536f86bd73e1"&gt;
  &lt;main&gt;&lt;head rend="h1"&gt;Garfield's proof of the Pythagorean theorem&lt;/head&gt;&lt;p&gt;Garfield's proof of the Pythagorean theorem is an original proof of the Pythagorean theorem discovered by James A. Garfield (November 19, 1831 ‚Äì September 19, 1881), the 20th president of the United States. The proof appeared in print in the New-England Journal of Education (Vol. 3, No.14, April 1, 1876).[1][2] At the time of the publication of the proof Garfield was a congressman from Ohio. He assumed the office of President on March 4, 1881, and served in that position until his death on September 19, 1881, having succumbed to injuries sustained when he was shot in an assassination in July.[3] Garfield is thus far the only President of the United States to have contributed anything original to mathematics. The proof is nontrivial and, according to the historian of mathematics William Dunham, "Garfield's is really a very clever proof."[4] The proof appears as the 231st proof in The Pythagorean Proposition, a compendium of 370 different proofs of the Pythagorean theorem.[5]&lt;/p&gt;&lt;head rend="h2"&gt;The proof&lt;/head&gt;[edit]&lt;p&gt;In the figure, is a right-angled triangle with right angle at . The side-lengths of the triangle are . Pythagorean theorem asserts that .&lt;/p&gt;&lt;p&gt;To prove the theorem, Garfield drew a line through perpendicular to and on this line chose a point such that . Then, from he dropped a perpendicular upon the extended line . From the figure, one can easily see that the triangles and are congruent. Since and are both perpendicular to , they are parallel and so the quadrilateral is a trapezoid. The theorem is proved by computing the area of this trapezoid in two different ways.&lt;/p&gt;&lt;list rend="dl"&gt;&lt;item rend="dd-1"&gt;.&lt;/item&gt;&lt;/list&gt;&lt;p&gt;From these one gets&lt;/p&gt;&lt;p&gt;which on simplification yields&lt;/p&gt;&lt;head rend="h2"&gt;References&lt;/head&gt;[edit]&lt;list rend="ol"&gt;&lt;item&gt;^ G., J. A. (1876). "PONS ASINORUM". New England Journal of Education. 3 (14): 161. ISSN 2578-4145. JSTOR 44764657.&lt;/item&gt;&lt;item&gt;^ Kolpas, Sid J. "Mathematical Treasure: James A. Garfield's Proof of the Pythagorean Theorem". maa.org. Mathematical Association of America. Archived from the original on 8 December 2023. Retrieved 29 November 2023. (The article appeared in the peer-reviewed online journal Convergence published by the Mathematical Association of America.)&lt;/item&gt;&lt;item&gt;^ Del Arte, Alonso (February 2019). "A future president once published a mathematical proof". medium.com. Retrieved 29 November 2023.&lt;/item&gt;&lt;item&gt;^ Dunham, William (1994). The Mathematical Universe: An Alphabetical Journey Through the Great Proofs, Problems, and Personalities. New York: John Wiley &amp;amp; Sons. p. 99. ISBN 0-471-53656-3.&lt;/item&gt;&lt;item&gt;^ Loomis, Elisha Scott (1940). The Pythagorean Proposition (2 ed.). Washington DC: National Council of Teachers of Mathematics. p. 109. ISBN 978-0-87353-036-1. Retrieved 28 November 2023. &lt;code&gt;{{cite book}}&lt;/code&gt;: ISBN / Date incompatibility (help) (A collection of 370 different proofs of the Pythagorean theorem.)&lt;/item&gt;&lt;/list&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=46085585</guid><pubDate>Sat, 29 Nov 2025 06:37:05 +0000</pubDate></item></channel></rss>