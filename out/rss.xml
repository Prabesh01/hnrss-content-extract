<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Hacker News: Front Page</title><link>https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml</link><description>Hacker News RSS</description><atom:link href="https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml" rel="self"/><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><language>en</language><lastBuildDate>Sun, 16 Nov 2025 08:12:56 +0000</lastBuildDate><item><title>EyesOff: How I built a screen contact detection model</title><link>https://ym2132.github.io/building_EyesOff_part2_model_training</link><description>&lt;doc fingerprint="fb95b783d3ea95b"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;EyesOff: How I Built A Screen Contact Detection Model&lt;/head&gt;
    &lt;p&gt;I trained a model for my app EyesOff, which detects when people are looking at your screen to protect you from shoulder surfing. With no existing dataset for this task, I hand-labelled 20k+ images for training and created synthetic gaze labels for pre-training. The final model achieves ~71% accuracy across close and mid-range distances.&lt;/p&gt;
    &lt;head rend="h3"&gt;Why Do I Need a Custom Model?&lt;/head&gt;
    &lt;p&gt;For the past 3 months, I have been working to create a model to detect whether or not someone is looking at a screen. This blog recounts the steps I took to train such a model.&lt;/p&gt;
    &lt;p&gt;I am building this model for EyesOff. It’s an application which detects people looking at your screen. The aim is to keep you safe from shoulder surfing, utilising your webcam to give you the power to prevent snoopers.&lt;/p&gt;
    &lt;p&gt;The first model I considered for the app was the Eye-Contact-CNN1, which was trained to detect eye contact in children. However, due to its license I cannot use it in EyesOff. Also, this model is too restrictive, as it only classifies as looking if the person looks directly at the camera. Making the Eye-Contact-CNN too specific for EyesOff.&lt;/p&gt;
    &lt;p&gt;Nevertheless, I am grateful to the authors as their paper is immensely useful in detailing its approach. Because I could not use it out of the box, it led me on a journey to build my own dataset &amp;amp; model.&lt;/p&gt;
    &lt;p&gt;Before deciding to build a custom deep learning model I tried a number of different approaches, I won’t go in to details here but feel free to reach out if you want to know more on any of these approaches7. Here’s a quick list:&lt;/p&gt;
    &lt;code&gt;- eye-contact-cnn - it was too restrictive in boundaries for detection.
- mediapipe - I tried to use landmarks and headpose as heuristic 
  approximations, setting thresholds for looking and not looking,
  but this was too fragile.
- gaze detection + estimation models - another approach of setting 
  manual thresholds for angles which were looking at the screen.
  I also considered a calibration based approach, e.g. show the user some
  calibration spots and use that to build the bounds of their screen.
  This works for the main user, but breaks down when the algorithm see's
  a head in a position other than the one it was callibrated on (e.g.
  a shoulder surfer). Also, I do not want to expose users to a
  calibration flow, I want the user of EyesOff to have a smooth experience.
  &lt;/code&gt;
    &lt;head rend="h2"&gt;Overcoming the Lack of Data&lt;/head&gt;
    &lt;p&gt;The biggest problem in this whole process was the lack of data. This was my first time training a model for a task which hasn’t been performed before. As such, no dataset (that I could find) has been created for such a task. Many face datasets exist but none with the correct labels that I need. The task itself is a binary classification task in which the model predicts whether a person is looking or not looking at the screen.&lt;/p&gt;
    &lt;head rend="h2"&gt;Building the Custom Dataset&lt;/head&gt;
    &lt;head rend="h3"&gt;First Steps&lt;/head&gt;
    &lt;p&gt;Given the lack of data, I had to come up with my own dataset. I started by thinking I could only use images of people using their laptops, as this would be the closest to what the model would see in production. However, this type of data was quite hard to come by. In fact, all I need is people in the image that are facing towards the camera, as this is essentially what the webcam will see. I.e. we take images with people in them and assume that the camera is a webcam at the top of an imaginary display. This allowed me to widen the range of possible data I could use.&lt;/p&gt;
    &lt;p&gt;Initially, I thought I could do this with images of myself + my friends however I quickly realised this would create issues in terms of generalisability. To get over this I started looking for face datasets which I would label myself.&lt;/p&gt;
    &lt;p&gt;As a test, I took the FFHQ dataset, having come across it during GAN training. I went through and manually labelled a subset of FFHQ (4900 images) to test my hypothesis. To my eye it worked ok, however it failed on a small test set of images taken of myself. I figured this was because the FFHQ images are quite unlike real life images, Nvidia applied very heavy augmentations to them, making them look a little weird. So, the next step was to find images which looked real.&lt;/p&gt;
    &lt;p&gt;Again I began looking for gaze datasets but didn’t find much which were easily accessible (GazeFace, MPIIGaze etc require you to sign up to receive and my requests weren’t replied to). Until I found the selfie dataset2 on Kaggle. This was a great starting point, from this I took and labelled 3400 images. However, given the dataset is of selfies, a lot of the time faces were occluded by phones, or eyes were looking at the phones, so the data wasn’t the best for my use case. I did try labelling only images without phones in, but it didn’t help.&lt;/p&gt;
    &lt;head rend="h3"&gt;Developing a Consistent Labelling Framework&lt;/head&gt;
    &lt;p&gt;A lot of time was spent on developing my labelling framework - i.e. how can I consistently label 1000s of images. I had to iron out “the boundary for someone looking at the screen”. I decided to follow the Eye-Contact-CNN paper closely, meaning labelling as looking = directly at the camera or slightly around it, rather than “in the general direction” which was the boundary I began with. I also had to make assumptions on the camera position - to make my life easier I assume a laptop setup where the camera is at the top of the screen. This is a limitation but further work will be done to remove the assumption. Another idea I had was to use the Eye-Contact-CNN to label my data for me, but this did not produce great results. The looking bounds were too tight, the EyesOff model is useless if it only says you are looking if you look directly at the camera, having done this I realised the importance of hand labelled data.&lt;/p&gt;
    &lt;p&gt;Quick note on YuNet, it struggled to detect faces in 1080 x 1920 images, however halving the resolution seemed to resolve the issue. I’m not sure what caused this.&lt;/p&gt;
    &lt;head rend="h3"&gt;Start of the VCD Dataset&lt;/head&gt;
    &lt;p&gt;Upon observing the limitations of the selfie dataset, namely low quality images and situations which were not close to the production environment of the EyesOff model, I began a search for new datasets. I found the Video Conferencing Dataset (VCD)3. This dataset was created to evaluate video codecs for video conferencing. However, it is also perfect for the EyesOff use case, people in video calls smack in front of the webcam and occasionally looking around. The dataset contains 160 unique individuals in different video conferencing settings. I set to work labelling the dataset, the pipeline goes like this:&lt;/p&gt;
    &lt;code&gt;- Run videos frame by frame but only extract frames at a fixed interval. 
  Extracting every single frame creates issues: firstly, most frames close to 
  each other are the same (diversity in images is important). Also if you 
  have a 30fps video which lasts 30 seconds, each video gives 900 frames. With 
  160 videos you end up with 144,000 images to label!

- Next we take YuNet and run it on the extracted frames, doing this we crop out the 
  faces in each image. I added this step to utilise YuNet, because I love it,
  but more importantly it's an amazing facial detection model and by using it to do the 
  heavy work of detecting faces, we break up our task. YuNet handles facial detection 
  and the EyesOff model only needs to predict if the face is looking or not. 
  It also helps when multiple people are in the scene, making data collection much simpler 
  (imagine having to label images where 3 people are looking but 2 are not, and how would 
  we get diversity in such scenes).It's a bit hacky but it works, also in the production pipeline
  this lets us handle things much easier, we'd get face crops and send them one at a
  time to the EyesOff model, rather than dealing with multiple at once.

- Then I take the face crops and run them through my labeller as before. 
  The labeller was a small tool built to speed up this process, I did look into proper 
  labelling tools such as label studio but found them too heavy for such a use case.
  Using Claude I built a simple labeller, it shows one image at a time,
  with 4 buttons: 1 = label "not looking", 2 = label "looking", 3 = skip and q = go back 
  to previous image. At first labelling was a very slow process, but the more I labelled
  the faster I got. By the end I could label around 1000 images in 15 minutes, 
  to get this fast I would use skip pretty frequently, if a case is too ambiguous 
  it makes more sense to skip it than to waste time labelling it. In the future I 
  will go back and review the skipped cases correctly labelling them and adding them 
  to the train set.

- After labelling the images we can train the model! However we have to be careful 
  in this process, I learnt that facial images need a train-test split.
  By this I mean, the same face cannot appear in train and test, even
  if the image is different. To see why this is required imagine the following: you 
  have a face labelled in 100 different scenarios and poses but it is always looking,
  the model may learn this particular face is always looking and as such when evaluating 
  the test set the result is not reliable.&lt;/code&gt;
    &lt;p&gt;That’s it for the data labelling process for the VCD dataset! All in all I got 5900 images from the VCD dataset. Take a look at Figure 1 for the class distribution.&lt;/p&gt;
    &lt;p&gt;Time to discuss training details!&lt;/p&gt;
    &lt;head rend="h2"&gt;Training the EyesOff Model&lt;/head&gt;
    &lt;head rend="h3"&gt;Model Choice&lt;/head&gt;
    &lt;p&gt;Given the nature of EyesOff, being an application which will always run in the background I want the model to be relatively small. YuNet satisfies this, having only 75856 parameters. For the EyesOff model I chose a pre-trained EfficientNetB0 model, which has 5288548 parameters, it is considerably larger than YuNet but still small enough to run on a CPU without affecting performance or draining battery too much.&lt;/p&gt;
    &lt;p&gt;The decision to use EfficientNetB0 is arbitrary, I could use any other model or architecture and probably get similar or better results. It is definitely worthwhile trying other models. Ultimately however, I think the best approach would probably be to take the YuNet architecture and build the EyesOff model on that. YuNet is so strong for such a small model and I’m sure the architecture can be adapted to give great results in the EyesOff setting. This is future work I endeavour to undertake as the application is built out further.&lt;/p&gt;
    &lt;head rend="h3"&gt;Training the EyesOff Model - A Two Stage Approach&lt;/head&gt;
    &lt;p&gt;I follow the setup laid out in the Eye-Contact-CNN paper to train my model, with a few changes. The two step process takes a pre-trained ImageNet model as its base. In phase 1 we pre-train on a gaze regression task and in phase 2 we finetune on the screen contact classification task. This approach aids with generalisation. In phase 1, the model learns the relationship between gaze and where a person is looking, this guides the model in how it adapts to phase 2. Essentially, preventing the model from relying on how a face looks or the background etc, by forcing the model to consider the eyes and where they are looking.&lt;/p&gt;
    &lt;head rend="h4"&gt;Phase 1&lt;/head&gt;
    &lt;p&gt;This approach is very clever, however following it wasn’t so straightforward. In phase 1, you need images of faces and the corresponding gaze vector labels. The gaze vector has two values, pitch and yaw. The paper used existing gaze datasets (MPIIFaceGaze, EYEDIAP and SynHead), instead of using these I created a custom gaze regression dataset. To do so, I took the selfie dataset and another dataset of dashcams recording drivers4 and created synthetic gaze vectors. The synthetic gaze vectors are created with a gaze estimation model provided by OpenVino, gaze_estimation_adas_0002 model5. This model requires 3 inputs: left eye crop, right eye crop and the 3 headpose angles. These can be gotten using MediaPipe’s facial landmarker model6. This model outputs a mesh of 478 landmarks and a facial transformation matrix. Using the former we can crop out the eyes and with the latter we get the headpose angles.&lt;/p&gt;
    &lt;p&gt;Armed with the 3 inputs, we create the gaze vectors and then undertake phase 1 of training. In this phase most blocks of the pre-trained EfficientNetB0 are enabled. We freeze the first 4 blocks, accounting for roughly 5% of total parameter count (as can be seen in figure 2), so 95% of the model’s weights are available to be updated.&lt;/p&gt;
    &lt;p&gt;The model is trained for 20 epochs (48000 images in the dataset), using a SmoothL1Loss, learning_rate=5e-5 and weight_decay=1e-4. By the end of training we reach an MAE of \(4.35\degree\), in the Eye-Contact-CNN paper convergence for phase 1 is defined as an MAE of less than \(6\degree\). With phase 1 complete, we can move on to phase 2 and building the EyesOff model proper. An important caveat here, we used the OpenVino gaze estimation model, and as it is an estimation there is error here and our model is probably not as good as it can be. However, labelling 50k images myself with gaze vectors did not sound fun so here we are. Perhaps making use of the same datasets they did would improve the performance in phase 1 and the EyesOff model as a whole.&lt;/p&gt;
    &lt;head rend="h4"&gt;Phase 2&lt;/head&gt;
    &lt;p&gt;Phase 1 provides us a strong foundation to start from in phase 2. In phase 2, most of the network is frozen. We unfreeze blocks 7 and onwards which represent, ~30% of the networks parameters. The model is trained for 20 epochs, using a BCEWithLogitsLoss, learning_rate=1e-5 and weight_decay=1e-4, on the 5900 images from the VCD dataset. It’s a pretty simple phase, but there is a little more to it.&lt;/p&gt;
    &lt;p&gt;We employ a trick in phase 2, POS sampling. We provide a POS sampling weight, to the loss function, which determines the weight applied to positive samples (POS = positive) in the loss function. In our problem a positive sample is any for the “looking” class, i.e. we set looking label = 1 as it is the one we care about. The weight we apply is determined by:&lt;/p&gt;
    &lt;p&gt;\[\text{POS\_weight} = \frac{\text{num\_not\_looking\_cases}}{\text{num\_looking\_cases}}\]&lt;/p&gt;
    &lt;p&gt;This gives us a value between 0 and 1 if we have more looking cases, which as you can see in figure 1, we do. By doing this we underweight the loss values given by predicting looking, meaning it has less impact in the gradient update. POS_weight aims to deter the model from always predicting the majority class.&lt;/p&gt;
    &lt;head rend="h2"&gt;Evaluating the EyesOff Model&lt;/head&gt;
    &lt;p&gt;To evaluate the models I created a small test case, by taking some videos of a few people in different scenarios while looking at a laptop. Either while working and sitting in front of the laptop, or standing a few steps back. I also took one video where I look at and away from the screen but at trickier angles/positions. The three test cases are called close, mid and close_subtle respectively.&lt;/p&gt;
    &lt;p&gt;The number of looking and not looking images for the 3 types of video are shown below. This is important as it informs us of whether or not the model is randomly guessing:&lt;/p&gt;
    &lt;head rend="h3"&gt;Testing Dataset Splits&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="6"&gt;
        &lt;cell role="head"&gt;Category&lt;/cell&gt;
        &lt;cell role="head"&gt;Looking&lt;/cell&gt;
        &lt;cell role="head"&gt;Not Looking&lt;/cell&gt;
        &lt;cell role="head"&gt;Total&lt;/cell&gt;
        &lt;cell role="head"&gt;Looking %&lt;/cell&gt;
        &lt;cell role="head"&gt;Not Looking %&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="6"&gt;
        &lt;cell&gt;close&lt;/cell&gt;
        &lt;cell&gt;961&lt;/cell&gt;
        &lt;cell&gt;1175&lt;/cell&gt;
        &lt;cell&gt;2136&lt;/cell&gt;
        &lt;cell&gt;45.0%&lt;/cell&gt;
        &lt;cell&gt;55.0%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="6"&gt;
        &lt;cell&gt;close_subtle&lt;/cell&gt;
        &lt;cell&gt;542&lt;/cell&gt;
        &lt;cell&gt;254&lt;/cell&gt;
        &lt;cell&gt;796&lt;/cell&gt;
        &lt;cell&gt;68.1%&lt;/cell&gt;
        &lt;cell&gt;31.9%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;mid&lt;/cell&gt;
        &lt;cell&gt;746&lt;/cell&gt;
        &lt;cell&gt;518&lt;/cell&gt;
        &lt;cell&gt;1264&lt;/cell&gt;
        &lt;cell&gt;59.0%&lt;/cell&gt;
        &lt;cell&gt;41.0%&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;So, for the close model always guessing the majority class randomly would return 55% accuracy, for close_subtle 68% and for mid 59%. These accuracy scores are the baseline to beat.&lt;/p&gt;
    &lt;p&gt;Let’s look deeper into the VCD EyesOff model, and compare the model trained using the phase 1 &amp;amp; phase 2 approach, another trained with only phase 2 (i.e. assessing the impact of the gaze regression pre-train) and a model trained on only phase 2 and no POS_Weight.&lt;/p&gt;
    &lt;p&gt;Take a look at Table 2:&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Scenario&lt;/cell&gt;
        &lt;cell role="head"&gt;Model&lt;/cell&gt;
        &lt;cell role="head"&gt;Accuracy&lt;/cell&gt;
        &lt;cell role="head"&gt;F1 Score&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;CLOSE&lt;/cell&gt;
        &lt;cell&gt;vcd_pretrain&lt;/cell&gt;
        &lt;cell&gt;79.44%&lt;/cell&gt;
        &lt;cell&gt;82.03%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;CLOSE&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain&lt;/cell&gt;
        &lt;cell&gt;59.86%&lt;/cell&gt;
        &lt;cell&gt;71.13%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;CLOSE&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain_no_POS&lt;/cell&gt;
        &lt;cell&gt;53.23%&lt;/cell&gt;
        &lt;cell&gt;68.91%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;MID&lt;/cell&gt;
        &lt;cell&gt;vcd_pretrain&lt;/cell&gt;
        &lt;cell&gt;49.93%&lt;/cell&gt;
        &lt;cell&gt;37.33%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;MID&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain&lt;/cell&gt;
        &lt;cell&gt;52.48%&lt;/cell&gt;
        &lt;cell&gt;39.75%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;MID&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain_no_POS&lt;/cell&gt;
        &lt;cell&gt;57.22%&lt;/cell&gt;
        &lt;cell&gt;70.13%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;CLOSE_SUBTLE&lt;/cell&gt;
        &lt;cell&gt;vcd_pretrain&lt;/cell&gt;
        &lt;cell&gt;56.78%&lt;/cell&gt;
        &lt;cell&gt;68.95%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;CLOSE_SUBTLE&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain&lt;/cell&gt;
        &lt;cell&gt;62.25%&lt;/cell&gt;
        &lt;cell&gt;75.19%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;CLOSE_SUBTLE&lt;/cell&gt;
        &lt;cell&gt;vcd_no_pretrain_no_POS&lt;/cell&gt;
        &lt;cell&gt;68.09%&lt;/cell&gt;
        &lt;cell&gt;81.02%&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;vcd_pretrain, with pre-training and POS, has the highest overall average accuracy at 64%. This shows that gaze pre-training has benefits and as such from now on all models will include pre-training + the POS parameter. Note than the model with no_POS does best at the close_subtle, but upon further inspection its accuracy is 68.09% the same as the looking % of images which is 68.1%. This indicates it is not better but rather all models struggle on this set of images - leading us to discover we need more data!&lt;/p&gt;
    &lt;p&gt;Data is king in deep learning and it was only inevitable that our small dataset of VCD images would not be enough.&lt;/p&gt;
    &lt;head rend="h3"&gt;Getting More Data&lt;/head&gt;
    &lt;p&gt;I began collecting more data, gathering it from the following YouTube videos, NOTE these videos are all CC-BY licensed. The images are high quality, with most faces close to the camera and some far away. I tried to collect small images from zoom meetings, as I thought small low quality images would act as people far away, we’ll see later this wasn’t the best method. It appears it’s best to provide the model with high quality images. Letting the model learn the relationship between the data and whether or not a face is looking8.&lt;/p&gt;
    &lt;p&gt;After labelling ~20k more images we end up with 10k good images to add to the original ~5000, and the other ~10k were skipped. As a result the dataset makeup changed, as seen in figure 3.&lt;/p&gt;
    &lt;p&gt;The imbalance is slightly lessened + we have a lot more images - although the dataset is still relatively small. As EyesOff is developed further I hope to increase the size of this dataset further. Building the dataset has been very time consuming, with most time spent labelling images.&lt;/p&gt;
    &lt;head rend="h3"&gt;Re-evaluating the Model&lt;/head&gt;
    &lt;p&gt;This section discusses the results of the expanded data collection. To test if the data collection was successful, I ran a bunch of training runs each with different datasets. In each run, the model used is the same EfficientNetB0, the dataset just differs.&lt;/p&gt;
    &lt;p&gt;The following 3 tables show the performance on each task by a variety of different models, we will walk through the data setup for each model. There are 7 different models which we have evaluate, I will list them below in the following format &amp;lt;model_name&amp;gt; - &amp;lt;dataset setup&amp;gt;.&lt;/p&gt;
    &lt;code&gt;- vcd_only - VCD dataset only
- vcd_plus_v1 - VCD + v1 was my original extra data, it consists of lower quality and smaller images 
- vcd_plus_v2 - VCD + v2 is the second set of extra data, consisting of high quality and large images (e.g. vlog style images)
- vcd_plus_v2FULL - VCD + same as v2 but has more images, v2FULL has roughly 5000 more images than v2
- vcd_plus_v1v2 - VCD + v1 and v2 
- vcd_plus_v1_v2FULL - VCD + v1 and v2FULL
- big_pretrain - VCD + vcd_plus_v2FULL, but in phase 1 I undertake a bigger pre-train, including both the selfie dataset and a driver awareness dataset&lt;/code&gt;
    &lt;head rend="h4"&gt;Evaluation Tables&lt;/head&gt;
    &lt;p&gt;Let’s discuss the highlights in each table&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Model&lt;/cell&gt;
        &lt;cell role="head"&gt;Accuracy&lt;/cell&gt;
        &lt;cell role="head"&gt;F1 Score&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_only&lt;/cell&gt;
        &lt;cell&gt;79.44%&lt;/cell&gt;
        &lt;cell&gt;82.03%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1&lt;/cell&gt;
        &lt;cell&gt;74.45%&lt;/cell&gt;
        &lt;cell&gt;75.05%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2&lt;/cell&gt;
        &lt;cell&gt;74.35%&lt;/cell&gt;
        &lt;cell&gt;75.03%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2FULL&lt;/cell&gt;
        &lt;cell&gt;76.07%&lt;/cell&gt;
        &lt;cell&gt;76.42%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1v2&lt;/cell&gt;
        &lt;cell&gt;73.07%&lt;/cell&gt;
        &lt;cell&gt;71.75%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1_v2FULL&lt;/cell&gt;
        &lt;cell&gt;73.75%&lt;/cell&gt;
        &lt;cell&gt;72.67%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;big_pretrain&lt;/cell&gt;
        &lt;cell&gt;79.78%&lt;/cell&gt;
        &lt;cell&gt;80.95%&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;big_pretrain has the best performance, it performs much better than vcd_plus_v2FULL alone - probably because the extra pre-train lets the model learn the relation between eyes and headpose and gaze direction better. vcd_only has good close performance too, probably because it is the closest to true close images. I.e. someone sitting at a screen and looking at and around it. This is surprising as vcd_only has the fewest images.&lt;/p&gt;
    &lt;head rend="h6"&gt;Mid Test&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Model&lt;/cell&gt;
        &lt;cell role="head"&gt;Accuracy&lt;/cell&gt;
        &lt;cell role="head"&gt;F1 Score&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_only&lt;/cell&gt;
        &lt;cell&gt;49.93%&lt;/cell&gt;
        &lt;cell&gt;37.33%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1&lt;/cell&gt;
        &lt;cell&gt;61.28%&lt;/cell&gt;
        &lt;cell&gt;59.44%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2&lt;/cell&gt;
        &lt;cell&gt;70.69%&lt;/cell&gt;
        &lt;cell&gt;68.31%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2FULL&lt;/cell&gt;
        &lt;cell&gt;71.25%&lt;/cell&gt;
        &lt;cell&gt;69.15%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1v2&lt;/cell&gt;
        &lt;cell&gt;69.77%&lt;/cell&gt;
        &lt;cell&gt;71.30%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1_v2FULL&lt;/cell&gt;
        &lt;cell&gt;74.37%&lt;/cell&gt;
        &lt;cell&gt;76.89%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;big_pretrain&lt;/cell&gt;
        &lt;cell&gt;67.74%&lt;/cell&gt;
        &lt;cell&gt;58.89%&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Here we see the real impact of adding more data, vcd_plus_v1_v2FULL has the best performance at mid range - this does make sense as v1 has the most mid range looking images. vcd_plus_v2FULL comes in second which is also interesting as no images here are really mid range looking.&lt;/p&gt;
    &lt;head rend="h6"&gt;Close Subtle Test&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Model&lt;/cell&gt;
        &lt;cell role="head"&gt;Accuracy&lt;/cell&gt;
        &lt;cell role="head"&gt;F1 Score&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_only&lt;/cell&gt;
        &lt;cell&gt;56.78%&lt;/cell&gt;
        &lt;cell&gt;68.95%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1&lt;/cell&gt;
        &lt;cell&gt;56.66%&lt;/cell&gt;
        &lt;cell&gt;68.55%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2&lt;/cell&gt;
        &lt;cell&gt;57.91%&lt;/cell&gt;
        &lt;cell&gt;68.66%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v2FULL&lt;/cell&gt;
        &lt;cell&gt;64.45%&lt;/cell&gt;
        &lt;cell&gt;72.34%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1v2&lt;/cell&gt;
        &lt;cell&gt;59.30%&lt;/cell&gt;
        &lt;cell&gt;69.61%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vcd_plus_v1_v2FULL&lt;/cell&gt;
        &lt;cell&gt;61.43%&lt;/cell&gt;
        &lt;cell&gt;70.79%&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;big_pretrain&lt;/cell&gt;
        &lt;cell&gt;65.95%&lt;/cell&gt;
        &lt;cell&gt;73.41%&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;vcd_plus_v2FULL and big_pretrain come out on top here. This is the hardest case, it involves keeping headpose still and slightly looking to the side etc. As we improve the EyesOff model this will be a big area for improvement leading to a better user experience.&lt;/p&gt;
    &lt;p&gt;So, if we bring all these results together we end up with the following models on top, as you probably guessed, vcd_plus_v2FULL and big_pretrain. Firstly, this highlights the importance of scale and secondly it is an amazing result! I am very happy to have trained a model which works, and one which exhibits some scaling laws.&lt;/p&gt;
    &lt;p&gt;While big_pretrain has slightly better overall accuracy (71.16% vs 70.59%), I’m choosing vcd_plus_v2FULL because mid-range performance is critical for the shoulder surfing use case. This is where attackers are most likely to be positioned, and vcd_plus_v2FULL achieves 71.25% on mid-range vs big_pretrain’s 67.74% - a significant 3.5% improvement where it matters most.&lt;/p&gt;
    &lt;head rend="h2"&gt;Next Steps&lt;/head&gt;
    &lt;p&gt;There is still much to do, as I go back to building the EyesOff Application ready for re-launch I leave some notes here for my future self. Regarding the model, first step would be to collect more data. Next up is to reduce the model size and increase efficiency and there are many ways to do this, one way would be to quantize the model or utilise the ONNX format to compile the model, the other more difficult but more fruitful path would be to utilise a better architecture. Something like the YuNet architecture but tuned for the EyesOff task.&lt;/p&gt;
    &lt;p&gt;Thanks for reading and keep your eyes out for EyesOff!&lt;/p&gt;
    &lt;p&gt;1https://github.com/rehg-lab/eye-contact-cnn&lt;/p&gt;
    &lt;p&gt;2https://www.kaggle.com/datasets/jigrubhatt/selfieimagedetectiondataset&lt;/p&gt;
    &lt;p&gt;3https://github.com/microsoft/VCD&lt;/p&gt;
    &lt;p&gt;4https://www.kaggle.com/datasets/ismailnasri20/driver-drowsiness-dataset-ddd&lt;/p&gt;
    &lt;p&gt;5https://docs.openvino.ai/2023.3/omz_models_model_gaze_estimation_adas_0002.html&lt;/p&gt;
    &lt;p&gt;6https://ai.google.dev/edge/mediapipe/solutions/vision/face_landmarker&lt;/p&gt;
    &lt;p&gt;8 I realised that perhaps we ought to have two models running, one for close range faces and another for far. This poses some issues, battery drain first as we run two models and also deciding the threshold for what is close and far becomes a challenge. You could have a model which has two brances and a decision model which decides which branch to send the image down, but until we reduce the size of the EyesOff model we have to proceed with one.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45935970</guid><pubDate>Sat, 15 Nov 2025 08:42:33 +0000</pubDate></item><item><title>Our investigation into the suspicious pressure on Archive.today</title><link>https://adguard-dns.io/en/blog/archive-today-adguard-dns-block-demand.html</link><description>&lt;doc fingerprint="2e8281950e64d521"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Behind the complaints: Our investigation into the suspicious pressure on Archive.today&lt;/head&gt;
    &lt;quote&gt;
      &lt;p&gt;14 Nov 2025 UPD: We have updated the article with more information on the bailiff reports sent to us and the person who ordered them.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;The FBI has been investigating Archive.is (also known as Archive.today), as was recently revealed. The agency issued a subpoena to the site’s domain registrar, asking for information about the person behind it, citing a “federal criminal investigation.”&lt;/p&gt;
    &lt;p&gt;Archive.is was launched in 2012 by someone using the name Denis Petrov — though whether that’s their real identity remains unclear. The site lets users save “snapshots” of web pages by submitting URLs, which makes it a valuable tool for preserving content that might otherwise disappear. But because it can also be used to bypass paywalls, it’s long been a thorn in the side of many media organizations.&lt;/p&gt;
    &lt;p&gt;While the exact nature of the FBI investigation hasn’t been confirmed, it is speculated it can be related to copyright or CSAM (child sexual abuse material) dissemination issues. Altogether, the situation suggests growing pressure on whoever runs Archive.is, and on intermediaries that help make its service accessible. AdGuard DNS, as it turns out, may have just become one such pressure point.&lt;/p&gt;
    &lt;head rend="h2"&gt;How we got entangled&lt;/head&gt;
    &lt;p&gt;A few weeks ago, we were contacted by a representative of an organization called the Web Abuse Association Defense, a French group claiming to fight against child pornography. Their website is webabusedefense.com, and here is the archived version as of November 7.&lt;/p&gt;
    &lt;p&gt;They demanded that we block the domain &lt;code&gt;archive.today&lt;/code&gt; (and its mirrors) in AdGuard DNS, alleging that the site’s admin had refused to remove illegal content since 2023. To be clear, Archive.today allows users to take “snapshots” of any webpages, including potentially illegal material. In such cases, it’s the site admin’s job to respond to complaints and promptly remove that content.&lt;/p&gt;
    &lt;p&gt;This struck us as strange — we’re not a hosting provider, and it seemed unusual for an infrastructure-level service like ours to be asked to take action like this.&lt;/p&gt;
    &lt;p&gt;Soon after, the situation escalated into what we could only describe as direct threats:&lt;/p&gt;
    &lt;p&gt;We won’t share all the screenshots here, but there were several similar messages.&lt;/p&gt;
    &lt;p&gt;We sought legal advice, and unfortunately discovered that French law, specifically Article 6-I-7 of the Loi pour la Confiance dans l'Économie Numérique (LCEN), might actually require us to respond and apply blocking measures, at least for French users.&lt;/p&gt;
    &lt;p&gt;That said, this whole situation shows just how inadequate this regulation is. Such decisions should be made by a court — a private company shouldn’t have to decide what counts as “illegal” content under threat of legal action.&lt;/p&gt;
    &lt;p&gt;Even so, the story didn’t quite add up. Since someone was trying to pressure us into taking action, we decided to contact the other side, Archive.today, directly.&lt;/p&gt;
    &lt;p&gt;We sent an email to Archive.today’s contact address and asked two simple questions:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Can they remove the illegal content from the URLs we were informed about?&lt;/item&gt;
      &lt;item&gt;Is it true that they refused to remove such content in the past, and had they been notified about it before?&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;They replied within a few hours. The response was straightforward: the illegal content would be removed (and we verified that it was), and they had never received any previous notifications about those URLs.&lt;/p&gt;
    &lt;p&gt;Moreover, they hinted that Archive.today had been targeted by a campaign of “serial” complaints, supposedly from French organizations, sent to various companies and institutions that could potentially harm the site. They even shared a link demonstrating a complaint similar to the one we had received.&lt;/p&gt;
    &lt;p&gt;At that point, things were looking increasingly odd, so we decided to dig deeper into the “complainant.”&lt;/p&gt;
    &lt;p&gt;The Web Abuse Association Defense website references several well-known organizations — Europol, OFAC, NCA — yet provides no details or evidence of any cooperation with them.&lt;/p&gt;
    &lt;p&gt;The association itself was registered in February–March 2025, around the same time its website appeared. There is very little public information about it. Interestingly, registering an association in France can apparently be done entirely online and does not require proof of identity.&lt;/p&gt;
    &lt;p&gt;The association is registered at an address used for mass company registration, which isn’t inherently problematic but it does indicate that the entire registration process could have been carried out online by a single person.&lt;/p&gt;
    &lt;p&gt;Its Twitter/X account appeared only recently — in August 2025. It has just four followers, and its feed consists of just a few reposts.&lt;/p&gt;
    &lt;p&gt;None of this proves anything by itself, but something still doesn’t add up. In their first email, the “head” of the association claimed that their correspondence with Archive.today started with a bailiff report from 2023. That timeline simply doesn’t fit.&lt;/p&gt;
    &lt;p&gt;We examined the so-called “bailiff reports” they had sent us as evidence. It’s important to note that these aren’t bailiff reports in the English sense — they’re “constat d’huissier sur Internet,” official records of online content such as webpages, posts, or videos. These particular reports were ordered online via the service called Qualijuris, and, based on the timestamps, most of them were also created in August 2025 — not 2023.&lt;/p&gt;
    &lt;p&gt;Only two of these bailiff reports were ordered in 2023 from a similar service. What’s interesting is that they weren’t ordered by WAAD. The name of the person who ordered these bailiff reports matches the name that appears in the correspondence shared with us by the Archive.today administrator — the same one he wrote about on X in 2024. In that case, the complaint appeared to come from a real lawyer — but someone had registered a domain with the lawyer’s surname, containing nothing but a redirect to the lawyer’s actual website, and did it on the same day the complaint was sent. The domain was used solely to send the emails and it is not active anymore. Interestingly, that email also invoked the LCEN law.&lt;/p&gt;
    &lt;p&gt;So what is the link between WAAD and that lawyer from before? Are these bailiff reports real and could it be that this is a case of impersonation of a real person? We don’t know yet, but we hope to discover the truth soon enough.&lt;/p&gt;
    &lt;p&gt;Unfortunately, we couldn’t dig any deeper about who exactly is behind WAAD. The domain &lt;code&gt;webabusedefense.com&lt;/code&gt; is registered with name.com, but ownership information (including historical records) is hidden. They use ProtonMail for email, so that’s another dead end. The site itself is behind Cloudflare, making further tracing impossible.&lt;/p&gt;
    &lt;head rend="h2"&gt;What we have in the end&lt;/head&gt;
    &lt;p&gt;With everything said and done, here’s where things stand now:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;The illegal content was promptly removed from Archive.today after we notified them.&lt;/item&gt;
      &lt;item&gt;The complaints against the site look extremely suspicious. In our case, they came from an organization that was only recently registered that seems deliberately set up to hide the identities of those behind it.&lt;/item&gt;
      &lt;item&gt;The sample complaint shared by Archive.today’s admin shows signs of impersonating a real person. We have contacted the person in question and are currently waiting for a reply.&lt;/item&gt;
      &lt;item&gt;In both our case and that other example, the recipients were pressured to act under the French LCEN law. However, that same law also provides penalties for false reports: &lt;p&gt;Art. 6-I-4 LCEN:&lt;/p&gt;&lt;lb/&gt;4. Any person who presents content or activity to the persons referred to in paragraph 2 as being illegal with the aim of having it removed or its dissemination stopped, when they know this information to be inaccurate, shall be punished by one year’s imprisonment and a fine of €15,000.&lt;/item&gt;
      &lt;item&gt;We believe there are indications of criminal behavior here that should be investigated by law enforcement. Therefore, we will file an official complaint with the French police, including all relevant details.&lt;/item&gt;
      &lt;item&gt;All this is unfolding amid reports of an FBI investigation into the owner of Archive.today. It seems that this investigation may be related to CSAM hosting. While we can’t confirm any connection between that case and ours, the timing is certainly suspicious.&lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45936460</guid><pubDate>Sat, 15 Nov 2025 10:30:52 +0000</pubDate></item><item><title>Linux on the Fujitsu Lifebook U729</title><link>https://borretti.me/article/linux-on-the-fujitsu-lifebook-u729</link><description>&lt;doc fingerprint="578ff9555537bcd4"&gt;
  &lt;main&gt;
    &lt;p&gt;This post describes my experience using Linux on the Fujitsu Lifebook U729. The tl;dr is that it’s a delightful laptop, and Linux runs flawlessly, and all the hardware things I’ve needed run OOTB. The only difficulty I had was in disabling Secure Boot, but I figured out how to do it, which I explain below.&lt;/p&gt;
    &lt;head rend="h1"&gt;Contents&lt;/head&gt;
    &lt;head rend="h1"&gt;Background&lt;/head&gt;
    &lt;p&gt;From early 2024 my daily driver was an M2 MacBook Air, until earlier this year I broke the screen, and the repair was quoted at almost 1000 AUD. Since I used it as a desktop most of the time, this didn’t affect me much. After some flip-flopping I decided to get an M4 Mac mini. Partly for the faster CPU and more RAM, but partly because I liked the idea of LARPing like it’s the 2000s, when computers, and by extension the Internet, where fixed in physical space, rather than following everyone around.&lt;/p&gt;
    &lt;p&gt;Of course this was a terrible idea. I had three working computers—a Linux+Windows desktop, a Mac Mini, and a MacBook Air that I could use as a desktop—and none of them were portable. When I went to RustForge 2025 I just brought my phone. If I wanted to travel, even within Sydney, to a demo night or math club or some such, I didn’t have a laptop to bring with me.&lt;/p&gt;
    &lt;p&gt;So I needed a new laptop. And the Tahoe release of macOS was so ugly (see e.g. 1, 2, 3) it made me boot up the old Linux desktop, and start playing around with NixOS again. And I fell in love with Linux again: with the tinkering and the experimentation and the freedom it affords you.&lt;/p&gt;
    &lt;p&gt;So, I wanted a Linux laptop. I had a ThinkPad X1 some years ago and it was terribly: flimsy plastic build and hardware that vastly underperformed its price. I looked around for old, refursbished workstation laptops, and, randomly, I ran into an eBay seller offering a refurbished Fujitsu laptop.&lt;/p&gt;
    &lt;p&gt;The specs/price ratio was pretty good: 16 GiB of RAM and 512GiB of SSD, all for 250 AUD. And it was 12in and 1.1kg, which I like: laptops should be small and lightweight. But the thing that got me, in all honesty, was the brand. “Fujitsu laptop” sounds like colour in a William Gibson novel: “crawling into the avionics bay, Case took out a battered Fujitsu refurb, and stuck a JTAG port in the flight computer—”. I already use NixOS and a trackball and a mechanical keyboard, so a laptop that’s even more obscure than a ThinkPad is perfect for me. And it was only 250 AUD. So I got it.&lt;/p&gt;
    &lt;p&gt;The only problem I had was disabling Secure Boot in order to install Linux. Otherwise: I love it. It’s small and lightweight, feels solid, the keyboard is good, all the hardware works out of the box with NixOS, and the battery life is pretty good.&lt;/p&gt;
    &lt;head rend="h1"&gt;Troubleshooting&lt;/head&gt;
    &lt;p&gt;This section describes the problems I encountered.&lt;/p&gt;
    &lt;head rend="h2"&gt;Secure Boot&lt;/head&gt;
    &lt;p&gt;I tried to install Linux the usual way, when I was greeted by this:&lt;/p&gt;
    &lt;p&gt;Going into the BIOS, the option to disable Secure Boot was greyed out. I tried a bunch of random bullshit: wiping the TPM, disabling the TPM. That didn’t work.&lt;/p&gt;
    &lt;p&gt;What did work was this:&lt;/p&gt;
    &lt;p&gt;First, install Windows 11. This came with the laptop. And the installation makes installing Linux feel easy: I had to do so many weird tricks to avoid having to create an account with Microsoft during the installation.&lt;/p&gt;
    &lt;p&gt;Once Windows is installed, go into Windows Update. Under “Advanced Options &amp;gt; Optional Updates”, there should be an option to install Fujitsu-specific drivers. Install those. And for good measure, do a general Windows update.&lt;/p&gt;
    &lt;p&gt;There should be a program called DeskUpdate on the Desktop. This is the Fujitsu BIOS update tool. Run this and go through the instructions: this should update the BIOS (the ordering seems to be important: first update the Fujitsu firmware through Windows Update, then the BIOS through DeskUpdate).&lt;/p&gt;
    &lt;p&gt;Reboot and go into the BIOS (F2). You should have a new BIOS version. In my case, I went from BIOS 2.17 to 2.31 which was released on 2025-03-28:&lt;/p&gt;
    &lt;p&gt;You now have the option to disable Secure Boot:&lt;/p&gt;
    &lt;p&gt;After this, I was able to install NixOS from a live USB:&lt;/p&gt;
    &lt;head rend="h2"&gt;Spyware&lt;/head&gt;
    &lt;p&gt;The laptop comes with this corporate spyware thing called Absolute Persistence. It’s some anti-theft tracking device. Since the Lifebook is typically an enterprise laptop, it makes sense that it comes with this type of thing.&lt;/p&gt;
    &lt;p&gt;I only noticed this because I was searching the BIOS thoroughly for a way to disable Secure Boot. The good news is disabling it is pretty straightforward: you just disable it in the BIOS.&lt;/p&gt;
    &lt;p&gt;As I understand it, Absolute Persistence requires an agent running in the OS, so the BIOS support, by itself, doesn’t do anything once disabled.&lt;/p&gt;
    &lt;head rend="h1"&gt;Non-Problems&lt;/head&gt;
    &lt;p&gt;The following work flawlessly OOTB:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;WiFi&lt;/item&gt;
      &lt;item&gt;Bluetooth&lt;/item&gt;
      &lt;item&gt;Sound (using PipeWire)&lt;/item&gt;
      &lt;item&gt;Display brightness control (using brightnessctl)&lt;/item&gt;
      &lt;item&gt;Touchscreen (I didn’t realize the screen was actually a touchscreen until I touched it by accident and saw the mouse move)&lt;/item&gt;
      &lt;item&gt;Webcam (not winning any awards on quality, but it works)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Things I have not tested:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Microphone&lt;/item&gt;
      &lt;item&gt;Fingerprint sensor&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h1"&gt;BIOS Notes&lt;/head&gt;
    &lt;p&gt;To enter the BIOS: smash &lt;code&gt;F2&lt;/code&gt; until you hear the beep. No need to hold down the
&lt;code&gt;Fn&lt;/code&gt; key.&lt;/p&gt;
    &lt;p&gt;To enter the boot menu: as above but with &lt;code&gt;F12&lt;/code&gt;.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45937989</guid><pubDate>Sat, 15 Nov 2025 15:19:20 +0000</pubDate></item><item><title>Weighting an average to minimize variance</title><link>https://www.johndcook.com/blog/2025/11/12/minimum-variance/</link><description>&lt;doc fingerprint="b749f59d8783fb76"&gt;
  &lt;main&gt;
    &lt;p&gt;Suppose you have $100 to invest in two independent assets, A and B, and you want to minimize volatility. Suppose A is more volatile than B. Then putting all your money on A would be the worst thing to do, but putting all your money on B would not be the best thing to do.&lt;/p&gt;
    &lt;p&gt;The optimal allocation would be some mix of A and B, with more (but not all) going to B. We will formalize this problem and determine the optimal allocation, then generalize the problem to more assets.&lt;/p&gt;
    &lt;head rend="h2"&gt;Two variables&lt;/head&gt;
    &lt;p&gt;Let X and Y be two independent random variables with finite variance and assume at least one of X and Y is not constant. We want to find t that minimizes&lt;/p&gt;
    &lt;p&gt;subject to the constraint 0 ≤ t ≤ 1. Because X and Y are independent,&lt;/p&gt;
    &lt;p&gt;Taking the derivative with respect to t and setting it to zero shows that&lt;/p&gt;
    &lt;p&gt;So the smaller the variance on Y, the less we allocate to X. If Y is constant, we allocate nothing to X and go all in on Y. If X and Y have equal variance, we allocate an equal amount to each. If X has twice the variance of Y, we allocate 1/3 to X and 2/3 to Y.&lt;/p&gt;
    &lt;head rend="h2"&gt;Multiple variables&lt;/head&gt;
    &lt;p&gt;Now suppose we have n independent random variables Xi for i running from 1 to n, and at least one of the variables is not constant. Then we want to minimize&lt;/p&gt;
    &lt;p&gt;subject to the constraint&lt;/p&gt;
    &lt;p&gt;and all ti non-negative. We can solve this optimization problem with Lagrange multipliers and find that&lt;/p&gt;
    &lt;p&gt;for all 1 ≤ i, j ≤ n. These (n − 1) equations along with the constraint that all the ti sum to 1 give us a system of equations whose solution is&lt;/p&gt;
    &lt;p&gt;Incidentally, the denominator has a name: the (n − 1)st elementary symmetric polynomial in n variables. More on this in the next post.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45938027</guid><pubDate>Sat, 15 Nov 2025 15:25:08 +0000</pubDate></item><item><title>Mag Wealth (2024)</title><link>https://saul.pw/mag/wealth/</link><description>&lt;doc fingerprint="32e1d155798334bb"&gt;
  &lt;main&gt;
    &lt;p&gt;In the human world, wealth inequality arguably has more of an impact on lives and relationships than physical differences like distance and energy. We need to have meaningful discussions about structural class differences, and segmenting the population based on wealth is an obvious starting point.&lt;/p&gt;
    &lt;p&gt;Wealth, like most quantities, doesn’t need precision beyond the exponent to expose some sharp differences between wealth classes, and sharp similarities within a wealth class.&lt;/p&gt;
    &lt;p&gt;It’s not useful to compare relative wealth within a wealth level, except perhaps to say “lower” (at risk of falling to a lower level) or “upper” (the next level higher is within reach). For wealth specifically, using any further precision easily leads to direct wealth comparisons between members of the same level, which then leads to jealousy and discontent, rather than insight into the core issue.&lt;/p&gt;
    &lt;p&gt;For the quantitative treatment, we need to anchor the scale, but using exact values is not possible due to inflation. On a mag scale, inflation happens pretty slowly (↑1.5 from 1900-2025 in the US–about 30x), but this consistent drift can’t be ignored, even in Mag World.&lt;/p&gt;
    &lt;p&gt;This scale is calibrated on US dollars in the early 1980s; this aligns with some basic cultural expectations around wealth. For instance, that a dollar can still buy something useful, and that a “millionaire” is considered wealthy. To translate 2024 US dollars into mag wealth, divide by 3 (or ↑0.5).&lt;/p&gt;
    &lt;p&gt;All dollar values are given in 2024 US dollars for convenience.&lt;/p&gt;
    &lt;p&gt;These wealth levels have existed throughout human history, even though the unit of currency changes.&lt;/p&gt;
    &lt;p&gt;At the bottom-most level, a person can’t even scrape together a few bucks for some food. Societal services aren’t accessible unless they are completely free. Finding a toilet and shower may be difficult. They have no possessions; their shoes and coat are probably decrepit and dirty.&lt;/p&gt;
    &lt;p&gt;At ↑0 wealth, a person can’t pull together $30.&lt;/p&gt;
    &lt;p&gt;Daily shelter and sustenance are at the mercy of other people. If they are not sleeping on the streets, then they are in public shelters, or squatting, or staying with relatives. (Few people will provide long-term housing for a friend with no money.) They need to hustle every single day for their needs, whether through mooching or begging or stealing.&lt;/p&gt;
    &lt;p&gt;Employment is not possible without support; even day-laborers need breakfast and transportation to the pickup site. Without a permanent address you can’t even donate blood plasma.&lt;/p&gt;
    &lt;p&gt;People at this level can’t borrow money, even from friends and relatives, because any lender would be foolish to expect repayment.&lt;/p&gt;
    &lt;p&gt;At ↑1 wealth, a person can reliably scrape together $10, maybe $50 or $100, but they might have to sell their body or blood to do it.&lt;/p&gt;
    &lt;p&gt;Housing at ↑1 is almost as tenuous as ↑0. If not living out of their car, they are couch-surfing; if they have a permanent address, they are living with someone else and paying a low or flexible amount of rent.&lt;/p&gt;
    &lt;p&gt;They may not have a bank account, or if they do, it is in danger of being overdrawn.&lt;/p&gt;
    &lt;p&gt;If they have a car, it’s a junker, and it has less than a quarter tank of gas.&lt;/p&gt;
    &lt;p&gt;They work odd jobs. They might get a windfall of $300 from a generous client or a lottery scratch-off ticket, but they would likely spend it immediately on essentials they have been putting off.&lt;/p&gt;
    &lt;p&gt;Hard drugs are plentiful at this level.&lt;/p&gt;
    &lt;p&gt;At ↑1, no institution will lend them any amount of money, though friends or relatives might. Church and religious community can be very helpful with food banks and meal services, even if the recipient isn’t religious.&lt;/p&gt;
    &lt;p&gt;At ↑2 wealth, a person could probably pull together a few thousand dollars, but it would likely involve a substantial amount of hustle and/or usury.&lt;/p&gt;
    &lt;p&gt;People at ↑2 wealth have some kind of steady employment, maybe minimum wage, and they make enough money to have a permanent address. They get benefits at their employer’s discretion (so probably not).&lt;/p&gt;
    &lt;p&gt;At ↑2 a bank account becomes necessary, to deposit paychecks and pay bills. It can be a challenge to avoid bank overdrafts. They are likely to have bad credit or no credit, and use a debit card. If they need money and are upper ↑2, they may have a credit card with a small limit. At lower ↑2 they might get a payday loan. They probably can’t or shouldn’t pay it off straight from their bank account, because they need to make sure rent and groceries are paid first. Basic money management skills like budgeting and cashflow are required to move from lower ↑2 to upper ↑2.&lt;/p&gt;
    &lt;p&gt;A hallmark of ↑2 is unstable housing and/or rotating roommates. Good and cheap situations are hard to come by, and when they do, they don’t generally last, so people at ↑2 wealth are often have to move frequently. Sometimes they find a stable situation that’s cheap enough, but it’s sketchy or unpleasant or both, and they put up with it because it’s the best of bad options. Often this involves a roommate; more than 2 (non-family) roommates is almost inherently an unstable configuration, which increases roommate turnover too.&lt;/p&gt;
    &lt;p&gt;Living with immediate family is common. If they live alone, it is in subsidized housing, or a very small studio.&lt;/p&gt;
    &lt;p&gt;At ↑2, they can’t maintain their life for more than a month without working or outside support (possibly unemployment). Vacations are exclusively long weekends or during holidays. A week off work is a luxury and a 2 week vacation abroad would be a once-in-a-lifetime event.&lt;/p&gt;
    &lt;p&gt;They can buy a nice little thing for themselves here and there. They probably feel guilty about it. They appreciate gifts of nice things they can technically afford but wouldn’t buy themselves. But not expensive things. It’s hard enough to get money to repair or replace items that break down, so durable goods are often in a state of disrepair. They can’t reasonably sell an expensive item to replace things they might need more; and if the expensive item itself breaks, repairs will be more expensive. So a ↑3 gift (some thousands of dollars) would be kind of overwhelming to someone at ↑2, unless it’s a car. A gift that cost more than ↑3 would be weird or confusing.&lt;/p&gt;
    &lt;p&gt;In the US, people at ↑2 are generally eligible for some kind of government assistance, and have more ability to collect it reliably: food stamps, Section 8 housing. But many programs restrict assets to ↑2 (Medicaid is restricted to having less than $2000 in the bank).&lt;/p&gt;
    &lt;p&gt;↑3 wealth is lower-middle class. They can pull together a few thousand bucks if their car breaks down, but it hurts. They can buy a used car if they have to replace it, or a new car on a payment plan.&lt;/p&gt;
    &lt;p&gt;Credit cards and car loans are the hallmarks of this level: people are likely to have more creditors than bank accounts. If they are lower ↑3 they carry credit card debt and may have to juggle some things around to fund an emergency expense. If they are upper ↑3 they can manage to carry an extra balance for a few months.&lt;/p&gt;
    &lt;p&gt;One big unexpected expense could put them deep into debt, which is one way they could become stuck here.&lt;/p&gt;
    &lt;p&gt;They rent and their housing situation has been stable for years. They can make a deliberate choice about where to live and could even move cities, but that’s uncommon at this level.&lt;/p&gt;
    &lt;p&gt;If they lose their job, it’s financially stressful, but they can make it a few months without income. Upper ↑3 could even make it a year if they maxed out their credit cards. They generally can choose where to work, and to leave terrible work environments. Their hours are dictated.&lt;/p&gt;
    &lt;p&gt;↑4 wealth is middle class. This includes young professionals, middle-aged small business owners, and older tradesmen.&lt;/p&gt;
    &lt;p&gt;At ↑4, they have a foothold in society; shrewd operators can climb from here.&lt;/p&gt;
    &lt;p&gt;Unburdened by debt (or only having “smart” debt, like low-interest fixed-rate loans), they have probably 6 months savings, the start of a retirement account, they’re doing the financial things you’re supposed to do. They probably dabble in investing, if only with that retirement account.&lt;/p&gt;
    &lt;p&gt;They are a relatively recent (under 10 years) home-owner, or they rent a decent place. They have an extra bedroom as an office or for guests.&lt;/p&gt;
    &lt;p&gt;They have the first taste of relative freedoms. They can take longer and/or more frequent vacations; a month for a significant overseas trip is not out of the question.&lt;/p&gt;
    &lt;p&gt;They may have bought a new car, but it’s probably not fancy unless they’re showing off. They either own property or are looking for property or saving up to buy property.&lt;/p&gt;
    &lt;p&gt;If they lose their job or their business is not doing well, they can last a year, maybe a few more if they are at upper ↑4 or can reduce their expenses to ↑3 levels.&lt;/p&gt;
    &lt;p&gt;At ↑5 wealth, a person is upper-middle class; they can pull together hundreds of thousands of dollars. Enough to buy a house and live comfortably. Money is no longer the primary obstacle in their life.&lt;/p&gt;
    &lt;p&gt;They’ve figured out the things they want, and they can have them. Not the best of everything, but the best of some things, the things that matter to them.&lt;/p&gt;
    &lt;p&gt;They have a money market account and know how to trade equities.&lt;/p&gt;
    &lt;p&gt;If they need a substantial amount of money, they can borrow from their retirement accounts, mortgage their house, or sell some investments.&lt;/p&gt;
    &lt;p&gt;If they are older, they are retired, and they may be able to leave some ↑4 or even ↑5 wealth to their children. If younger, they may not be able to retire, but they also don’t have to work this year, or the next, or the next.&lt;/p&gt;
    &lt;p&gt;A person with lower ↑6 wealth is a “high-net-worth individual” (HNWI, $1m), and a person with upper ↑6 wealth is a “very-high-net-worth individual” (VHNWI, $5m).&lt;/p&gt;
    &lt;p&gt;Colloquially, they’re “rich”. Employment is generally optional.&lt;/p&gt;
    &lt;p&gt;How do they bank? Where do they live? What kind of debt and other monetary instruments do they use?&lt;/p&gt;
    &lt;p&gt;About 16 million people (↑7) are designated as HNWI.&lt;/p&gt;
    &lt;p&gt;A person with ↑7 wealth is an “ultra-high-net-worth individual” (UHNWI, $30m+). About 250,000 people (↑5.5) are designated as UHNWI, with over 10% of the world’s wealth combined.&lt;/p&gt;
    &lt;p&gt;This is a huge amount of money: 10x more wealthy than merely “rich”. This is absolutely generational wealth–buying any kind of normal thing, even a house, won’t even make a dent in their wealth. In fact, ↑6 and ↑7 things usually retain or appreciate their value over time (like real estate or fine art).&lt;/p&gt;
    &lt;p&gt;UHNW individuals “have, on average, eight cars and three or four homes. Three-quarters own a jet aircraft and most have a yacht.” (2006)&lt;/p&gt;
    &lt;p&gt;They have staff, to manage their money and their properties (multiple). If they have children, they have a full-time nanny or au pair.&lt;/p&gt;
    &lt;p&gt;Tax management is key at this level. They use offshore tax havens.&lt;/p&gt;
    &lt;p&gt;If they need money, they go to their investment bank and borrow against their investments, which might be illiquid, or they don’t want to sell for tax purposes.&lt;/p&gt;
    &lt;p&gt;Proposed “wealth taxes” would only apply to people with at least ↑7 wealth.&lt;/p&gt;
    &lt;p&gt;At ↑8 wealth, a person has hundreds of millions of dollars. At ↑8.5 wealth they become a “billionaire”. In 2024, about 50,000 people (↑4.5) have ↑8 wealth, including ↑4 billionaires.&lt;/p&gt;
    &lt;p&gt;Buy, Borrow, Die is a tax minimization strategy that only works at ↑8 and above.&lt;/p&gt;
    &lt;p&gt;The world has always been fascinated by people with ludicrous amounts of wealth and power. Usually there are just a few sovereigns and family dynasties in this category.&lt;/p&gt;
    &lt;p&gt;In 1990, about 250 people (↑2.5) had ↑9 wealth. In 2024, about 2500 people (↑3.5) have ↑9 wealth.&lt;/p&gt;
    &lt;p&gt;In 1990, the richest people were the Sultan of Brunei (2024US$60b), King Fahd of Saudi Arabia (2024US$43b), and Queen Elizabeth II of England (2024US$28b). Also the Mars family, the Newhouse family, and the Reichmann family with about $30b each. This is ↑10 wealth.&lt;/p&gt;
    &lt;p&gt;In 2024, there are over 200 people with ↑10 wealth. 15 of those people have ↑10.5 wealth (over $100b).&lt;/p&gt;
    &lt;p&gt;The ultra rich as a class have gotten 10x wealthier in the last 30 years, and that’s after adjusting for inflation.&lt;/p&gt;
    &lt;p&gt;Note that Forbes only started publishing a list of billionaires in 1987. Prior to that, they just did an article on the “worlds richest people” (1983) separated into three strata (lower ↑8, upper ↑8, ↑9) without maintaining a complete and ordered list.&lt;/p&gt;
    &lt;p&gt;Some lists of the wealthiest people in history speculate that Ford, Vanderbilt, Carnegie, and Rockefeller had the equivalent of ↑11 wealth, but that’s when calculated as a percentage of GDP and scaled up. Adjusting for literal inflation, none of them even come close.&lt;/p&gt;
    &lt;p&gt;A handful of corporations in history, including Dutch East India Company and Standard Oil, had valuations of ↑11. In modern times, it’s Apple, Microsoft, Nvidia, Alphabet, Amazon, Meta, and Tesla at upper ↑11, and another 20 or so companies at lower ↑11 valuations.&lt;/p&gt;
    &lt;p&gt;A country’s “national wealth” is the total value of net wealth owned by its residents. For context, the entire world has ↑14.7 wealth (about $500 trillion).&lt;/p&gt;
    &lt;p&gt;Some facts:&lt;/p&gt;
    &lt;p&gt;For instance, the US budget was:&lt;/p&gt;
    &lt;p&gt;At the end of World War I, the US budget grew 10x in one year (actually it was almost 20x from 1916-1919)! (If you look at the linked spreadsheet, it recedes to ↑9.5 during the Great Depression, before climbing again to ↑10 in 1940.)&lt;/p&gt;
    &lt;p&gt;So you can see that from 1910 to 2020, the US budget grew ↑4 (10,000x). This seems like a lot!&lt;/p&gt;
    &lt;p&gt;But GDP growth was ↑3.5 (from $↑11 in 1930 to $↑14.5 in 2025) over roughly the same time period, and US population growth was ↑0.5 (from ↑8 to ↑8.5 people). This makes sense, that the cost of government scales with its nation’s economy and population.&lt;/p&gt;
    &lt;p&gt;Factoring in inflation of ↑1.5, we might hypothesize that the US federal budget increased in the past 100 years due to population growth (3x), inflation (30x), and GDP growth (100x). A lot more would have to be done to support this theory, but it’s a very reasonable starting place.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45938427</guid><pubDate>Sat, 15 Nov 2025 16:16:42 +0000</pubDate></item><item><title>Things that aren't doing the thing</title><link>https://strangestloop.io/essays/things-that-arent-doing-the-thing</link><description>&lt;doc fingerprint="c15804b5dbc065b4"&gt;
  &lt;main&gt;
    &lt;p&gt;Preparing to do the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Scheduling time to do the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Making a to-do list for the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Telling people you're going to do the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Messaging friends who may or may not be doing the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Writing a banger tweet about how you're going to do the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Hating on yourself for not doing the thing isn't doing the thing. Hating on other people who have done the thing isn't doing the thing. Hating on the obstacles in the way of doing the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Fantasizing about all of the adoration you'll receive once you do the thing isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;Reading about how to do the thing isn't doing the thing. Reading about how other people did the thing isn't doing the thing. Reading this essay isn't doing the thing.&lt;/p&gt;
    &lt;p&gt;The only thing that is doing the thing is doing the thing.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45939431</guid><pubDate>Sat, 15 Nov 2025 18:24:58 +0000</pubDate></item><item><title>Transgenerational Epigenetic Inheritance: the story of learned avoidance</title><link>https://elifesciences.org/articles/109427</link><description>&lt;doc fingerprint="4780c9413920cbd3"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Transgenerational Epigenetic Inheritance: Twists and turns in the story of learned avoidance&lt;/head&gt;
    &lt;p&gt;The ability to recognize and avoid pathogens is essential for survival. In some cases, animals recognize molecules produced by pathogens, allowing them to mount an immediate response. In other cases, animals learn to avoid the pathogen after they have been exposed to it – a phenomenon that is called “learned avoidance”.&lt;/p&gt;
    &lt;p&gt;The worm Caenorhabditis elegans can learn to avoid Pseudomonas aeruginosa, a pathogenic bacterium that causes disease in a range of species (Zhang et al., 2005). In 2019, Coleen Murphy and colleagues at Princeton University observed that learned avoidance of the PA14 strain of P. aeruginosa could be transmitted for up to four generations of C. elegans without new exposure to PA14 (Moore et al., 2019; Kaletsky et al., 2020). This transgenerational epigenetic inheritance allows animals that have never encountered PA14 to benefit from the experiences of previous generations.&lt;/p&gt;
    &lt;p&gt;Recently, Craig Hunter and colleagues at Harvard University questioned the inheritance of learned avoidance to the F2 generation (Gainey et al., 2025). While they observed learned avoidance to PA14 in parents (P0) and their progeny (F1), they did not observe avoidance in the F2 generation. The Murphy group responded, contending that the inability to observe transgenerational epigenetic inheritance was due to changes the Hunter group made to the original experimental protocols (Kaletsky et al., 2025). Now, in eLife, Andres Vidal-Gadea and colleagues at Illinois State University – Aalimah Akinosho, Joseph Alexander and Kyle Floyd – report that they have confirmed findings from the Murphy group by showing that learned avoidance of PA14 is passed on to the F2 generation (Akinosho et al., 2025).&lt;/p&gt;
    &lt;p&gt;In a standard avoidance assay, test spots of bacteria are placed at opposite ends of an agar plate, and sodium azide – a chemical that immobilizes worms – is added to each test spot (Figure 1). The worms are placed at the center of the plate and allowed to roam, and the number of worms in proximity to each test spot is scored after one hour (Moore et al., 2019).&lt;/p&gt;
    &lt;p&gt;For the learned avoidance assay, the worms are exposed to PA14 for 24 hours, a process sometimes called “training”, after which time they are collected and washed. A subset of these worms is transferred to a test plate and allowed to choose between PA14 and the OP50 strain of E. coli (which is the standard laboratory diet of C. elegans). This is the parental generation, and the worms in it will avoid PA14.&lt;/p&gt;
    &lt;p&gt;Eggs (F1) are collected from the remaining worms and transferred to standard OP50 plates. Once they reach the adult stage, the same process is carried out; a subset of animals is tested, and eggs are collected from the remaining worms for the next generation (F2). Importantly, after the parental generation, worms do not encounter PA14 before testing, but they retain the learned avoidance of the parental generation. To measure learned avoidance, all groups are compared to animals whose predecessors have never encountered PA14.&lt;/p&gt;
    &lt;p&gt;Both the Murphy and Vidal-Gadea groups used sodium azide in their assays to immobilize the worms, while the Hunter group immobilized them by lowering the temperature to 4 °C at the end of the assay. With azide, worms that reach the test spots before the end of the assay are immobilized. By contrast, when the temperature shift method is used, worms can come into contact with the test spots and then move away before the end of the assay. The Murphy group proposed that the use of azide ensured that animals were captured in their initial response, which prevented them from learning to avoid PA14 after encountering it during the assay. However, they argued, when the temperature-shift method is used, worms can encounter PA14, learn from this encounter, and avoid the PA14 spot (Kaletsky et al., 2025). Put simply, an encounter with PA14 could unintentionally introduce another source of learned avoidance to the assay. The most significant impact of this would be on the negative control, where it is assumed that the worms’ response reflects that of animals that have never encountered PA14.&lt;/p&gt;
    &lt;p&gt;Worms that have not previously encountered PA14 are initially attracted to it (Zhang et al., 2005). While the Murphy group consistently observed this attraction in their assays, the Hunter group generally did not (Kaletsky et al., 2025). The Vidal-Gadea group also observed that worms that had not been exposed to PA14 were initially attracted to it, suggesting that this is an important piece of the puzzle (Akinosho et al., 2025). Indeed, when tested directly, the Murphy group did not observe attraction using the temperature-shift method (Kaletsky et al., 2025). However, whether the omission of azide alone explains the discrepancy between the studies is not clear. In a handful of assays, the Hunter group used azide but failed to see the initial attraction to PA14, or to observe learned avoidance in the F2 generation.&lt;/p&gt;
    &lt;p&gt;P11, a small RNA produced by PA14, is necessary and sufficient to induce transgenerational epigenetic inheritance (Kaletsky et al., 2020). In addition, loss of P11 reduces chemoattraction to PA14 by reducing ammonia production (Marogi et al., 2024). The Murphy lab proposed that suboptimal P11 expression could explain difficulties in reproducing transgenerational epigenetic inheritance and in observing the initial attraction to PA14. Although they did not measure P11 levels, the Hunter group argued that their ability to observe learned avoidance in the F1 generation excluded the possibility that P11 expression was insufficient. PA14 growth conditions can alter P11 expression (Kaletsky et al., 2025), but whether low levels of P11 could permit F1 inheritance but not F2, is unknown.&lt;/p&gt;
    &lt;p&gt;Behavioral assays are notoriously finicky, not because they measure effects that are not robust, but because C. elegans are highly attuned to their environments; they integrate a myriad of environmental signals into an appropriate response. Hunter and colleagues tested potential sources of variability in the laboratory environment, including the sources of bacterial and worm strains, but none of these explained the discrepancy in their findings. The sources of variability identified by the Murphy lab (Kaletsky et al., 2025) provide a logical explanation for the differences between the two studies, but other unidentified environmental or procedural differences may also have contributed. The results of the Vidal-Gadea group, therefore, represent an important validation of the work of the Murphy group, and support the idea that procedural modifications made by the Hunter group contributed to their inability to observe transgenerational epigenetic inheritance.&lt;/p&gt;
    &lt;head rend="h2"&gt;References&lt;/head&gt;
    &lt;head rend="h2"&gt;Article and author information&lt;/head&gt;
    &lt;head rend="h3"&gt;Author details&lt;/head&gt;
    &lt;head rend="h3"&gt;Publication history&lt;/head&gt;
    &lt;head rend="h3"&gt;Copyright&lt;/head&gt;
    &lt;p&gt;© 2025, MacNeil&lt;/p&gt;
    &lt;p&gt;This article is distributed under the terms of the Creative Commons Attribution License, which permits unrestricted use and redistribution provided that the original author and source are credited.&lt;/p&gt;
    &lt;head rend="h2"&gt;Metrics&lt;/head&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;list rend="dl"&gt;
          &lt;item rend="dd-1"&gt;573&lt;/item&gt;
          &lt;item rend="dt-2"&gt;views&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;list rend="dl"&gt;
          &lt;item rend="dd-2"&gt;12&lt;/item&gt;
          &lt;item rend="dt-3"&gt;downloads&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;list rend="dl"&gt;
          &lt;item rend="dd-3"&gt;0&lt;/item&gt;
          &lt;item rend="dt-4"&gt;citations&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Views, downloads and citations are aggregated across all versions of this paper published by eLife.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45939550</guid><pubDate>Sat, 15 Nov 2025 18:40:55 +0000</pubDate></item><item><title>The computer poetry of J. M. Coetzee's early programming career (2017)</title><link>https://sites.utexas.edu/ransomcentermagazine/2017/06/28/the-computer-poetry-of-j-m-coetzees-early-programming-career/</link><description>&lt;doc fingerprint="6d1119d923b849c7"&gt;
  &lt;main&gt;
    &lt;p&gt;June 28, 2017, Filed Under: Authors, Books + Manuscripts, Research + TeachingThe computer poetry of J. M. Coetzee’s early programming career Writer J. M. Coetzee’s early poetry is almost undecipherable. That’s because it was written in computer code. Coetzee’s global reputation rests on his literary output, for which he received a Nobel Prize in 2003. Before he embarked on a career as a scholar and writer, the South African–born writer was a computer programmer in the early years of the industry’s development (1962–1965). I believe that this experience, while short, was vital for the development of Coetzee’s writerly project. While visiting the Ransom Center on a research fellowship, I examined Coetzee’s papers, which offer tantalizing clues about his neglected “other career.” In the mid 1960s Coetzee was working on one of the most advanced programming projects in Britain. During the day he helped to design the Atlas 2 supercomputer destined for the United Kingdom’s Atomic Energy Research Establishment at Aldermaston. At night he used this hugely powerful machine of the Cold War to write simple “computer poetry,” that is, he wrote programs for a computer that used an algorithm to select words from a set vocabulary and create repetitive lines. Coetzee never published these results, but edited and included phrases from them in poetry that he did publish. While Coetzee was never quite at risk of starting World War III, these important experiments have gone under the radar of both Coetzee scholars and historians of computing are concerned. Readers of Coetzee may be familiar with these experiences from their description in his second “fictional autobiography,” Youth (2002), but Coetzee’s role in the Atlas 2 project and his sustained interest in computing across his academic and literary career have been largely ignored. A page of J. M. Coetzee’s computer code poetry, dated May 30, 1965. While at the Ransom Center I was able to examine print-outs testifying to Coetzee’s poetry generation on the Atlas 2. I say examine because reading them entailed a steep learning curve on my part: some were written in binary and hexadecimal number strings. This individuated “machine code” is designed to instruct the computer, but is difficult for programmers to read and proved almost incomprehensible to me. Other documents were written in FORTRAN, the first high-level programming language, developed in the late 1950s as a language that was easier for human users to write and read, but could then be easily “translated” via a compiler into machine code. Still others were written in FORTRAN “pseudocode,” an idiosyncratic form of notation that a programmer such as Coetzee might develop (a sort of personal shorthand) that resembles FORTRAN but is not executable. Excitingly, I also was able to examine Coetzee’s born-digital materials, recovered from 5.25” and 3.5” floppy diskettes. This was invaluable, and enabled me to begin to establish a timeline of what kinds of computing hardware and software Coetzee was employing across his writing career. I am extremely grateful to the Center’s digital archivist Abby Adams for devoting so much of her time both before and after I arrived to making this collection available. Without her help, my research would have been restricted to consulting print-outs of such digital materials—useful, but less than ideal! Thanks to her I was able to establish many of the file types of Coetzee’s records, which will help me to determine the software on which he wrote the majority of his novels. While these are still early days for this research project, having access to Coetzee’s electronic files, programming records, and output has prompted a number of fascinating challenges and research questions: How do you read code? What is the “text” of a program—the machine code, the high-level programming, or the output it generates? How do you preserve an electronic file and how should the scholar access it? As more and more writers produce born-digital archives, these questions will only become more urgent, for archivists and for literary scholars. Looking at Coetzee’s other career will, I hope, help to clarify some of these issues. Rebecca Roach is a postdoctoral researcher at King’s College London. Her current book project, of which her work on Coetzee is part, is titled “Machine Talk” and explores communication and collaboration in digital literature. Her fellowship at the Ransom Center was supported by the Andrew W. Mellon Foundation Research Fellowship Endowment.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45939569</guid><pubDate>Sat, 15 Nov 2025 18:44:05 +0000</pubDate></item><item><title>Nevada Governor's office covered up Boring Co safety violations</title><link>https://fortune.com/2025/11/12/elon-musk-boring-company-tunnels-injuries-osha-citations-fines-rescinded-nevada-governor-office-documents-altered/</link><description>&lt;doc fingerprint="e59c1a12a93370c1"&gt;
  &lt;main&gt;
    &lt;p&gt;On May 28, hours after Nevada’s workplace safety agency served notice of more than $400,000 in fines to Elon Musk’s $5.6 billion tunneling startup the Boring Company, the phone rang at Nevada governor Joe Lombardo’s office.&lt;/p&gt;
    &lt;p&gt;Boring Co. president Steve Davis was on the line. Boring Company was challenging citations from Nevada’s workplace safety regulator blaming it for chemical burns two firefighters had suffered in its tunnels during a training exercise.&lt;/p&gt;
    &lt;p&gt;By the next afternoon, a group of high-ranking state officials, including the governor’s state infrastructure coordinator who took the call, were convened in a room with Davis, who was himself wrapping up a stint in Washington D.C. helping Musk run the Trump administration’s Department of Government Efficiency (DOGE). At the beginning of that meeting, the citations and fines—among the agency’s largest in a decade and a potential threat to Boring’s plans to build tunnels in other U.S. cities—were summarily rescinded.&lt;/p&gt;
    &lt;p&gt;Soon, something else disappeared: The record of the Governor’s office meeting with Musk’s company was removed from a public document without explanation. More irregularities in the case file occurred: Documents weren’t saved to the file, and a document intended to provide reasoning for revoking the citations was left out.&lt;/p&gt;
    &lt;p&gt;The sequence of events, which Fortune is the first to report, raised alarm and has had a chilling effect within Nevada’s Occupational Safety and Health Administration, according to an OSHA staffer as well as someone who worked on the case, and it raises questions about the degree to which a powerful business is able to bend regulatory guardrails to its will and skirt proper oversight, especially as Musk’s consortium of companies become increasingly intertwined with Nevada’s economy.&lt;/p&gt;
    &lt;p&gt;“There is a defined process, and we didn’t follow it,” says one of the people that worked on the case file. “It wasn’t the agency that decided to do that—it was above the agency,” the person added, speaking on condition of anonymity because they feared retaliation from speaking about internal OSHA matters.&lt;/p&gt;
    &lt;p&gt;In statements to Fortune, Teri Williams, a spokeswoman for Nevada OSHA and the state departments that sit above it, described most of the irregularities in public record documentation of the case as innocuous mistakes, and said the agency had amended its case file after Fortune’s outreach “to ensure that the file is accurate.” She said the citations and fines did not meet legal requirements and should never have been issued in the first place, and that, as a result of this incident, the agency has since updated its policies and procedures to provide more oversight of OSHA investigations into “high-profile” employers.&lt;/p&gt;
    &lt;p&gt;Regarding the meeting, Williams said that the Governor’s office “frequently receives complaints and inquiries” from employers and that “it is standard practice” for the Governor’s office to reach out to leadership to assist with complaints and inquiries. She said that the Governor’s office has never directed Nevada agencies to resolve complaints and that, in this instance, it would have supported an agency decision to keep citations if they were “found to have merit and could be validated.”&lt;/p&gt;
    &lt;p&gt;“This specific outreach from Boring Company is not an anomaly and only stands out due to the high-profile nature of the business because of its affiliation with Elon Musk,” she said. (To read Nevada’s OSHA entire response to this story, click here.)&lt;/p&gt;
    &lt;p&gt;Four lawyers and former Nevada regulators, however, say this level of political involvement in an OSHA investigation is not only highly unusual, but goes against procedure. “It’s absolutely not appropriate,” said Jess Lankford, who oversaw Nevada OSHA until 2021. The agency is supposed to have the political independence to call “balls and strikes” as it sees fit, says Terry Johnson, an adjunct professor at the University of Nevada Las Vegas who previously served as the director of the department that sits above OSHA.&lt;/p&gt;
    &lt;p&gt;The Boring Company’s project, which aims to build an 104-station network of underground tunnels connecting the Convention Center to the airport, the Las Vegas Strip, and Allegiant Stadium, is one of several major investments that Elon Musk has made in Nevada, including the $7 billion Tesla Gigafactory, which employs more than 17,000 construction and factory workers and has drawn other partner companies to set up shop nearby.&lt;/p&gt;
    &lt;p&gt;As the fallout from the closed investigation has been quietly playing out behind the scenes, more safety incidents have occurred on Boring project sites in Las Vegas, under what one recently departed employee described as a “cowboy” culture regarding safety protocols. A worker’s pelvis was crushed in September; a different employee was shocked by an electrical panel this summer; and the harsh chemicals that burned the firefighters, part of a toxic muck fluid that pools in the tunnels, remain an ever-present danger for Boring workers, according to five current and former employees at the Boring Company, who spoke on condition of anonymity because they feared retribution.&lt;/p&gt;
    &lt;p&gt;One former employee described how workers would often kneel in the muck, not even realizing they were being burned until it was happening. “They go to peel off their sock,” they said, “And a big old chunk of skin comes off.”&lt;/p&gt;
    &lt;p&gt;Meanwhile, a current Nevada OSHA employee says that the OSHA staffers working on the agency’s ongoing investigations into Boring (one of which involves the crushed worker) are frightened they will “get disciplined for doing their job.”&lt;/p&gt;
    &lt;p&gt;“It’s very political right now,” they added.&lt;/p&gt;
    &lt;p&gt;This account of the firefighter injuries in Boring Co. tunnels, the Governor’s office involvement, and the aborted penalties is based on interviews with and statements from Nevada regulators and current or former Nevada OSHA employees, interviews with current and former Boring Co. employees, analysis from attorneys practicing in Nevada, and hundreds of pages of documents, including calendars, emails, photographs, and notes, related to OSHA’s inspection that were either obtained via several Freedom of Information Act Requests or shared privately with Fortune.&lt;/p&gt;
    &lt;p&gt;Boring Company and Davis did not respond to multiple requests for comment for this story.&lt;/p&gt;
    &lt;head rend="h2"&gt;A fire drill gone awry&lt;/head&gt;
    &lt;p&gt;Musk’s Boring Co. bills itself as a new kind of transportation system, with ambitions to dig a vast “underground highway” for Teslas to zip through under the streets of Las Vegas, Nashville, and eventually other cities.&lt;/p&gt;
    &lt;p&gt;It’s raised more than $900 million in funding over the years, according to PitchBook, including from some of Silicon Valley’s top investment firms such as Sequoia Capital. Boring’s short 4-mile stretch underneath the Las Vegas Convention Center and to two casinos, is, thus far, the lone working example of this vision. But Boring Co. President Davis, a long-time lieutenant to Musk’s various businesses, is racing to expand the Las Vegas “Loop” tunnel into the city and other areas of the broader county.&lt;/p&gt;
    &lt;p&gt;Building the underground Tesla system is grueling work in the best of cases—involving giant drilling machines, toxic chemicals, and long shifts. At Boring Co. safety precautions and environmental permits have seemingly been thrown to the side in favor of speed. A Fortune investigation published in early 2024 found that numerous employees had suffered from burns caused by an accelerant used to harden the concrete mixture that keeps the tunnel structure in place. That chemical, called MasterRoc AGA 41S, mixes with groundwater and dirt as the tunneling proceeds, and pools at the base of the tunnels, sometimes to knee-high levels.&lt;/p&gt;
    &lt;p&gt;So when the Clark County fire department began to familiarize itself with the tunnel network to conduct emergency rescue drills at the end of 2024, the question of how to deal with the muck was part of the planning process, according to planning documents reviewed by Fortune. Boring was slated to brief firefighters on the muck fluid before each day of the December safety drills.&lt;/p&gt;
    &lt;p&gt;Preparation for the two-day fire drill began more than a month beforehand. Scripts about the hypothetical accident and evacuation were put together, five prep meetings were held, and the Fire Department stowed an approximately 200-pound mannequin dummy in a hard-to-reach location within the tunnel, so the technical rescue team could simulate an arduous evacuation, according to planning materials, documents Boring Company shared with OSHA, and the Fire Department’s subsequent review of the drills that were shared with Fortune.&lt;/p&gt;
    &lt;p&gt;Approximately thirteen fire units arrived for the drill on December 9, parking around the training site and at the Centerfolds strip club down the street.&lt;/p&gt;
    &lt;p&gt;The first day went as planned, but it was right after the drill on the second day, December 10, 2024, that complications ensued. After two hours in the tunnels, two firefighters reported irritation on their legs. They were taken to the hospital, where it was determined that their legs had been burned by the chemicals in Boring’s tunnel. The firefighters’ skin was permanently scarred, according to findings from the subsequent OSHA investigation, though they left the hospital later that same day and were back at work the next work shift, which was two days later, a spokeswoman for the County Fire Department says.&lt;/p&gt;
    &lt;p&gt;OSHA’s investigator interviewed four firefighters who were at the drill, according to notes from the interviews obtained by Fortune in a records request (the names of the firefighters were redacted). Three of the firefighters said that the muck fluid reached the top of their boots or above, and one of the firefighters who was burned said they had to crawl through it at one point to rescue the dummy, according to the notes. “My boots were full of muck,” they said.&lt;/p&gt;
    &lt;p&gt;Some of the firefighters appeared not to have been aware of the risk, the notes show. “We weren’t aware of the chemicals being hazardous,” one firefighter said, according to the notes, pointing out that Boring Company had supposedly told them “we could just wash it off after” and that it was “just mud.” Another firefighter reported that the Boring Company “had someone put their full arm in the muck” and tell them “they’d be fine.”&lt;/p&gt;
    &lt;p&gt;According to one former Boring employee who worked at the company at the time of the drills, workers had made an effort to clear the tunnels of the muck fluid before the fire department arrived for the exercise. “There’s no way to fully clean it,” the employee said, “Because there’s constant flow coming out of the machine, even when it’s standing still.”&lt;/p&gt;
    &lt;p&gt;“We’re so used to dealing with it on a daily basis,” they added.&lt;/p&gt;
    &lt;p&gt;Shortly after Nevada’s OSHA opened an investigation, Boring Company’s lawyers put together a response in which Boring denied any responsibility and placed full blame for the incident on the Clark County Fire Department. “The key breakdowns in the Training Plan were committed by CCFD employees, not TBC employees,” the company’s lawyer wrote in the letter. (The Fire Department maintains that “CCFD followed all recommendations from TBC” and says that OSHA found no fault with the Fire Department for the incident) In the response, Boring Company provided nearly 1,000 pages of documents that OSHA had requested, including receipts of equipment and protective gear it had purchased as well as documentation showing it had debriefed the Fire Department on the chemicals, performed safety meetings prior to the drills, and offered the use of a liner truck to transport the firefighters through the tunnel.&lt;/p&gt;
    &lt;p&gt;Nevada OSHA came to a different conclusion. On May 28, OSHA issued three “willful” citations against Boring. These are the most aggressive violations the agency can levy, reserved for an employer that committed an “intentional and knowing” violation or knew that a hazardous condition existed and made no “reasonable effort” to eliminate it. All three citations were categorized as “serious,” meaning there was a “substantial probability that death or serious physical harm” could have occurred.&lt;/p&gt;
    &lt;p&gt;OSHA proposed penalties of $425,595 for the three citations, according to the citation notice sent to Boring Company. That may not sound like much for a company owned by the world’s richest man, but it would have been the third-largest initial penalty Nevada OSHA had issued to an employer since 2015, according to a public database of enforcement actions that the Department of Labor keeps on its website. The median initial penalty Nevada OSHA issued in the first six months of this year was $5,142, according to OSHA.&lt;/p&gt;
    &lt;p&gt;A fine of that size could also have been a public black eye for the company at a time when it was pushing to expand in Las Vegas and win business in other cities.&lt;/p&gt;
    &lt;head rend="h2"&gt;‘Not the way it’s supposed to work’&lt;/head&gt;
    &lt;p&gt;When Boring Co.’s Davis called the Governor’s office the day the company received the citations, he spoke to Chris Reilly, the governor’s point person for state infrastructure, who was hired in 2024 after working at Tesla for more than seven years.&lt;/p&gt;
    &lt;p&gt;The next day, May 29, at 4 p.m. a coterie of high-level Nevada officials gathered to meet with a handful of Boring executives, including Davis and Tyler Fairbanks, head of project development at Boring Co., according to a copy of the meeting invite, calendar records, and independent verification by Fortune. The Nevada government attendees included Reilly; Dr. Kristopher Sanchez, the Governor Lombardo-appointed director of the Department of Business and Industry (DBI); as well as supervisory staff from the Division of Industry Relations (DIR), which oversees Nevada OSHA; Nevada OSHA itself, and a representative from the Las Vegas Convention and Visitors Authority. (Governor Lombardo himself was not present, and was reviewing legislation at the time, according to a copy of his calendar that Fortune received in a records request.)&lt;/p&gt;
    &lt;p&gt;Boring Co. had prepared a 25-page slide deck for the meeting that echoed its previous arguments and called the citations “patently absurd” and “demonstrably false.” Before the company laid out its case in the meeting, however, Nevada OSHA had already withdrawn the citations, and state officials kicked off the meeting by telling Boring Co. they had been rescinded, Nevada’s OSHA confirmed in a statement to Fortune. “No information provided during the meeting was the basis for the citations being withdrawn,” OSHA’s Williams said in an email.&lt;/p&gt;
    &lt;p&gt;In an interview, Victoria Carreón, the Administrator of the Division of Industrial Relations, which oversees Nevada OSHA, who was also in the meeting, said that the concerns Boring raised to the Governor’s office had led Nevada OSHA’s legal counsel to go back and review the citations ahead of the meeting.&lt;/p&gt;
    &lt;p&gt;The state’s lawyers determined the key elements for a citation were not met and so “we decided that the best course of action was to withdraw the citation pending further review,” she said, noting that the subsequent review found that the “particular citations that were originally composed were not warranted to be reissued.”&lt;/p&gt;
    &lt;p&gt;Reilly, the state infrastructure coordinator in Lombardo’s office, added in a statement that, in the May 29 meeting, representatives from OSHA and the Division of Industrial Relations had shared that the violations were issued without proper internal documentation, failed to consider materials previously submitted by the company refuting the violations, and “should not have been sent.”&lt;/p&gt;
    &lt;p&gt;Nevada OSHA’s official procedures allow for an appeals process where companies can object to the citations, in writing, and set up an informal meeting with OSHA to ask for the penalties to be modified or even withdrawn. Once the governor’s office was looped in however, none of this ever happened.&lt;/p&gt;
    &lt;p&gt;Multiple sources, including current and former Nevada OSHA employees, regulators, and employment lawyers, told Fortune that it’s inappropriate for the Governor’s office and political appointees to get involved in a specific OSHA inspection—even one involving a high-profile company. Jess Lankford, the former Nevada OSHA chief administrative officer, said the Governor’s office getting involved is “not the way it’s supposed to work.”&lt;/p&gt;
    &lt;head rend="h2"&gt;Irregularities in the public record and special treatment for ‘large employers’&lt;/head&gt;
    &lt;p&gt;Several of the things that happened next were, even by OSHA’s admission, inconsistent with the agency’s standard process and norms. After the May 29 meeting, the three now-rescinded citations against Boring Co. were never mentioned again in the OSHA case file, even though documentation of their removal should have appeared in the public record, according to Fortune’s review of the case file. No document was added to the file explaining or justifying their removal. “There are various missing documents, processes that weren’t followed. So we know that the policies, the procedures, were not being followed,” Nevada OSHA’s Williams acknowledged on a call with Fortune.&lt;/p&gt;
    &lt;p&gt;Moreover, a key document in OSHA’s Boring Company inspection file was altered, according to two people with knowledge of the matter and documents seen by Fortune. A line in the OSHA case diary—the only reference in the case file to a meeting with the Governor’s office—was deleted, the people said. Fortune compared the public record it received from OSHA to an earlier version obtained from sources that had been available to all agency staff on its server, and confirmed that the line item documenting the meeting had been deleted from the case diary.&lt;/p&gt;
    &lt;p&gt;“You have substantial evidence that shows there was, I’m not going to use the word illegal, but there was some questionable practices right there, having that removed,” said Lankford, the former OSHA chief administrative officer.&lt;/p&gt;
    &lt;p&gt;“From an attorney’s standpoint, it looks really bad,” said Ron Zambrano, the employment litigation chair at West Coast Trial Lawyers, which represents plaintiff-side clients in California and Nevada. “You did something very unusual with this embarrassing thing, which is try to hide it,” he added.&lt;/p&gt;
    &lt;p&gt;The case file included other discrepancies, including an incorrect date on a key document, missing worksheets detailing the rationale behind the citations that Nevada OSHA said were “apparently not saved into the file”, and another document that was “inadvertently omitted.”&lt;/p&gt;
    &lt;p&gt;Regarding the deleted entry for the Governor’s office meeting, officials did not contest that the line item had been deleted, but emphasized that no supervisors had directed its deletion.&lt;/p&gt;
    &lt;p&gt;Reilly, from Governor Lombardo’s office, said that “no record was edited at the direction of me, the Governor’s Office, DIR, B&amp;amp;I, or any other entity I am aware of,” adding that the “insinuation” that these officers had directed such a deletion was “incorrect.” Nevada OSHA spokeswoman Williams also disputed that Nevada agencies had tried to conceal the meeting and said they were forthcoming about the meeting to Fortune.&lt;/p&gt;
    &lt;p&gt;Nevada OSHA updated the case file after Fortune’s inquiries, and shared a new copy of the case diary, in which there is now an update at the bottom, describing a May 29 “collaborative meeting w/ employer” in which Boring Company was told “OSHA was withdrawing the citation.” The case diary still no longer mentions that representatives from the Governor’s office were present. (To read Nevada’s OSHA full response to comment for this story, click here.)&lt;/p&gt;
    &lt;p&gt;Meanwhile, the state has revised its OSHA policies in ways that could ultimately make it more difficult or take longer for the agency to impose such fines on larger employers like the Boring Co. Carreón, the DIR Administrator, said her agency conducted a “quality review process” after the Boring case, and implemented new policies and new procedures. Among them is a mandatory 30-day lawyer review period and notification to the Public Information Officer in “high-profile” or “large-scale employer” cases. The goal, Carreón said, is to improve the quality of Nevada OSHA case files and make sure that what was included in them would be “legally sufficient.”&lt;/p&gt;
    &lt;p&gt;Williams stressed that OSHA employees have been assured that they have “full support” from DBI and DIR “to do their job in [a] way that ensures Nevada employees have access to a safe, healthful workplace, and businesses have confidence that the agency will regulate them in a fair and impartial manner.”&lt;/p&gt;
    &lt;p&gt;Boring ended up making a few concessions with OSHA, which included monthly “update” meetings with the chief administrative officer (CAO) of Nevada OSHA. But the CAO, William Gardner, who held that role when the original citations were issued against Boring, left in July, and Carreón acknowledged that the meetings have not been taking place monthly.&lt;/p&gt;
    &lt;head rend="h2"&gt;‘They won’t make sh*t safe for us’&lt;/head&gt;
    &lt;p&gt;In the tunnels below Las Vegas, the mission to construct the subterranean highway system continues. Three current and former Boring Co. employees, who have all worked at the company this year, say that pressure to speed up the project has heightened since June—when Steve Davis returned to his day-to-day role at the company after his brief stint helping Musk run DOGE. That month—just after the citations had been issued, then retracted—employees started seeing Davis around again. Three employees who worked at Boring in June said they would see Davis being whisked to and from various project sites, escorted by an armed bodyguard in a Cadillac Escalade.&lt;/p&gt;
    &lt;p&gt;Five current and former Boring employees who spoke with Fortune say the same safety issues persist, with two reporting that chemical burns seem to happen “daily.” When asked to describe safety protocols and training, one employee who left in recent weeks put it simply: “There is none.”&lt;/p&gt;
    &lt;p&gt;“PPE has been provided to the Boring Company workers as well as the firefighters. Accelerant is an integral part of the process and will continue to be used. The Boring Company is working to limit workers’ exposure and is making progress, but properly used PPE remains the correct way for employees to protect themselves,” says a spokeswoman from the Las Vegas Convention and Visitors Authority, the government marketing agency that pays Boring Company to operate the tunnel system below the Convention Center and has overseen the initial project construction.&lt;/p&gt;
    &lt;p&gt;Within Nevada’s workplace safety watchdog agency, meanwhile, the unusual reversal of the citations is having ripple effects. Two staffers say they were alarmed by the handling of the incident and the speed at which the citations were withdrawn, and that these actions have made agency employees fear inspecting or regulating Boring Co. in the future, particularly because two employees that worked on the Boring Co. investigation were demoted or written up (Williams said Nevada OSHA wouldn’t comment on “specific personnel actions taken in this case or any other.”) One of the people who worked on the case said that they and many colleagues worried that the agency’s ability to independently enforce safe working conditions and accountability had been compromised in order to appease one of Nevada’s (and the world’s) most high-profile business magnates.&lt;/p&gt;
    &lt;p&gt;The events may even have emboldened Boring Company in its interactions with regulators. In mid-August, Clark County’s environmental regulators allege, Boring workers refused to stop dumping wastewater down manholes around Las Vegas and later “feigned compliance” and made false statements to inspectors about when the dumping had started, according to documents sent to Boring Company from the Clark County Water Reclamation District. The episode ended up causing “substantial damage” to the broader county infrastructure, and the regulator fined Boring Company nearly $500,000, the documents show. (Boring has not responded to Fortune’s multiple requests for comment on the matter)&lt;/p&gt;
    &lt;p&gt;To date, Boring has never paid a penalty to Nevada OSHA for any safety incidents on its job sites. The company is still contesting eight citations issued in 2023 by Nevada OSHA. As Boring Co. has plowed ahead, Nevada OSHA has been one of the few checks on its practices. But the events of this spring have led some to call into question OSHA’s willingness or ability to wield its own authority.&lt;/p&gt;
    &lt;p&gt;For those underground, digging the tunnels, a perceived lack of consequence has sent a clear message: “It seems like people are going to have to die, because they won’t make sh*t safe for us,” one current Boring employee says.&lt;/p&gt;
    &lt;p&gt;Are you a current or former Boring Company employee with thoughts on this topic? Have a tip to share? Contact Jessica Mathews at jessica.mathews@fortune.com or jessica.m101@proton.me, or through the secure messaging app Signal at jessica_mathews.36. You can also contact her on LinkedIn.&lt;/p&gt;
    &lt;p&gt;More coverage from Fortune on the Boring Company:&lt;lb/&gt;—Elon Musk’s Boring Company fined nearly $500K after it dumped drilling fluids into Las Vegas manholes—then ‘feigned compliance’ and was caught doing it again&lt;lb/&gt;—Tunneling halted at Boring Company job site in Las Vegas after ‘crushing injury’ of worker reported&lt;lb/&gt;—The CEO of the Las Vegas agency behind Boring Company’s first tunnel system says his team will be ‘more involved’ after safety incidents&lt;lb/&gt;—‘We have consistently flirted with death’: Elon Musk wanted the Boring Co. to build a tunnel system below Las Vegas. Former employees say they feared for their lives while working there&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45939798</guid><pubDate>Sat, 15 Nov 2025 19:10:31 +0000</pubDate></item><item><title>Archimedes – A Python toolkit for hardware engineering</title><link>https://pinetreelabs.github.io/archimedes/blog/2025/introduction.html</link><description>&lt;doc fingerprint="37799a116ae50c42"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Introducing Archimedes¶&lt;/head&gt;
    &lt;p&gt;A Python toolkit for hardware engineering&lt;/p&gt;
    &lt;p&gt;By Jared Callaham • 6 Oct 2025&lt;/p&gt;
    &lt;p&gt;A great engineer (controls being no exception) has to be part hacker, part master craftsman.&lt;/p&gt;
    &lt;p&gt;You have to be a hacker because things rarely “just work” in the real world without a little… creativity. But you can’t only be a hacker; developing complex systems in aerospace, automotive, robotics, and similar industries demands a disciplined, systematic approach. You need tools that let you iterate fast and maintain a methodical workflow where changes are version-controlled, algorithms are tested systematically, and deployment is repeatable.&lt;/p&gt;
    &lt;p&gt;Modern deep learning frameworks solved this years ago — you can develop in PyTorch or JAX and deploy anywhere. But those tools were built for neural net models, GPUs, and cloud deployments, not dynamics models, MCUs, and HIL testing.&lt;/p&gt;
    &lt;p&gt;That’s where Archimedes comes in; what PyTorch did for ML deployment, Archimedes aims to do for control systems. The goal is to build an open-source “PyTorch for hardware” that gives you the productivity of Python with the deployability of C.&lt;/p&gt;
    &lt;p&gt;In short, Archimedes is a Python framework that lets you develop and analyze algorithms in NumPy and automatically generate optimized C code for embedded systems. For instance, you can write a physics model in Python, calibrate it with data, use the model to design and simulate control logic, validate with simple hardware-in-the-loop (HIL) testing, and deploy with confidence:&lt;/p&gt;
    &lt;p&gt;This is one workflow you might use with Archimedes (specifically, the one from the hardware deployment tutorial), but it’s designed to be flexible, so you’re free to build up whatever workflow suits your style and application best.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Linchpin: Python → C Code Generation¶&lt;/head&gt;
    &lt;p&gt;Archimedes started with the question, “What would you need to actually do practical control systems development in Python?”&lt;/p&gt;
    &lt;p&gt;As a high-level language, it’s hard to beat Python on design principles like progressive disclosure, flexibility, and scalability. The numerical ecosystem (NumPy, SciPy, Matplotlib, Pandas, PyTorch, etc.) is also excellent. The problem is that none of it can deploy to typical embedded systems.&lt;/p&gt;
    &lt;p&gt;If you need to deploy to hardware today, you have a few basic options:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;
        &lt;p&gt;Work in a high-level language like Python or Julia and manually translate algorithms to C code&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Work entirely in a low-level language like C/C++ or Rust&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Adopt an expensive vendor-locked ecosystem that supports automatic code generation&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;(Side note: While running Python itself on a microcontroller is growing in popularity for educational and hobby applications, there’s no real future for pure Python in real-time mission-critical deployments.)&lt;/p&gt;
    &lt;p&gt;However, if you could do seamless C code generation from standard NumPy code, you could layer on simulation and optimization tools, building blocks for physics modeling, testing frameworks, and other features of comprehensive controls engineering toolchains. But without the code generation, there will always be a gulf between the software and the hardware deployment.&lt;/p&gt;
    &lt;p&gt;Just to drive the point home, here’s a side-by-side of manual vs automatic coding for a common piece of sensor fusion algorithms:&lt;/p&gt;
    &lt;head class="sd-summary-title sd-card-header"&gt;Kalman Filter Comparison&lt;/head&gt;
    &lt;p&gt;Below are two implementations of a Kalman filter, an algorithm that combines noisy sensor measurements with a prediction model to estimate system state. This is what’s behind GPS navigation, spacecraft guidance, and sensor fusion in millions of devices.&lt;/p&gt;
    &lt;p&gt;On the left is hand-written C code, and on the right is a NumPy version that can be used to generate an equivalent function.&lt;/p&gt;
    &lt;p&gt;Here we’ll show an implementation for the common case of a single sensor, which avoids having to use a library for matrix inversion in C (though Archimedes does support operations like Cholesky factorization).&lt;/p&gt;
    &lt;code&gt;#include &amp;lt;stdint.h&amp;gt;
#define N_STATES        4

typedef struct {
    float H[N_STATES];  // Measurement matrix (1 x n)
    float R;            // Measurement noise covariance (scalar)
} kf_params_t;

typedef struct {
    float x[N_STATES];            // State estimate
    float P[N_STATES][N_STATES]; // Estimate covariance
} kf_state_t;

typedef struct {
    float K[N_STATES];              // Kalman gain (n x 1)
    float M[N_STATES][N_STATES];    // I - K * H temporary
    float MP[N_STATES][N_STATES];   // M * P temporary
    float MPMT[N_STATES][N_STATES]; // M * P * M^T temporary
    float KRKT[N_STATES][N_STATES]; // K * R * K^T temporary
} kf_work_t;

/**
 * Kalman filter update step (scalar measurement case)
 *
 * Mathematical formulation:
 *   y = z - H·x                      (innovation)
 *   S = H·P·H^T + R                  (innovation covariance)
 *   K = P·H^T·S^(-1)                 (Kalman gain)
 *   x' = x + K·y                     (state update)
 *   P' = (I-KH)·P·(I-KH)^T + K·R·K^T (Joseph form covariance)
 *
 * @param z: Latest measurement
 * @param kf_state: Pointer to Kalman filter state struct
 * @param kf_params: Pointer to Kalman filter parameters struct
 * @param kf_work: Pointer to Kalman filter work struct (for temporaries)
 * @return: 0 on success, -1 on error
 */
int kalman_update(float z, kf_state_t *kf_state,
                  const kf_params_t *kf_params,
                  kf_work_t *kf_work) {
    #ifdef DEBUG
    if (!kf_state || !kf_params || !kf_work)
        return -1;
    #endif
    size_t i, j, k;

    // Innovation: y = z - H * x
    float y = z;
    for (i = 0; i &amp;lt; N_STATES; i++)
        y -= kf_params-&amp;gt;H[i] * kf_state-&amp;gt;x[i];

    // Innovation covariance: S = H * P * H^T + R
    float S = kf_params-&amp;gt;R;

    // Compute P * H^T (mv_mult)
    // Using K as temporary storage here
    for (i = 0; i &amp;lt; N_STATES; i++) {
        kf_work-&amp;gt;K[i] = 0.0f;
        for (j = 0; j &amp;lt; N_STATES; j++) {
            kf_work-&amp;gt;K[i] += kf_state-&amp;gt;P[i][j] * kf_params-&amp;gt;H[j];
        }
    }
    for (i = 0; i &amp;lt; N_STATES; i++)
        S += kf_params-&amp;gt;H[i] * kf_work-&amp;gt;K[i];

    // Kalman gain: K = P * H^T / S
    for (i = 0; i &amp;lt; N_STATES; i++)
        kf_work-&amp;gt;K[i] /= S;

    // Update state with feedback from new measurement: x = x + K * y
    for (i = 0; i &amp;lt; N_STATES; i++)
        kf_state-&amp;gt;x[i] += kf_work-&amp;gt;K[i] * y;

    // Joseph form update: P = (I - K * H) * P * (I - K * H)^T + K * R * K^T
    // First compute M = I - K * H
    for (i = 0; i &amp;lt; N_STATES; i++) {
        for (j = 0; j &amp;lt; N_STATES; j++) {
            if (i == j)
                kf_work-&amp;gt;M[i][j] = 1.0f - kf_work-&amp;gt;K[i] * kf_params-&amp;gt;H[j];
            else
                kf_work-&amp;gt;M[i][j] = -kf_work-&amp;gt;K[i] * kf_params-&amp;gt;H[j];
        }
    }

    // Compute M * P
    for (i = 0; i &amp;lt; N_STATES; i++) {
        for (j = 0; j &amp;lt; N_STATES; j++) {
            kf_work-&amp;gt;MP[i][j] = 0.0f;
            for (k = 0; k &amp;lt; N_STATES; k++) {
                kf_work-&amp;gt;MP[i][j] += kf_work-&amp;gt;M[i][k] * kf_state-&amp;gt;P[k][j];
            }
        }
    }

    // Compute (M * P) * M^T
    for (i = 0; i &amp;lt; N_STATES; i++) {
        for (j = 0; j &amp;lt; N_STATES; j++) {
            kf_work-&amp;gt;MPMT[i][j] = 0.0f;
            for (k = 0; k &amp;lt; N_STATES; k++) {
                kf_work-&amp;gt;MPMT[i][j] += kf_work-&amp;gt;MP[i][k] * kf_work-&amp;gt;M[j][k];
            }
        }
    }

    // Compute K * R * K^T
    for (i = 0; i &amp;lt; N_STATES; i++) {
        for (j = 0; j &amp;lt; N_STATES; j++) {
            kf_work-&amp;gt;KRKT[i][j] = kf_work-&amp;gt;K[i] * kf_params-&amp;gt;R * kf_work-&amp;gt;K[j];
        }
    }

    // Final covariance update: P = MPMT + KRKT
    for (i = 0; i &amp;lt; N_STATES; i++) {
        for (j = 0; j &amp;lt; N_STATES; j++) {
            kf_state-&amp;gt;P[i][j] = kf_work-&amp;gt;MPMT[i][j] + kf_work-&amp;gt;KRKT[i][j];
        }
    }

    return 0;
}
&lt;/code&gt;
    &lt;code&gt;@arc.compile
def kalman_update(x, P, z, H, R):
    """Update state estimate with new measurement"""
    I = np.eye(len(x))
    R = np.atleast_2d(R)  # Ensure R is 2D for matrix operations

    y = np.atleast_1d(z - H @ x)  # Innovation
    S = H @ P @ H.T + R  # Innovation covariance  
    K = P @ H.T / S  # Kalman gain (scalar S)

    # Update state with feedback from new measurement
    x_new = x + K * y

    # Joseph form covariance update
    P_new = (I - K @ H) @ P @ (I - K @ H).T + K @ R @ K.T
    
    return x_new, P_new

# Generate optimized C code:
return_names = ("x_new", "P_new")
args = (x, P, z, H, R)
arc.codegen(kalman_update, args, return_names=return_names)
&lt;/code&gt;
    &lt;p&gt;Neither of these implementations is optimized, but it gives a sense of what it looks like to work in either environment. Of course, for production hand-written code, you’d likely also use optimized linear algebra libraries like CMSIS-DSP and numerical strategies like Cholesky factorization or a square-root form for stability. But the extra numerical features are only a few extra lines in NumPy, while the hand-written C version becomes more and more complex.&lt;/p&gt;
    &lt;p&gt;This capability, and most of the other core functionality in Archimedes, is made possible by building on CasADi, a sophisticated open-source library for nonlinear optimization and algorithmic differentiation. This lets Archimedes translate your NumPy code into C++ computational graphs that support code generation, derivative calculation, and more.&lt;/p&gt;
    &lt;head rend="h2"&gt;Beyond Codegen¶&lt;/head&gt;
    &lt;p&gt;If you’re already working in C/C++/Rust, or if you don’t actually need to deploy to hardware for your application, the codegen may not speak to you. But while Python → C code generation is what makes Archimedes practical for deployment, there’s much more you can do.&lt;/p&gt;
    &lt;head rend="h3"&gt;Compilation¶&lt;/head&gt;
    &lt;p&gt;Archimedes can “compile” a Python function into a C++ computational graph, meaning that when you call the compiled function, the entire numerical code gets executed in C++ rather than interpreted Python. For complicated functions this can achieve dramatic speedups over pure Python (5-10x even on simple benchmarks).&lt;/p&gt;
    &lt;code&gt;import numpy as np
import archimedes as arc

@arc.compile
def rotate(x, theta):
    R = np.array([
        [np.cos(theta), -np.sin(theta)],
        [np.sin(theta), np.cos(theta)],
    ], like=x)
    return R @ x

rotate(np.array([1.0, 0.0]), 0.1)
&lt;/code&gt;
    &lt;p&gt;You can embed complex functionality like ODE solves, constrained nonlinear optimization, and more directly in these computational graphs.&lt;/p&gt;
    &lt;p&gt;When you first call your function, Archimedes feeds it symbolic arrays (using CasADi’s symbolic types under the hood) that match the shape and type of your numerical inputs. As your code executes, it builds up a C++ representation of the calculation. Then, instead of operating on the numerical arrays, your code operates on these symbolic replacements, using NumPy’s array dispatch mechanism to redirect to CasADi whenever you call NumPy functions. By the end of this “tracing” step, CasADi has a full view of what the function does and can reproduce it in efficient C++. Then, any time you call that function again, the C++ equivalent is what actually gets executed.&lt;/p&gt;
    &lt;p&gt;This approach is not “Just-In-Time” (JIT) compilation in the sense used by Julia/JAX/Numba, where the Python code is literally compiled down to highly optimized platform-specific machine code. We’ll show some benchmarking in a separate post, but generally what you can expect is that these JIT-compiled frameworks will be somewhat faster than pre-compiled CasADi (and hence, Archimedes). However, by avoiding the overhead and “unrolling” of true JIT compilation, we get a massive reduction in compilation time for the kind of complex functions typical of advanced controls applications.&lt;/p&gt;
    &lt;p&gt;For more on how this works (and when it doesn’t), see the Under the Hood documentation page.&lt;/p&gt;
    &lt;head rend="h3"&gt;Simulation, Optimization, &amp;amp; Root-finding¶&lt;/head&gt;
    &lt;p&gt;Archimedes provides a SciPy-like interface to the powerful and robust CVODES solver from SUNDIALS, which is a highly efficient and time-tested implementation of a stiff/non-stiff implicit solver that even supports gradient-based sensitivity analysis:&lt;/p&gt;
    &lt;code&gt;def simulate(x0):
    xs = arc.odeint(dynamics, (t0, tf), x0, t_eval=ts)
    return xs[:, -1]

arc.jac(simulate)(x0)  # dxf/dx0
&lt;/code&gt;
    &lt;p&gt;We also have a SciPy-like optimization interface that can solve constrained nonlinear problems with IPOPT:&lt;/p&gt;
    &lt;code&gt;# Rosenbrock problem
def f(x):
    return 100 * (x[1] - x[0] ** 2) ** 2 + (1 - x[0]) ** 2

result = arc.minimize(f, x0=[-1.0, 1.0])
&lt;/code&gt;
    &lt;p&gt;and a root-finding interface for iteratively solving nonlinear algebraic systems using Newton iterations and similar methods:&lt;/p&gt;
    &lt;code&gt;def f(x):
    return np.array([
        x[0] + 0.5 * (x[0] - x[1])**3 - 1.0,
        0.5 * (x[1] - x[0])**3 + x[1]
    ], like=x)

x = arc.root(f, x0=np.array([0.0, 0.0]))
&lt;/code&gt;
    &lt;p&gt;These solves can also be embedded in compiled computational graphs for accelerated simulation and optimization.&lt;/p&gt;
    &lt;head rend="h3"&gt;Automatic Differentiation¶&lt;/head&gt;
    &lt;p&gt;Compilation into a CasADi computational graph unlocks two critical capabilities: execution speed and automatic differentiation. This means that you can easily and accurately calculate derivatives of your functions:&lt;/p&gt;
    &lt;code&gt;def lotka_volterra(t, x):
    a, b, c, d = 1.5, 1.0, 1.0, 3.0
    return np.hstack([
        a * x[0] - b * x[0] * x[1],
        c * x[0] * x[1] - d * x[1],
    ])

# Linearize the system
J = arc.jac(dynamics, argnums=1)
print(J(0.0, [1.0, 1.0]))
&lt;/code&gt;
    &lt;p&gt;Besides linearizing models for stability analysis and controller design, this is a feature you may not directly use very often. But gradients and Jacobians are used pervasively in numerical methods:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Optimization solvers use gradients of the objective, Jacobians of the constraints, and sometimes even Hessian information&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Simulation algorithms use Jacobians of the dynamics model for implicit solvers, especially for “stiff” ODE/DAE problems&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Root-finding solvers like Newton’s method use Jacobians at every iteration to find an improved guess at the solution point&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;So when you do parameter estimation, trajectory optimization, trim point identification, or even just call &lt;code&gt;odeint&lt;/code&gt;, you don’t think about “autodiff”, but it’s happening behind the scenes to solve your problem.&lt;/p&gt;
    &lt;p&gt;Traditional scientific computing packages like SciPy and MATLAB usually fall back to slow and inaccurate finite differencing unless you provide manually implemented gradients, Jacobians, etc. - but for anything but the simplest problems this is prohibitively complicated to calculate and implement.&lt;/p&gt;
    &lt;p&gt;Newer frameworks like Julia, JAX, and PyTorch rely much more heavily on autodiff, but none of these are tailored towards hardware and controls engineering applications. My personal experience has been that CasADi (the autodiff framework used under the hood by Archimedes) has far and away the best autodiff system for the kinds of large, sparse problems that commonly arise in engineering (like parameter estimation, trajectory optimization, model-predictive control, etc.).&lt;/p&gt;
    &lt;p&gt;All that is to say, the derivatives are there if you need them.&lt;/p&gt;
    &lt;head rend="h3"&gt;Structured Data Types¶&lt;/head&gt;
    &lt;p&gt;Most numerical codes are naturally written to operate on flat vectors. This makes sense for the implementation of an optimization algorithm or ODE solver, but physical systems are usually more naturally conceived of as hierarchical. For instance, a satellite has position, velocity, attitude, angular velocity, battery state, thermal state, etc. To work with typical numerical codes, you have to either keep track of what entries in your array are which physical state or manually flatten/unflatten every time you call a routine that expects a flat vector.&lt;/p&gt;
    &lt;p&gt;That might be fine the first time, but what if you want to try a higher-fidelity battery model that has twice as many dynamic states? It quickly becomes a nightmare to maintain these kinds of codes, and the result is that you waste cycles on keeping all of this straight, and you lose the practical capability to explore multi-fidelity modeling.&lt;/p&gt;
    &lt;p&gt;This also comes up frequently in deep learning: models are naturally organized as hierarchical modules with trainable parameters. This is the root of the &lt;code&gt;nn.Module&lt;/code&gt; in PyTorch and the “PyTree” concept in JAX.
Modern ML frameworks (specifically JAX and PyTorch) have developed a nice set of solutions around working with this kind of hierarchically structured data.&lt;/p&gt;
    &lt;p&gt;But this hierarchical data and logic might even be more common in engineering. Physical systems are naturally organized into subsystems and components that have well-defined interfaces, and each of these might have its own dynamic state and configurable parameters. Hierarchical data structures can mirror this physical system decomposition.&lt;/p&gt;
    &lt;p&gt;Archimedes takes inspiration from these frameworks and supports “tree operations” (functions applied to hierarchical data) and a &lt;code&gt;@struct&lt;/code&gt; decorator to create tree-compatible data classes:&lt;/p&gt;
    &lt;code&gt;@arc.struct
class PointMass:
    pos: np.ndarray
    vel: np.ndarray

state = PointMass(np.zeros(3), np.ones(3))  # state.pos, state.vel
flat_state, unravel = arc.tree.ravel(state)  # flat_state is a vector
state = unravel(flat_state)  # Back to a PointMass instance
&lt;/code&gt;
    &lt;p&gt;These &lt;code&gt;@struct&lt;/code&gt;-decorated classes can be nested inside one another, flattened to/from a 1D vector, and used to auto-generate nested &lt;code&gt;struct&lt;/code&gt; types in deployable C code.
If a &lt;code&gt;PointMass&lt;/code&gt; is used as an argument to a codegen function, it will become:&lt;/p&gt;
    &lt;code&gt;typedef struct {
    float pos[3];
    float vel[3];
} point_mass_t;
&lt;/code&gt;
    &lt;p&gt;This gives you a predictable and intuitive way to switch back and forth between Python and auto-generated C.&lt;/p&gt;
    &lt;p&gt;For much more on structured data types, see Structured Data Types, Hierarchical Systems Modeling, and the C Code Generation tutorial series.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why Another Framework?¶&lt;/head&gt;
    &lt;p&gt;There are lots of modeling and simulation tools out there, from rock-solid commercial tools building on 30-year legacies to innovative modern frameworks experimenting with new languages, JIT-compilation, and physics-informed ML.&lt;/p&gt;
    &lt;p&gt;I created Archimedes because none of these really solved the problems I was having in my own work. Codebases that started out being logical and well-organized invariably ended up growing into a gnarled, difficult-to-maintain mass in order to support increasingly complex models and analyses. Then when it’s time to move towards testing and production, you’re back to square one to translate to C code.&lt;/p&gt;
    &lt;p&gt;Granted, these complaints might just indicate that I’m not a great software developer - but I’m not a software developer. That’s the point. I wanted a framework that would let me write code that looked as clean as a deep learning repository in PyTorch, but would also be high-performance for simulation and optimization, and had a path to hardware deployment. After seeing it perform in my own work, I’m convinced this approach - NumPy-based development with automatic C deployment - could help how control systems engineers develop and deploy algorithms.&lt;/p&gt;
    &lt;p&gt;One last comment: from personal experience, it takes a little time (but maybe less than you think) to grok the functional programming and hierarchical data types that are core to Archimedes. (I’ve spent a lot of time in JAX, which heavily influenced the design of this library.) It’s different than what you might be used to, and there are also some quirks and gotchas related to compilation and control flow.&lt;/p&gt;
    &lt;p&gt;But these concepts do actually map quite neatly to our mental/mathematical models for dynamical systems and control algorithms. Once it clicks, you’ll be able to write clean, modular, maintainable workflows that cut down your iteration time and make it faster to design, debug, deploy, and debug, and debug, and redesign, and debug, and…&lt;/p&gt;
    &lt;head rend="h2"&gt;Get Started¶&lt;/head&gt;
    &lt;p&gt;If you want to give Archimedes a try, it’s easy to get started. The Quickstart page will walk you through the setup, and Getting Started will teach you the basic concepts.&lt;/p&gt;
    &lt;p&gt;Then there are tutorials and deep dives on:&lt;/p&gt;
    &lt;p&gt;The Hardware Deployment tutorial is a bit more advanced, but shows an end-to-end example of the kinds of workflows you can build in Archimedes.&lt;/p&gt;
    &lt;p&gt;Upcoming tutorial and example content includes 6dof flight vehicle dynamics, rotor aerodynamics, system identification, low-cost HIL testing workflows, and deep dives on C code generation.&lt;/p&gt;
    &lt;p&gt;To see where the project is headed and some more detail on the vision, also check out the roadmap.&lt;/p&gt;
    &lt;head rend="h3"&gt;On-ramp Projects¶&lt;/head&gt;
    &lt;p&gt;Once you learn the basics, I bet in an hour or two you could:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Deploy a PI temperature controller to an Arduino&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Write an integrator for the IMU strapdown equations&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Run parameter estimation on some step response data you have lying around&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Design an energy-shaping controller for a pendulum&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Benchmark some old hand-written C code against the auto-generated equivalent (and share the results)&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;If you have a cool first project that you’re willing to share, feel free to post about it on the Discussions page - if it’s interesting it could become its own tutorial or blog post.&lt;/p&gt;
    &lt;head rend="h3"&gt;“Public Beta” Status¶&lt;/head&gt;
    &lt;p&gt;This post marks the release of Archimedes in “public beta” (v0.X.X). This means that the core functionality is there and has already been tested in practical applications. The API is also well-tested and stable; while it is likely to evolve in time, it will change with semantic versioning conventions, meaning smooth upgrade paths and deprecation notices. The library will remain in beta for 6-12 months to allow for community feedback and API maturation across ongoing real-world applications.&lt;/p&gt;
    &lt;p&gt;For symbolic/numeric reliability in particular, Archimedes gets a big leg up by using CasADi as its backend, which has an excellent track record and is widely and actively used and tested in a variety of applications.&lt;/p&gt;
    &lt;p&gt;All that is to say, between now and the “v1.0” release you can expect things to be largely stable, but this additional time builds in a cushion to work out any kinks.&lt;/p&gt;
    &lt;p&gt;Ongoing development priorities are outlined in detail in the roadmap, but key focus areas include:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Hybrid Simulations: Support for DAEs, zero-crossing events, multirate control logic&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Hardware Deployment: Improved support for HIL testing, static analysis, and profiling/telemetry&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Physics Modeling: Built-in functionality like reference frames, kinematic trees, polynomial/spline primitives, and templates for domain-specific components.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Algorithm Development: State machines, trajectory optimization, MPC, sensor fusion, uncertainty quantification, etc.&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Stay Updated¶&lt;/head&gt;
    &lt;p&gt;For updates on Archimedes, including release announcements, new features, blog posts, application examples, and case studies, subscribe to the free newsletter:&lt;/p&gt;
    &lt;p&gt;You can expect infrequent posts (maybe monthly) with a strong technical focus - no ads, spam, or paywalls.&lt;/p&gt;
    &lt;head rend="h3"&gt;Supporting Archimedes¶&lt;/head&gt;
    &lt;p&gt;This post might read a bit like ad copy, but Archimedes is a free, open-source project. The codebase, ongoing status, and discussions all live on the GitHub repository.&lt;/p&gt;
    &lt;p&gt;If you want to support it, the best thing you can do right now is try it out and give feedback. What worked well? What didn’t work? What did you like? What was confusing? What was confusing at first but you liked once you got used to it? What would you like to try with Archimedes? What would you like to try but there’s a functionality gap?&lt;/p&gt;
    &lt;p&gt;The Discussions page is a great place to share general feedback, and bug reports or feature requests are welcome on the Issues tab.&lt;/p&gt;
    &lt;p&gt;Besides feedback, other easy ways to support the project include:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;⭐ Star the Repository: This shows support and interest and helps others discover the project&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;📢 Spread the Word: Think anyone you know might be interested?&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;🐛 Report Issues: Detailed bug reports, documentation gaps, and feature requests are invaluable&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;🗞️ Stay in the Loop: Subscribe to the newsletter for updates and announcements&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Thanks for checking out the project!&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45939938</guid><pubDate>Sat, 15 Nov 2025 19:29:32 +0000</pubDate></item><item><title>Report: Tim Cook could step down as Apple CEO 'as soon as next year'</title><link>https://9to5mac.com/2025/11/14/tim-cook-step-down-as-apple-ceo-as-soon-as-next-year-report/</link><description>&lt;doc fingerprint="ae6cf92f12a203ef"&gt;
  &lt;main&gt;
    &lt;p&gt;The Financial Times reports that Apple has stepped up its preparations for the handover of the CEO role from Tim Cook. Here are the details.&lt;/p&gt;
    &lt;head rend="h2"&gt;Apple steps up Tim Cook’s succession efforts&lt;/head&gt;
    &lt;p&gt;According to the FT’s sources, Apple’s board and senior executives have “recently intensified” the company’s succession planning for its top role.&lt;/p&gt;
    &lt;p&gt;The FT adds that although Apple’s Senior VP of Hardware Engineering, John Ternus, is the most likely to take the reins of the company, “no final decisions have been made”.&lt;/p&gt;
    &lt;p&gt;While the report doesn’t mention why Apple is accelerating its succession efforts, it notes that the move is not tied to the company’s performance:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;“People close to Apple say the long-planned transition is not related to the company’s current performance, ahead of what is expected to be a blockbuster end-of-year sales period for the iPhone.&lt;/p&gt;
      &lt;p&gt;(…)&lt;/p&gt;
      &lt;p&gt;The company is unlikely to name a new CEO before its next earnings report in late January, which covers the critical holiday period.”&lt;/p&gt;
    &lt;/quote&gt;
    &lt;head rend="h2"&gt;Top comment by Christian Schuh&lt;/head&gt;
    &lt;p&gt;After Steve Jobs passed away, there was enormous skepticism about whether Tim Cook — or anyone, for that matter — could take over the reins. But Cook proved the critics wrong. Under his leadership, the former underdog morphed into a juggernaut, expanding its loyal customer base. Among his biggest achievements, I would highlight Apple Silicon.&lt;/p&gt;
    &lt;p&gt;The biggest challenge he will leave to his successor is Apple’s deep dependency on China. And on AI, the jury is still out. But judging by the sliding share prices of supposed AI leaders like Oracle this week, Tim Cook’s cautious approach may not have been such a bad idea after all.&lt;/p&gt;
    &lt;p&gt;Their sources also cautioned that “although preparations have intensified, the timing of any announcement could change”.&lt;/p&gt;
    &lt;p&gt;This report lands just hours after former Chief Operating Officer Jeff Williams spent his last day at Apple, following the retirement announcement he made in July.&lt;/p&gt;
    &lt;p&gt;Williams had already handed operational leadership to Sabih Khan earlier this year, and his remaining responsibilities were recently redistributed among other top executives, Ternus among them.&lt;/p&gt;
    &lt;p&gt;Apple has also recently gone through a CFO transition, with longtime finance chief Luca Maestri stepping down and handing the role to Kevan Parekh, who previously served as the company’s vice president of Financial Planning and Analysis.&lt;/p&gt;
    &lt;head rend="h4"&gt;Accessory deals on Amazon&lt;/head&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Apple AirTag 4 Pack&lt;/item&gt;
      &lt;item&gt;Beats USB-C to USB-C Woven Short Cable&lt;/item&gt;
      &lt;item&gt;Logitech MX Master 4&lt;/item&gt;
      &lt;item&gt;AirPods Pro 3&lt;/item&gt;
      &lt;item&gt;Wireless CarPlay adapter&lt;/item&gt;
      &lt;item&gt;iPhone Air Ultraslim Magsafe Power Bank&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;FTC: We use income earning auto affiliate links. More.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45940681</guid><pubDate>Sat, 15 Nov 2025 21:18:55 +0000</pubDate></item><item><title>AsciiMath</title><link>https://asciimath.org/</link><description>&lt;doc fingerprint="be534690eac6d39c"&gt;
  &lt;main&gt;
    &lt;head rend="h2"&gt;About&lt;/head&gt;
    &lt;p&gt;AsciiMath is an easy-to-write markup language for mathematics.&lt;lb/&gt; Try it out in the interactive renderer:&lt;/p&gt;
    &lt;head rend="h2"&gt;Getting Started&lt;/head&gt;
    &lt;p&gt;In order to get started you have two options:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;&lt;p&gt;Use MathJax to render your formulas. MathJax is a full fledged open source JavaScript display engine for mathematics and works in all browsers.&lt;/p&gt;&lt;lb/&gt;This is the recommended approach!&lt;p&gt;Get started by loading the default AsciiMath configuration:&lt;/p&gt;&lt;code&gt;&amp;lt;script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=AM_CHTML"&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;p&gt;Visit the MathJax Getting Started page to find other CDN options , or to learn how to install MathJax locally on your server.&lt;/p&gt;&lt;p&gt;Text in your HTML enclosed in&lt;/p&gt;&lt;code&gt;`&lt;/code&gt;(backticks) will now get rendered as a math formula. The math delimiters can also be customized. Check out the MathJax website for more information!&lt;/item&gt;
      &lt;item&gt;&lt;p&gt;Load the AsciiMath javascript file (get it on GitHub) in either the&lt;/p&gt;&lt;code&gt;head&lt;/code&gt;or the&lt;code&gt;body&lt;/code&gt;tag of your website like this:&lt;code&gt;&amp;lt;script src="ASCIIMathML.js"&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;p&gt;This file contains JavaScript to convert AsciiMath notation and (some) LaTeX to Presentation MathML. The conversion is done while the HTML page loads.&lt;/p&gt;&lt;p&gt;Attention: Currently this only works in Firefox and Safari.&lt;/p&gt;&lt;p&gt;While HTML5 now includes MathML as an official recommendation, the remaining browsers do not appear to be implementing it. For widest browser compatibility, the use of MathJax is recommended.&lt;/p&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Syntax&lt;/head&gt;
    &lt;p&gt;Most AsciiMath symbols attempt to mimic in text what they look like rendered, like &lt;code&gt;oo&lt;/code&gt; for `oo`.  Many symbols can also be
	   displayed using a TeX alternative, but a preceeding backslash is not 
	   required.&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;+&lt;/cell&gt;
        &lt;cell&gt;`+`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-&lt;/cell&gt;
        &lt;cell&gt;`-`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;*&lt;/cell&gt;
        &lt;cell&gt;cdot&lt;/cell&gt;
        &lt;cell&gt;`*`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;**&lt;/cell&gt;
        &lt;cell&gt;ast&lt;/cell&gt;
        &lt;cell&gt;`**`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;***&lt;/cell&gt;
        &lt;cell&gt;star&lt;/cell&gt;
        &lt;cell&gt;`***`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;//&lt;/cell&gt;
        &lt;cell&gt;`//`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;\\&lt;/cell&gt;
        &lt;cell&gt;backslash&lt;p&gt;setminus&lt;/p&gt;&lt;/cell&gt;
        &lt;cell&gt;`\\`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;xx&lt;/cell&gt;
        &lt;cell&gt;times&lt;/cell&gt;
        &lt;cell&gt;`xx`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-:&lt;/cell&gt;
        &lt;cell&gt;div&lt;/cell&gt;
        &lt;cell&gt;`-:`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|&amp;gt;&amp;lt;&lt;/cell&gt;
        &lt;cell&gt;ltimes&lt;/cell&gt;
        &lt;cell&gt;`|&amp;gt;&amp;lt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;&amp;lt;|&lt;/cell&gt;
        &lt;cell&gt;rtimes&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;&amp;lt;|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|&amp;gt;&amp;lt;|&lt;/cell&gt;
        &lt;cell&gt;bowtie&lt;/cell&gt;
        &lt;cell&gt;`|&amp;gt;&amp;lt;|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;@&lt;/cell&gt;
        &lt;cell&gt;circ&lt;/cell&gt;
        &lt;cell&gt;`@`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;o+&lt;/cell&gt;
        &lt;cell&gt;oplus&lt;/cell&gt;
        &lt;cell&gt;`o+`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ox&lt;/cell&gt;
        &lt;cell&gt;otimes&lt;/cell&gt;
        &lt;cell&gt;`ox`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;o.&lt;/cell&gt;
        &lt;cell&gt;odot&lt;/cell&gt;
        &lt;cell&gt;`o.`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;sum&lt;/cell&gt;
        &lt;cell&gt;`sum`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;prod&lt;/cell&gt;
        &lt;cell&gt;`prod`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;^^&lt;/cell&gt;
        &lt;cell&gt;wedge&lt;/cell&gt;
        &lt;cell&gt;`^^`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;^^^&lt;/cell&gt;
        &lt;cell&gt;bigwedge&lt;/cell&gt;
        &lt;cell&gt;`^^^`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vv&lt;/cell&gt;
        &lt;cell&gt;vee&lt;/cell&gt;
        &lt;cell&gt;`vv`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vvv&lt;/cell&gt;
        &lt;cell&gt;bigvee&lt;/cell&gt;
        &lt;cell&gt;`vvv`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;nn&lt;/cell&gt;
        &lt;cell&gt;cap&lt;/cell&gt;
        &lt;cell&gt;`nn`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;nnn&lt;/cell&gt;
        &lt;cell&gt;bigcap&lt;/cell&gt;
        &lt;cell&gt;`nnn`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;uu&lt;/cell&gt;
        &lt;cell&gt;cup&lt;/cell&gt;
        &lt;cell&gt;`uu`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;uuu&lt;/cell&gt;
        &lt;cell&gt;bigcup&lt;/cell&gt;
        &lt;cell&gt;`uuu`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;2/3&lt;/cell&gt;
        &lt;cell&gt;frac{2}{3}&lt;/cell&gt;
        &lt;cell&gt;`2/3`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;2^3&lt;/cell&gt;
        &lt;cell&gt;`2^3`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;sqrt x&lt;/cell&gt;
        &lt;cell&gt;`sqrt x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;root(3)(x)&lt;/cell&gt;
        &lt;cell&gt;`root(3)(x)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;int&lt;/cell&gt;
        &lt;cell&gt;`int`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;oint&lt;/cell&gt;
        &lt;cell&gt;`oint`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;del&lt;/cell&gt;
        &lt;cell&gt;partial&lt;/cell&gt;
        &lt;cell&gt;`del`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;grad&lt;/cell&gt;
        &lt;cell&gt;nabla&lt;/cell&gt;
        &lt;cell&gt;`grad`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;+-&lt;/cell&gt;
        &lt;cell&gt;pm&lt;/cell&gt;
        &lt;cell&gt;`+-`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;O/&lt;/cell&gt;
        &lt;cell&gt;emptyset&lt;/cell&gt;
        &lt;cell&gt;`O/`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;oo&lt;/cell&gt;
        &lt;cell&gt;infty&lt;/cell&gt;
        &lt;cell&gt;`oo`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;aleph&lt;/cell&gt;
        &lt;cell&gt;`aleph`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;:.&lt;/cell&gt;
        &lt;cell&gt;therefore&lt;/cell&gt;
        &lt;cell&gt;`:.`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;:'&lt;/cell&gt;
        &lt;cell&gt;because&lt;/cell&gt;
        &lt;cell&gt;`:'`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|...|&lt;/cell&gt;
        &lt;cell&gt;|ldots|&lt;/cell&gt;
        &lt;cell&gt;`|...|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|cdots|&lt;/cell&gt;
        &lt;cell&gt;`|cdots|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vdots&lt;/cell&gt;
        &lt;cell&gt;`vdots`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ddots&lt;/cell&gt;
        &lt;cell&gt;`ddots`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|\ |&lt;/cell&gt;
        &lt;cell&gt;`|\ |`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|quad|&lt;/cell&gt;
        &lt;cell&gt;`|quad|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;/_&lt;/cell&gt;
        &lt;cell&gt;angle&lt;/cell&gt;
        &lt;cell&gt;`/_`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;frown&lt;/cell&gt;
        &lt;cell&gt;`frown`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;/_\&lt;/cell&gt;
        &lt;cell&gt;triangle&lt;/cell&gt;
        &lt;cell&gt;`/_\\`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;diamond&lt;/cell&gt;
        &lt;cell&gt;`diamond`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;square&lt;/cell&gt;
        &lt;cell&gt;`square`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|__&lt;/cell&gt;
        &lt;cell&gt;lfloor&lt;/cell&gt;
        &lt;cell&gt;`|__`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;__|&lt;/cell&gt;
        &lt;cell&gt;rfloor&lt;/cell&gt;
        &lt;cell&gt;`__|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|~&lt;/cell&gt;
        &lt;cell&gt;lceiling&lt;/cell&gt;
        &lt;cell&gt;`|~`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;~|&lt;/cell&gt;
        &lt;cell&gt;rceiling&lt;/cell&gt;
        &lt;cell&gt;`~|`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;CC&lt;/cell&gt;
        &lt;cell&gt;`CC`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;NN&lt;/cell&gt;
        &lt;cell&gt;`NN`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;`QQ`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;RR&lt;/cell&gt;
        &lt;cell&gt;`RR`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ZZ&lt;/cell&gt;
        &lt;cell&gt;`ZZ`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;"hi"&lt;/cell&gt;
        &lt;cell&gt;text(hi)&lt;/cell&gt;
        &lt;cell&gt;`"hi"`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;=&lt;/cell&gt;
        &lt;cell&gt;`=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;!=&lt;/cell&gt;
        &lt;cell&gt;ne&lt;/cell&gt;
        &lt;cell&gt;`!=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;lt;&lt;/cell&gt;
        &lt;cell&gt;lt&lt;/cell&gt;
        &lt;cell&gt;`&amp;lt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;gt&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;lt;=&lt;/cell&gt;
        &lt;cell&gt;le&lt;/cell&gt;
        &lt;cell&gt;`&amp;lt;=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;=&lt;/cell&gt;
        &lt;cell&gt;ge&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;mlt&lt;/cell&gt;
        &lt;cell&gt;ll&lt;/cell&gt;
        &lt;cell&gt;`mlt`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;mgt&lt;/cell&gt;
        &lt;cell&gt;gg&lt;/cell&gt;
        &lt;cell&gt;`mgt`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-&amp;lt;&lt;/cell&gt;
        &lt;cell&gt;prec&lt;/cell&gt;
        &lt;cell&gt;`-&amp;lt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-&amp;lt;=&lt;/cell&gt;
        &lt;cell&gt;preceq&lt;/cell&gt;
        &lt;cell&gt;`-&amp;lt;=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;-&lt;/cell&gt;
        &lt;cell&gt;succ&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;-`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;-=&lt;/cell&gt;
        &lt;cell&gt;succeq&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;-=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;in&lt;/cell&gt;
        &lt;cell&gt;`in`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;!in&lt;/cell&gt;
        &lt;cell&gt;notin&lt;/cell&gt;
        &lt;cell&gt;`!in`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;sub&lt;/cell&gt;
        &lt;cell&gt;subset&lt;/cell&gt;
        &lt;cell&gt;`sub`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;sup&lt;/cell&gt;
        &lt;cell&gt;supset&lt;/cell&gt;
        &lt;cell&gt;`sup`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;sube&lt;/cell&gt;
        &lt;cell&gt;subseteq&lt;/cell&gt;
        &lt;cell&gt;`sube`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;supe&lt;/cell&gt;
        &lt;cell&gt;supseteq&lt;/cell&gt;
        &lt;cell&gt;`supe`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-=&lt;/cell&gt;
        &lt;cell&gt;equiv&lt;/cell&gt;
        &lt;cell&gt;`-=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;~=&lt;/cell&gt;
        &lt;cell&gt;cong&lt;/cell&gt;
        &lt;cell&gt;`~=`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;~~&lt;/cell&gt;
        &lt;cell&gt;approx&lt;/cell&gt;
        &lt;cell&gt;`~~`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;prop&lt;/cell&gt;
        &lt;cell&gt;propto&lt;/cell&gt;
        &lt;cell&gt;`prop`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;and&lt;/cell&gt;
        &lt;cell&gt;`and`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;or&lt;/cell&gt;
        &lt;cell&gt;`or`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;not&lt;/cell&gt;
        &lt;cell&gt;neg&lt;/cell&gt;
        &lt;cell&gt;`not`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;=&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;implies&lt;/cell&gt;
        &lt;cell&gt;`=&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;if&lt;/cell&gt;
        &lt;cell&gt;`if`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;lt;=&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;iff&lt;/cell&gt;
        &lt;cell&gt;`iff`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;AA&lt;/cell&gt;
        &lt;cell&gt;forall&lt;/cell&gt;
        &lt;cell&gt;`AA`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;EE&lt;/cell&gt;
        &lt;cell&gt;exists&lt;/cell&gt;
        &lt;cell&gt;`EE`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;_|_&lt;/cell&gt;
        &lt;cell&gt;bot&lt;/cell&gt;
        &lt;cell&gt;`_|_`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;TT&lt;/cell&gt;
        &lt;cell&gt;top&lt;/cell&gt;
        &lt;cell&gt;`TT`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|--&lt;/cell&gt;
        &lt;cell&gt;vdash&lt;/cell&gt;
        &lt;cell&gt;`|--`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;|==&lt;/cell&gt;
        &lt;cell&gt;models&lt;/cell&gt;
        &lt;cell&gt;`|==`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;(&lt;/cell&gt;
        &lt;cell&gt;`(`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;)&lt;/cell&gt;
        &lt;cell&gt;`)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;[&lt;/cell&gt;
        &lt;cell&gt;`[`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;]&lt;/cell&gt;
        &lt;cell&gt;`]`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;{&lt;/cell&gt;
        &lt;cell&gt;`{`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;}&lt;/cell&gt;
        &lt;cell&gt;`}`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;(:&lt;/cell&gt;
        &lt;cell&gt;langle&lt;/cell&gt;
        &lt;cell&gt;`(:`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;:)&lt;/cell&gt;
        &lt;cell&gt;rangle&lt;/cell&gt;
        &lt;cell&gt;`:)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;lt;&amp;lt;&lt;/cell&gt;
        &lt;cell&gt;`&amp;lt;&amp;lt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;{: x )&lt;/cell&gt;
        &lt;cell&gt;`{: x )`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;( x :}&lt;/cell&gt;
        &lt;cell&gt;`( x :}`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;abs(x)&lt;/cell&gt;
        &lt;cell&gt;`abs(x)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;floor(x)&lt;/cell&gt;
        &lt;cell&gt;`floor(x)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ceil(x)&lt;/cell&gt;
        &lt;cell&gt;`ceil(x)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;norm(vecx)&lt;/cell&gt;
        &lt;cell&gt;`norm(vecx)`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;uarr&lt;/cell&gt;
        &lt;cell&gt;uparrow&lt;/cell&gt;
        &lt;cell&gt;`uarr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;darr&lt;/cell&gt;
        &lt;cell&gt;downarrow&lt;/cell&gt;
        &lt;cell&gt;`darr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;rarr&lt;/cell&gt;
        &lt;cell&gt;rightarrow&lt;/cell&gt;
        &lt;cell&gt;`rarr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;to&lt;/cell&gt;
        &lt;cell&gt;`-&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;-&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;rightarrowtail&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;-&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;-&amp;gt;&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;twoheadrightarrow&lt;/cell&gt;
        &lt;cell&gt;`-&amp;gt;&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;gt;-&amp;gt;&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;twoheadrightarrowtail&lt;/cell&gt;
        &lt;cell&gt;`&amp;gt;-&amp;gt;&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;|-&amp;gt;&lt;/cell&gt;
        &lt;cell&gt;mapsto&lt;/cell&gt;
        &lt;cell&gt;`|-&amp;gt;`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;larr&lt;/cell&gt;
        &lt;cell&gt;leftarrow&lt;/cell&gt;
        &lt;cell&gt;`larr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;harr&lt;/cell&gt;
        &lt;cell&gt;leftrightarrow&lt;/cell&gt;
        &lt;cell&gt;`harr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;rArr&lt;/cell&gt;
        &lt;cell&gt;Rightarrow&lt;/cell&gt;
        &lt;cell&gt;`rArr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;lArr&lt;/cell&gt;
        &lt;cell&gt;Leftarrow&lt;/cell&gt;
        &lt;cell&gt;`lArr`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;hArr&lt;/cell&gt;
        &lt;cell&gt;Leftrightarrow&lt;/cell&gt;
        &lt;cell&gt;`hArr`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;hat x&lt;/cell&gt;
        &lt;cell&gt;`hat x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;bar x&lt;/cell&gt;
        &lt;cell&gt;overline x&lt;/cell&gt;
        &lt;cell&gt;`bar x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ul x&lt;/cell&gt;
        &lt;cell&gt;underline x&lt;/cell&gt;
        &lt;cell&gt;`ul x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vec x&lt;/cell&gt;
        &lt;cell&gt;`vec x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;tilde x&lt;/cell&gt;
        &lt;cell&gt;`tilde x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;dot x&lt;/cell&gt;
        &lt;cell&gt;`dot x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ddot x&lt;/cell&gt;
        &lt;cell&gt;`ddot x`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;overset(x)(=)&lt;/cell&gt;
        &lt;cell&gt;overset(x)(=)&lt;/cell&gt;
        &lt;cell&gt;`overset(x)(=)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;underset(x)(=)&lt;/cell&gt;
        &lt;cell&gt;`underset(x)(=)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;ubrace(1+2)&lt;/cell&gt;
        &lt;cell&gt;underbrace(1+2)&lt;/cell&gt;
        &lt;cell&gt;`ubrace(1+2)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;obrace(1+2)&lt;/cell&gt;
        &lt;cell&gt;overbrace(1+2)&lt;/cell&gt;
        &lt;cell&gt;`obrace(1+2)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;overarc(AB)&lt;/cell&gt;
        &lt;cell&gt;overparen(AB)&lt;/cell&gt;
        &lt;cell&gt;`overarc(AB)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;color(red)(x)&lt;/cell&gt;
        &lt;cell&gt;`color(red)(x)`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;cancel(x)&lt;/cell&gt;
        &lt;cell&gt;`cancel(x)`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;alpha&lt;/cell&gt;
        &lt;cell&gt;`alpha`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;beta&lt;/cell&gt;
        &lt;cell&gt;`beta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;gamma&lt;/cell&gt;
        &lt;cell&gt;`gamma`&lt;/cell&gt;
        &lt;cell&gt;Gamma&lt;/cell&gt;
        &lt;cell&gt;`Gamma`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;delta&lt;/cell&gt;
        &lt;cell&gt;`delta`&lt;/cell&gt;
        &lt;cell&gt;Delta&lt;/cell&gt;
        &lt;cell&gt;`Delta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;epsilon&lt;/cell&gt;
        &lt;cell&gt;`epsilon`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;varepsilon&lt;/cell&gt;
        &lt;cell&gt;`varepsilon`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;zeta&lt;/cell&gt;
        &lt;cell&gt;`zeta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;eta&lt;/cell&gt;
        &lt;cell&gt;`eta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;theta&lt;/cell&gt;
        &lt;cell&gt;`theta`&lt;/cell&gt;
        &lt;cell&gt;Theta&lt;/cell&gt;
        &lt;cell&gt;`Theta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;vartheta&lt;/cell&gt;
        &lt;cell&gt;`vartheta`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;iota&lt;/cell&gt;
        &lt;cell&gt;`iota`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;kappa&lt;/cell&gt;
        &lt;cell&gt;`kappa`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;lambda&lt;/cell&gt;
        &lt;cell&gt;`lambda`&lt;/cell&gt;
        &lt;cell&gt;Lambda&lt;/cell&gt;
        &lt;cell&gt;`Lambda`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;mu&lt;/cell&gt;
        &lt;cell&gt;`mu`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;nu&lt;/cell&gt;
        &lt;cell&gt;`nu`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;xi&lt;/cell&gt;
        &lt;cell&gt;`xi`&lt;/cell&gt;
        &lt;cell&gt;Xi&lt;/cell&gt;
        &lt;cell&gt;`Xi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;pi&lt;/cell&gt;
        &lt;cell&gt;`pi`&lt;/cell&gt;
        &lt;cell&gt;Pi&lt;/cell&gt;
        &lt;cell&gt;`Pi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;rho&lt;/cell&gt;
        &lt;cell&gt;`rho`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;sigma&lt;/cell&gt;
        &lt;cell&gt;`sigma`&lt;/cell&gt;
        &lt;cell&gt;Sigma&lt;/cell&gt;
        &lt;cell&gt;`Sigma`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;tau&lt;/cell&gt;
        &lt;cell&gt;`tau`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;upsilon&lt;/cell&gt;
        &lt;cell&gt;`upsilon`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;phi&lt;/cell&gt;
        &lt;cell&gt;`phi`&lt;/cell&gt;
        &lt;cell&gt;Phi&lt;/cell&gt;
        &lt;cell&gt;`Phi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;varphi&lt;/cell&gt;
        &lt;cell&gt;`varphi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;chi&lt;/cell&gt;
        &lt;cell&gt;`chi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;psi&lt;/cell&gt;
        &lt;cell&gt;`psi`&lt;/cell&gt;
        &lt;cell&gt;Psi&lt;/cell&gt;
        &lt;cell&gt;`Psi`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;omega&lt;/cell&gt;
        &lt;cell&gt;`omega`&lt;/cell&gt;
        &lt;cell&gt;Omega&lt;/cell&gt;
        &lt;cell&gt;`Omega`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;TeX alt&lt;/cell&gt;
        &lt;cell role="head"&gt;See&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;bb "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathbf "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`bb "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;bbb "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathbb "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`bbb "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;cc "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathcal "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`cc "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;tt "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathtt "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`tt "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;fr "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathfrak "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`fr "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;sf "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;mathsf "AaBbCc"&lt;/cell&gt;
        &lt;cell&gt;`sf "AaBbCc"`&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Standard Functions&lt;/head&gt;
    &lt;p&gt;sin, cos, tan, sec, csc, cot, arcsin, arccos, arctan, sinh, cosh, tanh, sech, csch, coth, exp, log, ln, det, dim, mod, gcd, lcm, lub, glb, min, max, f, g.&lt;/p&gt;
    &lt;head rend="h3"&gt;Special Cases&lt;/head&gt;
    &lt;p&gt;Matrices: &lt;code&gt;[[a,b],[c,d]]&lt;/code&gt; yields to `[[a,b],[c,d]]`&lt;/p&gt;
    &lt;p&gt;Column vectors: &lt;code&gt;((a),(b))&lt;/code&gt; yields to `((a),(b))`&lt;/p&gt;
    &lt;p&gt;Augmented matrices: &lt;code&gt;[[a,b,|,c],[d,e,|,f]]&lt;/code&gt; yields to `[[a,b,|,c],[d,e,|,f]]`&lt;/p&gt;
    &lt;p&gt;Matrices can be used for layout: &lt;code&gt;{(2x,+,17y,=,23),(x,-,y,=,5):}&lt;/code&gt; yields
 `{(2x,+,17y,=,23),(x,-,y,=,5):}`&lt;/p&gt;
    &lt;p&gt;Complex subscripts: &lt;code&gt;lim_(N-&amp;gt;oo) sum_(i=0)^N&lt;/code&gt; yields to `lim_(N-&amp;gt;oo) sum_(i=0)^N`&lt;/p&gt;
    &lt;p&gt;Subscripts must come before superscripts: &lt;code&gt;int_0^1 f(x)dx&lt;/code&gt; yields to `int_0^1 f(x)dx`&lt;/p&gt;
    &lt;p&gt;Derivatives: &lt;code&gt; f'(x) = dy/dx&lt;/code&gt; yields `f'(x) = dy/dx`&lt;lb/&gt; For variables other than x,y,z, or t you will need grouping symbols: &lt;code&gt; (dq)/(dp)&lt;/code&gt; for `(dq)/(dp)`&lt;/p&gt;
    &lt;p&gt;Overbraces and underbraces: &lt;code&gt;ubrace(1+2+3+4)_("4 terms")&lt;/code&gt; yields `ubrace(1+2+3+4)_("4 terms")`.&lt;code&gt;obrace(1+2+3+4)^("4 terms")&lt;/code&gt; yields `obrace(1+2+3+4)^("4 terms")`.
&lt;/p&gt;
    &lt;p&gt;Attention: Always try to surround the &lt;code&gt;&amp;gt;&lt;/code&gt; and
	&lt;code&gt;&amp;lt;&lt;/code&gt; characters with spaces so that the html parser does not
	confuse it with an opening or closing tag!&lt;/p&gt;
    &lt;head rend="h3"&gt;The Grammar&lt;/head&gt;
    &lt;p&gt;Here is a definition of the grammar used to parse AsciiMath expressions. In the Backus-Naur form given below, the letter on the left of the &lt;code&gt;::=&lt;/code&gt; represents a category of symbols that could be one
	of the possible sequences of symbols listed on the right.
	The vertical bar &lt;code&gt;|&lt;/code&gt; separates the alternatives.&lt;/p&gt;
    &lt;quote&gt;v ::= [A-Za-z] | greek letters | numbers | other constant symbols u ::= sqrt | text | bb | other unary symbols for font commands b ::= frac | root | stackrel | other binary symbols l ::= ( | [ | { | (: | {: | other left brackets r ::= ) | ] | } | :) | :} | other right brackets S ::= v | lEr | uS | bSS Simple expression I ::= S_S | S^S | S_S^S | S Intermediate expression E ::= IE | I/I Expression&lt;/quote&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45940706</guid><pubDate>Sat, 15 Nov 2025 21:22:57 +0000</pubDate></item><item><title>libwifi: an 802.11 frame parsing and generation library written in C</title><link>https://libwifi.so/</link><description>&lt;doc fingerprint="7a1d0719764d821a"&gt;
  &lt;main&gt;&lt;p&gt; libwifi is a fast, simple C shared library with a permissive license for generating and parsing a wide variety of 802.11 wireless frames on Linux and macOS with a few lines of straight forward code. &lt;lb/&gt; It is written with a simple-to-use approach while also exposing features that allow more advanced use, with clean and readable code being a priority. &lt;lb/&gt; Other goals of the library include cross-architecture support, clean compilation without warnings and strict error checking. &lt;/p&gt;&lt;head rend="h1"&gt;What is libwifi?&lt;/head&gt;&lt;head rend="h1"&gt;How do I use it?&lt;/head&gt;&lt;p&gt; libwifi exposes functions and structs to make parsing and generating WiFi frames very easy, and examples can be found in the source examples directory. &lt;lb/&gt;When using libwifi, be sure to pass&lt;lb/&gt; The data from the libpcap loop is then given to &lt;lb/&gt; The &lt;lb/&gt;We'll use the BSS struct to easily show the SSID and Channel from the sniffed beacon frame.&lt;lb/&gt; From here, we can use the dumper function for this frame subtype to write the beacon in raw byte format to a buffer. This can be useful for writing the generated frame out to a pcap file using &lt;/p&gt;&lt;p&gt;When using libwifi, be sure to pass&lt;/p&gt;&lt;code&gt;-lwifi&lt;/code&gt; to the linker, and make sure that the libwifi shared library is installed on the system.
    &lt;head rend="h2"&gt;Parsing&lt;/head&gt;The generic flow of a program using libwifi to parse frames is a loop that reads captured packets as raw data, such as with libpcap from a file or monitor interface, then parse the frame into a common datatype, then parse again to retrieve frame specific data.&lt;code&gt;&lt;quote&gt;
static int got_radiotap = 0;

int main(int argc, const char *argv[]) {
    pcap_t handle = {0};
    char errbuf[PCAP_ERRBUF_SIZE] = {0};

    if ((handle = pcap_create(argv[2], errbuf)) == NULL) {
        exit(EXIT_FAILURE);
    }

    if (pcap_activate(handle) != 0) {
        pcap_close(handle);
        exit(EXIT_FAILURE);
    }

    int linktype = pcap_datalink(handle);
    if (linktype == DLT_IEEE802_11_RADIO) {
        got_radiotap = 1;
    } else if (linktype == DLT_IEEE802_11) {
        got_radiotap = 0;
    } else {
        pcap_close(handle);
        exit(EXIT_FAILURE);
    }

    pd = pcap_dump_open(handle, PCAP_SAVEFILE);
    pcap_loop(handle, -1 /*INFINITY*/, &amp;amp;parse_packet, (unsigned char *) pd);
}
    &lt;/quote&gt;&lt;/code&gt;&lt;code&gt;libwifi_get_frame()&lt;/code&gt; which checks for frame validity and type/subtype, and stores the data in a &lt;code&gt;struct libwifi_frame&lt;/code&gt;.
    &lt;code&gt;&lt;quote&gt;
void parse_packet(unsigned char *args,
                  const struct pcap_pkthdr *header,
                  const unsigned char *packet) {
    unsigned long data_len = header-&amp;gt;caplen;
    unsigned char *data = (unsigned char *) packet;

    struct libwifi_frame frame = {0};
    int ret = libwifi_get_wifi_frame(&amp;amp;frame, data, data_len, got_radiotap);
    if (ret != 0) {
        printf("[!] Error getting libwifi_frame: %d\n", ret);
        return;
    }
    &lt;/quote&gt;&lt;/code&gt;&lt;code&gt;libwifi_frame&lt;/code&gt; struct can then be given to one of the frame parser functions, such as &lt;code&gt;libwifi_parse_beacon()&lt;/code&gt;. Since the header comment for
    &lt;code&gt;libwifi_parse_beacon()&lt;/code&gt; indicates that the parsed data is stored in a &lt;code&gt;struct libwifi_bss&lt;/code&gt;, we need to initalise one and pass it as a parameter.
    &lt;p&gt;We'll use the BSS struct to easily show the SSID and Channel from the sniffed beacon frame.&lt;/p&gt;&lt;code&gt;&lt;quote&gt;
    if (frame.frame_control.type == TYPE_MANAGEMENT &amp;amp;&amp;amp;
        frame.frame_control.subtype == SUBTYPE_BEACON) {
        struct libwifi_bss bss = {0};

        int ret = libwifi_parse_beacon(&amp;amp;bss, &amp;amp;frame);
        if (ret != 0) {
            printf("Failed to parse beacon: %d\n", ret);
            return;
        }

        printf("SSID: %s, Channel: %d\n", bss.ssid, bss.channel);
    }
}
    &lt;/quote&gt;&lt;/code&gt;&lt;head rend="h2"&gt;Generation&lt;/head&gt;For frame generation, you only need to provide the required data to one of the frame generation functions. In this example,&lt;code&gt;libwifi_create_beacon()&lt;/code&gt;.
    &lt;code&gt;&lt;quote&gt;
int main(int argc, char **argv) {
    struct libwifi_beacon beacon = {0};
    static unsigned char bcast[] = "\xFF\xFF\xFF\xFF\xFF\xFF";
    static unsigned char tx[] = "\x00\x20\x91\xAA\xBB\CC";

    int ret = libwifi_create_beacon(&amp;amp;beacon, bcast, tx, tx, "wifi-beacon", 11);
    if (ret != 0) {
        return ret;
    }
    &lt;/quote&gt;&lt;/code&gt;&lt;code&gt;pcap_dump()&lt;/code&gt; or transmitting from a monitor mode interface.
    &lt;code&gt;&lt;quote&gt;
    unsigned char *buf = NULL;
    size_t buf_sz = libwifi_get_beacon_length(&amp;amp;beacon);

    buf = malloc(buf_sz);
    if (buf == NULL) {
        exit(EXIT_FAILURE);
    }

    ret = libwifi_dump_beacon(&amp;amp;beacon, buf, buf_sz);
    if (ret &amp;lt; 0) {
        return ret;
    }

    // Inject frame bytes or write bytes to file

    libwifi_free_beacon(&amp;amp;beacon);
    free(buf);
}
    &lt;/quote&gt;&lt;/code&gt;&lt;head rend="h1"&gt;How do I build it?&lt;/head&gt;&lt;p&gt; The build system is implemented with CMake. To build it, clone the repository and run the following commands. &lt;/p&gt;&lt;code&gt;&lt;quote&gt;
$ mkdir build &amp;amp;&amp;amp; cd build
$ cmake .. -DCMAKE_BUILD_TYPE=Release
$ make -j8
$ sudo make install
    &lt;/quote&gt;&lt;/code&gt;&lt;head rend="h1"&gt;How fast is it?&lt;/head&gt;&lt;p&gt; There is a simple benchmark for measuring basic Beacon parsing performance in the benchmark directory. Here are the results when ran on an i7-1185G7 at 3.00GHz. &lt;/p&gt;&lt;code&gt;&lt;quote&gt;
$ ./benchmark_beacon
Run 1:  0.0000190 Seconds
Run 2:  0.0000030 Seconds
Run 3:  0.0000020 Seconds
Run 4:  0.0000010 Seconds
Run 5:  0.0000010 Seconds
Run 6:  0.0000010 Seconds
Run 7:  0.0000020 Seconds
Run 8:  0.0000020 Seconds
Run 9:  0.0000020 Seconds
Run 10: 0.0000010 Seconds
Run 11: 0.0000010 Seconds
Run 12: 0.0000010 Seconds
    &lt;/quote&gt;&lt;/code&gt;&lt;head rend="h1"&gt;Where are the docs?&lt;/head&gt;&lt;p&gt; The source code for libwifi is fully documented with code comments, including diagrams for structs and frame layouts where necessary. You can also view the generated docs here. &lt;/p&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941025</guid><pubDate>Sat, 15 Nov 2025 22:16:33 +0000</pubDate></item><item><title>Blocking LLM crawlers without JavaScript</title><link>https://www.owl.is/blogg/blocking-crawlers-without-javascript/</link><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941441</guid><pubDate>Sat, 15 Nov 2025 23:30:04 +0000</pubDate></item><item><title>The inconceivable types of Rust: How to make self-borrows safe (2024)</title><link>https://blog.polybdenum.com/2024/06/07/the-inconceivable-types-of-rust-how-to-make-self-borrows-safe.html</link><description>&lt;doc fingerprint="ae08d8132d351b61"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;The Inconceivable Types of Rust: How to Make Self-Borrows Safe&lt;/head&gt;
    &lt;p&gt;One of the first things any Rust programmer learns is that you can’t pass an object and a reference to that object around at the same time. It’s impossible to do, even indirectly. This limitation has been the subject of countless questions on Stack Overflow and posts on Reddit and the Rust forums and anywhere else where Rust programmers might ask for help. It’s so well-known that most people treat it like an axiom, not just a limitation of Rust as it currently exists, but an inherent limitation of borrow checking in general.&lt;/p&gt;
    &lt;p&gt;However, that’s not the case. In fact, with the right perspective, the way to support it is obvious. In this post, I’ll walk through the steps and show how self-borrows and much more could be supported in a hypothetical alternate or future version of Rust.&lt;/p&gt;
    &lt;head rend="h3"&gt;But first, some obligatory disclaimers&lt;/head&gt;
    &lt;p&gt;To be clear, when I say something can’t be done in Rust, what I mean is that it can’t be done in a safe, zero-cost way. As an army of internet commenters are no doubt rushing to observe, any limitation of a static type system can be bypassed by using unsafety or runtime checks instead (e.g. “lol, just wrap everything in &lt;code&gt;Arc&amp;lt;Mutex&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt;” or “lol, just build your own memory management on top of &lt;code&gt;Vec&lt;/code&gt; indices”). And the fact that a less safe or efficient workaround exists is of great interest to people who just need to solve a problem quickly. But from a language design perspective, the pertinent fact is that Rust’s type system has gaps which make certain common tasks impossible to do in a way that lets Rust be Rust, and not just a glorified C or Javascript.&lt;/p&gt;
    &lt;p&gt;Lastly, this post will discuss changes purely from a type checking perspective without regard to how hard they’d actually be to implement. In a major real-world language like Rust, any change, no matter how trivial, has a huge cost in terms of ecosystem, documentation, tooling, backwards compatibility, etc. But I’m a language design hobbyist, not a Rust compiler engineer, so language design is the part I’ll speak about.&lt;/p&gt;
    &lt;p&gt;So how do you type-check self borrows? The trick is actually to adopt an even more ambitious goal, safe async functions.&lt;/p&gt;
    &lt;head rend="h2"&gt;A brief history of Rust&lt;/head&gt;
    &lt;p&gt;Rust 1.0 shipped with no support whatsoever for non-movable types. The fact that any value of any type could be arbitrarily memcpy’d around and still work was a core assumption of the language.&lt;/p&gt;
    &lt;p&gt;However, it didn’t take long before people realized that non-movable types are actually very useful. In particular, async functions nearly always produce non-movable future types, so you can’t have async Rust without support in some fashion for non-movable types.&lt;/p&gt;
    &lt;p&gt;Sadly, it was too late to do things properly (i.e. a &lt;code&gt;Move&lt;/code&gt; auto-trait), but they were able to at least hack in partial support via the &lt;code&gt;Pin&lt;/code&gt; type, added in Rust 1.33.0.&lt;/p&gt;
    &lt;head rend="h3"&gt;…but not for thee&lt;/head&gt;
    &lt;p&gt;Now if you’re like me, you might have thought, “Pin is added, which means support for self-borrows. Great, now I can refactor and simplify all my code!” Unfortunately, that’s not what actually happened.&lt;/p&gt;
    &lt;p&gt;&lt;code&gt;Pin&lt;/code&gt; made it possible for Rust code to work with and pass around non-movable types, but there was still no way to actually create them. That is a bit of dark magic that the compiler jealously hoards for itself. Whenever you write an async function, the compiler will magically generate a secret non-movable type, and &lt;code&gt;Pin&lt;/code&gt; makes it possible to work with these types, but there is still no way to actually create self-referential types yourself (again, in safe, zero-cost code).&lt;/p&gt;
    &lt;p&gt;However, what if it didn’t have to be this way? Personally, I think async functions (and closures) should be desugared into 100% safe Rust code that the user could have written themselves if they wanted to. Not because users would necessary actually want to do that very often, but because having a desugared version of every magic feature is useful didactically and for low-level libraries, and because it forces Rust to be honest about its type system instead of papering over the cracks with compiler magic.&lt;/p&gt;
    &lt;p&gt;Since async functions have self-borrows, supporting them conveniently also implies support for self-borrows more generally. Now the only question is how to actually support safe async functions.&lt;/p&gt;
    &lt;p&gt;The rest of this post is divided into two parts. In part 1, I will cover the changes needed from a high level type system perspective, while in part 2, I’ll cover the remaining low level details.&lt;/p&gt;
    &lt;head rend="h1"&gt;Part 1: The value level&lt;/head&gt;
    &lt;p&gt;In order to make async functions possible in (safe) Rust, we first have to figure out why they aren’t possible already. Most people would answer “async functions have self-borrows, and it is impossible to support self-borrows in the borrow checker”, but that is the wrong way to look at things. The actual answer is that it is impossible to name the types of local variables.&lt;/p&gt;
    &lt;p&gt;To see why this is, consider how you would go about desugaring an async function. Suppose we have a simple async function &lt;code&gt;foo&lt;/code&gt; that adds some numbers and calls another async function like this:&lt;/p&gt;
    &lt;code&gt;fn sub() -&amp;gt; Pin&amp;lt;Box&amp;lt;dyn Future&amp;lt;Output=()&amp;gt;&amp;gt;&amp;gt; {todo!()}

async fn foo() -&amp;gt; u32 {
    let x = 12345;
    let f = sub();
    f.await;
    
    let y = x * 2;
    let f2 = sub();
    f2.await;
    
    x + y
}
&lt;/code&gt;
    &lt;p&gt;How would we desugar &lt;code&gt;foo&lt;/code&gt; by hand? We need to create a custom Future type &lt;code&gt;Foo&lt;/code&gt; with a state machine representing the possible states of the original &lt;code&gt;foo&lt;/code&gt; function. Specifically, we need a state machine with one state per &lt;code&gt;await&lt;/code&gt; point in the function, plus a begin and end state. And the contents of each state are just the local variables that are live at that point in the function.&lt;/p&gt;
    &lt;p&gt;Therefore, our custom state machine type would look like this:&lt;/p&gt;
    &lt;code&gt;enum Foo {
    Initial,
    Await1{x: u32, f: Pin&amp;lt;Box&amp;lt;dyn Future&amp;lt;Output=()&amp;gt;&amp;gt;&amp;gt;},
    Await2{x: u32, y: u32, f2: Pin&amp;lt;Box&amp;lt;dyn Future&amp;lt;Output=()&amp;gt;&amp;gt;&amp;gt;},
    Final,
}
&lt;/code&gt;
    &lt;p&gt;In order to create this type, we “just” have to list every local variable that is live at an await point, along with the types of all those local variables. Therefore, supporting async functions in safe Rust is just a matter of making it consistently possible to name the types of every variable. So why is this impossible to do right now? The first obstacle is unnameable types.&lt;/p&gt;
    &lt;head rend="h2"&gt;Unnameable types&lt;/head&gt;
    &lt;p&gt;Rust made the interesting design decision to require explicit type annotations on every function boundary and every custom type, and yet also make it impossible to write explicit types in many cases. This was already a problem in Rust 1.0 with closures, but got much worse a few years later with the introduction of async Rust and impl Trait.&lt;/p&gt;
    &lt;p&gt;Basically, some types (closures, async functions, impl Trait) exist in Rust’s type system but do not have a name and hence are impossible to talk about in your code. You can still pass those values around and interact with them as long as you never have to explicitly name their type, but as soon as you hit a function boundary or want to store them inside a struct or enum, whoops, it’s time to add generics or pointlessly &lt;code&gt;Box&lt;/code&gt; everything up.&lt;/p&gt;
    &lt;p&gt;Even in the example code above, this is already a problem. I had to go out of my way to make &lt;code&gt;sub&lt;/code&gt; return a boxed &lt;code&gt;dyn Future&lt;/code&gt; in order to have a nameable type for the sake of example, but any realistic code would instead be working with unnameable futures everywhere.&lt;/p&gt;
    &lt;p&gt;Fortunately, this is also a very easy problem to solve - just give every type a name. Efforts to do this already have been indefinitely stalled over concerns about stabilizing the order of generic type parameters, but that’s a trivial concern compared to the much more invasive changes we’ll get into later.&lt;/p&gt;
    &lt;head rend="h3"&gt;Named lifetimes&lt;/head&gt;
    &lt;p&gt;There’s actually another kind of unnameable type as well - function local lifetimes. Unlike closures and futures, these can never cross a function boundary without being replaced by generic parameters, so they don’t cause problems for existing code, but they’re still types that can’t be named, and if we’re going to support async functions in Rust, we need a way to name them.&lt;/p&gt;
    &lt;p&gt;Any syntax actually added to Rust would obviously have to get bikeshedded to death and assessed for education and tooling and so on, but as I’m just a person writing a blog post, I’m under no such constraints, so for the sake of example, I’ll propose the following syntax:&lt;/p&gt;
    &lt;code&gt;let mut v = Vec::new();
life 'a, 'b;

let r = &amp;amp;'a mut v;
// do stuff with r
end 'a;

let r2 = &amp;amp;'b mut v;
// do stuff with r2
end 'b;
&lt;/code&gt;
    &lt;p&gt;In this proposal, you first declare a lifetime token via &lt;code&gt;life 'a&lt;/code&gt;. This token represents a lifetime that lasts as long as the token exists. Next, when borrowing a reference, you can optionally specify an explicit lifetime, e.g. &lt;code&gt;&amp;amp;'a mut v&lt;/code&gt;. Finally, you can end a lifetime via &lt;code&gt;end 'a&lt;/code&gt;, which consumes the token.&lt;/p&gt;
    &lt;p&gt;This syntax is more verbose than the current syntax, but I don’t expect users to actually use named lifetime syntax that often. I see it like &lt;code&gt;drop&lt;/code&gt;. You can write all your &lt;code&gt;drop&lt;/code&gt;s explicitly if you want to, but most of the time people let the compiler insert them implicitly instead. Likewise under my proposal, people will usually still use the current syntax and let the compiler implicitly insert anonymous lifetimes, but they can also write named lifetimes explicitly if they want to.&lt;/p&gt;
    &lt;head rend="h3"&gt;Static checking&lt;/head&gt;
    &lt;p&gt;Under my named lifetimes proposal, all checking is still done purely at compile time, just like the existing borrow checker. The lifetime tokens only exist at compile time and there is no runtime impact.&lt;/p&gt;
    &lt;p&gt;In order to do all type checking statically, we have to enforce certain invariants. Specifically, types can only refer to lifetimes in the current scope. Any type that escapes outside of the scope of the lifetime token it refers to becomes invalid. Likewise, consuming a lifetime token invalidates all types that refer to that lifetime.&lt;/p&gt;
    &lt;head rend="h2"&gt;Inconceivable types&lt;/head&gt;
    &lt;p&gt;As it turns out, unnameable types aren’t the only barrier to naming the types of variables in Rust. Unnameable types are types that still exist in Rust’s formal type system, but don’t have names. However, Rust’s formal type system is only a subset of its de-facto type system because in addition to Rust’s official type checker, the compiler also incorporates shadow type checkers which do type-checking like things but are not formally part of the type checker.&lt;/p&gt;
    &lt;p&gt;There are types that are part of Rust’s de-facto type system which don’t even exist in Rust’s formal type system in the first place, let alone have names. I call these types inconceivable types because from the perspective of a Rust compiler engineer, they aren’t types and don’t even exist in the first place.&lt;/p&gt;
    &lt;p&gt;Therefore, in order to support async functions, we’ll also need to add all the missing inconceivable types into Rust’s formal type system.&lt;/p&gt;
    &lt;head rend="h3"&gt;Partial moves&lt;/head&gt;
    &lt;p&gt;What are these shadow type checkers? Consider the following Rust code:&lt;/p&gt;
    &lt;code&gt;use std::mem::drop;

#[derive(Default)]
struct MyStrings {
    x: String,
    y: String,
}

async fn foo() {
    let ms = MyStrings::default();
    
    drop(ms.x);
    drop(ms.y);
}
&lt;/code&gt;
    &lt;p&gt;At first glance, this code shouldn’t compile. After all, &lt;code&gt;ms&lt;/code&gt; is used twice, right? &lt;code&gt;ms&lt;/code&gt; should already be moved when it is referenced the first time in &lt;code&gt;ms.x&lt;/code&gt;, which would make &lt;code&gt;ms.y&lt;/code&gt; a compile error. However, the Rust compiler actually allows this!&lt;/p&gt;
    &lt;p&gt;The reason is because Rust has a secret shadow type checker which allows you to partially move and partially borrow values as long as they stay within a function. The fact that this is limited to within a function makes it harder to spot since it never forces the user to write the function-boundary-mandatory type annotations that would be impossible since these types don’t actually exist in Rust’s formal type system.&lt;/p&gt;
    &lt;p&gt;However, they are still a problem for async functions because we need to be able to specify the types of local variables as well. Consider the following code:&lt;/p&gt;
    &lt;code&gt;async fn foo() {
    let ms = MyStrings::default();
    
    drop(ms.x);
    // What is ms's type here?!?!
    sub().await;
    drop(ms.y);
}
&lt;/code&gt;
    &lt;p&gt;What is the type of &lt;code&gt;ms&lt;/code&gt; at the await point? The formal type system would answer “oh, the type is &lt;code&gt;MyStrings&lt;/code&gt;, that doesn’t change.” However, its de-facto type clearly does change. After all, you can’t access the &lt;code&gt;x&lt;/code&gt; field on it like you could for any true value of type &lt;code&gt;MyStrings&lt;/code&gt;. The true type is now something else entirely, an inconceivable type.&lt;/p&gt;
    &lt;p&gt;Therefore, the next step is to add the inconceivable types for partial borrows and partial moves to Rust’s formal type system, so that they can be referenced in type annotations. For this, I propose the syntax &lt;code&gt;Foo{bar, baz}&lt;/code&gt;, to list the fields explicitly. E.g. &lt;code&gt;MyStrings{y}&lt;/code&gt; means a value with the memory layout of &lt;code&gt;MyStrings&lt;/code&gt;, but where only field &lt;code&gt;y&lt;/code&gt; remains (with the &lt;code&gt;x&lt;/code&gt; part being arbitrary uninitialized data). This can be extended to partial borrows as well, e.g. &lt;code&gt;&amp;amp;mut Foo{bar, baz}&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;However, that’s not all. There’s still one more shadow type checker to deal with, and it’s a really big one. As it turns out, the borrow checker is also a shadow type checker.&lt;/p&gt;
    &lt;head rend="h3"&gt;Borrowed types&lt;/head&gt;
    &lt;p&gt;Consider the following code:&lt;/p&gt;
    &lt;code&gt;async fn foo() {
    let mut s = "Hello, world".to_string();
    let r = &amp;amp;mut s;
    // What is the type of s here???
    sub().await;
    
    r.push('!');
    println!("{}", s);
}
&lt;/code&gt;
    &lt;p&gt;What is the type of &lt;code&gt;s&lt;/code&gt; at the await point? Again, the formal type system says “it’s &lt;code&gt;String&lt;/code&gt; the whole time, that doesn’t change”, but again that’s a lie. The de-facto type of &lt;code&gt;s&lt;/code&gt; can’t be &lt;code&gt;String&lt;/code&gt;, because it doesn’t support the operations of a value of type &lt;code&gt;String&lt;/code&gt;. In fact, it doesn’t support any operations, because any attempt to access &lt;code&gt;s&lt;/code&gt; at that point will result in a compile error.&lt;/p&gt;
    &lt;p&gt;Therefore, the type of &lt;code&gt;s&lt;/code&gt; must be temporarily changing to some other, inconceivable type. Specifically, the types of borrowed values are inconceivable types.&lt;/p&gt;
    &lt;p&gt;For this, I propose the syntax &lt;code&gt;!'a mut String&lt;/code&gt;, but to understand why, we’ll first have to go into a brief digression on the theoretical basis for borrow checking.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why borrow checking?&lt;/head&gt;
    &lt;p&gt;There’s a common misconception, even in the Rust community, that borrow checking is just a memory management strategy, just a quirk of languages in the C++ niche and not something you need in a language with garbage collection. In fact however, borrow checking is the inevitable consequence of protecting against aliasing bugs, regardless of which memory management strategy a language uses.&lt;/p&gt;
    &lt;head rend="h3"&gt;Affine types&lt;/head&gt;
    &lt;p&gt;In a traditional language, if you have a value of type &lt;code&gt;T&lt;/code&gt;, you can make any number of copies of that value that all still have type T, just by reading it:&lt;/p&gt;
    &lt;code&gt;let foo: T = ...;
let bar: T = foo;
// foo and bar have type T
&lt;/code&gt;
    &lt;p&gt;However, this doesn’t work if you want to reason about aliasing. In particular, if you have a type for exclusively referenced objects (written &lt;code&gt;xcl&lt;/code&gt; in this section for the sake of example), it is not sound to allow copying like this, because then you’ll have two references to the same object, both of which think they are the only one.&lt;/p&gt;
    &lt;p&gt;Therefore, exclusive references must be affine types, meaning that they can only be used once.&lt;/p&gt;
    &lt;head rend="h3"&gt;Splitting&lt;/head&gt;
    &lt;p&gt;However, being able to use each value only once makes it impossible to write all but the most trivial programs. In order to do anything useful, you need to be able to split a type so you can use values more than once.&lt;/p&gt;
    &lt;p&gt;A type can be thought of as a set of permissions to access the associated value, and thus it is safe to copy a value as long as the permissions aren’t copied. Instead, the child values need to have a disjoint set of permissions.&lt;/p&gt;
    &lt;p&gt;For example, suppose we have an exclusive reference to an object with fields of type &lt;code&gt;T&lt;/code&gt; and &lt;code&gt;U&lt;/code&gt;.&lt;/p&gt;
    &lt;code&gt;let a = {foo: _, bar: _};
// a has the type xcl {foo: T, bar: U};

let b = a as {foo: T};
// b has type xcl {foo: T}
// a has type xcl {bar: U}
&lt;/code&gt;
    &lt;p&gt;We can create a second reference to the object by splitting the permissions - after the split &lt;code&gt;a&lt;/code&gt; only has the ability to read the field &lt;code&gt;bar&lt;/code&gt; while &lt;code&gt;b&lt;/code&gt; only has the ability to read field foo. Since they can only read disjoint parts of the object, it is still sound to have two exclusive references to the same object. (Note: this is pseudocode in a high level language for the sake of example - Rust doesn’t actually work this way due to other, low level considerations).&lt;/p&gt;
    &lt;p&gt;For traditional types (or &lt;code&gt;Copy&lt;/code&gt; types in Rust parlance), you have the splitting rule &lt;code&gt;T =&amp;gt; T + T&lt;/code&gt;. In other words, given a value of &lt;code&gt;T&lt;/code&gt;, you can split it into two values that both still have type &lt;code&gt;T&lt;/code&gt;. For affine types, that splitting rule doesn’t exist, but there are still other splitting rules that are sound. For example, you can split by fields as we just saw: &lt;code&gt;xcl {foo: T, bar: U} =&amp;gt; (xcl {foo: T}) + (xcl {bar: U})&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h3"&gt;Temporal splitting&lt;/head&gt;
    &lt;p&gt;The previous splitting rule is spacial - you can split access over disjoint fields of an object. However, spatial splitting alone doesn’t get you very far. In order to write practical code, you need another splitting rule. Besides splitting access by space, you can also split access by time.&lt;/p&gt;
    &lt;p&gt;Specifically, you can create a second copy of the reference as long as one copy can only be accessed before a given time, and the other copy can only be accessed after a given time. Since the access is split into disjoint periods of time, this is still sound.&lt;/p&gt;
    &lt;code&gt;life 'a;
let v = vec![42];
// v has exclusive access to the object

let r = &amp;amp;'a mut v;
// r has exclusive access to the object before time a
// v has exclusive access to the object *after* time a
&lt;/code&gt;
    &lt;p&gt;This is the essence of borrow checking. It’s not some arcane, low level memory management strategy, but just a natural, essential method of statically reasoning about aliasing in your code.&lt;/p&gt;
    &lt;head rend="h3"&gt;Negative lifetime bounds&lt;/head&gt;
    &lt;p&gt;Borrow checking involves two kinds of types - references that are valid before a given time, and references that are valid after a given time. The first kind is already part of Rust’s formal type system, the ordinary references you know and love. A value of type &lt;code&gt;&amp;amp;'a mut T&lt;/code&gt; has exclusive access before time &lt;code&gt;a&lt;/code&gt;, and no access after time &lt;code&gt;a&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;However, Rust’s formal type system has no notion of the second kind of type, of references that are valid after a given time. This is the inconceivable type we need to add.&lt;/p&gt;
    &lt;p&gt;Since these are the opposite of normal lifetimes, it makes sense to use the “not” symbol &lt;code&gt;!&lt;/code&gt;, e.g. &lt;code&gt;!'a&lt;/code&gt;, which I call a negative lifetime bound. A bound of &lt;code&gt;'a&lt;/code&gt; means the type is only valid until &lt;code&gt;a&lt;/code&gt;, while a bound of &lt;code&gt;!'a&lt;/code&gt; means it is only valid after &lt;code&gt;a&lt;/code&gt; instead.&lt;/p&gt;
    &lt;head rend="h2"&gt;Bound lifetimes&lt;/head&gt;
    &lt;p&gt;We can now express the types of all local variables, even the types that don’t currently exist in Rust, but there’s still one more problem. Recall that the example of named lifetimes looked like this:&lt;/p&gt;
    &lt;code&gt;let mut v = Vec::new();
life 'a, 'b;

let r = &amp;amp;'a mut v;
// do stuff with r
end 'a;

let r2 = &amp;amp;'b mut v;
// do stuff with r2
end 'b;
&lt;/code&gt;
    &lt;p&gt;The problem is that the lifetime tokens (&lt;code&gt;'a&lt;/code&gt; and &lt;code&gt;'b&lt;/code&gt;) are themselves part of the function’s local state, and thus also have to be stored inside the state machine enum. Therefore, we need a way to store lifetime tokens inside of objects.&lt;/p&gt;
    &lt;p&gt;My proposed syntax introduces a new expression, &lt;code&gt;bind 'a in x&lt;/code&gt;, which moves the lifetime token ‘a into the value x. And likewise, we have new destructuring pattern syntax, &lt;code&gt;let bind 'a in x = y;&lt;/code&gt;, to do the reverse. Lastly, this also adds a new type, &lt;code&gt;bind 'a in T&lt;/code&gt;, representing a type &lt;code&gt;T&lt;/code&gt; with bound lifetime token &lt;code&gt;'a&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Note that lifetime tokens and lifetimes only exist at compile time and have no runtime representation. &lt;code&gt;bind 'a in v&lt;/code&gt; and the like are noops that exist purely for the sake of static type checking, and &lt;code&gt;bind 'a in T&lt;/code&gt; has the same runtime representation as &lt;code&gt;T&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h3"&gt;Moving lifetime tokens&lt;/head&gt;
    &lt;p&gt;With the &lt;code&gt;end 'a&lt;/code&gt; syntax, the lifetime token &lt;code&gt;'a&lt;/code&gt; is consumed in place, which means that we know precisely when it ends. All types in scope with a positive (&lt;code&gt;'a&lt;/code&gt;) bound become invalid, while all types in scope with a negative bound (&lt;code&gt;!'a&lt;/code&gt;) have the negative bound removed (returning it to the original, unborrowed type).&lt;/p&gt;
    &lt;p&gt;However, when we move a lifetime token into a value, types referring to that lifetime which were in the old scope but not the new scope have to be treated differently. In this case, the lifetime token is no longer in scope without being ended, and so we have to pessimistically invalidate both positive and negative bounds. Types that reference the lifetime which are still within the new scope (i.e. the value that the lifetime token was bound to) are unaffected.&lt;/p&gt;
    &lt;head rend="h2"&gt;Examples&lt;/head&gt;
    &lt;p&gt;This can be pretty confusing, so let’s look at some examples to show how the new lifetime system works.&lt;/p&gt;
    &lt;p&gt;First, suppose you try to return a reference to a local variable:&lt;/p&gt;
    &lt;code&gt;life 'a;
let mut s = Box::new("Hello".to_string());
// s has type Box&amp;lt;String&amp;gt;
let r = &amp;amp;'a mut *s;
// r has type &amp;amp;'a mut String
// s has type Box&amp;lt;!'a mut String&amp;gt;
return r; // error: r is invalid
&lt;/code&gt;
    &lt;p&gt;This naturally results in a compile error because &lt;code&gt;r&lt;/code&gt; has the type &lt;code&gt;&amp;amp;'a mut String&lt;/code&gt;, but the lifetime token &lt;code&gt;'a&lt;/code&gt; is local to the function. Therefore, when r is returned, it is no longer within the scope where &lt;code&gt;'a&lt;/code&gt; exists and hence is invalid.&lt;/p&gt;
    &lt;p&gt;Now suppose we try binding &lt;code&gt;'a&lt;/code&gt; to &lt;code&gt;r&lt;/code&gt; before returning it:&lt;/p&gt;
    &lt;code&gt;life 'a;
let mut s = Box::new("Hello".to_string());
// s has type Box&amp;lt;String&amp;gt;
let r = &amp;amp;'a mut *s;
// r has type &amp;amp;'a mut String
// s has type Box&amp;lt;!'a mut String&amp;gt;
let ret = bind 'a in r;
// ret has type (bind 'a in &amp;amp;'a mut String)
// s has type invalid
return ret; // error: s is invalid
&lt;/code&gt;
    &lt;p&gt;This time, &lt;code&gt;ret&lt;/code&gt; contains its own lifetime token, and so is not invalidated when returning. However, moving the lifetime token &lt;code&gt;'a&lt;/code&gt; into &lt;code&gt;ret&lt;/code&gt; invalidates &lt;code&gt;s&lt;/code&gt;. Returning causes &lt;code&gt;s&lt;/code&gt; to be implicitly dropped, but it can’t be dropped because it is invalid, resulting in a compile error.&lt;/p&gt;
    &lt;p&gt;Finally, let’s try binding &lt;code&gt;'a&lt;/code&gt; to a tuple of both &lt;code&gt;r&lt;/code&gt; and &lt;code&gt;s&lt;/code&gt; and returning that:&lt;/p&gt;
    &lt;code&gt;life 'a;
let mut s = Box::new("Hello".to_string());
// s has type Box&amp;lt;String&amp;gt;
let r = &amp;amp;'a mut *s;
// r has type &amp;amp;'a mut String
// s has type Box&amp;lt;!'a mut String&amp;gt;
let ret = bind 'a in (s, r);
// ret has type (bind 'a in (Box&amp;lt;!'a mut String&amp;gt;, &amp;amp;'a mut String))
return ret; // ok
&lt;/code&gt;
    &lt;p&gt;This time, everything works. We’ve just returned a string along with a borrowed reference to that string in a 100% safe and zero-cost manner!&lt;/p&gt;
    &lt;head rend="h3"&gt;Destructuring&lt;/head&gt;
    &lt;p&gt;Now that we’ve successfully returned a self-borrowed object, let’s look at how you would use an object with self-borrows.&lt;/p&gt;
    &lt;code&gt;fn foo(v: bind 'a in (Box&amp;lt;!'a mut String&amp;gt;, &amp;amp;'a mut String)) {
    // v has type (bind 'a in (Box&amp;lt;!'a mut String&amp;gt;, &amp;amp;'a mut String))

    let bind 'b in (s, r) = v;
    // 'b is a lifetime token
    // s has type Box&amp;lt;!'b mut String&amp;gt;
    // r has type &amp;amp;'b mut String

    r.push_str(" world!");
    end 'b;
    // s has type Box&amp;lt;String&amp;gt;
    // r is invalid

    println!("{}", s);
}

&lt;/code&gt;
    &lt;head rend="h2"&gt;External lifetimes&lt;/head&gt;
    &lt;p&gt;So far, we’ve only looked at owned lifetime tokens. However, in some cases, you instead have a reference to an unknown lifetime token that exists elsewhere. There are two cases where this can happen:&lt;/p&gt;
    &lt;p&gt;Generic lifetime parameters&lt;/p&gt;
    &lt;p&gt;When a generic function is called, the generic lifetime parameters represent some lifetime which is owned by some caller of the function. These lifetimes are guaranteed to last at least as long as the function call, but could last longer.&lt;/p&gt;
    &lt;p&gt;Destructured references to bound lifetimes&lt;/p&gt;
    &lt;p&gt;In the previous example, we destructured an owned value that contained a lifetime token, resulting in the token being moved into the current scope.&lt;/p&gt;
    &lt;p&gt;If you destructure a reference to a value with a lifetime token, you instead get a reference to a lifetime token, rather than the token itself. These lifetimes are guaranteed to last at least as long as the destructured reference, but could last longer.&lt;/p&gt;
    &lt;p&gt;When you have a reference to an external lifetime, you can’t end or move the lifetime, since you don’t own the corresponding token. However, as long as the lifetime reference exists, you still can interact with types that refer to that lifetime.&lt;/p&gt;
    &lt;p&gt;Here’s an example of mutating a value with a bound lifetime via a mutable reference:&lt;/p&gt;
    &lt;code&gt;fn foo&amp;lt;'call&amp;gt;(v: &amp;amp;'call mut (bind 'a in (!'a String, &amp;amp;'a str))) {
    // 'call is an external lifetime
    // v has type &amp;amp;'call mut (bind 'a in (!'a String, &amp;amp;'a str))

    let bind 'b in (s, r) = v;
    // 'b is an external lifetime
    // s has type &amp;amp;'call mut (!'b String)
    // r has type &amp;amp;'call mut (&amp;amp;'b str)

    let (r1, r2) = r.split_at(32);
    // r1 and r2 have type (&amp;amp;'b str)

    // can assign back to r since they both have type &amp;amp;'b str
    *r = r2;
}
&lt;/code&gt;
    &lt;p&gt;Lastly, we also need to add a type to represent bound lifetime references in a type. However, the recursion stops there because a reference to a reference to a lifetime is equivalent to just a reference to a lifetime, since they don’t actually have any state or runtime representation and can’t be mutated.&lt;/p&gt;
    &lt;head rend="h1"&gt;Part 2: The bytes level&lt;/head&gt;
    &lt;p&gt;If we were writing a high-level language, we’d already be done, but for Rust, we still have the low-level details to worry about.&lt;/p&gt;
    &lt;p&gt;There are two ways to consider a type system. The first is what your code does, in an abstract machine, with no concerns about how it is actually implemented. I call this “the value level”.&lt;/p&gt;
    &lt;p&gt;The second level is how your code does it, in terms of low level implementation details like how values are stored in memory, which I call “the bytes level”. In a high level language, this might not even be exposed to users, but as Rust is a systems language, it gives programmers control over low level details like this.&lt;/p&gt;
    &lt;p&gt;To keep things simple, Rust has a single type system which implicitly encodes both levels in a single type. Unfortunately, this means that the desired combination is sometimes simply not represented in Rust’s type system.&lt;/p&gt;
    &lt;p&gt;In particular, Rust conflates ownership of values with ownership of the memory where those values are stored. This isn’t just a problem for a new feature like async functions. It causes problems even in ordinary real-world Rust coding. In particular, it means that &lt;code&gt;Drop&lt;/code&gt; has the wrong type signature because the correct type signature simply doesn’t exist in Rust.&lt;/p&gt;
    &lt;head rend="h2"&gt;Drop&lt;/head&gt;
    &lt;p&gt;When I say “&lt;code&gt;Drop&lt;/code&gt; has the wrong type signature”, some people might be thinking, “oh, you mean it should have wrapped &lt;code&gt;self&lt;/code&gt; in &lt;code&gt;Pin&lt;/code&gt;, right?”. But that’s just a minor inconvenience to people who are writing unsafe code anyway, and &lt;code&gt;Pin&lt;/code&gt; itself only dates back to Rust 1.33.0. The problem I’m talking about is much worse. &lt;code&gt;Drop&lt;/code&gt; was broken, even in Rust 1.0.&lt;/p&gt;
    &lt;p&gt;For example, last year, I had a struct containing a Tokio oneshot channel, and I wanted to send on that channel when the container was dropped. No problem, I figured, this is exactly the kind of thing Rust is good at. Should be easy, right?&lt;/p&gt;
    &lt;p&gt;…right??&lt;/p&gt;
    &lt;code&gt;struct Foo {
    channel: tokio::sync::oneshot::Sender&amp;lt;()&amp;gt;,
}
impl Drop for Foo {
    fn drop(&amp;amp;mut self) {
        // error[E0507]: cannot move out of `self.channel` which is behind a mutable reference
        self.channel.send(());
    }
}
&lt;/code&gt;
    &lt;p&gt;As it turns out, this seemingly simple task is impossible to do in Rust. (And yes, as always, you can throw away static checking and just use &lt;code&gt;unsafe&lt;/code&gt; or wrap your type in an unnecessary &lt;code&gt;Option&lt;/code&gt; or whatever. I’m talking about safe zero-cost Rust here.)&lt;/p&gt;
    &lt;p&gt;The reason why this seemingly simple code pattern is impossible is right there in the error message. &lt;code&gt;Drop&lt;/code&gt; takes &lt;code&gt;self&lt;/code&gt; by mutable reference. In Rust, mutable references have the invariant that the type is unchanged. You can’t move fields out of a mutable reference (unless you replace them with another value of the same type).&lt;/p&gt;
    &lt;p&gt;The whole point of a destructor is to destruct your type. The value is disassembled and the type goes away. You start with &lt;code&gt;T&lt;/code&gt; and end with nothing. However, &lt;code&gt;Drop&lt;/code&gt; takes &lt;code&gt;&amp;amp;mut T&lt;/code&gt; instead, which has the postcondition that everything is unchanged and your &lt;code&gt;T&lt;/code&gt; is still sitting there, good as always. Somehow, Rust ended up with a destructor api that can’t actually destruct anything.&lt;/p&gt;
    &lt;p&gt;So how did Rust make such an obvious mistake? The problem is that the Rust designers painted themselves into a corner in a misguided attempt to minimize the number of types in the formal type system.&lt;/p&gt;
    &lt;head rend="h3"&gt;Owned references&lt;/head&gt;
    &lt;p&gt;Currently, Rust has three kinds of types: &lt;code&gt;T&lt;/code&gt;, &lt;code&gt;&amp;amp;mut T&lt;/code&gt;, and &lt;code&gt;&amp;amp;T&lt;/code&gt;. If you plot their ownership and representation, you get this:&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Type&lt;/cell&gt;
        &lt;cell role="head"&gt;Owned?&lt;/cell&gt;
        &lt;cell role="head"&gt;Representation&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;T&lt;/cell&gt;
        &lt;cell&gt;yes&lt;/cell&gt;
        &lt;cell&gt;inline&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;&amp;amp;mut T&lt;/cell&gt;
        &lt;cell&gt;no&lt;/cell&gt;
        &lt;cell&gt;pointer&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;&amp;amp;T&lt;/cell&gt;
        &lt;cell&gt;no&lt;/cell&gt;
        &lt;cell&gt;pointer&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Notice something missing? There is no possible type with “yes, pointer” (or “no, inline” for that matter, but that doesn’t matter much). Rust conflates ownership with representation. (More specifically, there is no way to own a value without owning the underlying memory - &lt;code&gt;Box&amp;lt;T&amp;gt;&lt;/code&gt; is technically an owned pointer, but the pointer can only point to its own, owned memory, not memory that is managed elsewhere.)&lt;/p&gt;
    &lt;p&gt;In Rust, there is no way to transfer ownership of a value without moving the value. This was a major problem when Rust added async and decided that it needed to deal with non-movable types after all. Since the assumption of movability is built into the language in such a core way, there was no way to add non-movable types other than just saying “ok, everything related to them is unsafe, but here’s &lt;code&gt;Pin&lt;/code&gt; so you can at least partially hide the unsafety from your users, have fun”.&lt;/p&gt;
    &lt;p&gt;&lt;code&gt;Drop&lt;/code&gt; can’t take &lt;code&gt;self&lt;/code&gt; as a mutable reference because mutable references can’t be destructed, as discussed above. But it also can’t take &lt;code&gt;self&lt;/code&gt; by value, because that makes it impossible to drop non-movable types. (There are also minor considerations around recursion, presumably the reason &lt;code&gt;Drop&lt;/code&gt; didn’t take values even before Rust added non-movable types.)&lt;/p&gt;
    &lt;p&gt;The solution to this dilemma is that the correct type for &lt;code&gt;Drop&lt;/code&gt; to take is a type that currently doesn’t exist - an owned reference, which I’ll write &lt;code&gt;&amp;amp;own T&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;&lt;code&gt;&amp;amp;own T&lt;/code&gt; is similar to &lt;code&gt;&amp;amp;mut T&lt;/code&gt;, except that it owns the referenced value. This means that it has no post-conditions like &lt;code&gt;&amp;amp;mut T&lt;/code&gt; does, and you can freely move fields out of the reference, and it will implicitly drop anything remaining when it goes out of scope. However, unlike &lt;code&gt;Box&amp;lt;T&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;amp;own T&lt;/code&gt; does not own the memory, meaning you can take an &lt;code&gt;&amp;amp;own T&lt;/code&gt; reference to values on the stack when you need to drop them, and even recursively take &lt;code&gt;&amp;amp;own T&lt;/code&gt; references to fields.&lt;/p&gt;
    &lt;head rend="h3"&gt;Owned reference example&lt;/head&gt;
    &lt;p&gt;So what would a correct version of &lt;code&gt;Drop&lt;/code&gt; look like? Let’s look at an example.&lt;/p&gt;
    &lt;p&gt;First, let’s start with a simple struct with some fields and methods:&lt;/p&gt;
    &lt;code&gt;struct MyStrings {
    x: String,
    y: String,
}
impl MyStrings {
    fn some_method(&amp;amp;self) {
        println!("{} {}", self.x, self.y);
    }
}
&lt;/code&gt;
    &lt;p&gt;We can implement &lt;code&gt;Drop&lt;/code&gt; like this. &lt;code&gt;self&lt;/code&gt; starts out as an owned reference to the full type, meaning we can call methods on it like normal. Once we move fields out of it, the type of &lt;code&gt;self&lt;/code&gt; changes to the corresponding partial type (recall that Rust already supports partially moved types as an inconceivable type).&lt;/p&gt;
    &lt;code&gt;impl Drop for MyStrings {
    fn drop(&amp;amp;own self) {
        // self has type &amp;amp;own MyStrings
     
        // we can call methods within drop()
        self.some_method();
     
        // now let's move a field
        let _ = self.x;
        // self now has type &amp;amp;own MyStrings{y}
     
        // we're too lazy to drop the other field, but it will be dropped implicitly
        // drop(self.y)
    }
}
&lt;/code&gt;
    &lt;p&gt;When an owned reference goes out of scope, all remaining fields are dropped implicitly, not just inside a &lt;code&gt;drop&lt;/code&gt; method, but anywhere an &lt;code&gt;&amp;amp;own T&lt;/code&gt; exists. This is important a) for avoiding leaks while unwinding when an exception is thrown and b) because people will often not explicitly drop everything in a &lt;code&gt;drop&lt;/code&gt; impl.&lt;/p&gt;
    &lt;head rend="h3"&gt;Initialization&lt;/head&gt;
    &lt;p&gt;&lt;code&gt;Drop&lt;/code&gt; isn’t the only place where non-movable types cause a problem. Rust’s entire design is centered around the assumption that you can move anything. You move values to transfer ownership, you move values to change types, you move values to initialize objects, etc. Therefore, making Rust usable for non-movable types requires more changes.&lt;/p&gt;
    &lt;p&gt;Fortunately, we already have to support partially moved types anyway, and that also conveniently covers the initialization case as well as the destruction case. Initialization is basically the same process as dropping, just in reverse:&lt;/p&gt;
    &lt;code&gt;let mut new = MyStrings{};
// new has type MyStrings{}, a partially moved value
// this has the *memory layout* of MyStrings, but with no fields initialized

new.x = "Hello".to_string();
// new has type MyStrings{x}

new.y = "World".to_string();
// new has type MyStrings{x,y}, which is the same as a fully initialized MyStrings
&lt;/code&gt;
    &lt;head rend="h2"&gt;Safe transmute&lt;/head&gt;
    &lt;p&gt;However, there’s still one problem - in-place transmutes between different base types.&lt;/p&gt;
    &lt;p&gt;Recall that our future state machine enum looks something like this:&lt;/p&gt;
    &lt;code&gt;enum MyFuture {
    Initial(State0),
    Await1(State1),
    Await2(State2),
    Final,
}
&lt;/code&gt;
    &lt;p&gt;Our previous examples with drop and initialization changed the actual type (i.e. with different fields initialized or not), but the base type (which controls memory layout and method resolution) was the same. However, here, each enum variant has a different base type.&lt;/p&gt;
    &lt;p&gt;Currently in Rust, you always have to move values when converting between different base types. E.g. even just wrapping a value in a newtype (or unwrapping it) requires moving the value. However, the “move and reconstruct” paradigm won’t work here because our enum variants may contain non-movable types. Therefore, we need a way to convert between the different state types in-place.&lt;/p&gt;
    &lt;p&gt;Therefore, we need to add three things to Rust:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A way to specify that different types have the same memory layout&lt;/item&gt;
      &lt;item&gt;A way to specify that certain fields have the same location within the type for different types&lt;/item&gt;
      &lt;item&gt;The type system understands this and allows safe transmutes between them.&lt;/item&gt;
      &lt;item&gt;Allow updating enums in a way that is aware of this.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Example&lt;/head&gt;
    &lt;p&gt;Suppose we have an async function like this:&lt;/p&gt;
    &lt;code&gt;async fn foo(mut s: String) {
    let r = &amp;amp;mut s;
    sub().await;
    
    let z = if true {r.as_bytes()} else {"hello".as_bytes()};
    sub().await;
    
    println!("{:?}", z);
    sub().await;
    
    println!("{}", s)
}
&lt;/code&gt;
    &lt;p&gt;The corresponding future enum states are as follows, where &lt;code&gt;SubFut&lt;/code&gt; is the name of the anonymous future type returned by the &lt;code&gt;sub()&lt;/code&gt; function.&lt;/p&gt;
    &lt;code&gt;struct State0 {s: String}
struct State1&amp;lt;'a&amp;gt; {s: !'a mut String, r: &amp;amp;'a mut String}
struct State2&amp;lt;'a&amp;gt; {s: !'a mut String, z: &amp;amp;'a [u8]}
struct State3 {s: String}

enum MyFuture {
    Initial(State0),
    Await1(bind 'a in State1&amp;lt;'a&amp;gt;, SubFut),
    Await2(bind 'a in State2&amp;lt;'a&amp;gt;, SubFut),
    Await3(State3, SubFut),
    Final,
}
&lt;/code&gt;
    &lt;p&gt;The problem comes when we need to implement the state transitions (within the &lt;code&gt;poll&lt;/code&gt; method). Since &lt;code&gt;State1&lt;/code&gt; and &lt;code&gt;State2&lt;/code&gt; contain a non-movable field (&lt;code&gt;s&lt;/code&gt;), they have to be converted in-place.&lt;/p&gt;
    &lt;p&gt;I’m not sure what the best way to do this is, but I’m assuming we have some sort of annotation which allows us to mark that these types all use the same memory layout, and that &lt;code&gt;s&lt;/code&gt; is located in the same place in each type, allowing us to safely transmute between them.&lt;/p&gt;
    &lt;p&gt;The basic transition process for say, state 1 to state 2, is to start with an owned reference to &lt;code&gt;State1&lt;/code&gt;. Then we remove the &lt;code&gt;r&lt;/code&gt; field and use it to compute &lt;code&gt;z&lt;/code&gt;, as per the code between the two await points. This leaves the pointer with type &lt;code&gt;State1{s}&lt;/code&gt;. Then we can safely transmute this to &lt;code&gt;State2{s}&lt;/code&gt;, since &lt;code&gt;s&lt;/code&gt; is guaranteed to be in the same place in both types. Finally, we add the &lt;code&gt;z&lt;/code&gt; field back, to get a full &lt;code&gt;State2&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h2"&gt;Safe enum updates&lt;/head&gt;
    &lt;p&gt;There’s still the question of how the compiler knows that enums are being updated in a safe manner.&lt;/p&gt;
    &lt;head rend="h3"&gt;&amp;amp;mut to &amp;amp;own&lt;/head&gt;
    &lt;p&gt;The first question is how to temporarily violate the type invariants during the update. &lt;code&gt;poll&lt;/code&gt; takes a mutable reference to &lt;code&gt;self&lt;/code&gt;, but in Rust, &lt;code&gt;&amp;amp;mut T&lt;/code&gt; is required to preserve the type invariants of &lt;code&gt;T&lt;/code&gt; at all times (well, there are some minor exceptions, but those are built into the compiler, not something users have direct access to).&lt;/p&gt;
    &lt;p&gt;You’re not allowed to move out of a mutable reference, because if this were allowed, and an exception were thrown and then caught, someone could access the reference again even though the pointee is now invalid. Therefore, we need to somehow get an owned reference to the enum variant instead.&lt;/p&gt;
    &lt;p&gt;However, there’s one workaround. You can’t temporarily move out of a &lt;code&gt;&amp;amp;mut T&lt;/code&gt; because that would violate the invariant of &lt;code&gt;T&lt;/code&gt;, but you can move out of a &lt;code&gt;&amp;amp;mut Option&amp;lt;T&amp;gt;&lt;/code&gt;. Basically, we’ve widened the type invariant of the pointee to now include an “invalid” state. That state will never be seen in normal operation (assuming we always put the value back when done with it), but would be seen if an exception is thrown while the value is removed, and then that exception is caught and the reference accessed again.&lt;/p&gt;
    &lt;p&gt;For normal code, wrapping everything in an &lt;code&gt;Option&lt;/code&gt; means adding a runtime cost and runtime type checks, which is why I ruled it out in previous discussions (e.g. restricting the discussion to “safe, zero-cost Rust”). However, it turns out that the &lt;code&gt;Future&lt;/code&gt; api already effectively forces everything to have an extra “invalid” state anyway, so there’s no additional cost to having one. This is the reason for the extra &lt;code&gt;Final&lt;/code&gt; state in all the enums shown above.&lt;/p&gt;
    &lt;p&gt;Therefore, when updating the enum state during &lt;code&gt;poll&lt;/code&gt;, we start by setting the tag to &lt;code&gt;Final&lt;/code&gt;, which lets us get ownership over the current contents of the enum. Under normal operation, we would then set it back to a valid state, but if an exception is thrown in the middle and then caught and the future is re-polled, the future would just be in the &lt;code&gt;Final&lt;/code&gt; state (which will panic when polled, like a future typically will when polled after completion).&lt;/p&gt;
    &lt;head rend="h3"&gt;Tracking self-ness&lt;/head&gt;
    &lt;p&gt;The basic process is to start by setting the enum tag to &lt;code&gt;Final&lt;/code&gt;, which gives an owned reference to the former contents of the enum variant, much like how you can take an owned value out of a &lt;code&gt;&amp;amp;mut Option&amp;lt;T&amp;gt;&lt;/code&gt; (except that taking an owned reference is not something that currently exists in Rust).&lt;/p&gt;
    &lt;p&gt;Then we perform various mutations through the owned reference, which changes its type from &lt;code&gt;&amp;amp;own State1&lt;/code&gt; to &lt;code&gt;&amp;amp;own State2&lt;/code&gt; or whatever. Finally, once the variant pointer is updated to the correct type, we can set the tag of the original enum to match, thus restoring the invariant.&lt;/p&gt;
    &lt;p&gt;However, the last part is trickier than it sounds. The problem is that even if we have a &lt;code&gt;&amp;amp;mut MyFuture&lt;/code&gt; (with the variant part currently borrowed) and a &lt;code&gt;&amp;amp;own State2&lt;/code&gt; or whatever, the compiler can’t know that it is safe to set the tag back to &lt;code&gt;Await2&lt;/code&gt; because it doesn’t know that the &lt;code&gt;&amp;amp;own State2&lt;/code&gt; actually points to the enum you’re trying to update.&lt;/p&gt;
    &lt;p&gt;Therefore, we need to add a function-local analysis pass to the compiler to facilitate this. When you borrow the variant of an enum, the compiler will keep track of the relation between the two local variables as long as they stay in the function, and allow a safe update of the enum if the variant pointer has the corresponding type.&lt;/p&gt;
    &lt;head rend="h3"&gt;Another inconceivable type?&lt;/head&gt;
    &lt;p&gt;Now you might be wondering, isn’t that enum-alias analysis pass yet another shadow type checker? Does this mean we have another inconceivable type to add to the type system?&lt;/p&gt;
    &lt;p&gt;It is a shadow type checker, but fortunately we don’t have to add it to the type system. The reason is that in order to support safe async functions, we need to be able to name the type of any local variable that is held across an await point. Therefore, we only need to add inconceivable types to the type system if it is possible for them to exist across an await.&lt;/p&gt;
    &lt;p&gt;As shown earlier, partially moved types and borrowed types can both exist across an await, which is why we have to add them to the type system. However, if we’re adding a new shadow type checker, we can just arbitrarily declare that the analysis stops at awaits, which avoids the need to add any new types to the formal type system.&lt;/p&gt;
    &lt;p&gt;Fortunately, the only thing we actually need the enum-alias pass for is to support safe enum updates within the &lt;code&gt;Future::poll&lt;/code&gt; method, and &lt;code&gt;poll&lt;/code&gt; is a non-async method, which means it can never contain awaits anyway. Therefore, there’s no problem with restricting our new safe enum update feature to not span awaits.&lt;/p&gt;
    &lt;head rend="h3"&gt;Leak&lt;/head&gt;
    &lt;p&gt;This sort of ad-hoc special analysis is certainly not elegant. In an ideal world, Rust would not have to have any inconceivable types at all, not even ones that don’t cross awaits. And it certainly would be possible to turn this into a general purpose feature that is a first-class part of the type system.&lt;/p&gt;
    &lt;p&gt;However, doing this the proper way would require the introduction of non-forgettable types. Some people have already been asking for non-forgettable types to be added to Rust anyway for unrelated reasons (via a “&lt;code&gt;Leak&lt;/code&gt;” auto-trait), but the results would not be pretty.&lt;/p&gt;
    &lt;p&gt;This post is already very long, and non-forgettable types would add much more complexity than anything I’ve covered, since it violates a more central assumption of the language than even non-movable types do. Therefore, for the sake of keeping this proposal merely very long and minimizing the complexity of Rust as much as possible, I think it’s best to just punt on that subject and implement enum alias checking via special compiler magic rather than non-forgettable types.&lt;/p&gt;
    &lt;p&gt;The “special compiler magic” approach has the downside that it will be impossible to factor parts of the &lt;code&gt;poll&lt;/code&gt; method out into separate helper functions, because the required types won’t exist in the type system and hence can’t be named in the function signature, but I think that’s a small price to pay for leaving this can of worms unopened.&lt;/p&gt;
    &lt;head rend="h2"&gt;Pin and Move&lt;/head&gt;
    &lt;p&gt;With that out of the way, there’s one last topic to address, &lt;code&gt;Pin&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;You may have noticed a conspicuous lack of &lt;code&gt;Pin&lt;/code&gt; in all my examples. That’s because &lt;code&gt;Pin&lt;/code&gt; was just a hack added due to the inability to introduce a &lt;code&gt;Move&lt;/code&gt; auto-trait in a fully backwards compatible manner. But since the changes I’m proposing require breaking strict backwards compatibility anyway (good luck fixing the type signature of &lt;code&gt;Drop&lt;/code&gt; in a backwards compatible manner!), we might as well assume that &lt;code&gt;Pin&lt;/code&gt; gets replaced by a &lt;code&gt;Move&lt;/code&gt; auto-trait for moveable types while we’re at it.&lt;/p&gt;
    &lt;p&gt;However, we still need a way to replicate the functions &lt;code&gt;Pin&lt;/code&gt; is currently serving, as it doesn’t work quite the same way that &lt;code&gt;Move&lt;/code&gt; would.&lt;/p&gt;
    &lt;head rend="h3"&gt;Enum refinements&lt;/head&gt;
    &lt;p&gt;In current Rust, when a &lt;code&gt;Future&lt;/code&gt; is initially created, you can freely move it around. However, you have to pin it before you can poll it, and once polled, it becomes unmovable.&lt;/p&gt;
    &lt;p&gt;In a &lt;code&gt;Move&lt;/code&gt; world, this is basically saying that the &lt;code&gt;Initial&lt;/code&gt; state of every future enum state machine has to be &lt;code&gt;Move&lt;/code&gt;, but the other states of the enum may be non-&lt;code&gt;Move&lt;/code&gt;. Since &lt;code&gt;poll&lt;/code&gt; takes the enum by &lt;code&gt;&amp;amp;mut&lt;/code&gt;, it can switch between the states and thus the future has to be assumed to be non-movable after polling.&lt;/p&gt;
    &lt;p&gt;However, Rust’s current design doesn’t support any way to reason like that. Rust’s current type system is designed around the assumption that every value has exactly one type and that type never changes, which means that there is no way to talk about properties that hold now but not in the future. If an enum type implements an auto-trait, that means that every variant of the enum satisfies that trait, not just one variant.&lt;/p&gt;
    &lt;p&gt;This isn’t just a problem for futures. It often comes up in current Rust with &lt;code&gt;Copy&lt;/code&gt; too, as in “why can’t I copy &lt;code&gt;None&lt;/code&gt;”? For example, the following code will not compile because the array initial value has to be &lt;code&gt;Copy&lt;/code&gt;, but &lt;code&gt;Option&amp;lt;SomeNotCopyType&lt;/code&gt; is not &lt;code&gt;Copy&lt;/code&gt; due to the unused &lt;code&gt;Some&lt;/code&gt; variant.&lt;/p&gt;
    &lt;code&gt;struct SomeNotCopyType;

let foo: [Option&amp;lt;SomeNotCopyType&amp;gt;; 8] = [None; 8];
&lt;/code&gt;
    &lt;p&gt;Therefore, we need a way to distinguish between “every variant of the enum satisfies this property” and “the current variant of the enum satisfies this property”. The syntax &lt;code&gt;T: Future + Move&lt;/code&gt; already means the former, so we need to come up with different syntax for the latter.&lt;/p&gt;
    &lt;p&gt;I’m not sure what the best syntax is, so I’ll just go with &lt;code&gt;T: Future if Move&lt;/code&gt;. &lt;code&gt;T: Future if Move&lt;/code&gt; means “&lt;code&gt;T&lt;/code&gt; is (any) future, and the value is currently &lt;code&gt;Move&lt;/code&gt;”, while &lt;code&gt;T: Future + Move&lt;/code&gt; instead means “T is a future type where every variant is &lt;code&gt;Move&lt;/code&gt;” (which would be &lt;code&gt;Unpin&lt;/code&gt; in current Rust).&lt;/p&gt;
    &lt;p&gt;Since explicit trait implementations can only be done for the enum type as a whole, this sort of “per-variant trait impl” only makes sense for auto-traits and lifetimes. Therefore, the right side is restricted to auto-traits and lifetime bounds. &lt;code&gt;T: Future if (Move + 'static)&lt;/code&gt; would be allowed, but &lt;code&gt;T: Future if Clone&lt;/code&gt; would not.&lt;/p&gt;
    &lt;p&gt;Additionally, the “if” syntax can also be applied to explicit non-generic enum types. E.g &lt;code&gt;foo: MyEnum if Copy&lt;/code&gt; means &lt;code&gt;foo&lt;/code&gt; has type &lt;code&gt;MyEnum&lt;/code&gt; and its current variant is one that is &lt;code&gt;Copy&lt;/code&gt;.&lt;/p&gt;
    &lt;head rend="h3"&gt;Stable deref types&lt;/head&gt;
    &lt;p&gt;In general, every borrowed type will be non-moveable. However, container types such as &lt;code&gt;Box&lt;/code&gt;, &lt;code&gt;Vec&lt;/code&gt;, &lt;code&gt;String&lt;/code&gt;, &lt;code&gt;Rc&lt;/code&gt;, etc. could optionally tell the compiler that borrowing the contents of the container does not cause the container itself to become non-moveable. This is what makes it possible to return data along with a pointer to that data. The outer value will always be moved by Rust’s nature, but this is still safe as long as the borrowed data does not move.&lt;/p&gt;
    &lt;head rend="h1"&gt;Conclusion&lt;/head&gt;
    &lt;p&gt;Whew, we’re finally done! We’ve finally seen how to safely implement self-borrows and safe async functions in Hypothetical Future Rust.&lt;/p&gt;
    &lt;p&gt;To be honest, I think there’s approximately zero chance that this gets implemented in Rust, since the nature of a language with a large ecosystem means that you can’t just break backwards compatibility, and even seemingly trivial changes in Rust have been held up forever due to concerns around stabilization or documentation or whatever.&lt;/p&gt;
    &lt;p&gt;However, I hope that this post still helps people to think about the nature of the problem. In particular, it’s frustrating to see people say that self-borrows are an inherent impossibility with borrow checking when that limitation is really just a consequence of idiosyncratic choices made by Rust, and if not in current Rust, it certainly could have been supported in an alternate history Rust that made slightly different choices, and likely will be supported in future languages with borrow checking.&lt;/p&gt;
    &lt;p&gt;Anyway, if you have any comments or suggestions, please let me know by commenting on Reddit.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941443</guid><pubDate>Sat, 15 Nov 2025 23:31:39 +0000</pubDate></item><item><title>When UPS charged me a $684 tariff on $355 of vintage computer parts</title><link>http://oldvcr.blogspot.com/2025/11/when-ups-charged-me-684-tariff-on-355.html</link><description>&lt;doc fingerprint="967c89d003a59991"&gt;
  &lt;main&gt;&lt;p&gt;Although we make regular trips down under, your humble author is based in California and so is the Floodgap computer lab. For newly manufactured items and parts it has generally been my policy to buy parts from United States sellers even prior to the tariffs, mostly because that gets around various irregularities and it arrives more quickly. If they're going to drop-ship then it's their problem, not mine, because they advertised it was already here. Since such items are typically newly produced, the current tariffs would logically apply and this policy thus has the additional benefit of me not having to deal with that directly: any tariff should already have been paid to get them States-side.&lt;/p&gt;&lt;p&gt;But for NOS and used parts, especially if you are a collector like I am for certain systems, you buy where you can find them. Coincidentally I wanted to buy a second Apple Network Server logic board since my ANS 700 is acting a little weird (don't say caps) and I still want a good spare for the ANS 500. These don't exactly grow on trees but, as it turns out, the seller I bought my current spare logic board from (pre-tariffs) had another in stock. The logic board doesn't come with the regular ANS AIX ROM SIMM nor cache, so we'll want one each of those just in case, and he also had an Apple BTO Twin Turbo video card (I believe originally for the Power Macintosh 9500) which might also be nice for one of the other beige PCI Macs. These are all new old stock items in their Apple Service packaging because obviously Apple hasn't made nor sold any of these parts in decades. Per the seller, they came from the teardown of new machines which Apple was unable to sell and got turned into official surplus new stock. The seller is in an European Union country, so we're not talking some shady Shenzhen shop operating off an alley liftgate. (I'm not naming the seller because none of this is his fault and I'm sure he'd not like to be contacted about this.)&lt;/p&gt;&lt;p&gt;The items came to €296.00, about US$355 at the spot exchange rate, plus €48.10 for UPS shipping. This would have been well-under the prior de minimis exemption even with the shipping rolled in. We had to do UPS because his particular country's postal service limits shipment value to the United States to US$100 due to the tariffs, causing him to spend a substantial amount of time at the UPS drop-off depot and on the paperwork, which was way more than he was required to do and I very much appreciate. For any import you need to come up with a Harmonized System code for what you're shipping, which then maps to a Harmonized Tariff Schedule code specific to the United States. These parts are all populated PCBs and most populated boards are, by prior rulings, classified with an HTS code of 8473.30, which is what the seller tagged all four items with. This code is for "Parts and accessories of the machines of heading 8471 [Automatic data processing machines and units thereof]." If you look under the Harmonized Tariff Schedule search engine for this code, you find a duty rate for certain subheadings that at most would be 35 percent, or even if these were products of the People's Republic of China (they're old enough that I don't know their exact provenance, but I have no evidence to believe these were originally), then maybe, maybe, maybe an additional 25 percent. The declared value was the purchase price in euros and he even picked up the insurance. The package left the depot uneventfully and worked its way across the continent.&lt;/p&gt;&lt;p&gt;The first sign of trouble was over the weekend when I got an unexpected message.&lt;/p&gt;The UPS shipping agent had indicated the parcel was subject to Section 232 tariffs on steel and aluminum, which required me to fill out a UPS-specific form attesting to the steel and aluminum content of the package. (This is an important distinction because Section 232 is not currently part of the present matter before the U.S. Supreme Court (PDF), only reciprocal tariffs under the IEEPA.) There should be little or no aluminum in these because the board and traces would be copper. However, a PCI card is probably going to have a steel bracket, so I looked at the typical mass for those and picked a sufficiently high number of 149g, almost certainly an overestimate but that's always safest with this stuff, then looked at the spot price of stainless steel and based on that weight computed a steel content value of $0.48. I marked "not applicable" for everything else and sent it back. They accepted that.&lt;p&gt;In the background, all this goes into a U.S. Customs and Border Protection Form 7501, also known as an Entry Summary. It is important to realize that in this circumstance, with UPS as the broker, you are not actually the importer of record — they are. You are the "ultimate consignee." Based on the information provided and the judgement of the broker's agent, then a tariff is assigned and added to the paperwork, which is "assessed" by CBP but in practice is being assessed by the broker based on what they expect CBP would charge under current regulation. Ordinarily you don't see this form. CBP does spot-check these but the majority just go through. Since UPS is the importer in this situation, they also pay the tariff they computed "in advance" to clear customs, and then they charge you for that plus their broker fee.&lt;/p&gt;&lt;p&gt;It took several more days for the actual tariff bill to arrive, which was early Monday morning. Now, the initial E-mail said this:&lt;/p&gt;Yes, the initial bill was for US$711. When I logged in, however, it gave me a total of $698 because it hadn't yet been delivered, which included a $14 brokerage fee. Time was of the essence, however, because it was arriving that day. I was absolutely incandescent to have to do it, but I paid the entire charge in full on the spot, and this is the correct thing to do. The last thing you want is for your package to get redirected to a warehouse pending your payment, because any shipper will start tacking on storage fees and they have no incentive to get it out of storage quickly. For UPS, a direct quote from their own agents, "Warehouse charges will be added on shipments that are held in our warehouse over two business days at a rate of $20.00 per day and $0.04 per pound. ... On the 15th day, all shipments will be eligible for General Order warehousing by U.S. Customs. Any shipment moved to a G.O. warehouse will be assigned additional warehouse fees over and above any UPS warehouse fees. If imposed, these fees must be paid in full before the shipment can be removed." Obviously I wanted no part of that.&lt;p&gt;After I had been advised by the system the package would be delivered as scheduled, I then relentlessly abused the AI chatbot on UPS' home page until it asked for my phone number and I got a callback into their phone support line. The first person on the line advised me they didn't handle tariffs and transferred me to another department, after which I spent (not an exaggeration) 45 minutes on hold until it was answered. This new agent said that this was dealt with through a specific subgroup on the UPS post entry team that didn't do anything by phone. (These brokerage teams generally operate out of the Kentucky UPS Worldport hub at Louisville Muhammad Ali International Airport, formerly Standiford Field, hence its IATA code of SDF that also turns up in UPS documentation.) He gave me an E-mail address that looked like line noise but I confirmed it twice with him and also that I had to put the tracking number into the subject line with the magic words "Disputing Duties and Custom Charges." I indicated in the message the fees were paid but that I believed they were unreasonable and incorrect, and also pointed out I submitted the Section 232 paperwork when requested.&lt;/p&gt;&lt;p&gt;It took a day to get a reply, then came the United States Veterans' Day holiday, and finally I heard back yesterday from a second agent that they had "corrected this shipment." What they had done was file an amended Form 7501 and this 7501 they actually sent me so I could see the results. The declared value was changed to US$342 (I presume a difference in the spot exchange rate at the time of filing) and now it had two HTSUS numbers. The entire $342 was attributed to 8473.30.2000, a slightly different code for "Parts and accessories, including face plates and lock latches, of printed circuit assemblies" which might be referring to the bracket I declared in the Section 232 form. There was no tariff on this ("FREE"). However, a second code 9903.02.20 was added, a long-winded way of saying a tariff (in this case 15%) on "articles the product of the European Union." This was $51.30 and the final tariff.&lt;/p&gt;&lt;p&gt;Everything arrived safely, by the way, and in excellent condition (though I cracked open the antistatic bag on the ANS board to take off the Maxell battery which Apple always shipped logic boards with back then). However, I would like to point out for the sake of accuracy that the ANS logic board, ROM SIMM and cache DIMM have no country of origin printed on them. Only the Twin Turbo card does, and it says ...&lt;/p&gt;.. but since it wasn't the major part of the order it seemed like I'd be wasting even more time over ten or fifteen bucks to appeal this too. Your mileage and motivation may vary.&lt;p&gt;Now that UPS was into me for $632.70, the revising agent said, "Any difference between the amount paid and the amount now reflected will be auto-refunded to you. Most of the time, this is done by check sent to the billing address, you can expect this between 2-6 weeks." They didn't say when they don't use a check (I paid with a credit card), but they did give me a phone number for accounting, which I'll call if UPS fails to pay back this particular interest-free loan.&lt;/p&gt;&lt;p&gt;So that's the sordid tale. Even though UPS (mostly) made this right, I'm still unhappy with them for screwing up so badly in the first place because I'm out the money until they get around to reimbursing me. You'd think someone would have noticed that a thumping big duty like that seemed a little weird for a transaction of this size and maybe called a supervisor or something. The fact it could be so promptly appealed — and reversed in a few days, something that hardly ever happens with the federal government — pretty much demonstrates it was their call to ding it for that much in duty in the first place. I'm also unhappy with them for only alerting me to the final cost of the tariff when the shipment was inbound and due for delivery instead of earlier when it was assessed, because they have you over a barrel at that point unless you want to take your chances with their brokerage warehouse. This obviously nets them more money with the people who won't pay up immediately, but it's undeniably pretty bad customer service. Unfortunately, my unscientific survey of reports in the UPS Reddit indicate I am far from the only person to get a disproportionate assessment of this type.&lt;/p&gt;&lt;p&gt;Regardless, if this happens to you — whether it's FedEx or DHL or UPS or whatever — pay it and then appeal it. Don't let your shipment go to a warehouse and don't bounce it back to the sender; since odds are the shipper (because they are likely the importer of record) has already paid the duty, they're going to want their money back and you'll be out the money and the items. But, by golly, appeal it: just because you might agree with it politically doesn't mean they did it right.&lt;/p&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941563</guid><pubDate>Sat, 15 Nov 2025 23:55:19 +0000</pubDate></item><item><title>AirPods libreated from Apple's ecosystem</title><link>https://github.com/kavishdevar/librepods</link><description>&lt;doc fingerprint="ff6c8a1cca6b1dc8"&gt;
  &lt;main&gt;
    &lt;p&gt;LibrePods unlocks Apple's exclusive AirPods features on non-Apple devices. Get access to noise control modes, adaptive transparency, ear detection, hearing aid, customized transparency mode, battery status, and more - all the premium features you paid for but Apple locked to their ecosystem.&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Status&lt;/cell&gt;
        &lt;cell role="head"&gt;Device&lt;/cell&gt;
        &lt;cell role="head"&gt;Features&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;AirPods Pro (2nd Gen)&lt;/cell&gt;
        &lt;cell&gt;Fully supported and tested&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;AirPods Pro (3rd Gen)&lt;/cell&gt;
        &lt;cell&gt;Fully supported (except heartrate monitoring)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Other AirPods models&lt;/cell&gt;
        &lt;cell&gt;Basic features (battery status, ear detection) should work&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Most features should work with any AirPods. Currently, I've only got AirPods Pro 2 to test with.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Noise Control Modes: Easily switch between noise control modes without having to reach out to your AirPods to long press&lt;/item&gt;
      &lt;item&gt;Ear Detection: Controls your music automatically when you put your AirPods in or take them out, and switch to phone speaker when you take them out&lt;/item&gt;
      &lt;item&gt;Battery Status: Accurate battery levels&lt;/item&gt;
      &lt;item&gt;Head Gestures: Answer calls just by nodding your head&lt;/item&gt;
      &lt;item&gt;Conversational Awareness: Volume automatically lowers when you speak&lt;/item&gt;
      &lt;item&gt;Hearing Aid*&lt;/item&gt;
      &lt;item&gt;Customize Transparency Mode*&lt;/item&gt;
      &lt;item&gt;Multi-device connectivity* (upto 2 devices)&lt;/item&gt;
      &lt;item&gt;Other customizations: &lt;list rend="ul"&gt;&lt;item&gt;Rename your AirPods&lt;/item&gt;&lt;item&gt;Customize long-press actions&lt;/item&gt;&lt;item&gt;Few accessibility features&lt;/item&gt;&lt;item&gt;And more!&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;See our pinned issue for a complete feature list and roadmap.&lt;/p&gt;
    &lt;p&gt;The Linux version runs as a system tray app. Connect your AirPods and enjoy:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Battery monitoring&lt;/item&gt;
      &lt;item&gt;Automatic Ear detection&lt;/item&gt;
      &lt;item&gt;Conversational Awareness&lt;/item&gt;
      &lt;item&gt;Switching Noise Control modes&lt;/item&gt;
      &lt;item&gt;Device renaming&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Note&lt;/p&gt;
    &lt;p&gt;Work in progress, but core functionality is stable and usable.&lt;/p&gt;
    &lt;p&gt;For installation and detailed info, see the Linux README.&lt;/p&gt;
    &lt;p&gt;here's a very unprofessional demo video&lt;/p&gt;
    &lt;head class="px-3 py-2"&gt;demo-video.mp4&lt;/head&gt;
    &lt;p&gt;Caution&lt;/p&gt;
    &lt;p&gt;You must have a rooted device with Xposed to use LibrePods on Android. This is due to a bug in the Android Bluetooth stack. Please upvote the issue by clicking the '+1' icon on the IssueTracker page.&lt;/p&gt;
    &lt;p&gt;There are no exceptions to the root requirement until Google merges the fix.&lt;/p&gt;
    &lt;p&gt;Until then, you must xposed. I used to provide a non-xposed method too, where the module used overlayfs to replace the bluetooth library with a locally patched one, but that was broken due to how various devices handled overlayfs and a patched library. With xposed, you can also enable the DID hook enabling a few extra features.&lt;/p&gt;
    &lt;p&gt;Turns out, if you change the manufacturerid to that of Apple, you get access to several special features!&lt;/p&gt;
    &lt;p&gt;Upto two devices can be simultaneously connected to AirPods, for audio and control both. Seamless connection switching. The same notification shows up on Apple device when Android takes over the AirPods as if it were an Apple device ("Move to iPhone"). Android also shows a popup when the other device takes over.&lt;/p&gt;
    &lt;p&gt;Accessibility settings like customizing transparency mode (amplification, balance, tone, conversation boost, and ambient noise reduction), and loud sound reduction can be configured.&lt;/p&gt;
    &lt;p&gt;All hearing aid customizations can be done from Android, including setting the audiogram result. The app doesn't provide a way to take a hearing test because it requires much more precision. It is much better to use an already available audiogram result.&lt;/p&gt;
    &lt;p&gt;To enable these features, enable App Settings -&amp;gt; &lt;code&gt;act as Apple Device&lt;/code&gt;.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;p&gt;Due to recent AirPods' firmware upgrades, you must enable&lt;/p&gt;&lt;code&gt;Off listening mode&lt;/code&gt;to switch to&lt;code&gt;Off&lt;/code&gt;. This is because in this mode, louds sounds are not reduced.&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;If you have take both AirPods out, the app will automatically switch to the phone speaker. But, Android might keep on trying to connect to the AirPods because the phone is still connected to them, just the A2DP profile is not connected. The app tries to disconnect the A2DP profile as soon as it detects that Android has connected again if they're not in the ear.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;When renaming your AirPods through the app, you'll need to re-pair them with your phone for the name change to take effect. This is a limitation of how Bluetooth device naming works on Android.&lt;/p&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;If you want the AirPods icon and battery status to show in Android Settings app, install the app as a system app by using the root module.&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;LibrePods - AirPods liberated from Apple’s ecosystem Copyright (C) 2025 LibrePods contributors&lt;/p&gt;
    &lt;p&gt;This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License.&lt;/p&gt;
    &lt;p&gt;This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.&lt;/p&gt;
    &lt;p&gt;You should have received a copy of the GNU Affero General Public License along with this program over here. If not, see https://www.gnu.org/licenses/.&lt;/p&gt;
    &lt;p&gt;All trademarks, logos, and brand names are the property of their respective owners. Use of them does not imply any affiliation with or endorsement by them. All AirPods images, symbols, and the SF Pro font are the property of Apple Inc.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941596</guid><pubDate>Sun, 16 Nov 2025 00:01:25 +0000</pubDate></item><item><title>IDEmacs: A Visual Studio Code clone for Emacs</title><link>https://codeberg.org/IDEmacs/IDEmacs</link><description>&lt;doc fingerprint="8e2cd9706e052f6c"&gt;
  &lt;main&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;img&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;vscode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;.dir-locals.el&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;.gitignore&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;LICENSE&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;README.org&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;TODO.org&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h2"&gt;Description&lt;/head&gt;
    &lt;p&gt;IDEmacs aims to be a set of Emacs configurations which provide an out-of-the-box experience similar (if not identical) to popular GUI IDEs and editors.&lt;/p&gt;
    &lt;p&gt;It is aimed at…&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Programmers coming to Emacs from other IDEs, or even first-time programmers familiar with only office applications.&lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Beginner Common Lisp and Scheme programmers, who need the functionality of Emacs (Sly/Geiser + structural editing) without having to perform unnecessary setup and without dealing with an alien style of keybindings. In other words, similar to Portacle or Guile Studio.1&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Some may say that we should improve support for Common Lisp and Scheme in other editors and IDEs instead. Still others may say that we should work on a better Lisp IDE than Emacs instead (such as Second Climacs or Lem). All great points. IDEmacs is just a band-aid for the present situation, where Emacs + Sly/Geiser is the best Lisp/Scheme IDE.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Non-programmers who want a fully-featured Org, Markdown, or LaTeX editor with idiomatic shortcuts and mouse-friendly GUI.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;It provides…&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;
        &lt;p&gt;GUI and mouse support, in addition to a keyboard-driven interface.&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Unlike most starter kits, we do not hide GUI elements by default.&lt;/item&gt;
          &lt;item&gt;&lt;p&gt;We support configuration via the&lt;/p&gt;&lt;code&gt;custom&lt;/code&gt;GUI, not just Elisp&lt;list rend="ul"&gt;&lt;item&gt;Supporting GUI and &lt;code&gt;custom&lt;/code&gt;means we cannot use&lt;code&gt;straight&lt;/code&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
          &lt;item&gt;Supporting GUI and &lt;/item&gt;
          &lt;item&gt;If resources allow, we may implement new GUIs in Emacs&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Keybindings that follow popular GUI and IDE conventions. 2&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;CUA mode is just the start - much more keybinding configuration is needed to provide an unsurprising experince. And that's before we even get to the IDE-specific keybindings.&lt;/item&gt;
          &lt;item&gt;This excludes starter kits that use Evil by default, such as Spacemacs or Doom.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;A fully-featured, fast, and configuration-free Emacs experience, like any starter kit/distro.&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;The configuration uses idiomatic Elisp and contains a generous amount of comments, valuable to anyone interested in learning to configure Emacs using Elisp.&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Perfectly imitating the GUIs and subtle behaviour differences of IDEs is desirable, but not top priority. Given our limited resources, we aim for "good enough".&lt;/p&gt;
    &lt;p&gt;We hope this gives new users a comfortable starting point, and make them more likely to stick around to discover the possibilities of Emacs' malleability, rather than being driven off by the default experience.&lt;/p&gt;
    &lt;head rend="h3"&gt;VSCode configuration (WIP)&lt;/head&gt;
    &lt;p&gt;This is the first and currently the only IDE configuration provided.&lt;/p&gt;
    &lt;p&gt;Currently, it brings together -&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;VSCode Dark Plus theme&lt;/item&gt;
      &lt;item&gt;Treemacs for the sidebar file browser ("Explorer")&lt;/item&gt;
      &lt;item&gt;Centaur Tabs for the tab bar&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;breadcrumb&lt;/code&gt;to show file paths as breadcrumbs&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;idle-highlight-mode&lt;/code&gt;to automatically highlight occurrences of the symbol at point&lt;/item&gt;
      &lt;item&gt;Emulation of most keybindings listed in the "General", "Basic Editing", "Rich Languages Editing", and "Multi-cursor and selection" sections of the VSCode keyboard shortcuts cheatsheet.&lt;/item&gt;
      &lt;item&gt;All editing packages required for emulation, including &lt;code&gt;whole-line-or-region&lt;/code&gt;,&lt;code&gt;expand-region&lt;/code&gt;,&lt;code&gt;multiple-cursors&lt;/code&gt;, and&lt;code&gt;smartparens&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;vc&lt;/code&gt;and&lt;code&gt;magit&lt;/code&gt;for version control&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;diff-hl&lt;/code&gt;and&lt;code&gt;blamer&lt;/code&gt;to show in-buffer version control information&lt;/item&gt;
      &lt;item&gt;A comprehensive collection of completion packages - Vertico, &lt;code&gt;orderless&lt;/code&gt;, Consult,&lt;code&gt;marginalia&lt;/code&gt;, and&lt;code&gt;company&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;Lisp editing packages - &lt;code&gt;sly&lt;/code&gt;,&lt;code&gt;geiser&lt;/code&gt;, and&lt;code&gt;adjust-parens&lt;/code&gt;(similar to Parinfer)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;eat&lt;/code&gt;for terminals&lt;/item&gt;
      &lt;item&gt;Sensible Emacs defaults, and other goodies - &lt;code&gt;org-superstar&lt;/code&gt;,&lt;code&gt;pdf-tools&lt;/code&gt;,&lt;code&gt;undo-tree&lt;/code&gt;,&lt;code&gt;helpful&lt;/code&gt;,&lt;code&gt;rainbow-mode&lt;/code&gt;, …&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;&lt;code&gt;use-package&lt;/code&gt; is used to keep the code organized.&lt;/p&gt;
    &lt;head rend="h4"&gt;Keybinding coverage&lt;/head&gt;
    &lt;p&gt;An empty command cell means we haven't bound anything to these keys yet.&lt;/p&gt;
    &lt;head rend="h5"&gt;General&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-p&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Command Palette&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;execute-extended-command&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;VSCode also binds F1 to this, but we currently leave that to the Emacs help prefixes.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-p&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Quick Open, Go to File&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;consult-locate&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode. Without a search term, VSCode suggests currently- and recently-opened files. Once a search term is entered, it searches for currently- and recently-opened files and the files in the currently opened project.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-n&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;New window/instance&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;make-frame&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-w&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Close window/instance&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-kill-buffer-noprompt&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-,&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;User Settings&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;customize&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-s&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Keyboard Shortcuts&lt;/cell&gt;
        &lt;cell&gt;We need to make an interface for this.&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Keys not mentioned in the VSCode keyboard shortcuts PDF&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;
          &lt;code&gt;&amp;lt;escape&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-escape&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Tries to provide VSCode behaviour while also acting as &lt;code&gt;C-g&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-a&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-select-all&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-o&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;treemacs-select-directory&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode. This should not just open a directory in Treemacs but also load the corresponding &lt;code&gt;desktop&lt;/code&gt; file for it.&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Basic editing&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-x&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Cut line (empty selection)&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;cua-cut-handler&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;empty selection behaviour is TODO&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-c&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Copy line (empty selection)&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;cua-copy-handler&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;empty selection behaviour is TODO&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;M-&amp;lt;up&amp;gt;&lt;/code&gt; / &lt;code&gt;M-&amp;lt;down&amp;gt;&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Move line up/down&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;drag-stuff-up&lt;/code&gt; / &lt;code&gt;drag-stuff-down&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-k&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Delete line&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;whole-line-or-region-kill-region&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-RET&lt;/code&gt; / &lt;code&gt;C-S-RET&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Insert line below/above&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;idemacs-open-line&lt;/code&gt; / &lt;code&gt;idemacs-open-line-above&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-\&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Jump to matching bracket&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-]&lt;/code&gt; / &lt;code&gt;C-[&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Indent/Outdent line&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;&amp;lt;home&amp;gt;&lt;/code&gt; / &lt;code&gt;&amp;lt;end&amp;gt;&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Go to beginning/end of line&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;move-beginning-of-line&lt;/code&gt; / &lt;code&gt;move-end-of-line&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;vanilla Emacs defaults&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-&amp;lt;home&amp;gt;&lt;/code&gt; / &lt;code&gt;C-&amp;lt;end&amp;gt;&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Go te beginning/end of file&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;beginning-of-buffer&lt;/code&gt; / &lt;code&gt;end-of-buffer&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;vanilla Emacs defaults&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-&amp;lt;up&amp;gt;&lt;/code&gt; / &lt;code&gt;C-&amp;lt;down&amp;gt;&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Scroll line up/down&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;scroll-down-line&lt;/code&gt; / &lt;code&gt;scroll-up-line&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;M-&amp;lt;prior&amp;gt;&lt;/code&gt; (Page Up) / &lt;code&gt;M-&amp;lt;next&amp;gt;&lt;/code&gt; (Page Down)&lt;/cell&gt;
        &lt;cell&gt;Scroll page up/down&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-S-[&lt;/code&gt; / &lt;code&gt;C-S-]&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Fold/unfold region&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-k C-[&lt;/code&gt; / &lt;code&gt;C-k C-]&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Fold/unfold all subregions&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-k C-0&lt;/code&gt; / &lt;code&gt;C-k C-j&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Fold/unfold all regions&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-c&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Add line comment&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-comment-line&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;In VSCode, subsequent presses add additional comment characters to the start of the line, whereas IDEmacs-VSCode just toggles the comment.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-u&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Remove line comment&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-comment-line&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;In VSCode, subsequent presses remove additional comment characters from the start of the line, whereas IDEmacs-VSCode just toggles the comment.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-/&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle line comment&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-a&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle block comment&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;M-z&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle word wrap&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;toggle-truncate-lines&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Rich languages editing&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-SPC&lt;/code&gt;, &lt;code&gt;C-i&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Trigger suggestion&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-SPC&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Trigger parameter hints&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-i&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Format document&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-f&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Format selection&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;&amp;lt;f12&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to definition&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;xref-find-definitions&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-&amp;lt;f10&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Peek definition&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k &amp;lt;f12&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open definition to the side&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-.&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Quick fix&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;S-&amp;lt;f12&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show references&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;xref-find-references&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;&amp;lt;f2&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Rename symbol&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-x&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Trim trailing whitespace&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;delete-trailing-whitespace&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k m&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Change file language&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Multi-cursor and selection&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;M-&amp;lt;down-mouse-1&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Insert cursor&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;mc/toggle-cursor-on-click&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;M-S-&amp;lt;up&amp;gt;&lt;/code&gt; / &lt;code&gt;M-S-&amp;lt;down&amp;gt;&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Insert cursor above/below&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;mc/mark-previous-lines&lt;/code&gt; / &lt;code&gt;mc/mark-next-lines&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-u&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Undo last cursor operation&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;M-S-i&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Insert cursor at end of each line selected&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;mc/edit-ends-of-lines&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-l&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Select current line&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-l&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Select all occurrences of current selection&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;mc/mark-all-like-this&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-&amp;lt;f2&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Select all occurrences of current word&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;mc/mark-all-words-like-this&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;M-S-&amp;lt;right&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Expand selection&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;er/expand-region&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;M-S-&amp;lt;left&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Shrink selection&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;er/contract-region&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;M-S-&amp;lt;down-mouse-1&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Column (box) selection&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-mouse-drag-rectangle&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Display&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;&amp;lt;f11&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle full screen&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;toggle-frame-fullscreen&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;vanilla Emacs defaults&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;M-S-0&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle editor layout (horizontal/vertical)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-\=&lt;/code&gt; / &lt;code&gt;C--&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Zoom in/out&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;text-scale-increase&lt;/code&gt; / &lt;code&gt;text-scale-decrease&lt;/code&gt;&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-b&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle sidebar visibility&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-e&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Explorer/ Toggle focus&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-treemacs&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-f&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Search&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-g&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Source Control&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;magit-status&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-d&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Debug&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-x&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show Extensions&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;list-packages&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;We need to write a better interface. Elpaca may be an option.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-h&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Replace in files&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;isearch-query-replace&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;We need an incremental, multi-file replacement UI.&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-j&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle Search details&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-c&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open new command prompt/terminal&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-h&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show output panel&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-v&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open Markdown preview&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k v&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open Markdown preview to the side&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k z&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Zen Mode (Esc Esc to exit)&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Search and replace&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-t&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show all symbols&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-g&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to line&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;consult-line&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-p&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to file&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;consult-locate&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-o&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to symbol&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;consult-imenu-multi&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-m&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show problems panel&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;&amp;lt;f8&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to next error or warning&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;S-&amp;lt;f8&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go to previous error or warning&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-&amp;lt;tab&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Navigate editor group history&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-M--&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go back&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S--&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Go forward&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-m&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Toggle Tab moves focus&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;Editor management&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-w&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Close editor&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-kill-buffer-noprompt&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k f&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Close folder&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-\&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Split editor&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;split-window-right&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;&lt;code&gt;C-1&lt;/code&gt; / &lt;code&gt;C-2&lt;/code&gt; / &lt;code&gt;C-3&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;Focus into 1st, 2nd, 3rd editor group&lt;/cell&gt;
        &lt;cell&gt;&lt;code&gt;select-window-1&lt;/code&gt;, &lt;code&gt;select-window-2&lt;/code&gt;, &lt;code&gt;select-window-3&lt;/code&gt;&lt;/cell&gt;
        &lt;cell&gt;FIXME - behaviour differs from VSCode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-&amp;lt;left&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Focus into previous editor group&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-&amp;lt;right&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Focus into next editor group&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-&amp;lt;prior&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Move editor left&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-&amp;lt;next&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Move editor right&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k &amp;lt;left&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Move active editor group left/up&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k &amp;lt;right&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Move active editor group right/down&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h5"&gt;File management&lt;/head&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Keybinding&lt;/cell&gt;
        &lt;cell role="head"&gt;VSCode description&lt;/cell&gt;
        &lt;cell role="head"&gt;IDEmacs-VSCode command&lt;/cell&gt;
        &lt;cell role="head"&gt;Notes&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-n&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;New file&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;untitled-new-buffer&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-o&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open file&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;find-file&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-s&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Save&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;save-buffer&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-s&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Save As&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;write-buffer&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-w&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Close&lt;/cell&gt;
        &lt;cell&gt;
          &lt;code&gt;idemacs-kill-buffer-noprompt&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k C-w&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Close all&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-t&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Reopen closed editor&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k Enter&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Keep preview mode editor open&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-&amp;lt;tab&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open next&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-S-&amp;lt;tab&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Open previous&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k p&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Copy path of active file&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k r&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Reveal active file in Explorer&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;C-k o&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Show active file in new window/instance&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Help needed!&lt;/head&gt;
    &lt;p&gt;Users -&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Use IDEmacs. Observe newbies as they use IDEmacs.&lt;/item&gt;
      &lt;item&gt;Provide your feedback in our Jabber/XMPP room or in the issues.&lt;/item&gt;
      &lt;item&gt;Tell others about IDEmacs!&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Developers -&lt;/p&gt;
    &lt;head rend="h3"&gt;Prior art&lt;/head&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;
        &lt;p&gt;https://github.com/seamus-brady/mousemacs&lt;/p&gt;
        &lt;p&gt;From the author -&lt;/p&gt;
        &lt;p&gt;I created this abomination so I could learn Lisp without having to worry too much about learning Emacs. It was originally envisaged for me to use and then switch off as I learned Emacs. But I actually liked it better and now it is my main editor.&lt;/p&gt;
        &lt;p&gt;Mousemacs works pretty much like Sublime Text or Visual Studio Code out of the box. But it has the full power of Emacs underneath. All I did was take all the most useful Emacs packages and wrap them in a mouse friendly distribution. It is not perfect and certainly not for everyone, but it might be useful for some. It comes with a simple plain theme but it is still Emacs.&lt;/p&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;How-to guides&lt;/head&gt;
    &lt;head rend="h3"&gt;How to temporarily try out a configuration&lt;/head&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;
        &lt;p&gt;Install required dependencies -&lt;/p&gt;
        &lt;list rend="ol"&gt;
          &lt;item&gt;Emacs v29 or better.&lt;/item&gt;
          &lt;item&gt;
            &lt;code&gt;git&lt;/code&gt;
          &lt;/item&gt;
          &lt;item&gt;DejaVu Sans Mono font&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Install optional dependencies -&lt;/p&gt;
        &lt;list rend="ol"&gt;
          &lt;item&gt;
            &lt;code&gt;grep&lt;/code&gt;
          &lt;/item&gt;
          &lt;item&gt;&lt;code&gt;locate&lt;/code&gt;or&lt;code&gt;plocate&lt;/code&gt;&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Clone the repository.&lt;/p&gt;
        &lt;code&gt;git clone https://codeberg.org/IDEmacs/IDEmacs&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Ensure you are connected to the Internet (so IDEmacs can download the necessary Emacs packages), and run IDEmacs.&lt;/p&gt;
        &lt;code&gt;emacs --init-directory=/path/to/IDEmacs/vscode&lt;/code&gt;
      &lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45941835</guid><pubDate>Sun, 16 Nov 2025 00:56:31 +0000</pubDate></item><item><title>$5 PlanetScale is live</title><link>https://planetscale.com/blog/5-dollar-planetscale-is-here</link><description>&lt;doc fingerprint="f75fe0f337b533ac"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;$5 PlanetScale is live&lt;/head&gt;
    &lt;p&gt;By Sam Lambert |&lt;/p&gt;
    &lt;p&gt;Two weeks ago we announced we'd soon be shipping $5 single node Postgres databases across our global fleet. Today we are announcing that this process is now complete.&lt;/p&gt;
    &lt;p&gt;You can now spin up single node PlanetScale Postgres databases starting at just $5/month. These non-HA databases are production-ready and a cost-effective option for startups, side projects, proof of concepts, or development. You get all of PlanetScale's developer-friendly features like Query Insights, schema recommendations, in-depth metrics, branching, and reliability, now starting at just $5 per month.&lt;/p&gt;
    &lt;p&gt;We are also lowering the price of development branches from $10 per month to $5 per month, making it more cost-effective to run additional staging and development environments.&lt;/p&gt;
    &lt;head rend="h2"&gt;Scaling single node&lt;/head&gt;
    &lt;p&gt;As your company or project grows, you can easily scale up on PlanetScale. Single node databases can vertically scale if you need to grow beyond the base $5 size. Just go to your cluster configuration page, select the cluster size you want, and click "Queue instance changes".&lt;/p&gt;
    &lt;p&gt;You can also switch to HA mode on that same page by selecting "Primary + multi-replica". This will add 2 replicas to your cluster for high availability. You can continue to upsize your cluster and add even more replicas as needed. And when the time comes that you need horizontal scale, we'll soon have Neki, our sharded Postgres solution.&lt;/p&gt;
    &lt;p&gt;This means you can start your business on PlanetScale and feel at ease knowing you'll never have to worry about a painful migration to a new database provider when you begin to hit scaling issues. PlanetScale runs some of the web's largest workloads, so you'll always be in great hands.&lt;/p&gt;
    &lt;head rend="h2"&gt;Get started&lt;/head&gt;
    &lt;p&gt;To get started, sign up for a PlanetScale account and select "Single node" during database creation. For single node pricing, see the pricing page.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45942462</guid><pubDate>Sun, 16 Nov 2025 03:14:19 +0000</pubDate></item><item><title>Hyundai Paywalls Brake Pads replacement on Ioniq 5 N</title><link>https://www.thedrive.com/news/replacing-brake-pads-on-a-hyundai-ioniq-5-n-requires-a-professional-mechanics-login</link><description>&lt;doc fingerprint="a549519fbd67a695"&gt;
  &lt;main&gt;
    &lt;p&gt;A 2025 Hyundai Ioniq 5 N owner was venting on Reddit recently about not being able to change his brake pads without specialized computer equipment. It sounds insane, but this is what new-car ownership is like in 2025. We did some digging and made contact with Hyundai to understand the situation and break it down for you—it’s a frustrating one.&lt;/p&gt;
    &lt;p&gt;Having to talk to computers to fix a car isn’t necessarily unique to the Korean automaker, but I fell into a rabbit hole of Hyundai maintenance research here, so that’ll be our focus for the moment.&lt;/p&gt;
    &lt;p&gt;Context for casual readers: Brake pad and rotor replacements are super basic car maintenance. You won’t need to do the job nearly as often on an electric car (thanks to regenerative braking), but even EV pads don’t last forever. On most cars, part of the job involves disconnecting or retracting the parking brake, which usually grabs the rear wheels. Many modern cars, and all EVs, have an electronic parking brake controlled by a computer signal, rather than a manually adjustable nut-and-cable situation. This is what sparked Redditor u/SoultronicPear’s justifiable frustration.&lt;/p&gt;
    &lt;p&gt;One more piece of stage-setting: Since electronic parking brakes are indeed common, many readily available diagnostic tools (pretty basic OBD scanners) can issue a retract-brake command to a car’s ECU. Still, you do need one with bi-directional test functionality. Remember that point—it will become significant again in a few paragraphs.&lt;/p&gt;
    &lt;p&gt;Apparently, no cheap scanner option worked on the original Reddit poster’s Ioniq 5 N. That led them on a journey of attempting to access commercial-grade car-repair gear, which was ultimately fruitless.&lt;/p&gt;
    &lt;p&gt;You can access a Hyundai EV’s diagnostic brain using the brand’s proprietary dealership hardware and software (it’s called GDS, and it is publicly buyable but costs about six grand) or a third-party aftermarket system running a J2534 program. J2534 is an interface standard designed by the SAE and mandated by the EPA that basically ensures ECUs from different car brands can speak the same language for the sake of independent repair shops.&lt;/p&gt;
    &lt;p&gt;Hyundai supports J2534 and recommends one of three machines for talking to its cars: CarDAQ Plus 3 (about $2,000), MTS 6531 (also about $2,000), and d-briDGe PRO (about $800). “…under no circumstances do we recommend the use of a non-approved J2534 device,” the company states. You would then also need a subscription to Hyundai’s J2534 Diagnostic Tool Software, which costs $60 a week (or less over longer time blocks). All this info is in .PDFs linked from Hyundai’s tech portal.&lt;/p&gt;
    &lt;p&gt;At this point, after spending about $2,000 on tools, you should be able to service your own Hyundai Ioniq brakes, but if you’re a DIYer, you still can’t. Written in red at the top of one of Hyundai’s many tech documents is this: “Access to Bi-Directional Tests and Special Functions require Diagnostic Professional or Vehicle Security Professional credential from NASTF.”&lt;/p&gt;
    &lt;p&gt;NASTF is the National Automotive Service Task Force. It exists “to identify and resolve gaps in service information, tool information, and training” between OEMs and independent shops (cool idea). It’s also the arbiter of things like lock coding and car credential management. To get scan-tool validation as a member, you need to be a professional mechanic.&lt;/p&gt;
    &lt;p&gt;And with that final roadblock, we can confirm that, no, a DIYer can not do their own brakes on a Hyundai Ioniq 5 N.&lt;/p&gt;
    &lt;p&gt;I’m guessing most of you reading this will now have the same thought I did—it does seem smart to have some regulation on sensitive data like the codes to your car locks, but what the heck, you should be able to do brake pads on a car you own. Or as Randy Marsh would have put it: “I’m sorry, I thought this was America!”&lt;/p&gt;
    &lt;p&gt;Naturally, I also dropped Hyundai a note about this directly. Here’s what the automaker told us:&lt;/p&gt;
    &lt;p&gt;“Hyundai is committed to supporting both our dealer network and independent repair facilities with safe, secure, and accessible service solutions. For vehicles equipped with electronic parking brakes, including the Ioniq 5 and Ioniq 5 N, the official repair procedure requires placing the rear calipers in service mode using either our Global Diagnostic System (GDS) or the J2534 application. This ensures proper functionality and customer safety. Hyundai recently expanded access through an update to our J2534 application, enabling aftermarket users to perform functions previously restricted by the GDS secure gateway. While authentication through NASTF is required for sensitive operations, this step helps maintain security and accountability. Our official dealer tool (GDS) is also available for purchase by anyone.&lt;/p&gt;
    &lt;p&gt;Hyundai is actively exploring ways to make routine maintenance easier for all customers while upholding safety standards.&lt;/p&gt;
    &lt;p&gt;“We appreciate the interest in DIY repairs and will continue working toward solutions that balance convenience with security.”&lt;/p&gt;
    &lt;p&gt;So after all that, we can address the Reddit thread title “Hyundai declares WAR on Right to Repair” as technically incorrect. Right-to-repair legislation prevents product manufacturers from hiding technology behind proprietary diagnostic tools, and this stuff is not restricted to the brand’s own equipment. So, technically, I think the company’s in the clear on the rules as-written. We can also add a layer of clarification to the Carscoops post on this that was headlined as “Apparently You Need Hyundai’s Permission To Change Your Own Brakes.” It’s not Hyundai’s permission you need, it’s the NASTF’s.&lt;/p&gt;
    &lt;p&gt;However, obviously, both Carscoops and the guy on Reddit were totally right in principle. A car repair task that has historically been totally DIY’able in a driveway is now relegated to shop-only because of technology. And that’s not good.&lt;/p&gt;
    &lt;p&gt;We focused on Hyundai here because this particular Reddit thread caught my eye and sent me on a research quest about this particular brand, but the Korean automaker is hardly the only company making it hard to mess with modern cars.&lt;/p&gt;
    &lt;p&gt;I understand, and even appreciate, automakers wanting to be careful with things like lock and engine-starting encryption. You definitely don’t want anybody to be able to download your car keys and make off with your vehicle, or do worse. But there’s got to be a better middle-ground than this. People should have unfettered access to the cars (and tractors, and tools) they own, plain and simple.&lt;/p&gt;
    &lt;p&gt;One last note: For anyone who found this article because you, too, are trying to get a modern car’s electronic brake to release for service but aren’t having luck … I did find this one tool that might be able to override the existing software. But I’m making no endorsement of it whatsoever—I’ve never used it and have no idea if it works or if using it might trigger any unintended consequences. Use at your own risk (but report back in the comments if you’ve tried it).&lt;/p&gt;
    &lt;p&gt;Got a tip? Drop us a line at tips@thedrive.com.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</description><guid isPermaLink="false">https://news.ycombinator.com/item?id=45942518</guid><pubDate>Sun, 16 Nov 2025 03:29:48 +0000</pubDate></item></channel></rss>