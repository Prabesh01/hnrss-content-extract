<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><id>hnrss.org/frontpage</id><title>Hacker News: Front Page</title><updated>2025-11-16T23:33:49.477770+00:00</updated><link href="https://news.ycombinator.com/" rel="alternate"/><link href="https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml" rel="self"/><generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator><subtitle>Hacker News RSS</subtitle><entry><id>https://news.ycombinator.com/item?id=45945587</id><title>Heretic: Automatic censorship removal for language models</title><updated>2025-11-16T23:33:57.367036+00:00</updated><content>&lt;doc fingerprint="3d151bbcad3e9dad"&gt;
  &lt;main&gt;
    &lt;p&gt;Heretic is a tool that removes censorship (aka "safety alignment") from transformer-based language models without expensive post-training. It combines an advanced implementation of directional ablation, also known as "abliteration" (Arditi et al. 2024), with a TPE-based parameter optimizer powered by Optuna.&lt;/p&gt;
    &lt;p&gt;This approach enables Heretic to work completely automatically. Heretic finds high-quality abliteration parameters by co-minimizing the number of refusals and the KL divergence from the original model. This results in a decensored model that retains as much of the original model's intelligence as possible. Using Heretic does not require an understanding of transformer internals. In fact, anyone who knows how to run a command-line program can use Heretic to decensor language models.&lt;/p&gt;
    &lt;p&gt;Running unsupervised with the default configuration, Heretic can produce decensored models that rival the quality of abliterations created manually by human experts:&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="3"&gt;
        &lt;cell role="head"&gt;Model&lt;/cell&gt;
        &lt;cell role="head"&gt;Refusals for "harmful" prompts&lt;/cell&gt;
        &lt;cell role="head"&gt;KL divergence from original model for "harmless" prompts&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;google/gemma-3-12b-it (original)&lt;/cell&gt;
        &lt;cell&gt;97/100&lt;/cell&gt;
        &lt;cell&gt;0 (by definition)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;mlabonne/gemma-3-12b-it-abliterated-v2&lt;/cell&gt;
        &lt;cell&gt;3/100&lt;/cell&gt;
        &lt;cell&gt;1.04&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="3"&gt;
        &lt;cell&gt;huihui-ai/gemma-3-12b-it-abliterated&lt;/cell&gt;
        &lt;cell&gt;3/100&lt;/cell&gt;
        &lt;cell&gt;0.45&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;p-e-w/gemma-3-12b-it-heretic (ours)&lt;/cell&gt;
        &lt;cell&gt;3/100&lt;/cell&gt;
        &lt;cell&gt;0.16&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;The Heretic version, generated without any human effort, achieves the same level of refusal suppression as other abliterations, but at a much lower KL divergence, indicating less damage to the original model's capabilities. (You can reproduce those numbers using Heretic's built-in evaluation functionality, e.g. &lt;code&gt;heretic --model google/gemma-3-12b-it --evaluate-model p-e-w/gemma-3-12b-it-heretic&lt;/code&gt;.
Note that the exact values might be platform- and hardware-dependent.
The table above was compiled using PyTorch 2.8 on an RTX 5090.)&lt;/p&gt;
    &lt;p&gt;Heretic supports most dense models, including many multimodal models, and several different MoE architectures. It does not yet support SSMs/hybrid models, models with inhomogeneous layers, and certain novel attention systems.&lt;/p&gt;
    &lt;p&gt;You can find a collection of models that have been decensored using Heretic on Hugging Face.&lt;/p&gt;
    &lt;p&gt;Prepare a Python 3.10+ environment with PyTorch 2.2+ installed as appropriate for your hardware. Then run:&lt;/p&gt;
    &lt;code&gt;pip install heretic-llm
heretic Qwen/Qwen3-4B-Instruct-2507
&lt;/code&gt;
    &lt;p&gt;Replace &lt;code&gt;Qwen/Qwen3-4B-Instruct-2507&lt;/code&gt; with whatever model you want to decensor.&lt;/p&gt;
    &lt;p&gt;The process is fully automatic and does not require configuration; however, Heretic has a variety of configuration parameters that can be changed for greater control. Run &lt;code&gt;heretic --help&lt;/code&gt; to see available command-line options,
or look at &lt;code&gt;config.default.toml&lt;/code&gt; if you prefer to use
a configuration file.&lt;/p&gt;
    &lt;p&gt;At the start of a program run, Heretic benchmarks the system to determine the optimal batch size to make the most of the available hardware. On an RTX 3090, with the default configuration, decensoring Llama-3.1-8B takes about 45 minutes.&lt;/p&gt;
    &lt;p&gt;After Heretic has finished decensoring a model, you are given the option to save the model, upload it to Hugging Face, chat with it to test how well it works, or any combination of those actions.&lt;/p&gt;
    &lt;p&gt;Heretic implements a parametrized variant of directional ablation. For each supported transformer component (currently, attention out-projection and MLP down-projection), it identifies the associated matrices in each transformer layer, and orthogonalizes them with respect to the relevant "refusal direction", inhibiting the expression of that direction in the result of multiplications with that matrix.&lt;/p&gt;
    &lt;p&gt;Refusal directions are computed for each layer as a difference-of-means between the first-token residuals for "harmful" and "harmless" example prompts.&lt;/p&gt;
    &lt;p&gt;The ablation process is controlled by several optimizable parameters:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;direction_index&lt;/code&gt;: Either the index of a refusal direction, or the special value&lt;code&gt;per layer&lt;/code&gt;, indicating that each layer should be ablated using the refusal direction associated with that layer.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;max_weight&lt;/code&gt;,&lt;code&gt;max_weight_position&lt;/code&gt;,&lt;code&gt;min_weight&lt;/code&gt;, and&lt;code&gt;min_weight_distance&lt;/code&gt;: For each component, these parameters describe the shape and position of the ablation weight kernel over the layers. The following diagram illustrates this:&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Heretic's main innovations over existing abliteration systems are:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The shape of the ablation weight kernel is highly flexible, which, combined with automatic parameter optimization, can improve the compliance/quality tradeoff. Non-constant ablation weights were previously explored by Maxime Labonne in gemma-3-12b-it-abliterated-v2.&lt;/item&gt;
      &lt;item&gt;The refusal direction index is a float rather than an integer. For non-integral values, the two nearest refusal direction vectors are linearly interpolated. This unlocks a vast space of additional directions beyond the ones identified by the difference-of-means computation, and often enables the optimization process to find a better direction than that belonging to any individual layer.&lt;/item&gt;
      &lt;item&gt;Ablation parameters are chosen separately for each component. I have found that MLP interventions tend to be more damaging to the model than attention interventions, so using different ablation weights can squeeze out some extra performance.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I'm aware of the following publicly available implementations of abliteration techniques:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;AutoAbliteration&lt;/item&gt;
      &lt;item&gt;abliterator.py&lt;/item&gt;
      &lt;item&gt;wassname's Abliterator&lt;/item&gt;
      &lt;item&gt;ErisForge&lt;/item&gt;
      &lt;item&gt;Removing refusals with HF Transformers&lt;/item&gt;
      &lt;item&gt;deccp&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Note that Heretic was written from scratch, and does not reuse code from any of those projects.&lt;/p&gt;
    &lt;p&gt;The development of Heretic was informed by:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The original abliteration paper (Arditi et al. 2024)&lt;/item&gt;
      &lt;item&gt;Maxime Labonne's article on abliteration, as well as some details from the model cards of his own abliterated models (see above)&lt;/item&gt;
      &lt;item&gt;Jim Lai's article describing "projected abliteration"&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Copyright © 2025 Philipp Emanuel Weidmann (pew@worldwidemann.com)&lt;/p&gt;
    &lt;p&gt;This program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.&lt;/p&gt;
    &lt;p&gt;This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Affero General Public License for more details.&lt;/p&gt;
    &lt;p&gt;You should have received a copy of the GNU Affero General Public License along with this program. If not, see https://www.gnu.org/licenses/.&lt;/p&gt;
    &lt;p&gt;By contributing to this project, you agree to release your contributions under the same license.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/p-e-w/heretic"/><published>2025-11-16T15:00:24+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45945750</id><title>De Bruijn Numerals</title><updated>2025-11-16T23:33:56.805741+00:00</updated><content>&lt;doc fingerprint="ef45da1b4963ab68"&gt;
  &lt;main&gt;
    &lt;p&gt;A method that I have not seen yet is an encoding by reference depth. Specifically, I refer to a nested de Bruijn index that, by itself, encodes the number:&lt;/p&gt;
    &lt;p&gt;⟨n⟩d=λS(n)n&lt;/p&gt;
    &lt;p&gt;For example, the decimal number 4 would be encoded as ⟨4⟩d=λ54. Isn’t this just so elegant? Because I could not find a name for the encoding, I call them de Bruijn numerals.&lt;/p&gt;
    &lt;p&gt;However, during my experiments with this encoding, I made an unfortunate discovery. While reading up on the theory behind optimal reduction in some ancient book I found in the library, I stumbled upon the work “Some Unusual Numeral Systems” by Wadsworth (1980), which was coincidentally published in the same book as Lévy’s legendary paper on optimal reduction. In this work, Christopher Wadsworth analyzed different properties of numeral systems and the requirements they have to fulfill to be useful for arithmetic.&lt;/p&gt;
    &lt;p&gt;Specifically, he calls a numeral system adequate if it allows for a successor (succ) function, predecessor (pred) function, and a zero? function yielding a true (false) encoding when a number is zero (or not). He then went on to show that there can not exist an adequate numeral system encoding numbers as ⟨n⟩e=λknEn, with En being a normal form and kn increasing indefinitely with n. And, to be fair, it makes sense: An increasing n will require an increasing number of applications scaling with kn – thus requiring a zero? function to know the number already. Otherwise, the increasing abstractions can not be “collapsed” to terms encoding booleans, as they must have a constant number of abstractions. (read his paper for more details)&lt;/p&gt;
    &lt;p&gt;Unfortunately, a zero? function is required in order to convert any number from this numeral system to another system. So, even with these limitations, can the “de Bruijn numerals” still be useful for anything? What do other arithmetic operations look like?&lt;/p&gt;
    &lt;p&gt;Arithmetic&lt;/p&gt;
    &lt;p&gt;The simplest operation is the succ function, which is minimally defined as succ=λ321=bk&lt;/p&gt;
    &lt;p&gt;Proof&lt;/p&gt;
    &lt;p&gt;To prove: ∀n∈N0:succ⟨n⟩d⇝∗⟨S(n)⟩d&lt;/p&gt;
    &lt;p&gt;Proof by β-reduction (⇝): succ⟨n⟩d=⇝⇝(λ321)λS(n)nλ2(λS(n)n)1λ2λnS(n)=λS(S(n))S(n)=⟨S(n)⟩d&lt;/p&gt;
    &lt;p&gt;The pred function can be implemented similarly: pred=λ2100=w&lt;/p&gt;
    &lt;p&gt;Proof&lt;/p&gt;
    &lt;p&gt;To prove: ∀n∈N0:pred⟨S(n)⟩d⇝∗⟨n⟩d&lt;/p&gt;
    &lt;p&gt;Proof by β-reduction (⇝): pred⟨S(n)⟩d=⇝⇝⇝(λ2100)λS(S(n))S(n)λ(λS(S(n))S(n))00λ(λS(n)S(n))0λλnn=λS(n)n=⟨n⟩d&lt;/p&gt;
    &lt;p&gt;They both use the fact that the outermost abstraction is always bound to the inner de Bruijn index. Substituting the index with a reference to a fresh abstraction results in incrementing/decrementing behavior (utilizing the shift procedure of β-reduction with de Bruijn indices)&lt;/p&gt;
    &lt;p&gt;One problem of pred is its application to ⟨0⟩d. Optimally, pred should probably return λ10 again, but in this case the ω combinator λ100 is returned. I’m not sure if there exists a totalpred function for this encoding.&lt;/p&gt;
    &lt;p&gt;Now, normally further operations could be defined by recursion ending with a truthy zero?. Of course, this is not an option for this encoding.&lt;/p&gt;
    &lt;p&gt;So instead, here’s an incredibly tiny self-contained addition function: add=λ32(10)=b&lt;/p&gt;
    &lt;p&gt;Proof&lt;/p&gt;
    &lt;p&gt;To prove: ∀a,b∈N0:add⟨a⟩d⟨b⟩d⇝∗⟨a+b⟩d&lt;/p&gt;
    &lt;p&gt;Proof by β-reduction (⇝): add⟨a⟩d⟨b⟩d=⇝⇝⇝⇝(λ32(10))(λS(a)a)λS(b)b(λ2(λS(a)a)(10))λS(b)bλ1(λS(a)a)(λS(b)b0)λ1(λS(a)a)(λbb)λ1λaλb[a+b]=λS(a+b)[a+b]=⟨a+b⟩d&lt;/p&gt;
    &lt;p&gt;Isn’t it magical? This is one of the reasons I still like the encoding: it abuses the de Bruijn shifting so elegantly! It’s basically like a metacircular numeral system since it hijacks the host reducer’s computations!&lt;/p&gt;
    &lt;p&gt;On the other hand, I was not yet able to come up with further such elegant functions (maybe you can help?) – instead, I came up with some hybrid implementations which use multiple different numeral systems (in this case, Church’s).&lt;/p&gt;
    &lt;p&gt;Hybrid&lt;/p&gt;
    &lt;p&gt;A Church numeral is not that different from a de Bruijn numeral, as it turns out. It is defined like this:&lt;/p&gt;
    &lt;p&gt;⟨n⟩c=λ10∘⋯∘0n&lt;/p&gt;
    &lt;p&gt;Converting (“apostatizing”) a Church numeral to a de Bruijn numeral is done using the conv function:&lt;/p&gt;
    &lt;p&gt;conv=λ0k=tk&lt;/p&gt;
    &lt;p&gt;With the internal structure of the Church encoding, this basically comes down to applying succn−1 times on k=⟨1⟩d, as succ=bk.&lt;/p&gt;
    &lt;p&gt;Proof&lt;/p&gt;
    &lt;p&gt;To prove: ∀n∈N0:conv⟨n⟩c⇝∗⟨n⟩d&lt;/p&gt;
    &lt;p&gt;Proof by beta reduction (⇝): conv⟨n⟩c=⇝⇝⇝succ(λ0k)λ0∘⋯∘0n(λ0∘⋯∘0n)kk∘⋯∘kn=bk(bk(…(bk⟨1⟩d)…)λS(n)n=⟨n⟩d&lt;/p&gt;
    &lt;p&gt;In general, assuming an encoding e of ⟨n⟩e has a zero?* and pred* function, a universal conversion function conv* can be defined:&lt;/p&gt;
    &lt;p&gt;conv*=fix(λ3zero?*01(2(succ1)(pred*0)))⟨0⟩d&lt;/p&gt;
    &lt;p&gt;The function consists of fairly typical fix-recursion using a left case (zero?01) to return the constructed term if the input number is zero and a right case (2(succ1)(pred*0)) that calls the fix-induced function recursively with the incremented de Bruijn numeral and decremented input number.&lt;/p&gt;
    &lt;p&gt;∗∗∗&lt;/p&gt;
    &lt;p&gt;Anyway, with the insight on Church numerals, we find that the de Bruijn numerals are defined from nothing else than ⟨a⟩d=k∘⋯∘ka. If we now, say, want to multiply a number with a different number b, this composition sequence has to be composed b-times. mult⟨a⟩d⟨a⟩d⇝∗k∘⋯∘ka∘⋯∘k∘⋯∘kab And – you might have guessed it – the n-times composing Church encoding does exactly that: ⟨a⟩c⟨b⟩d⇝∗⟨a⋅b⟩d&lt;/p&gt;
    &lt;p&gt;Indeed, any operation on Church numerals can now be made to return a de Bruijn numeral, simply by applying ⟨1⟩d. Others can be transformed internally such that they also use de Bruijn operations: fac=λ10(λ20(1(λ221(10))))(λ1⟨1⟩d)ifac⟨5⟩c⇝∗⟨120⟩d Of course – still – the resulting de Bruijn numerals can never be converted back to an encoding like Church’s.&lt;/p&gt;
    &lt;p&gt;Next, an actual problem where I use de Bruijn numerals in practice all the time!&lt;/p&gt;
    &lt;p&gt;Projections&lt;/p&gt;
    &lt;p&gt;I always found Church n-tuples really hard to work with. This is because selecting the ith element – again – requires an increasing number of abstractions! In fact their behavior is so similar that I could only now make use of them after gaining insight about de Bruijn numerals. They are defined like this: tuplen=λS(n)0n[n−1]…1[x1,x2,…,xn]c=tuplenx1…xn⇝∗λ10x1x2…xn Retrieving the ith element of an n-tuple would then look something like this: selectni[x1,x2,…,xn]c⇝∗xi, which of course must reject all terms but xi, therefore requiring an application of λS(n)i to the tuple. Specifically, with Church numerals as parameters, selector⟨n⟩c⟨i⟩c⇝∗λS(n)i.&lt;/p&gt;
    &lt;p&gt;Luckily, such a term can be constructed using de Bruijn numerals. The idea is simple: First, we apply ⟨i⟩d to ⟨n⟩d, such that we get λnλS(i)i. Then, we remove i abstractions such that it yields λS(n)i. Using i to pop the abstractions, we get: selector=λ20(ti)(1k(0k)) (note that ⟨n⟩c(ta)⇝∗λ10aa…an)&lt;/p&gt;
    &lt;p&gt;Finally, with this knowledge, Church n-tuples can be used almost like Church lists. Some further functions: pushpop0pop1popnmove=λ31(02)=q’’=λ21(λ11)=λ21(λ221)=λ31(2bk0)=λ31(λ13b(λ101)1)&lt;/p&gt;
    &lt;p&gt;where move moves the first element to the nth position, without knowing the size of the tuple! move⟨i⟩c[x1,…,xn]⇝∗[x2,…,x1,…xn]&lt;/p&gt;
    &lt;p&gt;Notably, something like move or pop-n generally requires recursion for Church lists. At the same time for Church n-tuples, something as simple as counting the elements is not possible for the same reasons as a zero? function for de Bruijn numerals, as the counting function would have to ignore (and count) n applied arguments.&lt;/p&gt;
    &lt;p&gt;(see also a Forth/postscript-like stack language DSL in bruijn using this stack encoding here)&lt;/p&gt;
    &lt;p&gt;Thanks for reading. Please let me know if you know of – or come up with! – other/better operations for de Bruijn numerals. Contact me via email. Support on Ko-fi. Subscribe on RSS. Follow on Mastodon.&lt;/p&gt;
    &lt;p&gt;Wadsworth, Christopher. 1980. “Some Unusual λ-Calculus Numeral Systems.” To HB Curry: Essays on Combinatory Logic, Lambda Calculus; Formalism.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://text.marvinborner.de/2023-08-22-22.html"/><published>2025-11-16T15:22:16+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45945784</id><title>FPGA Based IBM-PC-XT</title><updated>2025-11-16T23:33:56.653551+00:00</updated><content>&lt;doc fingerprint="a75e788d5dab06ad"&gt;
  &lt;main&gt;
    &lt;p&gt;Recently I undertook a hobby project to recreate an IBM XT Personal Computer from the 1980s using a mix of authentic parts and modern technology. I had a clear goal in mind: I wanted to be able to play the EGA version of Monkey Island 1 on it, with no features missing. This means I need mouse support, hard drive with write access for saving the game, and Adlib audio, my preferred version of the game’s musical score.&lt;/p&gt;
    &lt;p&gt;The catalyst for this project was the discovery that there are low-power versions of the NEC V20 CPU available (UPD70108H), which is compatible with the Intel 8088 used in the XT. Being a low-power version significantly simplifies its connection to an FPGA, which typically operate with 3.3-volt IO voltages. Coupled with a low-power 1MB SRAM chip (CY62158EV30) to provide the XT with its 640KB of memory, and I started to have the bones of a complete system worked out.&lt;/p&gt;
    &lt;p&gt;I started off by designing the hardware of the system, which would then serve as my development board while I worked on the software/gateware. The following features were added:&lt;lb/&gt;– DIP-40 socket for an low power NEC V20 CPU&lt;lb/&gt;– 1MB SRAM chip for the system memory&lt;lb/&gt;– An icesugar-pro FPGA board with a Lattice LFE5U-25F&lt;lb/&gt;– Dual PS/2 connectors for keyboard and mouse&lt;lb/&gt;– Micro SD card socket to act as a Fixed Disk&lt;lb/&gt;– An authentic YM3014B digital-to-analogue converter for audio&lt;lb/&gt;– A Piezo speaker that can be driven by the programmable-interval-timer for system bleeps&lt;lb/&gt;– Lastly, a reset switch and some status LEDs&lt;/p&gt;
    &lt;p&gt;I drew up my design using the EasyEDA CAD software as I’m already familiar with it, and it has really good integration with the JLCPCB PCB assembly service. Some of the components in the design are too tricky for me to hand solder by myself. I did however have to solder the SRAM chips once the boards arrived since they were not stocked by LCSC so I had to source them elsewhere.&lt;/p&gt;
    &lt;p&gt;The first step was to write a bus controller for the processor. The V20 CPU clock is more forgiving than an original i8088 since its can be run right down to 0hz and its uses a regular 50% duty cycle. The external interface for an 8088 CPU operates in terms of bus cycles. At that start of a bus cycle the CPU asserts some pins to let everyone know what it wants to try and do… read memory, write to IO, etc. Each type of bus cycle follows a specific sequence of events that happen over a number of clock cycles. It was straight forward to make a state machine that could detect the start of a bus-cycle, figure out what kind it was, and then produce or consume the data as needed by the CPU. Key here, was to make sure that all of the timing requirements were met, so that signals the CPU generates are sampled at the correct time, and signals the CPU requires have been driven correctly before the CPU reads them.&lt;/p&gt;
    &lt;p&gt;My first test for the bus controller was to write a simple program using NASM to be executed on the V20, with a simple goal… it will flash an LED mapped to an IO port address. Simple, but a blinking LED seems to be the hardware equivalent of the software hello-world. For the initial version, the program was simply loaded into a FPGA block ram and used directly as the system memory.&lt;/p&gt;
    &lt;p&gt;Later, I used a more complex approach for memory accesses. The bios, for example, is loaded into an FPGA block ram, so that CPU memory reads will come from that rather than the system SRAM chip. Video memory is implemented a differently still. CPU memory writes are passed to both the video memory block ram and system SRAM, but CPU reads alway come from only the system SRAM. This then means that I have a spare read port on the video block ram that can then be used by the VGA signal generator to display the video memory contents.&lt;/p&gt;
    &lt;p&gt;After my success with a blinky program, I installed a virtual copy of Supersoft/Landmark Diagnostic ROM in place of the BIOS and wrote a basic CGA adapter for video output. I was then able to use the diagnostic ROM to test the SRAM memory interface as well as some of the peripherals required by the XT such as the programmable-interval-timer (i8253) and programmable-interrupt-controller (i8259).&lt;/p&gt;
    &lt;p&gt;Once I was confident the basic system was stable I then swaped in a generic XT bios from https://www.phatcode.net in place of the diagnostic ROM. It was amazing to see the bios start to boot up, and complain when it couldnt find a boot disk.&lt;/p&gt;
    &lt;p&gt;Fixed Disk access is achieved by making a small Verilog SPI controller accessible to the CPU via some unused IO ports. I then wrote an option ROM to handle BIOS INT13H (disk service) calls, which had routines that could issue commands to the SD-Card over SPI. The tricky part for me was learning the SD card protocol and then writing 8088 assembly to perform the correct operations. The mapping itself is very straightforward as both SD card and DOS assume 512byte sectors.&lt;/p&gt;
    &lt;p&gt;I saved a lot of time when writing the option ROM by developing and debugging the code using a software emulator of the board that I cobbled together. Some historic sources for it can be found here: https://github.com/bit-hack/iceXt/tree/master/misc/emulator&lt;/p&gt;
    &lt;p&gt;Perhaps the hardest part of the project was, surprisingly, getting the mouse to work. Mice of the XT era would typically be connected to a UART serial port. I had however placed a PS/2 connector on the hardware board, and those mice use a very different protocol. In my efforts to support a mouse I startedto learn about PS/2 devices, however I would need to implement a much more complex keyboard controller, and the BIOS I was also lacked support for such modern peripherals, and I just plain didn’t feel like I understood everything required to get that working.&lt;/p&gt;
    &lt;p&gt;What makes it tricky is that PS/2 is a bidirectional protocol, and the mouse has to be asked by the PC to broadcast updates, otherwise we will not receive any. That added a lot more complexity than I was wanting. The keyboard on the otherhand is relatively easy to work with and send out keypresses without having to be asked.&lt;/p&gt;
    &lt;p&gt;I chose an alternative. I wrote some Verilog code to talk directly to the PS/2 mouse, which would early in the boot process tell it to start sending over mouse events, as they have to be requested. When the bridge then receives mouse events, it translates and presents them to the computer via a pseudo UART peripheral. I had implemented a basic PS/2 mouse to Serial mouse bridge. A little convoluted but it works really well.&lt;/p&gt;
    &lt;p&gt;During this process, I lobotomised a spare mouse by attaching a logic analyser the clk and dat pads inside the mouse. I was then able to capture the communications between a real PC and the mouse and observe it during use. This gave me invaluable insight into exactly how the protocol worked, and what a real mouse expected.&lt;/p&gt;
    &lt;p&gt;I also found that having real waveforms to look at made it much easier to test components of my design in verilator, a Verilog simulator, as I could closely model the stimulus it should see when running in the FPGA.&lt;/p&gt;
    &lt;p&gt;Just like the XT, one of the channels of the PIT timer is used to drive the internal speaker to produce bleep and bloop sounds. I extended this by having disk accesses trigger short pulses out of the peizo speaker as a crude emulation of a hard disk seeking. I think it really adds to the experience when you can hear your computer thinking away while doing its tasks. When it comes to music, the internal PC speaker quickly looses its charm however. Writing an YM3812 implementation (the FM chip used in the Adlib card) is beyond my skill level but thankfully Jose Tejada has written an amazing open source version that I was able to pull into my project; https://github.com/jotego/jtopl.&lt;/p&gt;
    &lt;p&gt;I wrote a small Verilog module to take the PCM sample data generated by this soft YM3812 and convert it to the unusual 3:10 floating point format required by the YM3014 DAC on my board. This is very similar to the operation of the real Adlib hardware, where the YM3812 generates and sends serial audio data to a YM3014 DAC chip. A modern I2S DAC may have been cleaner, but having a chance to play with the authentic DAC seemed a little more fun to me. All of this combined results in the same lovely crisp FM tones I was so fond of when I played games on my PC growing up.&lt;/p&gt;
    &lt;p&gt;A lot of other elements of this project have been glossed over or omitted, such as support for CGA and EGA graphics. There is even a USB to UART bridge for sending files from a host PC directly to the SD card. I also made some nice clear acrylic panels on a CNC machine to round off the design and protect the bare PCB.&lt;/p&gt;
    &lt;p&gt;A video demo is shown below.&lt;lb/&gt;Unfortunately there is a ton of screen tearing due to the phase between the monitor and my camera. It isn’t visible in person.&lt;/p&gt;
    &lt;p&gt;Source code, schematics and gerber files are available on github here: https://github.com/bit-hack/iceXt&lt;/p&gt;
    &lt;p&gt;Thanks for reading!&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://bit-hack.net/2025/11/10/fpga-based-ibm-pc-xt/"/><published>2025-11-16T15:26:24+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45946865</id><title>I finally understand Cloudflare Zero Trust tunnels</title><updated>2025-11-16T23:33:56.097065+00:00</updated><content>&lt;doc fingerprint="a5b8a71e23286293"&gt;
  &lt;main&gt;
    &lt;p&gt;A while ago, after frustration with Tailscale in environments where it couldn’t properly penetrate NAT/firewall and get a p2p connection, I decided to invest some time into learning something new: Cloudflare Zero Trust + Warp.&lt;/p&gt;
    &lt;p&gt;There are so many new concepts, but after way too long, I can finally say that I understand Cloudflare Zero Trust Warp now. I am a full-on Cloudflare Zero Trust with Warp convert, and while I still have Tailscale running in parallel, almost everything I do now is going through Zero Trust tunnels.&lt;/p&gt;
    &lt;p&gt;This post is an explanation of the basic concepts, because I’m sure others will have similar issues wrapping their head around it.&lt;/p&gt;
    &lt;head rend="h4"&gt;Why tho?&lt;/head&gt;
    &lt;p&gt;Why would you even sink so much time into learning this? What does it give you?&lt;/p&gt;
    &lt;p&gt;Argo tunnels through Zero Trust allow you to do a bunch of really cool things:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Connect private networks together - can be home networks, can be kubernetes clusters, you can create tunnels to and from every infra&lt;/item&gt;
      &lt;item&gt;Expose private services to the public, on public hostnames, no matter where they are running. You could even put your router running at 192.168.1.1 on the internet, accessible to everyone, no Warp client required&lt;/item&gt;
      &lt;item&gt;Create fully private networks with private IPs (10.x.x.x) that only resolve when Warp is connected, to services you specify&lt;/item&gt;
      &lt;item&gt;Quickly expose a public route to any service running locally or on any server, for quick development, testing webhooks or giving coworkers a quick preview&lt;/item&gt;
      &lt;item&gt;Create a fully private network running at home that’s only available when you’re connected to the Warp VPN client, or only to you, reachable anywhere&lt;/item&gt;
      &lt;item&gt;No worries about NAT, everything goes through the Cloudflare network, no direct p2p connection required&lt;/item&gt;
      &lt;item&gt;Add very granular access policies on who can access what - what login method does the user need, which email addresses are allowed. Allow bots and server-to-server exceptions with service access tokens.&lt;list rend="ul"&gt;&lt;item&gt;Does the user need to have Warp running? Does he need to be enrolled in Zero Trust? Does he need some special permission flag?&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Authenticate to SSH servers through Zero Trust access policies without the need of SSH keys. Just connect Warp, type &lt;code&gt;ssh host&lt;/code&gt;and you’re logged in&lt;list rend="ul"&gt;&lt;item&gt;Close public SSH ports completely to only allow login through Warp&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Get the benefits of Cloudflare VPN edge routing on top (similar to 1.1.1.1 Warp+)&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Quickie: Cloudflare Zero Trust vs Tailscale&lt;/head&gt;
    &lt;p&gt;To get this out of the way:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Tailscale: peer-to-peer, uses NAT and firewall penetration methods to establish p2p connections. If not possible, it goes through central relay servers. Absolute best speed and latency if a connection is established.&lt;/item&gt;
      &lt;item&gt;Cloudflare: All traffic (with the exception of warp-to-warp routing, which is p2p) goes through Cloudflare’s edge network. So even SSH-ing into your local router will hop through Cloudflare servers. This adds latency, but no issues with NAT at all.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Cloudflared != Warp&lt;/head&gt;
    &lt;p&gt;Cloudflare has 2 tools available: Warp Client and Cloudflared. They interact with each other and have similarities in some areas but are not the same.&lt;/p&gt;
    &lt;p&gt;Warp Client&lt;/p&gt;
    &lt;p&gt;The tool that connects you to the Cloudflare network. This is the thing that you configure to add clients into your Zero Trust network and enforces policies.&lt;/p&gt;
    &lt;p&gt;Usually this runs on clients, but can also run on servers.&lt;/p&gt;
    &lt;p&gt;Warp client also supports warp-to-warp routing which is a true p2p connection similar to Tailscale.&lt;/p&gt;
    &lt;p&gt;Cloudflared&lt;/p&gt;
    &lt;p&gt;The thing that creates a tunnel and adds it to the Zero Trust network.&lt;/p&gt;
    &lt;p&gt;Most commonly you run this on servers to expose tunnels into your network, but you can also run it on clients.&lt;/p&gt;
    &lt;p&gt;On the client side you can use &lt;code&gt;cloudflared access&lt;/code&gt; to establish a connection with other things in your Zero Trust network.&lt;/p&gt;
    &lt;p&gt;Can also create one-time-use tunnels that aren’t connected to the Zero Trust network. Good for testing.&lt;/p&gt;
    &lt;head rend="h2"&gt;Tunnels, Routes, Targets&lt;/head&gt;
    &lt;p&gt;This took me the longest to understand. Zero Trust allows you to configure Tunnels, Routes and Targets; here’s how they interplay.&lt;/p&gt;
    &lt;head rend="h3"&gt;Tunnels&lt;/head&gt;
    &lt;p&gt;The most important part of your setup. Tunnels are deployed through &lt;code&gt;cloudflared&lt;/code&gt; and are simply an exit for traffic. Think of it as a literal tunnel that has its end somewhere.&lt;/p&gt;
    &lt;p&gt;Tunnels are deployed to infrastructure in the target network. So if you have a home network with 192.168.1.1/24, you want to deploy &lt;code&gt;cloudflared&lt;/code&gt; on any machine that’s always on and within that network. It can be your router, or your Raspi, it doesn’t matter.&lt;/p&gt;
    &lt;p&gt;For server-hosted services, you can have a tunnel on your main dev server, on a server, or on a pod in your Kubernetes cluster.&lt;/p&gt;
    &lt;p&gt;Now you have an opening into these networks through Warp/Argo tunnels.&lt;/p&gt;
    &lt;head rend="h4"&gt;Configuring tunnels&lt;/head&gt;
    &lt;p&gt;You can either configure tunnels through the Zero Trust UI by “adopting” them, or configure them in the &lt;code&gt;/etc/cloudflared/config.yml&lt;/code&gt; config on the machine itself. Personal preference, I usually configure them on the machine itself.&lt;/p&gt;
    &lt;p&gt;The config specifies where a request should get routed to when it arrives at the tunnel. So the tunnel knows what to do with it.&lt;/p&gt;
    &lt;p&gt;In this config we tell cloudflared to route traffic arriving at this tunnel for hostname &lt;code&gt;gitlab.widgetcorp.tech&lt;/code&gt; to localhost:80, and &lt;code&gt;gitlab-ssh&lt;/code&gt; to the local SSH server.&lt;/p&gt;
    &lt;code&gt;❯ cat /etc/cloudflared/config.yml
tunnel: a2f17e27-cd4d-4fcd-b02a-63839f57a96f
credentials-file: /etc/cloudflared/a2f17e27-cd4d-4fcd-b02a-63839f57a96f.json
ingress:
  - hostname: gitlab.widgetcorp.tech
    service: http://localhost:80
  - hostname: gitlab-ssh.widgetcorp.tech
    service: ssh://localhost:22
  - service: http_status:404

  # Catch-all for WARP routing
  - service: http_status:404

warp-routing:
  enabled: true
&lt;/code&gt;
    &lt;p&gt;The config alone doesn’t do anything. It just exposes a tunnel, and that’s it. What we need now are routes and targets.&lt;/p&gt;
    &lt;head rend="h4"&gt;Exposing a private network to the public with tunnels quickly&lt;/head&gt;
    &lt;p&gt;Quick addition, as this is a super common use case. If you want to just expose something in your home network to the internet, you can add a config like this:&lt;/p&gt;
    &lt;code&gt;tunnel: a2f17e27-cd4d-4fcd-b02a-63839f57a96f
credentials-file: /etc/cloudflared/a2f17e27-cd4d-4fcd-b02a-63839f57a96f.json
ingress:
  - hostname: homeassistant.mydomain.com
    service: http://192.168.1.3:80
&lt;/code&gt;
    &lt;p&gt;Then go into Cloudflare DNS settings and map the domain &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; to the tunnel:&lt;/p&gt;
    &lt;p&gt;
      &lt;code&gt;CNAME homeassistant.mydomain.com a2f17e27-cd4d-4fcd-b02a-63839f57a96f.cfargotunnel.com&lt;/code&gt;
    &lt;/p&gt;
    &lt;p&gt;Now all traffic going to this domain will go through the cloudflared tunnel, which is configured to route &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; to &lt;code&gt;192.168.1.3&lt;/code&gt;. No Warp client needed, Argo tunnel does everything for us.&lt;/p&gt;
    &lt;p&gt;Note: If you adopted the tunnels and don’t use &lt;code&gt;config.yaml&lt;/code&gt;, you can automatically create matching DNS records in the Cloudflare UI and don’t need to do this manually.&lt;/p&gt;
    &lt;head rend="h3"&gt;Routes&lt;/head&gt;
    &lt;p&gt;A route defines where to direct traffic to.&lt;/p&gt;
    &lt;p&gt;Let’s say your homeassistant runs on 192.168.1.3 at home and you want to reach it from outside. Just above we deployed a &lt;code&gt;cloudflared&lt;/code&gt; tunnel on our router at 192.168.1.3, and added a config pointing the domain to the Argo tunnel, so &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; is already available to the public. However, &lt;code&gt;192.168.1.3&lt;/code&gt; isn’t, as it’s a private network IP.&lt;/p&gt;
    &lt;p&gt;You can define:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;A route like &lt;code&gt;192.168.1.1/24&lt;/code&gt;pointing at your tunnel, to route ALL traffic to the full IP range through that tunnel (so even 192.168.1.245 will go through your tunnel)&lt;/item&gt;
      &lt;item&gt;Or a more specific route like &lt;code&gt;192.168.1.3/32&lt;/code&gt;pointing at your tunnel, to ONLY route traffic to 192.168.1.3 through that tunnel.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;When configured, once your user connects their Warp client that’s set up with your Zero Trust network, the Warp client will see requests to 192.168.1.3 and route it through the Cloudflare network to reach your specific tunnel. Like a little police helper directing cars where to go.&lt;/p&gt;
    &lt;p&gt;If the Warp client is not connected, 192.168.1.3 will just resolve in your current local network. If connected, it will resolve to the tunnel.&lt;/p&gt;
    &lt;p&gt;The routed IP doesn’t need to exist! So you could, for example, route a random IP you like (e.g., 10.128.1.1) to your tunnel, the tunnel then forwards it based on your routes, for example to 192.168.1.1. This is extremely powerful because it allows you to build your own fully virtual network.&lt;/p&gt;
    &lt;p&gt;That’s all it does, what happens afterwards is up to the tunnel config that we created above. The tunnel decides where to point the incoming request to, whether that’s localhost or somewhere else.&lt;/p&gt;
    &lt;p&gt;To summarize, the &lt;code&gt;route&lt;/code&gt; tells the Warp client where to route traffic to.&lt;/p&gt;
    &lt;p&gt;Now we have 2 things working:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;- goes through a Cloudflare DNS record pointing at an Argo tunnel, which then forwards to 192.168.1.3. This works without Warp connected as it’s on the DNS level, public to everyone.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;192.168.1.3&lt;/code&gt;- The Warp client sees the request and routes it through the Argo tunnel, which then forwards it to&lt;code&gt;192.168.1.3&lt;/code&gt;within that network. This needs Warp connected to work, and is only visible to people in your Zero Trust org.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Targets&lt;/head&gt;
    &lt;p&gt;This one took me a while.&lt;/p&gt;
    &lt;p&gt;Targets are needed to define a piece of infrastructure that you want to protect through Zero Trust. They are like a pointer pointing to something in your network. This goes hand-in-hand with routes, but isn’t always needed.&lt;/p&gt;
    &lt;p&gt;Let’s say you have 192.168.1.3 (homeassistant) exposed through a Cloudflare tunnel. By default, anyone in your network that is part of your Zero Trust org and has Warp client installed can now access your homeassistant at 192.168.1.3.&lt;/p&gt;
    &lt;p&gt;We can change that with targets. For example, defining a target with hostname = &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; to the route &lt;code&gt;192.168.1.3/32&lt;/code&gt; allows us to add access policies to it. We can also put an entire network into the target by specifying &lt;code&gt;192.168.1.3/24&lt;/code&gt; to control access. This also works with virtual IPs like 10.128.1.1!&lt;/p&gt;
    &lt;p&gt;Targets alone won’t do anything, they just point to the service or network. “Hey, here is homeassistant”, or “hey, here is my home network”.&lt;/p&gt;
    &lt;head rend="h2"&gt;Access Policies: Protecting Who Can Access What&lt;/head&gt;
    &lt;p&gt;Continuing the example from above:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;we have a tunnel running on our home network that routes &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;to&lt;code&gt;192.168.1.3&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;we set up public DNS records to point &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;to the Argo tunnel in Cloudflare&lt;/item&gt;
      &lt;item&gt;we created a route &lt;code&gt;192.168.1.3&lt;/code&gt;to go through the same tunnel&lt;/item&gt;
      &lt;item&gt;we also created a target pointing to &lt;code&gt;192.168.1.3&lt;/code&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;When users access either &lt;code&gt;192.168.1.3&lt;/code&gt; or &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;, the Warp client will route the request through the tunnel, which then forwards the request to 192.168.1.3. Homeassistant loads and everything is fine.&lt;/p&gt;
    &lt;p&gt;But do we want that?&lt;/p&gt;
    &lt;p&gt;Probably not.&lt;/p&gt;
    &lt;p&gt;Access policies to the rescue!&lt;/p&gt;
    &lt;p&gt;With access policies, we can leave things in the public but protect them with Cloudflare Zero Trust access. So while 192.168.1.3 is only available if Warp is connected (so routing to it works), we can add security to our public &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Go to Access -&amp;gt; Applications -&amp;gt; Add an Application -&amp;gt; Self-hosted.&lt;/p&gt;
    &lt;p&gt;Here we can define what should be protected, and how.&lt;/p&gt;
    &lt;p&gt;Going with our previous example, we can add a public hostname &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; or an IP like &lt;code&gt;192.168.1.3&lt;/code&gt; (or both), then attach policies of who should be able to access it.&lt;/p&gt;
    &lt;p&gt;You can specify Include (“OR”) and Require (“AND”) selectors.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Require rules must always be met, on top of include rules, to grant access&lt;/item&gt;
      &lt;item&gt;Any of the Include rules must match to grant access&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Then there are Actions:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Allow - when the policy matches, allow access&lt;/item&gt;
      &lt;item&gt;Deny - when the policy matches, deny access. aka blocking something.&lt;/item&gt;
      &lt;item&gt;Bypass - when the policy matches, bypass Zero Trust completely. No more checking.&lt;/item&gt;
      &lt;item&gt;Service Auth - when the policy matches, allow authentication to the service with a service token header (good for server-to-server, or bots). Check Access -&amp;gt; Service Auth to create these tokens.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;Allow public access to everyone logging into your network&lt;/head&gt;
    &lt;p&gt;The most common use case: &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; is public. We want to keep it public, but add an extra layer of security.&lt;/p&gt;
    &lt;p&gt;Add an include policy, pick any of the &lt;code&gt;email&lt;/code&gt; selectors, add the email of the user you want to allow access to. Now only people authenticated with your Zero Trust org with the specified emails can access your homeassistant, without needing to have Warp running.&lt;/p&gt;
    &lt;p&gt;We can harden this by adding require rules: Add a Login Method selector rule, pick a specific login method like GitHub. Now only people with specific emails that have authenticated through GitHub can access your homeassistant, without needing to have Warp running.&lt;/p&gt;
    &lt;head rend="h3"&gt;Bypass login completely when connected through WARP&lt;/head&gt;
    &lt;p&gt;Another policy I like having is to skip the login screen entirely when connected through Warp. If a user is already enrolled into my Zero Trust org and has the Warp client provisioned, then there’s no need to ask them to authenticate again.&lt;/p&gt;
    &lt;p&gt;We can add a separate policy (don’t edit the one we just created above), pick the Gateway selector and set it to Allow or Bypass.&lt;/p&gt;
    &lt;p&gt;Don’t use ‘Warp’ - the Warp selector will match anyone that has Warp running, including the consumer 1.1.1.1 app. Gateway, on the other hand, matches only if someone is connecting through your Gateway, be that DNS or a provisioned Warp client.&lt;/p&gt;
    &lt;p&gt;(The ‘Gateway’ selector is only available if the Warp client is set to allow WARP authentication identity)&lt;/p&gt;
    &lt;p&gt;Now when:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Warp through Zero Trust is running on a machine: No login screen&lt;/item&gt;
      &lt;item&gt;No Warp running (public access): Prompt for login screen, but only allow specific emails that authenticated through GitHub&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This setup makes it very convenient to reach homeassistant, no matter if connected through Warp or not.&lt;/p&gt;
    &lt;head rend="h2"&gt;Deploying the Warp client and enrolling into Zero Trust&lt;/head&gt;
    &lt;p&gt;Are you still with me?&lt;/p&gt;
    &lt;p&gt;Our network is basically done. We have a login-protected &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt; that routes through our tunnel into our private network and terminates at &lt;code&gt;192.168.1.3&lt;/code&gt;, and we have a direct route to &lt;code&gt;192.168.1.3&lt;/code&gt; that only works when connected with Warp.&lt;/p&gt;
    &lt;p&gt;We also have login policies to make sure only specific users (logged in with GitHub and certain email addresses) can access homeassistant.&lt;/p&gt;
    &lt;p&gt;So how do we deploy the dang Warp client?&lt;/p&gt;
    &lt;p&gt;Actually the same: We create some policies.&lt;/p&gt;
    &lt;p&gt;Head to Settings -&amp;gt; Warp Client&lt;/p&gt;
    &lt;p&gt;In Enrollment Permissions, we specify the same policies for who can enroll. For example, “[email protected]” when authenticated through GitHub is allowed to enroll. In the Login Methods we can specify what login methods are available when someone tries to enroll into our Zero Trust org.&lt;/p&gt;
    &lt;p&gt;Toggle WARP authentication identity settings to make the Gateway selector available in policies, effectively allowing the configured WARP client to be used as a login method.&lt;/p&gt;
    &lt;p&gt;Careful here, once someone is enrolled, they are basically in your Zero Trust network through Warp. Make sure you harden this.&lt;/p&gt;
    &lt;p&gt;Then, in Profile settings, we define how the WARP client behaves. These are things like protocol: MASQUE or WireGuard, service mode, what IPs and domains to exclude from WARP routing (e.g., the local network should never go through WARP), setting it to exclude or include mode and so on.&lt;/p&gt;
    &lt;p&gt;Other settings I recommend setting:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Install CA to system certificate store - installs the Cloudflare CA certificate automatically when enrolled.&lt;/item&gt;
      &lt;item&gt;Override local interface IP - assigns a unique CGNAT private IP to the client. This is needed for warp-to-warp routing.&lt;/item&gt;
      &lt;item&gt;Device Posture - what checks the WARP client should perform for the org. E.g., check the OS version, some OS files on disk, etc. I have this set to WARP and Gateway because I want the client to provide information on whether the user is connected through WARP and Gateway, for skipping certain login pages.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Once done, just open the Warp client (https://developers.cloudflare.com/warp-client/), and log in to your network. This should open the login pages you specified in the Device Enrollment screen, and check all the enrollment policies you specified.&lt;/p&gt;
    &lt;p&gt;Once passed, congratulations, your WARP client is now connected to your Zero Trust network. The client will then go ahead and start routing &lt;code&gt;192.168.1.3&lt;/code&gt; through your tunnels, as specified in your tunnel and route settings.&lt;/p&gt;
    &lt;p&gt;🎉&lt;/p&gt;
    &lt;head rend="h2"&gt;What we built&lt;/head&gt;
    &lt;p&gt;If you followed this guide, here is what we built:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Login methods to connect the Warp client to your Zero Trust org through GitHub and specific email addresses&lt;/item&gt;
      &lt;item&gt;A tunnel within your private network that&lt;list rend="ul"&gt;&lt;item&gt;Forwards any request coming in with host &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;to&lt;code&gt;192.168.1.3&lt;/code&gt;&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Forwards any request coming in with host &lt;/item&gt;
      &lt;item&gt;A route that forwards all traffic for &lt;code&gt;192.168.1.3&lt;/code&gt;to the tunnel in your private network, which will terminate it at 192.168.1.3, which will only work when connected through Warp to route the request&lt;/item&gt;
      &lt;item&gt;A DNS name &lt;code&gt;homeassistant.mydomain.com&lt;/code&gt;that points to the Argo tunnel, and will allow everyone (even if not connected through Warp) to access homeassistant which runs at 192.168.1.3&lt;/item&gt;
      &lt;item&gt;Access policies that will&lt;list rend="ul"&gt;&lt;item&gt;Ask users that are not connected to Zero Trust through Warp to log in with GitHub and specific email, so everyone can access it if they can log in&lt;/item&gt;&lt;item&gt;A policy that skips the login screen completely and just shows homeassistant if the user connects through Zero Trust Warp client (enrolled into our org)&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;You don’t need the public domain and you don’t need the route to 192.168.1.3. These are 2 different options that you can use to expose homeassistant when you’re not at home. One is using a public domain name everyone can see, one is explicitly requiring connecting through enrolled Warp.&lt;/p&gt;
    &lt;p&gt;What I didn’t cover in this post:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Warp-to-warp routing&lt;/item&gt;
      &lt;item&gt;Creating and assigning fully private IPs that only exist within your Zero Trust network&lt;/item&gt;
      &lt;item&gt;SSH authentication through Zero Trust access policies (that’s what we need Targets for)&lt;/item&gt;
      &lt;item&gt;The other application types besides Self-Hosted&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I’m happy to expand on it if there’s interest. Let me know on X or Bluesky.&lt;/p&gt;
    &lt;p&gt;Happy tunneling! ⛅&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://david.coffee/cloudflare-zero-trust-tunnels"/><published>2025-11-16T17:39:43+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45946937</id><title>The Man Who Keeps Predicting the Web's Death</title><updated>2025-11-16T23:33:55.998012+00:00</updated><content/><link href="https://tedium.co/2025/10/25/web-dead-predictions-george-colony/"/><published>2025-11-16T17:50:29+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947301</id><title>Z3 API in Python: From Sudoku to N-Queens in Under 20 Lines</title><updated>2025-11-16T23:33:55.670744+00:00</updated><content>&lt;doc fingerprint="1f33dc5d2c218990"&gt;
  &lt;main&gt;
    &lt;p&gt;Z3 is a high performance theorem prover developed at Microsoft Research. Z3 is used in many applications such as: software/hardware verification and testing, constraint solving, analysis of hybrid systems, security, biology (in silico analysis), and geometrical problems.&lt;/p&gt;
    &lt;p&gt;This tutorial demonstrates the main capabilities of Z3Py: the Z3 API in Python. No Python background is needed to read this tutorial. However, it is useful to learn Python (a fun language!) at some point, and there are many excellent free resources for doing so (Python Tutorial).&lt;/p&gt;
    &lt;p&gt;The Z3 distribution also contains the C, .Net and OCaml APIs. The source code of Z3Py is available in the Z3 distribution, feel free to modify it to meet your needs. The source code also demonstrates how to use new features in Z3 4.0. Other cool front-ends for Z3 include Scala^Z3 and SBV.&lt;/p&gt;
    &lt;p&gt;Please send feedback, comments and/or corrections to leonardo@microsoft.com. Your comments are very valuable.&lt;/p&gt;
    &lt;p&gt;Let us start with the following simple example:&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
solve(x &amp;gt; 2, y &amp;lt; 10, x + 2*y == 7)
&lt;/code&gt;
    &lt;p&gt;The function Int('x') creates an integer variable in Z3 named x. The solve function solves a system of constraints. The example above uses two variables x and y, and three constraints. Z3Py like Python uses = for assignment. The operators &amp;lt;, &amp;lt;=, &amp;gt;, &amp;gt;=, == and != for comparison. In the example above, the expression x + 2*y == 7 is a Z3 constraint. Z3 can solve and crunch formulas.&lt;/p&gt;
    &lt;p&gt;The next examples show how to use the Z3 formula/expression simplifier.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
print (simplify(x + y + 2*x + 3))
print (simplify(x &amp;lt; y + x + 2))
print (simplify(And(x + 1 &amp;gt;= 3, x**2 + x**2 + y**2 + 2 &amp;gt;= 5)))
&lt;/code&gt;
    &lt;p&gt;By default, Z3Py (for the web) displays formulas and expressions using mathematical notation. As usual, ∧ is the logical and, ∨ is the logical or, and so on. The command set_option(html_mode=False) makes all formulas and expressions to be displayed in Z3Py notation. This is also the default mode for the offline version of Z3Py that comes with the Z3 distribution.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
print (x**2 + y**2 &amp;gt;= 1)
set_option(html_mode=False)
print (x**2 + y**2 &amp;gt;= 1)
&lt;/code&gt;
    &lt;p&gt;Z3 provides functions for traversing expressions.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
n = x + y &amp;gt;= 3
print ("num args: ", n.num_args())
print ("children: ", n.children())
print ("1st child:", n.arg(0))
print ("2nd child:", n.arg(1))
print ("operator: ", n.decl())
print ("op name:  ", n.decl().name())
&lt;/code&gt;
    &lt;p&gt;Z3 provides all basic mathematical operations. Z3Py uses the same operator precedence of the Python language. Like Python, ** is the power operator. Z3 can solve nonlinear polynomial constraints.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
y = Real('y')
solve(x**2 + y**2 &amp;gt; 3, x**3 + y &amp;lt; 5)
&lt;/code&gt;
    &lt;p&gt;The procedure Real('x') creates the real variable x. Z3Py can represent arbitrarily large integers, rational numbers (like in the example above), and irrational algebraic numbers. An irrational algebraic number is a root of a polynomial with integer coefficients. Internally, Z3 represents all these numbers precisely. The irrational numbers are displayed in decimal notation for making it easy to read the results.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
y = Real('y')
solve(x**2 + y**2 == 3, x**3 == 2)

set_option(precision=30)
print ("Solving, and displaying result with 30 decimal places")
solve(x**2 + y**2 == 3, x**3 == 2)
&lt;/code&gt;
    &lt;p&gt;The procedure set_option is used to configure the Z3 environment. It is used to set global configuration options such as how the result is displayed. The option set_option(precision=30) sets the number of decimal places used when displaying results. The ? mark in 1.2599210498? indicates the output is truncated.&lt;/p&gt;
    &lt;p&gt;The following example demonstrates a common mistake. The expression 3/2 is a Python integer and not a Z3 rational number. The example also shows different ways to create rational numbers in Z3Py. The procedure Q(num, den) creates a Z3 rational where num is the numerator and den is the denominator. The RealVal(1) creates a Z3 real number representing the number 1.&lt;/p&gt;
    &lt;code&gt;print (1/3)
print (RealVal(1)/3)
print (Q(1,3))

x = Real('x')
print (x + 1/3)
print (x + Q(1,3))
print (x + "1/3")
print (x + 0.25)
&lt;/code&gt;
    &lt;p&gt;Rational numbers can also be displayed in decimal notation.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
solve(3*x == 1)

set_option(rational_to_decimal=True)
solve(3*x == 1)

set_option(precision=30)
solve(3*x == 1)
&lt;/code&gt;
    &lt;p&gt;A system of constraints may not have a solution. In this case, we say the system is unsatisfiable.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
solve(x &amp;gt; 4, x &amp;lt; 0)
&lt;/code&gt;
    &lt;p&gt;Like in Python, comments begin with the hash character # and are terminated by the end of line. Z3Py does not support comments that span more than one line.&lt;/p&gt;
    &lt;code&gt;# This is a comment
x = Real('x') # comment: creating x
print (x**2 + 2*x + 2  # comment: printing polynomial)
&lt;/code&gt;
    &lt;p&gt;Z3 supports Boolean operators: And, Or, Not, Implies (implication), If (if-then-else). Bi-implications are represented using equality ==. The following example shows how to solve a simple set of Boolean constraints.&lt;/p&gt;
    &lt;code&gt;p = Bool('p')
q = Bool('q')
r = Bool('r')
solve(Implies(p, q), r == Not(q), Or(Not(p), r))

&lt;/code&gt;
    &lt;p&gt;The Python Boolean constants True and False can be used to build Z3 Boolean expressions.&lt;/p&gt;
    &lt;code&gt;p = Bool('p')
q = Bool('q')
print (And(p, q, True))
print (simplify(And(p, q, True)))
print (simplify(And(p, False)))
&lt;/code&gt;
    &lt;p&gt;The following example uses a combination of polynomial and Boolean constraints.&lt;/p&gt;
    &lt;code&gt;p = Bool('p')
x = Real('x')
solve(Or(x &amp;lt; 5, x &amp;gt; 10), Or(p, x**2 == 2), Not(p))
&lt;/code&gt;
    &lt;p&gt;Z3 provides different solvers. The command solve, used in the previous examples, is implemented using the Z3 solver API. The implementation can be found in the file z3.py in the Z3 distribution. The following example demonstrates the basic Solver API.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')

s = Solver()
print (s)

s.add(x &amp;gt; 10, y == x + 2)
print (s)
print ("Solving constraints in the solver s ...")
print (s.check())

print ("Create a new scope...")
s.push()
s.add(y &amp;lt; 11)
print (s)
print ("Solving updated set of constraints...")
print (s.check())

print ("Restoring state...")
s.pop()
print (s)
print ("Solving restored set of constraints...")
print (s.check())
&lt;/code&gt;
    &lt;p&gt;The command Solver() creates a general purpose solver. Constraints can be added using the method add. We say the constraints have been asserted in the solver. The method check() solves the asserted constraints. The result is sat (satisfiable) if a solution was found. The result is unsat (unsatisfiable) if no solution exists. We may also say the system of asserted constraints is infeasible. Finally, a solver may fail to solve a system of constraints and unknown is returned.&lt;/p&gt;
    &lt;p&gt;In some applications, we want to explore several similar problems that share several constraints. We can use the commands push and pop for doing that. Each solver maintains a stack of assertions. The command push creates a new scope by saving the current stack size. The command pop removes any assertion performed between it and the matching push. The check method always operates on the content of solver assertion stack.&lt;/p&gt;
    &lt;p&gt;The following example shows an example that Z3 cannot solve. The solver returns unknown in this case. Recall that Z3 can solve nonlinear polynomial constraints, but 2**x is not a polynomial.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
s = Solver()
s.add(2**x == 3)
print (s.check())
&lt;/code&gt;
    &lt;p&gt;The following example shows how to traverse the constraints asserted into a solver, and how to collect performance statistics for the check method.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
y = Real('y')
s = Solver()
s.add(x &amp;gt; 1, y &amp;gt; 1, Or(x + y &amp;gt; 3, x - y &amp;lt; 2))
print ("asserted constraints...")
for c in s.assertions():
    print (c)

print (s.check())
print ("statistics for the last check method...")
print (s.statistics())
# Traversing statistics
for k, v in s.statistics():
    print ("%s : %s" % (k, v))
&lt;/code&gt;
    &lt;p&gt;The command check returns sat when Z3 finds a solution for the set of asserted constraints. We say Z3 satisfied the set of constraints. We say the solution is a model for the set of asserted constraints. A model is an interpretation that makes each asserted constraint true. The following example shows the basic methods for inspecting models.&lt;/p&gt;
    &lt;code&gt;x, y, z = Reals('x y z')
s = Solver()
s.add(x &amp;gt; 1, y &amp;gt; 1, x + y &amp;gt; 3, z - x &amp;lt; 10)
print (s.check())

m = s.model()
print ("x = %s" % m[x])

print ("traversing model...")
for d in m.decls():
    print ("%s = %s" % (d.name(), m[d]))
&lt;/code&gt;
    &lt;p&gt;In the example above, the function Reals('x y z') creates the variables. x, y and z. It is shorthand for:&lt;/p&gt;
    &lt;quote&gt;x = Real('x') y = Real('y') z = Real('z')&lt;/quote&gt;
    &lt;p&gt;The expression m[x] returns the interpretation of x in the model m. The expression "%s = %s" % (d.name(), m[d]) returns a string where the first %s is replaced with the name of d (i.e., d.name()), and the second %s with a textual representation of the interpretation of d (i.e., m[d]). Z3Py automatically converts Z3 objects into a textual representation when needed.&lt;/p&gt;
    &lt;p&gt;Z3 supports real and integer variables. They can be mixed in a single problem. Like most programming languages, Z3Py will automatically add coercions converting integer expressions to real ones when needed. The following example demonstrates different ways to declare integer and real variables.&lt;/p&gt;
    &lt;code&gt;x = Real('x')
y = Int('y')
a, b, c = Reals('a b c')
s, r = Ints('s r')
print (x + y + 1 + (a + s))
print (ToReal(y) + c)
&lt;/code&gt;
    &lt;p&gt;The function ToReal casts an integer expression into a real expression.&lt;/p&gt;
    &lt;p&gt;Z3Py supports all basic arithmetic operations.&lt;/p&gt;
    &lt;code&gt;a, b, c = Ints('a b c')
d, e = Reals('d e')
solve(a &amp;gt; b + 2,
      a == 2*c + 10,
      c + b &amp;lt;= 1000,
      d &amp;gt;= e)
&lt;/code&gt;
    &lt;p&gt;The command simplify applies simple transformations on Z3 expressions.&lt;/p&gt;
    &lt;code&gt;x, y = Reals('x y')
# Put expression in sum-of-monomials form
t = simplify((x + y)**3, som=True)
print (t)
# Use power operator
t = simplify(t, mul_to_power=True)
print (t)
&lt;/code&gt;
    &lt;p&gt;The command help_simplify() prints all available options. Z3Py allows users to write option in two styles. The Z3 internal option names start with : and words are separated by -. These options can be used in Z3Py. Z3Py also supports Python-like names, where : is suppressed and - is replaced with _. The following example demonstrates how to use both styles.&lt;/p&gt;
    &lt;code&gt;x, y = Reals('x y')
# Using Z3 native option names
print (simplify(x == y + 2, ':arith-lhs', True))
# Using Z3Py option names
print (simplify(x == y + 2, arith_lhs=True))

print ("\nAll available options:")
help_simplify()
&lt;/code&gt;
    &lt;p&gt;Z3Py supports arbitrarily large numbers. The following example demonstrates how to perform basic arithmetic using larger integer, rational and irrational numbers. Z3Py only supports algebraic irrational numbers. Algebraic irrational numbers are sufficient for presenting the solutions of systems of polynomial constraints. Z3Py will always display irrational numbers in decimal notation since it is more convenient to read. The internal representation can be extracted using the method sexpr(). It displays Z3 internal representation for mathematical formulas and expressions in s-expression (Lisp-like) notation.&lt;/p&gt;
    &lt;code&gt;x, y = Reals('x y')
solve(x + 10000000000000000000000 == y, y &amp;gt; 20000000000000000)

print (Sqrt(2) + Sqrt(3))
print (simplify(Sqrt(2) + Sqrt(3)))
print (simplify(Sqrt(2) + Sqrt(3)).sexpr())
# The sexpr() method is available for any Z3 expression
print ((x + Sqrt(y) * 2).sexpr())
&lt;/code&gt;
    &lt;p&gt;Modern CPUs and main-stream programming languages use arithmetic over fixed-size bit-vectors. Machine arithmetic is available in Z3Py as Bit-Vectors. They implement the precise semantics of unsigned and of signed two-complements arithmetic.&lt;/p&gt;
    &lt;p&gt;The following example demonstrates how to create bit-vector variables and constants. The function BitVec('x', 16) creates a bit-vector variable in Z3 named x with 16 bits. For convenience, integer constants can be used to create bit-vector expressions in Z3Py. The function BitVecVal(10, 32) creates a bit-vector of size 32 containing the value 10.&lt;/p&gt;
    &lt;code&gt;x = BitVec('x', 16)
y = BitVec('y', 16)
print (x + 2)
# Internal representation
print ((x + 2).sexpr())

# -1 is equal to 65535 for 16-bit integers 
print (simplify(x + y - 1))

# Creating bit-vector constants
a = BitVecVal(-1, 16)
b = BitVecVal(65535, 16)
print (simplify(a == b))

a = BitVecVal(-1, 32)
b = BitVecVal(65535, 32)
# -1 is not equal to 65535 for 32-bit integers 
print (simplify(a == b))
&lt;/code&gt;
    &lt;p&gt;In contrast to programming languages, such as C, C++, C#, Java, there is no distinction between signed and unsigned bit-vectors as numbers. Instead, Z3 provides special signed versions of arithmetical operations where it makes a difference whether the bit-vector is treated as signed or unsigned. In Z3Py, the operators &amp;lt;, &amp;lt;=, &amp;gt;, &amp;gt;=, /, % and &amp;gt;&amp;gt; correspond to the signed versions. The corresponding unsigned operators are ULT, ULE, UGT, UGE, UDiv, URem and LShR.&lt;/p&gt;
    &lt;code&gt;# Create to bit-vectors of size 32
x, y = BitVecs('x y', 32)

solve(x + y == 2, x &amp;gt; 0, y &amp;gt; 0)

# Bit-wise operators
# &amp;amp; bit-wise and
# | bit-wise or
# ~ bit-wise not
solve(x &amp;amp; y == ~y)

solve(x &amp;lt; 0)

# using unsigned version of &amp;lt; 
solve(ULT(x, 0))
&lt;/code&gt;
    &lt;p&gt;The operator &amp;gt;&amp;gt; is the arithmetic shift right, and &amp;lt;&amp;lt; is the shift left. The logical shift right is the operator LShR.&lt;/p&gt;
    &lt;code&gt;# Create to bit-vectors of size 32
x, y = BitVecs('x y', 32)

solve(x &amp;gt;&amp;gt; 2 == 3)

solve(x &amp;lt;&amp;lt; 2 == 3)

solve(x &amp;lt;&amp;lt; 2 == 24)
&lt;/code&gt;
    &lt;p&gt;Unlike programming languages, where functions have side-effects, can throw exceptions, or never return, functions in Z3 have no side-effects and are total. That is, they are defined on all input values. This includes functions, such as division. Z3 is based on first-order logic.&lt;/p&gt;
    &lt;p&gt;Given a constraints such as x + y &amp;gt; 3, we have been saying that x and y are variables. In many textbooks, x and y are called uninterpreted constants. That is, they allow any interpretation that is consistent with the constraint x + y &amp;gt; 3.&lt;/p&gt;
    &lt;p&gt;More precisely, function and constant symbols in pure first-order logic are uninterpreted or free, which means that no a priori interpretation is attached. This is in contrast to functions belonging to the signature of theories, such as arithmetic where the function + has a fixed standard interpretation (it adds two numbers). Uninterpreted functions and constants are maximally flexible; they allow any interpretation that is consistent with the constraints over the function or constant.&lt;/p&gt;
    &lt;p&gt;To illustrate uninterpreted functions and constants let us the uninterpreted integer constants (aka variables) x, y. Finally let f be an uninterpreted function that takes one argument of type (aka sort) integer and results in an integer value. The example illustrates how one can force an interpretation where f applied twice to x results in x again, but f applied once to x is different from x.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
f = Function('f', IntSort(), IntSort())
solve(f(f(x)) == x, f(x) == y, x != y)
&lt;/code&gt;
    &lt;p&gt;The solution (interpretation) for f should be read as f(0) is 1, f(1) is 0, and f(a) is 1 for all a different from 0 and 1.&lt;/p&gt;
    &lt;p&gt;In Z3, we can also evaluate expressions in the model for a system of constraints. The following example shows how to use the evaluate method.&lt;/p&gt;
    &lt;code&gt;x = Int('x')
y = Int('y')
f = Function('f', IntSort(), IntSort())
s = Solver()
s.add(f(f(x)) == x, f(x) == y, x != y)
print (s.check())
m = s.model()
print ("f(f(x)) =", m.evaluate(f(f(x))))
print ("f(x)    =", m.evaluate(f(x)))
&lt;/code&gt;
    &lt;p&gt;A formula/constraint F is valid if F always evaluates to true for any assignment of appropriate values to its uninterpreted symbols. A formula/constraint F is satisfiable if there is some assignment of appropriate values to its uninterpreted symbols under which F evaluates to true. Validity is about finding a proof of a statement; satisfiability is about finding a solution to a set of constraints. Consider a formula F containing a and b. We can ask whether F is valid, that is whether it is always true for any combination of values for a and b. If F is always true, then Not(F) is always false, and then Not(F) will not have any satisfying assignment (i.e., solution); that is, Not(F) is unsatisfiable. That is, F is valid precisely when Not(F) is not satisfiable (is unsatisfiable). Alternately, F is satisfiable if and only if Not(F) is not valid (is invalid). The following example proves the deMorgan's law.&lt;/p&gt;
    &lt;p&gt;The following example redefines the Z3Py function prove that receives a formula as a parameter. This function creates a solver, adds/asserts the negation of the formula, and check if the negation is unsatisfiable. The implementation of this function is a simpler version of the Z3Py command prove.&lt;/p&gt;
    &lt;code&gt;p, q = Bools('p q')
demorgan = And(p, q) == Not(Or(Not(p), Not(q)))
print (demorgan)

def prove(f):
    s = Solver()
    s.add(Not(f))
    if s.check() == unsat:
        print ("proved")
    else:
        print ("failed to prove")

print ("Proving demorgan...")
prove(demorgan)
&lt;/code&gt;
    &lt;p&gt;Python supports list comprehensions. List comprehensions provide a concise way to create lists. They can be used to create Z3 expressions and problems in Z3Py. The following example demonstrates how to use Python list comprehensions in Z3Py.&lt;/p&gt;
    &lt;code&gt;# Create list [1, ..., 5] 
print ([ x + 1 for x in range(5) ])

# Create two lists containing 5 integer variables
X = [ Int('x%s' % i) for i in range(5) ]
Y = [ Int('y%s' % i) for i in range(5) ]
print (X)

# Create a list containing X[i]+Y[i]
X_plus_Y = [ X[i] + Y[i] for i in range(5) ]
print (X_plus_Y)

# Create a list containing X[i] &amp;gt; Y[i]
X_gt_Y = [ X[i] &amp;gt; Y[i] for i in range(5) ]
print (X_gt_Y)

print (And(X_gt_Y))

# Create a 3x3 "matrix" (list of lists) of integer variables
X = [ [ Int("x_%s_%s" % (i+1, j+1)) for j in range(3) ]
      for i in range(3) ]
pp(X)
&lt;/code&gt;
    &lt;p&gt;In the example above, the expression "x%s" % i returns a string where %s is replaced with the value of i.&lt;/p&gt;
    &lt;p&gt;The command pp is similar to print, but it uses Z3Py formatter for lists and tuples instead of Python's formatter.&lt;/p&gt;
    &lt;p&gt;Z3Py also provides functions for creating vectors of Boolean, Integer and Real variables. These functions are implemented using list comprehensions.&lt;/p&gt;
    &lt;code&gt;X = IntVector('x', 5)
Y = RealVector('y', 5)
P = BoolVector('p', 5)
print (X)
print (Y)
print (P)
print ([ y**2 for y in Y ])
print (Sum([ y**2 for y in Y ]))
&lt;/code&gt;
    &lt;p&gt;In high school, students learn the kinematic equations. These equations describe the mathematical relationship between displacement (d), time (t), acceleration (a), initial velocity (v_i) and final velocity (v_f). In Z3Py notation, we can write these equations as:&lt;/p&gt;
    &lt;quote&gt;d == v_i * t + (a*t**2)/2, v_f == v_i + a*t&lt;/quote&gt;
    &lt;p&gt;Ima Hurryin is approaching a stoplight moving with a velocity of 30.0 m/s. The light turns yellow, and Ima applies the brakes and skids to a stop. If Ima's acceleration is -8.00 m/s2, then determine the displacement of the car during the skidding process.&lt;/p&gt;
    &lt;code&gt;d, a, t, v_i, v_f = Reals('d a t v__i v__f')

equations = [
   d == v_i * t + (a*t**2)/2,
   v_f == v_i + a*t,
]
print ("Kinematic equations:")
print (equations)

# Given v_i, v_f and a, find d
problem = [
    v_i == 30,
    v_f == 0,
    a   == -8
]
print ("Problem:")
print (problem)

print ("Solution:")
solve(equations + problem)
&lt;/code&gt;
    &lt;p&gt;Ben Rushin is waiting at a stoplight. When it finally turns green, Ben accelerated from rest at a rate of a 6.00 m/s2 for a time of 4.10 seconds. Determine the displacement of Ben's car during this time period.&lt;/p&gt;
    &lt;code&gt;d, a, t, v_i, v_f = Reals('d a t v__i v__f')

equations = [
   d == v_i * t + (a*t**2)/2,
   v_f == v_i + a*t,
]

# Given v_i, t and a, find d
problem = [
    v_i == 0,
    t   == 4.10,
    a   == 6
]

solve(equations + problem)

# Display rationals in decimal notation
set_option(rational_to_decimal=True)

solve(equations + problem)
&lt;/code&gt;
    &lt;p&gt;Some low level hacks are very popular with C programmers. We use some of these hacks in the Z3 implementation.&lt;/p&gt;
    &lt;p&gt;This hack is frequently used in C programs (Z3 included) to test whether a machine integer is a power of two. We can use Z3 to prove it really works. The claim is that x != 0 &amp;amp;&amp;amp; !(x &amp;amp; (x - 1)) is true if and only if x is a power of two.&lt;/p&gt;
    &lt;code&gt;x      = BitVec('x', 32)
powers = [ 2**i for i in range(32) ]
fast   = And(x != 0, x &amp;amp; (x - 1) == 0)
slow   = Or([ x == p for p in powers ])
print (fast)
prove(fast == slow)

print ("trying to prove buggy version...")
fast   = x &amp;amp; (x - 1) == 0
prove(fast == slow)
&lt;/code&gt;
    &lt;p&gt;The following simple hack can be used to test whether two machine integers have opposite signs.&lt;/p&gt;
    &lt;code&gt;x      = BitVec('x', 32)
y      = BitVec('y', 32)

# Claim: (x ^ y) &amp;lt; 0 iff x and y have opposite signs
trick  = (x ^ y) &amp;lt; 0

# Naive way to check if x and y have opposite signs
opposite = Or(And(x &amp;lt; 0, y &amp;gt;= 0),
              And(x &amp;gt;= 0, y &amp;lt; 0))

prove(trick == opposite)
&lt;/code&gt;
    &lt;p&gt;Consider the following puzzle. Spend exactly 100 dollars and buy exactly 100 animals. Dogs cost 15 dollars, cats cost 1 dollar, and mice cost 25 cents each. You have to buy at least one of each. How many of each should you buy?&lt;/p&gt;
    &lt;code&gt;# Create 3 integer variables
dog, cat, mouse = Ints('dog cat mouse')
solve(dog &amp;gt;= 1,   # at least one dog
      cat &amp;gt;= 1,   # at least one cat
      mouse &amp;gt;= 1, # at least one mouse
      # we want to buy 100 animals
      dog + cat + mouse == 100,
      # We have 100 dollars (10000 cents):
      #   dogs cost 15 dollars (1500 cents), 
      #   cats cost 1 dollar (100 cents), and 
      #   mice cost 25 cents 
      1500 * dog + 100 * cat + 25 * mouse == 10000)
&lt;/code&gt;
    &lt;p&gt;Sudoku is a very popular puzzle. The goal is to insert the numbers in the boxes to satisfy only one condition: each row, column and 3x3 box must contain the digits 1 through 9 exactly once.&lt;/p&gt;
    &lt;p&gt;The following example encodes the sudoku problem in Z3. Different sudoku instances can be solved by modifying the matrix instance. This example makes heavy use of list comprehensions available in the Python programming language.&lt;/p&gt;
    &lt;code&gt;# 9x9 matrix of integer variables
X = [ [ Int("x_%s_%s" % (i+1, j+1)) for j in range(9) ]
      for i in range(9) ]

# each cell contains a value in {1, ..., 9}
cells_c  = [ And(1 &amp;lt;= X[i][j], X[i][j] &amp;lt;= 9)
             for i in range(9) for j in range(9) ]

# each row contains a digit at most once
rows_c   = [ Distinct(X[i]) for i in range(9) ]

# each column contains a digit at most once
cols_c   = [ Distinct([ X[i][j] for i in range(9) ])
             for j in range(9) ]

# each 3x3 square contains a digit at most once
sq_c     = [ Distinct([ X[3*i0 + i][3*j0 + j]
                        for i in range(3) for j in range(3) ])
             for i0 in range(3) for j0 in range(3) ]

sudoku_c = cells_c + rows_c + cols_c + sq_c

# sudoku instance, we use '0' for empty cells
instance = ((0,0,0,0,9,4,0,3,0),
            (0,0,0,5,1,0,0,0,7),
            (0,8,9,0,0,0,0,4,0),
            (0,0,0,0,0,0,2,0,8),
            (0,6,0,2,0,1,0,5,0),
            (1,0,2,0,0,0,0,0,0),
            (0,7,0,0,0,0,5,2,0),
            (9,0,0,0,6,5,0,0,0),
            (0,4,0,9,7,0,0,0,0))

instance_c = [ If(instance[i][j] == 0,
                  True,
                  X[i][j] == instance[i][j])
               for i in range(9) for j in range(9) ]

s = Solver()
s.add(sudoku_c + instance_c)
if s.check() == sat:
    m = s.model()
    r = [ [ m.evaluate(X[i][j]) for j in range(9) ]
          for i in range(9) ]
    print_matrix(r)
else:
    print ("failed to solve")
&lt;/code&gt;
    &lt;p&gt;The eight queens puzzle is the problem of placing eight chess queens on an 8x8 chessboard so that no two queens attack each other. Thus, a solution requires that no two queens share the same row, column, or diagonal.&lt;/p&gt;
    &lt;code&gt;# We know each queen must be in a different row.
# So, we represent each queen by a single integer: the column position
Q = [ Int('Q_%i' % (i + 1)) for i in range(8) ]

# Each queen is in a column {1, ... 8 }
val_c = [ And(1 &amp;lt;= Q[i], Q[i] &amp;lt;= 8) for i in range(8) ]

# At most one queen per column
col_c = [ Distinct(Q) ]

# Diagonal constraint
diag_c = [ If(i == j,
              True,
              And(Q[i] - Q[j] != i - j, Q[i] - Q[j] != j - i))
           for i in range(8) for j in range(i) ]

solve(val_c + col_c + diag_c)
&lt;/code&gt;
    &lt;p&gt;The install problem consists of determining whether a new set of packages can be installed in a system. This application is based on the article OPIUM: Optimal Package Install/Uninstall Manager. Many packages depend on other packages to provide some functionality. Each distribution contains a meta-data file that explicates the requirements of each package of the distribution. The meta-data contains details like the name, version, etc. More importantly, it contains depends and conflicts clauses that stipulate which other packages should be on the system. The depends clauses stipulate which other packages must be present. The conflicts clauses stipulate which other packages must not be present.&lt;/p&gt;
    &lt;p&gt;The install problem can be easily solved using Z3. The idea is to define a Boolean variable for each package. This variable is true if the package must be in the system. If package a depends on packages b, c and z, we write:&lt;/p&gt;
    &lt;quote&gt;DependsOn(a, [b, c, z])&lt;/quote&gt;
    &lt;p&gt;DependsOn is a simple Python function that creates Z3 constraints that capture the depends clause semantics.&lt;/p&gt;
    &lt;quote&gt;def DependsOn(pack, deps): return And([ Implies(pack, dep) for dep in deps ])&lt;/quote&gt;
    &lt;p&gt;Thus, Depends(a, [b, c, z]) generates the constraint&lt;/p&gt;
    &lt;quote&gt;And(Implies(a, b), Implies(a, c), Implies(a, z))&lt;/quote&gt;
    &lt;p&gt;That is, if users install package a, they must also install packages b, c and z.&lt;/p&gt;
    &lt;p&gt;If package d conflicts with package e, we write Conflict(d, e). Conflict is also a simple Python function.&lt;/p&gt;
    &lt;quote&gt;def Conflict(p1, p2): return Or(Not(p1), Not(p2))&lt;/quote&gt;
    &lt;p&gt;Conflict(d, e) generates the constraint Or(Not(d), Not(e)). With these two functions, we can easily encode the example in the Opium article (Section 2) in Z3Py as:&lt;/p&gt;
    &lt;code&gt;def DependsOn(pack, deps):
    return And([ Implies(pack, dep) for dep in deps ])

def Conflict(p1, p2):
    return Or(Not(p1), Not(p2))

a, b, c, d, e, f, g, z = Bools('a b c d e f g z')

solve(DependsOn(a, [b, c, z]),
      DependsOn(b, [d]),
      DependsOn(c, [Or(d, e), Or(f, g)]),
      Conflict(d, e),
      a, z)
&lt;/code&gt;
    &lt;p&gt;Note that the example contains the constraint&lt;/p&gt;
    &lt;quote&gt;DependsOn(c, [Or(d, e), Or(f, g)]),&lt;/quote&gt;
    &lt;p&gt;The meaning is: to install c, we must install d or e, and f or g&lt;/p&gt;
    &lt;p&gt;Now, we refine the previous example. First, we modify DependsOn to allow us to write DependsOn(b, d) instead of DependsOn(b, [d]). We also write a function install_check that returns a list of packages that must be installed in the system. The function Conflict is also modified. It can now receive multiple arguments.&lt;/p&gt;
    &lt;code&gt;def DependsOn(pack, deps):
    if is_expr(deps):
        return Implies(pack, deps)
    else:
        return And([ Implies(pack, dep) for dep in deps ])

def Conflict(*packs):
    return Or([ Not(pack) for pack in packs ])

a, b, c, d, e, f, g, z = Bools('a b c d e f g z')

def install_check(*problem):
    s = Solver()
    s.add(*problem)
    if s.check() == sat:
        m = s.model()
        r = []
        for x in m:
            if is_true(m[x]):
                # x is a Z3 declaration
                # x() returns the Z3 expression
                # x.name() returns a string
                r.append(x())
        print (r)
    else:
        print ("invalid installation profile")

print ("Check 1")
install_check(DependsOn(a, [b, c, z]),
              DependsOn(b, d),
              DependsOn(c, [Or(d, e), Or(f, g)]),
              Conflict(d, e),
              Conflict(d, g),
              a, z)

print ("Check 2")
install_check(DependsOn(a, [b, c, z]),
              DependsOn(b, d),
              DependsOn(c, [Or(d, e), Or(f, g)]),
              Conflict(d, e),
              Conflict(d, g),
              a, z, g)
&lt;/code&gt;
    &lt;p&gt;Z3Py is part of the Z3 distribution. It is located in the python subdirectory. To use it locally, you have to include the following command in your Python script.&lt;/p&gt;
    &lt;quote&gt;from Z3 import *&lt;/quote&gt;
    &lt;p&gt;The Z3 Python frontend directory must be in your PYTHONPATH environment variable. Z3Py will automatically search for the Z3 library (z3.dll (Windows), libz3.so (Linux), or libz3.dylib (OSX)). You may also initialize Z3Py manually using the command:&lt;/p&gt;
    &lt;quote&gt;init("z3.dll")&lt;/quote&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://ericpony.github.io/z3py-tutorial/guide-examples.htm"/><published>2025-11-16T18:38:37+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947374</id><title>Decoding Leibniz Notation (2024)</title><updated>2025-11-16T23:33:55.121386+00:00</updated><content>&lt;doc fingerprint="2eaa1f503cb74f99"&gt;
  &lt;main&gt;
    &lt;p&gt;I wrote this for myself to understand the Leibniz notation. Prerequisites for this post are the definition of the derivative and the Lagrange notation. If you don’t understand these yet, please study them first.&lt;/p&gt;
    &lt;p&gt;So…&lt;/p&gt;
    &lt;p&gt;You may have already seen something like . This is called the Leibniz notation. The Leibniz notation has many of what Spivak calls “vagaries”. It has multiple interpretations– formal and informal. The informal interpretation doesn’t map to modern mathematics, but can sometimes be useful (while at other times misleading). The full, unambiguous Leibniz notation is verbose, so in practice people end up taking liberties with it. As a consequence, its meaning must often be discerned from the context.&lt;/p&gt;
    &lt;p&gt;This flexibility makes the notation very useful in science and engineering, but also makes it difficult to learn. I explore it here to make learning easier.&lt;/p&gt;
    &lt;p&gt;We start with the historical interpretation, where the notation began. Leibniz didn’t know about limits. He thought the derivative is the value of the quotient&lt;/p&gt;
    &lt;p&gt;when is “infinitesimally small”. He denoted this infinitesimally small quantity of by , and the corresponding difference by . Thus for a given function the Leibniz notation for its derivative is:&lt;/p&gt;
    &lt;p&gt;Intuitively, we can think of in a historical context as “delta” or “change”. Then we can interpret this notation as Leibniz did– a quotient of a tiny change in and a tiny change in . But this explanation comes with two important disclaimers.&lt;/p&gt;
    &lt;p&gt;First, is not a value. If it were a value, you could cancel out ’s in the numerator and the denominator. But you can’t. Instead think of as an operator. When applied to or , it produces an infinitesimally small quantity. Alternatively you can think of and as one symbol that happens to look like multiplication, but isn’t.1&lt;/p&gt;
    &lt;p&gt;Second, denotes a function (the same one denoted by ), not a value at a point (i.e. not ). To denote the image of the derivative function at we use the following notation:&lt;/p&gt;
    &lt;p&gt;Writing all that is a pain and in practice people rarely do it this way, but we’ll get to that in a minute.&lt;/p&gt;
    &lt;p&gt;To summarize, the full and unambiguous Leibniz notation is:&lt;/p&gt;
    &lt;p&gt;In modern mathematics real numbers do not have a notion of infinitesimally small quantities. Thus in a modern interpretation we treat as a symbol denoting , not as a quotient of numbers. Nothing here is being divided, nothing can be canceled out. In a modern interpretation is just one thing that happens to look like a quotient but isn’t, anymore than is a quotient.&lt;/p&gt;
    &lt;p&gt;A question arises for how to express the second (or nth) derivative in the Leibniz notation. Let (i.e. let be the first derivative of ). Then it follows that the second derivative in Leibniz notation is . Substituting the definition of we get:&lt;/p&gt;
    &lt;p&gt;Of course this is too verbose and no one wants to write it this way. This is where the vagaries begin. For convenience people use the usual algebraic rules to get a simpler notation, even though formally everything is one symbol and you can’t actually do algebra on it:&lt;/p&gt;
    &lt;p&gt;Two questions arise here.&lt;/p&gt;
    &lt;p&gt;First, why ? Shouldn’t it be ? One way to answer this question is to remember that is one symbol, not a multiplication (because is not a value). And so we’re just squaring that one symbol , which doesn’t require parentheses.&lt;/p&gt;
    &lt;p&gt;Another probably more honest way to answer this question is to recall that this isn’t real algebra– we just use a simularcum of algebra out of convenience. But convenience is a morally flexible thing, and people decided to drop parentheses because they’re a pain to write. So became .&lt;/p&gt;
    &lt;p&gt;Second, we said before that can be thought of as one symbol. Then what is this business? The answer here is the same– we aren’t doing real algebra but a simularcum of algebra. We aren’t really squaring anything; we’re overloading exponentiation to mean “second derivative”. The symbol is again one symbol.&lt;/p&gt;
    &lt;p&gt;There are a few more liberties people take with the Leibniz notation. Let . If we want to denote the derivative of we can do it in two ways:&lt;/p&gt;
    &lt;p&gt;Here is new, but the meaning should be clear. We’re just replacing in with the definition of . This is a little confusing because in the particular case of , it’s visually similar to the notation for second derivative. There are no ambiguities here so far– it’s just a visual artifact of the notation we have to learn to ignore. But now the liberties come.&lt;/p&gt;
    &lt;p&gt;Suppose we wanted to state what the derivative of at a point is. In Lagrange notation we say . In Leibniz notation the proper way to say it is:&lt;/p&gt;
    &lt;p&gt;But this is obviously a pain, so people end up taking two liberties. First, everyone drops the vertical line that denotes the application at . So in practice the form above becomes:&lt;/p&gt;
    &lt;p&gt;This shouldn’t “compile” because . Thus this statement is equivalent to saying , which should be a syntax error. But this is the notation most people use, and you have to get used to it.&lt;/p&gt;
    &lt;p&gt;Second, people decided that writing is too painful, and in practice everyone writes . This also shouldn’t compile (it would be something like writing , which also is a syntax error). But again, it’s the notation most people use.&lt;/p&gt;
    &lt;p&gt;To summarize what we have so far:&lt;/p&gt;
    &lt;p&gt;You’d think that we already pushed the notation past all limits of propriety, but scientists and engineers manage to push it even further. Consider the following simple problem. A circle’s radius is growing at 1 inch per second. How quickly is the area of the circle growing? Let’s solve it with Lagrange’s notation first.&lt;/p&gt;
    &lt;p&gt;The area of a circle is . We’re trying to understand change by using derivatives to analyze behavior of functions. Since is changing, what we’ll be looking at is the function for the area of a circle . And since the radius is changing with time, we have another function for the radius at a particular time . The problem doesn’t tell us how is defined, but it tells us its derivative is . All we have to do now is take the derivative of :&lt;/p&gt;
    &lt;p&gt;Thus at a given time the area is increasing at the rate of .&lt;/p&gt;
    &lt;p&gt;Now here’s the rub. In science and engineering most values are somehow related to other values, and nearly everything is related to time. Explicitly defining functions makes even simple relationships (like the one above) complicated to write down. So people dispense with denoting functions explicitly, and just treat these quantities as functions. In practice, the Leibniz notation for the equation above is something like this:&lt;/p&gt;
    &lt;p&gt;We’re not explicitly defining or mentioning functions anywhere, but immediately proceed with the understanding that the variables and are really functions.&lt;/p&gt;
    &lt;p&gt;As a matter of studying advice, I spent hours trying to understand exactly why anyone might want to do this and how the mechanics work, until I sat down to do a bunch of simple related rates problems, at which point abusing the notation in this way quickly became the most natural thing in the world. So if you’re stuck, go solve a bunch of simple problems and then come back here. Hopefully by then everything will make a lot more sense.&lt;/p&gt;
    &lt;p&gt;I read somewhere that in his notebooks Leibniz experimented with extending with a squiggle on top that went over to indicate that is not a value, but I haven’t been able to verify if that’s true.↩︎&lt;/p&gt;
    &lt;p&gt;Sep 30, 2024&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.spakhm.com/leibniz"/><published>2025-11-16T18:47:40+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947444</id><title>What if you don't need MCP at all?</title><updated>2025-11-16T23:33:54.541224+00:00</updated><content>&lt;doc fingerprint="ec16bc516819a6aa"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;What if you don't need MCP at all?&lt;/head&gt;
    &lt;p&gt;2025-11-02&lt;/p&gt;
    &lt;head rend="h1"&gt;Table of contents&lt;/head&gt;
    &lt;p&gt;After months of agentic coding frenzy, Twitter is still ablaze with discussions about MCP servers. I previously did some very light benchmarking to see if Bash tools or MCP servers are better suited for a specific task. The TL;DR: both can be efficient if you take care.&lt;/p&gt;
    &lt;p&gt;Unfortunately, many of the most popular MCP servers are inefficient for a specific task. They need to cover all bases, which means they provide large numbers of tools with lengthy descriptions, consuming significant context.&lt;/p&gt;
    &lt;p&gt;It's also hard to extend an existing MCP server. You could check out the source and modify it, but then you'd have to understand the codebase, together with your agent.&lt;/p&gt;
    &lt;p&gt;MCP servers also aren't composable. Results returned by an MCP server have to go through the agent's context to be persisted to disk or combined with other results.&lt;/p&gt;
    &lt;p&gt;I'm a simple boy, so I like simple things. Agents can run Bash and write code well. Bash and code are composable. So what's simpler than having your agent just invoke CLI tools and write code? This is nothing new. We've all been doing this since the beginning. I'd just like to convince you that in many situations, you don't need or even want an MCP server.&lt;/p&gt;
    &lt;p&gt;Let me illustrate this with a common MCP server use case: browser dev tools.&lt;/p&gt;
    &lt;head rend="h2"&gt;My Browser DevTools Use Cases&lt;/head&gt;
    &lt;p&gt;My use cases are working on web frontends together with my agent, or abusing my agent to become a scrapey little hacker boy so I can scrape all the data in the world. For these two use cases, I only need a minimal set of tools:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Start the browser, optionally with my default profile so I'm logged in&lt;/item&gt;
      &lt;item&gt;Navigate to a URL, either in the active tab or a new tab&lt;/item&gt;
      &lt;item&gt;Execute JavaScript in the active page context&lt;/item&gt;
      &lt;item&gt;Take a screenshot of the viewport&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;And if my use case requires additional special tooling, I want to quickly have my agent generate that for me and slot it in with the other tools.&lt;/p&gt;
    &lt;head rend="h2"&gt;Problems with Common Browser DevTools for Your Agent&lt;/head&gt;
    &lt;p&gt;People will recommend Playwright MCP or Chrome DevTools MCP for the use cases I illustrated above. Both are fine, but they need to cover all the bases. Playwright MCP has 21 tools using 13.7k tokens (6.8% of Claude's context). Chrome DevTools MCP has 26 tools using 18.0k tokens (9.0%). That many tools will confuse your agent, especially when combined with other MCP servers and built-in tools.&lt;/p&gt;
    &lt;p&gt;Using those tools also means you suffer from the composability issue: any output has to go through your agent's context. You can kind of fix this by using sub-agents, but then you rope in all the issues that sub-agents come with.&lt;/p&gt;
    &lt;head rend="h2"&gt;Embracing Bash (and Code)&lt;/head&gt;
    &lt;p&gt;Here's my minimal set of tools, illustrated via the README.md:&lt;/p&gt;
    &lt;code&gt;# Browser Tools

Minimal CDP tools for collaborative site exploration.

## Start Chrome

\`\`\`bash
./start.js              # Fresh profile
./start.js --profile    # Copy your profile (cookies, logins)
\`\`\`

Start Chrome on `:9222` with remote debugging.

## Navigate

\`\`\`bash
./nav.js https://example.com
./nav.js https://example.com --new
\`\`\`

Navigate current tab or open new tab.

## Evaluate JavaScript

\`\`\`bash
./eval.js 'document.title'
./eval.js 'document.querySelectorAll("a").length'
\`\`\`

Execute JavaScript in active tab (async context).

## Screenshot

\`\`\`bash
./screenshot.js
\`\`\`

Screenshot current viewport, returns temp file path.
&lt;/code&gt;
    &lt;p&gt;This is all I feed to my agent. It's a handful of tools that cover all the bases for my use case. Each tool is a simple Node.js script that uses Puppeteer Core. By reading that README, the agent knows the available tools, when to use them, and how to use them via Bash.&lt;/p&gt;
    &lt;p&gt;When I start a session where the agent needs to interact with a browser, I just tell it to read that file in full and that's all it needs to be effective. Let's walk through their implementations to see how little code this actually is.&lt;/p&gt;
    &lt;head rend="h3"&gt;The Start Tool&lt;/head&gt;
    &lt;p&gt;The agent needs to be able to start a new browser session. For scraping tasks, I often want to use my actual Chrome profile so I'm logged in everywhere. This script either rsyncs my Chrome profile to a temporary folder (Chrome doesn't allow debugging on the default profile), or starts fresh:&lt;/p&gt;
    &lt;code&gt;#!/usr/bin/env node

import { spawn, execSync } from "node:child_process";
import puppeteer from "puppeteer-core";

const useProfile = process.argv[2] === "--profile";

if (process.argv[2] &amp;amp;&amp;amp; process.argv[2] !== "--profile") {
    console.log("Usage: start.ts [--profile]");
    console.log("\nOptions:");
    console.log("  --profile  Copy your default Chrome profile (cookies, logins)");
    console.log("\nExamples:");
    console.log("  start.ts            # Start with fresh profile");
    console.log("  start.ts --profile  # Start with your Chrome profile");
    process.exit(1);
}

// Kill existing Chrome
try {
    execSync("killall 'Google Chrome'", { stdio: "ignore" });
} catch {}

// Wait a bit for processes to fully die
await new Promise((r) =&amp;gt; setTimeout(r, 1000));

// Setup profile directory
execSync("mkdir -p ~/.cache/scraping", { stdio: "ignore" });

if (useProfile) {
    // Sync profile with rsync (much faster on subsequent runs)
    execSync(
        'rsync -a --delete "/Users/badlogic/Library/Application Support/Google/Chrome/" ~/.cache/scraping/',
        { stdio: "pipe" },
    );
}

// Start Chrome in background (detached so Node can exit)
spawn(
    "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome",
    ["--remote-debugging-port=9222", `--user-data-dir=${process.env["HOME"]}/.cache/scraping`],
    { detached: true, stdio: "ignore" },
).unref();

// Wait for Chrome to be ready by attempting to connect
let connected = false;
for (let i = 0; i &amp;lt; 30; i++) {
    try {
        const browser = await puppeteer.connect({
            browserURL: "http://localhost:9222",
            defaultViewport: null,
        });
        await browser.disconnect();
        connected = true;
        break;
    } catch {
        await new Promise((r) =&amp;gt; setTimeout(r, 500));
    }
}

if (!connected) {
    console.error("â Failed to connect to Chrome");
    process.exit(1);
}

console.log(`â Chrome started on :9222${useProfile ? " with your profile" : ""}`);
&lt;/code&gt;
    &lt;p&gt;All the agent needs to know is to use Bash to run the start.js script, either with &lt;code&gt;--profile&lt;/code&gt; or without.&lt;/p&gt;
    &lt;head rend="h3"&gt;The Navigate Tool&lt;/head&gt;
    &lt;p&gt;Once the browser is running, the agent needs to navigate to URLs, either in a new tab or the active tab. That's exactly what the navigate tool provides:&lt;/p&gt;
    &lt;code&gt;#!/usr/bin/env node

import puppeteer from "puppeteer-core";

const url = process.argv[2];
const newTab = process.argv[3] === "--new";

if (!url) {
    console.log("Usage: nav.js &amp;lt;url&amp;gt; [--new]");
    console.log("\nExamples:");
    console.log("  nav.js https://example.com       # Navigate current tab");
    console.log("  nav.js https://example.com --new # Open in new tab");
    process.exit(1);
}

const b = await puppeteer.connect({
    browserURL: "http://localhost:9222",
    defaultViewport: null,
});

if (newTab) {
    const p = await b.newPage();
    await p.goto(url, { waitUntil: "domcontentloaded" });
    console.log("â Opened:", url);
} else {
    const p = (await b.pages()).at(-1);
    await p.goto(url, { waitUntil: "domcontentloaded" });
    console.log("â Navigated to:", url);
}

await b.disconnect();
&lt;/code&gt;
    &lt;head rend="h3"&gt;The Evaluate JavaScript Tool&lt;/head&gt;
    &lt;p&gt;The agent needs to execute JavaScript to read and modify the DOM of the active tab. The JavaScript it writes runs in the page context, so it doesn't have to fuck around with Puppeteer itself. All it needs to know is how to write code using the DOM API, and it sure knows how to do that:&lt;/p&gt;
    &lt;code&gt;#!/usr/bin/env node

import puppeteer from "puppeteer-core";

const code = process.argv.slice(2).join(" ");
if (!code) {
    console.log("Usage: eval.js 'code'");
    console.log("\nExamples:");
    console.log('  eval.js "document.title"');
    console.log('  eval.js "document.querySelectorAll(\'a\').length"');
    process.exit(1);
}

const b = await puppeteer.connect({
    browserURL: "http://localhost:9222",
    defaultViewport: null,
});

const p = (await b.pages()).at(-1);

if (!p) {
    console.error("â No active tab found");
    process.exit(1);
}

const result = await p.evaluate((c) =&amp;gt; {
    const AsyncFunction = (async () =&amp;gt; {}).constructor;
    return new AsyncFunction(`return (${c})`)();
}, code);

if (Array.isArray(result)) {
    for (let i = 0; i &amp;lt; result.length; i++) {
        if (i &amp;gt; 0) console.log("");
        for (const [key, value] of Object.entries(result[i])) {
            console.log(`${key}: ${value}`);
        }
    }
} else if (typeof result === "object" &amp;amp;&amp;amp; result !== null) {
    for (const [key, value] of Object.entries(result)) {
        console.log(`${key}: ${value}`);
    }
} else {
    console.log(result);
}

await b.disconnect();
&lt;/code&gt;
    &lt;head rend="h3"&gt;The Screenshot Tool&lt;/head&gt;
    &lt;p&gt;Sometimes the agent needs to have a visual impression of a page, so naturally we want a screenshot tool:&lt;/p&gt;
    &lt;code&gt;#!/usr/bin/env node

import { tmpdir } from "node:os";
import { join } from "node:path";
import puppeteer from "puppeteer-core";

const b = await puppeteer.connect({
    browserURL: "http://localhost:9222",
    defaultViewport: null,
});

const p = (await b.pages()).at(-1);

if (!p) {
    console.error("â No active tab found");
    process.exit(1);
}

const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
const filename = `screenshot-${timestamp}.png`;
const filepath = join(tmpdir(), filename);

await p.screenshot({ path: filepath });

console.log(filepath);

await b.disconnect();
&lt;/code&gt;
    &lt;p&gt;This will take a screenshot of the current viewport of the active tab, write it to a .png file in a temporary directory, and output the file path to the agent, which can then turn around and read it in and use its vision capabilities to "see" the image.&lt;/p&gt;
    &lt;head rend="h2"&gt;The Benefits&lt;/head&gt;
    &lt;p&gt;So how does this compare to the MCP servers I mentioned above? Well, to start, I can pull in the README whenever I need it and don't pay for it in every session. This is very similar to Anthropic's recently introduced skills capabilities. Except it's even more ad hoc and works with any coding agent. All I need to do is instruct my agent to read the README file.&lt;/p&gt;
    &lt;p&gt;Side note: many folks including myself have used this kind of setup before Anthropic released their skills system. You can see something similar in my "Prompts are Code" blog post or my little sitegeist.ai. Armin has also touched on the power of Bash and code compared to MCPs previously. Anthropic's skills add progressive disclosure (love it) and they make them available to a non-technical audience across almost all their products (also love it).&lt;/p&gt;
    &lt;p&gt;Speaking of the README, instead of pulling in 13,000 to 18,000 tokens like the MCP servers mentioned above, this README has a whopping 225 tokens. This efficiency comes from the fact that models know how to write code and use Bash. I'm conserving context space by relying heavily on their existing knowledge.&lt;/p&gt;
    &lt;p&gt;These simple tools are also composable. Instead of reading the outputs of an invocation into the context, the agent can decide to save them to a file for later processing, either by itself or by code. The agent can also easily chain multiple invocations in a single Bash command.&lt;/p&gt;
    &lt;p&gt;If I find that the output of a tool is not token efficient, I can just change the output format. Something that's hard or impossible to do depending on what MCP server you use.&lt;/p&gt;
    &lt;p&gt;And it's ridiculously easy to add a new tool or modify an existing tool for my needs. Let me illustrate.&lt;/p&gt;
    &lt;head rend="h2"&gt;Adding the Pick Tool&lt;/head&gt;
    &lt;p&gt;When the agent and I try to come up with a scraping method for a specific site, it's often more efficient if I'm able to point out DOM elements to it directly by just clicking on them. To make this super easy, I can just build a picker. Here's what I add to the README:&lt;/p&gt;
    &lt;code&gt;## Pick Elements

\`\`\`bash
./pick.js "Click the submit button"
\`\`\`

Interactive element picker. Click to select, Cmd/Ctrl+Click for multi-select, Enter to finish.
&lt;/code&gt;
    &lt;p&gt;And here's the code:&lt;/p&gt;
    &lt;code&gt;#!/usr/bin/env node

import puppeteer from "puppeteer-core";

const message = process.argv.slice(2).join(" ");
if (!message) {
    console.log("Usage: pick.js 'message'");
    console.log("\nExample:");
    console.log('  pick.js "Click the submit button"');
    process.exit(1);
}

const b = await puppeteer.connect({
    browserURL: "http://localhost:9222",
    defaultViewport: null,
});

const p = (await b.pages()).at(-1);

if (!p) {
    console.error("â No active tab found");
    process.exit(1);
}

// Inject pick() helper into current page
await p.evaluate(() =&amp;gt; {
    if (!window.pick) {
        window.pick = async (message) =&amp;gt; {
            if (!message) {
                throw new Error("pick() requires a message parameter");
            }
            return new Promise((resolve) =&amp;gt; {
                const selections = [];
                const selectedElements = new Set();

                const overlay = document.createElement("div");
                overlay.style.cssText =
                    "position:fixed;top:0;left:0;width:100%;height:100%;z-index:2147483647;pointer-events:none";

                const highlight = document.createElement("div");
                highlight.style.cssText =
                    "position:absolute;border:2px solid #3b82f6;background:rgba(59,130,246,0.1);transition:all 0.1s";
                overlay.appendChild(highlight);

                const banner = document.createElement("div");
                banner.style.cssText =
                    "position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#1f2937;color:white;padding:12px 24px;border-radius:8px;font:14px sans-serif;box-shadow:0 4px 12px rgba(0,0,0,0.3);pointer-events:auto;z-index:2147483647";

                const updateBanner = () =&amp;gt; {
                    banner.textContent = `${message} (${selections.length} selected, Cmd/Ctrl+click to add, Enter to finish, ESC to cancel)`;
                };
                updateBanner();

                document.body.append(banner, overlay);

                const cleanup = () =&amp;gt; {
                    document.removeEventListener("mousemove", onMove, true);
                    document.removeEventListener("click", onClick, true);
                    document.removeEventListener("keydown", onKey, true);
                    overlay.remove();
                    banner.remove();
                    selectedElements.forEach((el) =&amp;gt; {
                        el.style.outline = "";
                    });
                };

                const onMove = (e) =&amp;gt; {
                    const el = document.elementFromPoint(e.clientX, e.clientY);
                    if (!el || overlay.contains(el) || banner.contains(el)) return;
                    const r = el.getBoundingClientRect();
                    highlight.style.cssText = `position:absolute;border:2px solid #3b82f6;background:rgba(59,130,246,0.1);top:${r.top}px;left:${r.left}px;width:${r.width}px;height:${r.height}px`;
                };

                const buildElementInfo = (el) =&amp;gt; {
                    const parents = [];
                    let current = el.parentElement;
                    while (current &amp;amp;&amp;amp; current !== document.body) {
                        const parentInfo = current.tagName.toLowerCase();
                        const id = current.id ? `#${current.id}` : "";
                        const cls = current.className
                            ? `.${current.className.trim().split(/\s+/).join(".")}`
                            : "";
                        parents.push(parentInfo + id + cls);
                        current = current.parentElement;
                    }

                    return {
                        tag: el.tagName.toLowerCase(),
                        id: el.id || null,
                        class: el.className || null,
                        text: el.textContent?.trim().slice(0, 200) || null,
                        html: el.outerHTML.slice(0, 500),
                        parents: parents.join(" &amp;gt; "),
                    };
                };

                const onClick = (e) =&amp;gt; {
                    if (banner.contains(e.target)) return;
                    e.preventDefault();
                    e.stopPropagation();
                    const el = document.elementFromPoint(e.clientX, e.clientY);
                    if (!el || overlay.contains(el) || banner.contains(el)) return;

                    if (e.metaKey || e.ctrlKey) {
                        if (!selectedElements.has(el)) {
                            selectedElements.add(el);
                            el.style.outline = "3px solid #10b981";
                            selections.push(buildElementInfo(el));
                            updateBanner();
                        }
                    } else {
                        cleanup();
                        const info = buildElementInfo(el);
                        resolve(selections.length &amp;gt; 0 ? selections : info);
                    }
                };

                const onKey = (e) =&amp;gt; {
                    if (e.key === "Escape") {
                        e.preventDefault();
                        cleanup();
                        resolve(null);
                    } else if (e.key === "Enter" &amp;amp;&amp;amp; selections.length &amp;gt; 0) {
                        e.preventDefault();
                        cleanup();
                        resolve(selections);
                    }
                };

                document.addEventListener("mousemove", onMove, true);
                document.addEventListener("click", onClick, true);
                document.addEventListener("keydown", onKey, true);
            });
        };
    }
});

const result = await p.evaluate((msg) =&amp;gt; window.pick(msg), message);

if (Array.isArray(result)) {
    for (let i = 0; i &amp;lt; result.length; i++) {
        if (i &amp;gt; 0) console.log("");
        for (const [key, value] of Object.entries(result[i])) {
            console.log(`${key}: ${value}`);
        }
    }
} else if (typeof result === "object" &amp;amp;&amp;amp; result !== null) {
    for (const [key, value] of Object.entries(result)) {
        console.log(`${key}: ${value}`);
    }
} else {
    console.log(result);
}

await b.disconnect();
&lt;/code&gt;
    &lt;p&gt;Whenever I think it's faster for me to just click on a bunch of DOM elements instead of having the agent figure out the DOM structure, I can just tell it to use the pick tool. It's super efficient and allows me to build scrapers in no time. It's also fantastic to adjust the scraper if the DOM layout of a site changed.&lt;/p&gt;
    &lt;p&gt;If you're having trouble following what this tool does, worry not, I will have a video at the end of the blog post where you can see it in action. Before we look at that, let me show you an additional tool.&lt;/p&gt;
    &lt;head rend="h2"&gt;Adding the Cookies Tool&lt;/head&gt;
    &lt;p&gt;During one of my recent scraping adventures, I had a need for HTTP-only cookies of that site, so the deterministic scraper could pretend it's me. The Evaluate JavaScript tool cannot handle this as it executes in the page context. But it took not even a minute for me to instruct Claude to create that tool, add it to the readme, and away we went.&lt;/p&gt;
    &lt;p&gt;This is so much easier than adjusting, testing, and debugging an existing MCP server.&lt;/p&gt;
    &lt;head rend="h2"&gt;A Contrived Example&lt;/head&gt;
    &lt;p&gt;Let me illustrate usage of this set of tools with a contrived example. I set out to build a simple Hacker News scraper where I basically pick the DOM elements for the agent, based on which it can then write a minimal Node.js scraper. Here's how that looks in action. I sped up a few sections where Claude was its usual slow self.&lt;/p&gt;
    &lt;p&gt;Real world scraping tasks would look a bit more involved. Also, there's no point in doing it like this for such a simple site like Hacker News. But you get the idea.&lt;/p&gt;
    &lt;p&gt;Final token tally:&lt;/p&gt;
    &lt;head rend="h2"&gt;Making This Reusable Across Agents&lt;/head&gt;
    &lt;p&gt;Here's how I've set things up so I can use this with Claude Code and other agents. I have a folder &lt;code&gt;agent-tools&lt;/code&gt; in my home directory. I then clone the repositories of individual tools, like the browser tools repository above, into that folder. Then I set up an alias:&lt;/p&gt;
    &lt;code&gt;alias cl="PATH=$PATH:/Users/badlogic/agent-tools/browser-tools:&amp;lt;other-tool-dirs&amp;gt; &amp;amp;&amp;amp; claude --dangerously-skip-permissions"
&lt;/code&gt;
    &lt;p&gt;This way all of the scripts are available to sessions of Claude, but don't pollute my normal environment. I also prefix each script with the full tool name, e.g. &lt;code&gt;browser-tools-start.js&lt;/code&gt;, to eliminate name collisions. I also add a single sentence to the README telling the agent that all the scripts are globally available. This way, the agent doesn't have to change its working directory just to call a tool script, saving a few tokens here and there, and reducing the chances of the agent getting confused by the constant working directory changes.&lt;/p&gt;
    &lt;p&gt;Finally, I add the agent tools directory as a working directory to Claude Code via &lt;code&gt;/add-dir&lt;/code&gt;, so I can use &lt;code&gt;@README.md&lt;/code&gt; to reference a specific tool's README file and get it into the agent's context. I prefer this to Anthropic's skill auto-discovery, which I found to not work reliably in practice. It also means I save a few more tokens: Claude Code injects all the frontmatter of all skills it can find into the system prompt (or first user message, I forgot, see https://cchistory.mariozechner.at)&lt;/p&gt;
    &lt;head rend="h2"&gt;In Conclusion&lt;/head&gt;
    &lt;p&gt;Building these tools is ridiculously easy, gives you all the freedom you need, and makes you, your agent, and your token usage efficient. You can find the browser tools on GitHub.&lt;/p&gt;
    &lt;p&gt;This general principle can apply to any kind of harness that has some kind of code execution environment. Think outside the MCP box and you'll find that this is much more powerful than the more rigid structure you have to follow with MCP.&lt;/p&gt;
    &lt;p&gt;With great power comes great responsibility though. You will have to come up with a structure for how you build and maintain those tools yourself. Anthropic's skill system can be one way to do it, though that's less transferable to other agents. Or you follow my setup above.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://mariozechner.at/posts/2025-11-02-what-if-you-dont-need-mcp/"/><published>2025-11-16T18:58:10+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947633</id><title>Pennies Are Trash Now</title><updated>2025-11-16T23:33:54.309316+00:00</updated><content>&lt;doc fingerprint="7cbc16c67484278b"&gt;
  &lt;main&gt;
    &lt;p&gt;Listen to more stories on the Noa app.&lt;/p&gt;
    &lt;p&gt;What, exactly, is the plan for all the pennies?&lt;/p&gt;
    &lt;p&gt;Many Americans—and many people who, though not American, enjoy watching from a safe distance as predictable fiascoes unfold in this theoretical superpower from week to week—find themselves now pondering one question. What is the United States going to do with all the pennies—all the pennies in take-a-penny-leave-a-penny trays, and cash registers, and couch cushions, and the coin purses of children, and Big Gulp cups full of pennies; all the pennies that are just lying around wherever—following the abrupt announcement that the country is no longer in the penny game and will stop minting them, effective immediately?&lt;/p&gt;
    &lt;p&gt;The answer appears to be nothing at all. There is no plan.&lt;/p&gt;
    &lt;p&gt;The U.S. Mint estimates that there are 300 billion pennies in circulation—which, if true, means that the Milky Way galaxy contains about three times more American pennies than stars. How, you ask, could the plan for 300,000,000,000 coins be “nothing”? The Mint, you say, issued a formal press release about striking the final cents. Surely, you insist, that implies some sort of strategy, or at least is evidence of logical human thought and action?&lt;/p&gt;
    &lt;p&gt;Wow—you are talking like a baby angel raised by puppies in a beachfront palace with no right angles, who has never attempted to wrench useful information out of a government agency’s public-affairs officer. I would give anything to spend 30 narcotic minutes in your gumdrop world. Let me take your round little face between my hands and squeeze it tight as I scream this:&lt;/p&gt;
    &lt;p&gt;That’s not how things work with pennies.&lt;/p&gt;
    &lt;p&gt;It is my miserable fate to possess more miscellaneous information about U.S. one-cent coins than, possibly, any other person on this planet. This is not a boast. The information I command is data no one without a neurodevelopmental disorder would ever yearn to know; it is a body of knowledge with no practical use for anyone. I contracted this condition last year, as I spent several months attempting to ascertain why, in the year 2024, one out of every two coins minted in the United States was a one-cent piece, even though virtually no one-cent pieces were ever spent in the nationwide conduction of commerce, and, on top of that, each cost more than three cents apiece to manufacture.&lt;/p&gt;
    &lt;p&gt;In search of the answer, I interviewed former directors of the Mint, members of Congress, professors of metallurgical engineering and of law, economists, charity workers, multiple manufacturers of those machines that transform regular pennies into souvenir smushed pennies, scrap-metal recyclers, historians, lobbyists, the CEO of Coinstar, coin collectors, sociologists, government auditors, and the paranoid goblins who perform the opaque work of the Federal Reserve. The initial draft of the story I filed for a popular New York City–based publication was 20,000 words long. (Sadly, all of the best parts everyone would have loved were cut by my psychotic editor, whose No. 1 passion in life was removing 13,000 perfect words from my first drafts; I’m not worried about him reading these words, because a low-class butcher like that doesn’t possess enough humanity to subscribe to The Atlantic—though, if you happen to know William, I would thank you not to send him a gift link to this article.) And what I learned was that there was no sane reason why.&lt;/p&gt;
    &lt;p&gt;The simplest way to say this is that everyone directly involved in making billions of pennies every year knew that it was pointless to do so, and also thought that it was legally impossible to stop. Specifically, they thought they were bound to make pennies until Congress issued a law ordering them to cease (which, everyone agreed, was unlikely to ever happen). This, I discovered months into my research, did not appear to be true.&lt;/p&gt;
    &lt;p&gt;I published my theory—that Title 31, Section 5111 of the Code of Laws of the United States of America empowers the secretary of the Treasury to order that no pennies be minted—last September. On a U.S. Mint webpage that appears to have been created earlier this week (simultaneously with the announcement that the final penny coins intended for circulation had been struck in Philadelphia), this long-overlooked section of the U.S. Code is cited as the legal justification for halting penny production.&lt;/p&gt;
    &lt;p&gt;Another thing I learned daily over the course of my reporting: No one cares about pennies. Finding people to speak with me about them was nearly impossible, even, as in the case of the U.S. Mint’s public-affairs officers, when it was ostensibly their job. (The Mint, which has annually unleashed billions of unwanted and unused pennies upon the nation, gave me the strong impression of being embarrassed to be associated with the coins in any way. Indeed, a retired Mint spokesperson confirmed this.)&lt;/p&gt;
    &lt;p&gt;There were logical reasons not to care: 300 billion pennies—all of them still and indefinitely legal currency—constitute approximately zero percent of the total money supply of the United States (0.0 percent if rounding to one decimal place). The millions of dollars the government loses by paying more than three cents to manufacture one-cent coins represents an infinitesimal fraction of 1 percent of the government’s several-trillion-dollar budget. And these days, most people barely encounter the coins. According to government reports, the large majority of the pennies that have ever been minted in this country either have undergone what is termed “disappearance” (yes, this is the official wording) or are “sitting” in Americans’ private homes.&lt;/p&gt;
    &lt;p&gt;The core problem with the pennies turned out to be a mostly psychological horror. In my article, I described this situation as “the dumbest thing I ever heard” and “the Perpetual Penny Paradox”—both terms I stand by a year later.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Most pennies produced by the U.S. Mint are given out as change but never spent; this creates an incessant demand for new pennies to replace them, so that cash transactions that necessitate pennies (i.e., any concluding with a sum whose final digit is 1, 2, 3, 4, 6, 7, 8 or 9) can be settled. Because these replacement pennies will themselves not be spent, they will need to be replaced with new pennies that will also not be spent, and so will have to be replaced with new pennies that will not be spent, which will have to be replaced by new pennies (that will not be spent, and so will have to be replaced). In other words, we keep minting pennies because no one uses the pennies we mint.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;But the problem was not solely the theoretical terror of the infinite. These tokens are also a physical burden, adding 2.5 grams of weight apiece to Americans’ cup holders and winter-coat pockets and junk drawers. In a practical sense, penny coins are worthless. (Many people, who do not themselves purchase anything with pennies, assume that very poor people probably use them—disregarding the fact that they have never seen a poor person settling a bill with hundreds of pennies, which would take a very long time to amass, on top of being cumbersome to carry around; the sociologists I interviewed, who study extreme poverty, expressed skepticism that anyone lives off hordes of one-cent coins.) Effectively, they are trash—trash that Americans pay the government (via taxes) to manufacture, at a loss, and then foist back on us; millions of pounds of trash for which we, every time we have ever accepted a penny coin at checkout, have tacitly agreed to provide free private stowage, in perpetuity.&lt;/p&gt;
    &lt;p&gt;So we’ve stored the pennies—under the floor mats in our RAV4s, in our empty water-cooler jugs. We’ve had to. Mint officials told federal auditors in 2019 that, if even a fraction of the nation’s never-spent pennies were simultaneously spent or cashed in, the deluge of change would be “logistically unmanageable” for the federal government. For one thing, there would likely not be enough space to store them in our nation’s bank vaults.&lt;/p&gt;
    &lt;p&gt;That’s the first thing I thought of when I read the news that the Mint had produced its last pennies for circulation: What are they going to do about the vaults? I went to the Mint website and read its press release. Then I read through every item on the neatly formatted Penny FAQs page. Then I realized they weren’t going to do anything about the vaults, because there was no plan at all to do anything except stop making pennies.&lt;/p&gt;
    &lt;p&gt;This isn’t how it usually works when a smoothly running country elects to retire some portion of its currency. Canada, unsurprisingly, provides a seemingly perfect model: When the cost to manufacture Canadian pennies reached 1.6 cents apiece, in 2012, the government announced that it would cease production of the coins and gradually withdraw them from circulation. Simultaneously, the government debuted a robust public-information campaign, explaining to Canadians the logic behind its decision and publishing guidance (including little pictures) for how to round out cash transactions in the absence of pennies. To date, the Canadian Mint has recycled more than 15,000 tons of pennies, redeemed by the public for their face value. Recycling the metal from Canadian pennies (mainly copper and steel) helped offset the cost of trucking billions of unwanted pennies across the nation. And, of course, it kept the coins out of landfills.&lt;/p&gt;
    &lt;p&gt;But it’s unclear if anyone would bother recycling U.S. pennies, which, although copper-plated, are made mostly of zinc. Recycled zinc is worth only about a quarter of recycled copper; nearly 1 million tons of copper are recycled in the U.S. each year, versus only about 165,000 tons of zinc. On top of this, a Canadian Mint official told me, copper and zinc are “very hard” to separate.&lt;/p&gt;
    &lt;p&gt;The good news, which is also very bad news, is that smelting zinc—extracting it from rock—is what a professor from the Colorado School of Mines described to me as “a very unclean, toxic process.” The best-case scenario for recycling U.S. pennies, then, would perhaps be to find industrial manufacturers willing to pay for old penny material in exchange for avoiding the hassle, expense, and danger of harvesting fresh zinc. The worst-case scenario would seem to be that we have only just a few days ago stopped manufacturing billions and billions and billions of hazardously produced zinc disks with no practical use that are also unsellable as scrap.&lt;/p&gt;
    &lt;p&gt;Incredibly, the penny’s end seems poised to be more ignominious than even the phrase worst-case scenario might suggest. A scenario is a sketch of a possible future event; worst-case implies some sense of order and codification—that multiple scenarios have been considered, and ranked by degrees of badness. Worst-case scenario implies that someone is thinking, beyond the present moment, about what can and should be done; it implies an intention, or at least a wish, to avoid the worst-case scenario.&lt;/p&gt;
    &lt;p&gt;That option, like all others, appears to have been removed from the table. The tabletop, in fact, is entirely bare. The government has issued no guidance about how cash transactions calculated to the cent should work in what will soon be a cent-coin-less country (as soon as the final batch of pennies plunges out of circulation—which will happen with shocking speed). “We are not aware of any plans to issue rounding guidance,” Andrew Von Ah, the director of physical infrastructure for the Government Accountability Office, told me on Friday; in 2019, the GAO released a report in which an association representing the nation’s banks especially emphasized the need for public education and rounding guidance “before suspending the penny.” The GAO, Von Ah said, is likewise “not aware of any plan to remove pennies from circulation”—nor indeed “of any plan to mitigate any potential issues with penny suspension.”&lt;/p&gt;
    &lt;p&gt;So: No one is coming to collect all the useless pennies. And no one is explaining how to get along without them. The government, in other words, is treating the pennies the way it has for decades: by making them Americans’ problem.&lt;/p&gt;
    &lt;p&gt;But perhaps the most alarming thing Von Ah told me was not about the lack of planning for the penny’s sudden demise. It was about the possibility that our pointless cent might someday rise from the dead. “The Mint could decide to restart production of the penny in the future,” Von Ah said—or was this a warning?—“if it is determined there is a need to do so.”&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.theatlantic.com/ideas/2025/11/pennies-circulation-mint/684935/"/><published>2025-11-16T19:20:27+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947639</id><title>The fate of "small" open source</title><updated>2025-11-16T23:33:54.198845+00:00</updated><content>&lt;doc fingerprint="2360927dbacf3e3b"&gt;
  &lt;main&gt;
    &lt;p&gt;By far the most popular npm package I’ve ever written is &lt;code&gt;blob-util&lt;/code&gt;, which is ~10 years old and still gets 5+ million weekly downloads.&lt;/p&gt;
    &lt;p&gt;It’s a small collection of utilities for working with &lt;code&gt;Blob&lt;/code&gt;s in JavaScript. I wrote it because I found that PouchDB users were endlessly confused about how to work with &lt;code&gt;Blob&lt;/code&gt;s and how to convert them to strings, &lt;code&gt;ArrayBuffer&lt;/code&gt;s, etc.&lt;/p&gt;
    &lt;p&gt;Given that some 80% of developers are now using AI in their regular work, &lt;code&gt;blob-util&lt;/code&gt; is almost certainly the kind of thing that most developers would just happily have an LLM generate for them. Sure, you could use &lt;code&gt;blob-util&lt;/code&gt;, but then you’d be taking on an extra dependency, with unknown performance, maintenance, and supply-chain risks.&lt;/p&gt;
    &lt;p&gt;And sure enough, Claude will happily spit out whatever &lt;code&gt;Blob&lt;/code&gt; utilities you need when prompted:&lt;/p&gt;
    &lt;p&gt;&amp;gt; Write me a utility function in TypeScript to convert a Blob to an ArrayBuffer. It should return a Promise.&lt;/p&gt;
    &lt;quote&gt;function blobToArrayBuffer(blob: Blob): Promise&amp;lt;ArrayBuffer&amp;gt; { return new Promise((resolve, reject) =&amp;gt; { const reader = new FileReader(); reader.onload = () =&amp;gt; { if (reader.result instanceof ArrayBuffer) { resolve(reader.result); } else { reject(new Error('Failed to read Blob as ArrayBuffer')); } }; reader.onerror = () =&amp;gt; { reject(reader.error); }; reader.readAsArrayBuffer(blob); }); }&lt;/quote&gt;
    &lt;p&gt;Claude’s version is pretty close to the &lt;code&gt;blob-util&lt;/code&gt; version (unsurprising, since it was probably trained on it!). Although it’s much more verbose, unnecessarily checking if &lt;code&gt;readAsArrayBuffer&lt;/code&gt; actually gives you an &lt;code&gt;ArrayBuffer&lt;/code&gt; (although this does make TypeScript happy). To be fair, it also improves on my implementation by directly &lt;code&gt;reject&lt;/code&gt;ing with an error rather than the more awkward &lt;code&gt;onerror&lt;/code&gt; event.&lt;/p&gt;
    &lt;p&gt;Note: for anyone wondering, yes Claude did suggest the new &lt;code&gt;Blob.arrayBuffer()&lt;/code&gt; method, but it also generated the above for “older environments.”&lt;/p&gt;
    &lt;p&gt;I suppose some people would see this as progress: fewer dependencies, more robust code (even if it’s a bit more verbose), quicker turnaround time than the old “search npm, find a package, read the docs, install it” approach.&lt;/p&gt;
    &lt;p&gt;I don’t have any excessive pride in this library, and I don’t particularly care if the download numbers go up or down. But I do think something is lost with the AI approach. When I wrote &lt;code&gt;blob-util&lt;/code&gt;, I took a teacher’s mentality: the README has a cutesy and whimsical tutorial featuring Kirby, in all his blobby glory. (I had a thing for putting Nintendo characters in all my stuff at the time.)&lt;/p&gt;
    &lt;p&gt;The goal wasn’t just to give you a utility to solve your problem (although it does that) – the goal was also to teach people how to use JavaScript effectively, so that you’d have an understanding of how to solve other problems in the future.&lt;/p&gt;
    &lt;p&gt;I don’t know which direction we’re going in with AI (well, ~80% of us; to the remaining holdouts, I salute you and wish you godspeed!), but I do think it’s a future where we prize instant answers over teaching and understanding. There’s less reason to use something like &lt;code&gt;blob-util&lt;/code&gt;, which means there’s less reason to write it in the first place, and therefore less reason to educate people about the problem space.&lt;/p&gt;
    &lt;p&gt;Even now there’s a movement toward putting documentation in an &lt;code&gt;llms.txt&lt;/code&gt; file, so you can just point an agent at it and save your brain cells the effort of deciphering English prose. (Is this even documentation anymore? What is documentation?)&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusion&lt;/head&gt;
    &lt;p&gt;I still believe in open source, and I’m still doing it (in fits and starts). But one thing has become clear to me: the era of small, low-value libraries like &lt;code&gt;blob-util&lt;/code&gt; is over. They were already on their way out thanks to Node.js and the browser taking on more and more of their functionality (see &lt;code&gt;node:glob&lt;/code&gt;, &lt;code&gt;structuredClone&lt;/code&gt;, etc.), but LLMs are the final nail in the coffin.&lt;/p&gt;
    &lt;p&gt;This does mean that there’s less opportunity to use these libraries as a springboard for user education (Underscore.js also had this philosophy), but maybe that’s okay. If there’s no need to find a library to, say, group the items in an array, then maybe learning about the mechanics of such libraries is unnecessary. Many software developers will argue that asking a candidate to reverse a binary tree is pointless, since it never comes up in the day-to-day job, so maybe the same can be said for utility libraries.&lt;/p&gt;
    &lt;p&gt;I’m still trying to figure out what kinds of open source are worth writing in this new era (hint: ones that an LLM can’t just spit out on command), and where education is the most lacking. My current thinking is that the most value is in bigger projects, more inventive projects, or in more niche topics not covered in an LLM’s training data. For example, I look back on my work on &lt;code&gt;fuite&lt;/code&gt; and various memory-leak-hunting blog posts, and I’m pretty satisfied that an LLM couldn’t reproduce this, because it requires novel research and creative techniques. (Although who knows: maybe someday an agent will be able to just bang its head against Chrome heap snapshots until it finds the leak. I’ll believe it when I see it.)&lt;/p&gt;
    &lt;p&gt;There’s been a lot of hand-wringing lately about where open source fits in in a world of LLMs, but I still see people pushing the boundaries. For example, a lot of naysayers think there’s no point in writing a new JavaScript framework, since LLMs are so heavily trained on React, but then there goes the indefatigable Dominic Gannaway writing Ripple.js, yet another JavaScript framework (and with some new ideas, to boot!). This is the kind of thing I like to see: humans laughing in the face of the machine, going on with their human thing.&lt;/p&gt;
    &lt;p&gt;So if there’s a conclusion to this meandering blog post (excuse my squishy human brain; I didn’t use an LLM to write this), it’s just that: yes, LLMs have made some kinds of open source obsolete, but there’s still plenty of open source left to write. I’m excited to see what kinds of novel and unexpected things you all come up with.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://nolanlawson.com/2025/11/16/the-fate-of-small-open-source/"/><published>2025-11-16T19:21:13+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947761</id><title>Dark Pattern Games</title><updated>2025-11-16T23:33:53.714829+00:00</updated><content>&lt;doc fingerprint="2d3d45750997f69b"&gt;
  &lt;main&gt;&lt;p&gt;A game review website devoted to helping you find games that don't use psychological tricks to manipulate you into becoming an addicted gamer. Learn about the dark patterns that game designers use to waste your precious time and money.&lt;/p&gt;&lt;p&gt;A temporal dark pattern is designed to get you to spend more time playing the game than you would have otherwise.&lt;/p&gt;More Temporal Dark Patterns...&lt;p&gt;Social dark patterns use your relationships with friends and family to benefit the game.&lt;/p&gt;More Social Dark Patterns...&lt;p&gt;A monetary dark pattern is one which tricks you into spending more money than you want to spend on a game.&lt;/p&gt;More Monetary Dark Patterns...&lt;p&gt;These dark patterns are psychological tricks that are used to get you to make bad decisions.&lt;/p&gt;More Psychological Dark Patterns...&lt;p&gt;DarkPattern.Games is a brand new website. We are starting with iOS and Android games because this is where most dark patterns appear, but we will be adding other platforms soon.&lt;/p&gt;&lt;p&gt;Because we are new, we have a lot of games that don't have any reviews yet. This will improve over time and we are working hard to get games reviewed. Please help us by finding a familiar game and submitting a review.&lt;/p&gt;&lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.darkpattern.games"/><published>2025-11-16T19:38:49+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947770</id><title>Browser fingerprinting via favicon</title><updated>2025-11-16T23:33:53.207665+00:00</updated><content>&lt;doc fingerprint="db1fc4502523b4d8"&gt;
  &lt;main&gt;
    &lt;p&gt;Supercookie uses favicons to assign a unique identifier to website visitors.&lt;lb/&gt; Unlike traditional tracking methods, this ID can be stored almost persistently and cannot be easily cleared by the user.&lt;/p&gt;
    &lt;p&gt;The tracking method works even in the browser's incognito mode and is not cleared by flushing the cache, closing the browser or restarting the operating system, using a VPN or installing AdBlockers. 🍿 Live demo.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Paper by Scientists at University of Illinois, Chicago: www.cs.uic.edu&lt;/item&gt;
      &lt;item&gt;Article by heise: heise.de&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This repository is for educational and demonstration purposes only!&lt;/p&gt;
    &lt;p&gt;The demo of "supercookie" as well as the publication of the source code of this repository is intended to draw attention to the problem of tracking possibilities using favicons.&lt;/p&gt;
    &lt;p&gt;requirements: Docker daemon&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Clone repository&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;git clone https://github.com/jonasstrehle/supercookie&lt;/code&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Update .env file in supercookie/server/.env&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;HOST_MAIN=yourdomain.com #or localhost:10080
PORT_MAIN=10080

HOST_DEMO=demo.yourdomain.com #or localhost:10081
PORT_DEMO=10081&lt;/code&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Run container&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;cd supercookie/server
docker-compose up&lt;/code&gt;
    &lt;p&gt;-&amp;gt; Webserver will be running at https://yourdomain.com&lt;/p&gt;
    &lt;p&gt;requirements: Node.js&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Clone repository&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;git clone https://github.com/jonasstrehle/supercookie&lt;/code&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Update .env file in supercookie/server/.env&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;HOST_MAIN=localhost:10080
PORT_MAIN=10080

HOST_DEMO=localhost:10081
PORT_DEMO=10081&lt;/code&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Run service&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;cd supercookie/server
node --experimental-json-modules main.js&lt;/code&gt;
    &lt;p&gt;-&amp;gt; Webserver will be running at http://localhost:10080&lt;/p&gt;
    &lt;head rend="h2"&gt;Workwise of supercookie&lt;/head&gt;
    &lt;p&gt;Modern browsers offer a wide range of features to improve and simplify the user experience. One of these features are the so-called favicons: A favicon is a small (usually 16×16 or 32×32 pixels) logo used by web browsers to brand a website in a recognizable way. Favicons are usually shown by most browsers in the address bar and next to the page's name in a list of bookmarks.&lt;/p&gt;
    &lt;p&gt;To serve a favicon on their website, a developer has to include an attribute in the webpage’s header. If this tag does exist, the browser requests the icon from the predefined source and if the server response contains an valid icon file that can be properly rendered this icon is displayed by the browser. In any other case, a blank favicon is shown.&lt;/p&gt;
    &lt;code&gt;&amp;lt;link rel="icon" href="/favicon.ico" type="image/x-icon"&amp;gt;&lt;/code&gt;
    &lt;p&gt;The favicons must be made very easily accessible by the browser. Therefore, they are cached in a separate local database on the system, called the favicon cache (F-Cache). A F-Cache data entries includes the visited URL (subdomain, domain, route, URL paramter), the favicon ID and the time to live (TTL). While this provides web developers the ability to delineate parts of their website using a wide variety of icons for individual routes and subdomains, it also leads to a possible tracking scenario.&lt;/p&gt;
    &lt;p&gt;When a user visits a website, the browser checks if a favicon is needed by looking up the source of the shortcut icon link reference of the requested webpage. The browser initialy checks the local F-cache for an entry containing the URL of the active website. If a favicon entry exists, the icon will be loaded from the cache and then displayed. However, if there is no entry, for example because no favicon has ever been loaded under this particular domain, or the data in the cache is out of date, the browser makes a GET request to the server to load the site's favicon.&lt;/p&gt;
    &lt;p&gt;In the article a possible threat model is explained that allows to assign a unique identifier to each browser in order to draw conclusions about the user and to be able to identify this user even in case of applied anti-fingerprint measures, such as the use of a VPN, deletion of cookies, deletion of the browser cache or manipulation of the client header information.&lt;/p&gt;
    &lt;p&gt;A web server can draw conclusions about whether a browser has already loaded a favicon or not: So when the browser requests a web page, if the favicon is not in the local F-cache, another request for the favicon is made. If the icon already exists in the F-Cache, no further request is sent. By combining the state of delivered and not delivered favicons for specific URL paths for a browser, a unique pattern (identification number) can be assigned to the client. When the website is reloaded, the web server can reconstruct the identification number with the network requests sent by the client for the missing favicons and thus identify the browser.&lt;/p&gt;
    &lt;p&gt;It looks like all top browsers ( Chrome, Firefox, Safari, Edge) are vulnerable to this attack scenario.&lt;lb/&gt; Mobile browsers are also affected.&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="7"&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Browser&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Windows&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;MacOS&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Linux&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;iOS&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Android&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;Info&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="7"&gt;
        &lt;cell&gt;Chrome (v 111.0)&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;?&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="7"&gt;
        &lt;cell&gt;Safari (v 14.0)&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="7"&gt;
        &lt;cell&gt;Edge (v 87.0)&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="7"&gt;
        &lt;cell&gt;Firefox (v 86.0)&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;Fingerprint different in incognito mode&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Brave (v 1.19.92)&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;❔&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="7"&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Browser&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Windows&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;MacOS&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Linux&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;iOS&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;
          &lt;p&gt;Android&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell role="head"&gt;Info&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="7"&gt;
        &lt;cell&gt;Brave (v 1.14.0)&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Firefox (&amp;lt; v 84.0)&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;❔&lt;/cell&gt;
        &lt;cell&gt;❌&lt;/cell&gt;
        &lt;cell&gt;✅&lt;/cell&gt;
        &lt;cell&gt;-&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;By varying the number of bits that corresponds to the number of redirects to subpaths, this attack can be scaled almost arbitrarily. It can distinguish 2^N unique users, where N is the number of redirects on the client side. The time taken for the read and write operation increases as the number of distinguishable clients does. &lt;lb/&gt; In order to keep the number of redirects as minimal as possible, N can have a dynamic length. More about this here.&lt;/p&gt;
    &lt;p&gt;The most straightforward solution is to disable the favicon cache completely. As long as the browser vendors do not provide a feature against this vulnerability it's probably the best way to clear the F-cache.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;p&gt;Chrome • MacOS&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Delete &lt;code&gt;~/Library/Application Support/Google/Chrome/Default/Favicons&lt;/code&gt;&lt;/item&gt;
          &lt;item&gt;Delete &lt;code&gt;~/Library/Application Support/Google/Chrome/Default/Favicons-journal&lt;/code&gt;&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Delete &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Chrome • Windows&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Delete &lt;code&gt;C:\Users\username\AppData\Local\Google\Chrome\User Data\Default&lt;/code&gt;&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Delete &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Safari • MacOS&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Delete content of &lt;code&gt;~/Library/Safari/Favicon Cache&lt;/code&gt;&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Delete content of &lt;/item&gt;
      &lt;item&gt;
        &lt;p&gt;Edge • MacOS&lt;/p&gt;
        &lt;list rend="ul"&gt;
          &lt;item&gt;Delete &lt;code&gt;~/Library/Application Support/Microsoft Edge/Default/Favicon&lt;/code&gt;&lt;/item&gt;
          &lt;item&gt;Delete &lt;code&gt;~/Library/Application Support/Microsoft Edge/Default/Favicons-journal&lt;/code&gt;&lt;/item&gt;
        &lt;/list&gt;
      &lt;/item&gt;
      &lt;item&gt;Delete &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I am a twenty year old student from 🇩🇪 Germany. I like to work in software design and development and have an interest in the IT security domain.&lt;/p&gt;
    &lt;p&gt;This repository, including the setup of a demonstration portal, was created within two days as part of a private research project on the topic of "Tracking on the Web".&lt;/p&gt;
    &lt;p&gt;Liked the project? Just give it a star ⭐ and spread the world!&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Bruce Schneier on schneier.com&lt;/item&gt;
      &lt;item&gt;Matthew Gault on vice.com&lt;/item&gt;
      &lt;item&gt;Rhett Jones on gizmodo.com&lt;/item&gt;
      &lt;item&gt;Dev Kundaliyaon on computing.co.uk&lt;/item&gt;
      &lt;item&gt;Barclay Ballard on techradar.com&lt;/item&gt;
      &lt;item&gt;Discussion on ycombinator.com&lt;/item&gt;
      &lt;item&gt;🇩🇪 Andreas Proschofsky on derstandard.de&lt;/item&gt;
      &lt;item&gt;🇩🇪 Dieter Petereit on t3n.de&lt;/item&gt;
      &lt;item&gt;🇪🇸 ALVY on microsiervos.com&lt;/item&gt;
      &lt;item&gt;🇧🇷 Felipe Demartini on canaltech.com.br&lt;/item&gt;
      &lt;item&gt;🇧🇬 Daniel Despodov on kaldata.com&lt;/item&gt;
      &lt;item&gt;🇫🇷 Guillaume Belfiore on clubic.com&lt;/item&gt;
      &lt;item&gt;🇨🇳 study875 on cnbeta.com&lt;/item&gt;
      &lt;item&gt;🇷🇺 ITSumma on habr.com&lt;/item&gt;
      &lt;item&gt;🇷🇺 securitylab.ru&lt;/item&gt;
      &lt;item&gt;Seytonic on YouTube&lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/jonasstrehle/supercookie"/><published>2025-11-16T19:39:52+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947810</id><title>Open-source Zig book</title><updated>2025-11-16T23:33:52.917969+00:00</updated><content>&lt;doc fingerprint="755f0c1b2f7c30bf"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Learning Zig is not just about adding a language to your resume.&lt;/head&gt;
    &lt;p&gt;It is about fundamentally changing how you think about software.&lt;/p&gt;
    &lt;p&gt;“You came for syntax.&lt;/p&gt;
    &lt;p&gt;You'll leave with a philosophy.”&lt;/p&gt;
    &lt;p&gt;61 chapters • Project-based • Zero AI • Written by @zigbook&lt;/p&gt;
    &lt;p&gt;zsh — zigbook.net&lt;/p&gt;
    &lt;p&gt;Welcome to Zigbook 🦎&lt;/p&gt;
    &lt;p&gt;Ready to transform how you think about software?&lt;/p&gt;
    &lt;p&gt;Exec: zig build zigbook&lt;/p&gt;
    &lt;p&gt;zigbook %$ &lt;/p&gt;
    &lt;p&gt;Interactive terminal • Type to get started&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.zigbook.net"/><published>2025-11-16T19:44:27+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45947822</id><title>Linux mode setting, from the comfort of OCaml</title><updated>2025-11-16T23:33:52.108156+00:00</updated><content>&lt;doc fingerprint="9488a0134df593d0"&gt;
  &lt;main&gt;
    &lt;p&gt;Linux provides the KMS (Kernel Mode Setting) API to let applications query and configure display settings. It's used by Wayland compositors and other programs that need to configure the hardware directly. I found the C API a little verbose and hard to follow so I made libdrm-ocaml, which lets us run commands interactively in a REPL.&lt;/p&gt;
    &lt;p&gt;We'll start by discovering what hardware is available and how it's currently configured, then configure a monitor to display a simple bitmap, and then finally render a 3D animation. The post should be a useful introduction to KMS even if you don't know OCaml.&lt;/p&gt;
    &lt;p&gt;( this post also appeared on Hacker News )&lt;/p&gt;
    &lt;p&gt;Table of Contents&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Running it yourself&lt;/item&gt;
      &lt;item&gt;Querying the current state&lt;/item&gt;
      &lt;item&gt;Making changes&lt;/item&gt;
      &lt;item&gt;3D rendering&lt;/item&gt;
      &lt;item&gt;Linux VTs&lt;/item&gt;
      &lt;item&gt;Debugging&lt;/item&gt;
      &lt;item&gt;Conclusions&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Running it yourself&lt;/head&gt;
    &lt;p&gt;If you want to follow along, you'll need to install libdrm-ocaml and an interactive REPL like utop. With Nix, you can set everything up like this:&lt;/p&gt;
    &lt;code&gt;git clone https://github.com/talex5/libdrm-ocaml
cd libdrm-ocaml
nix develop
dune utop
&lt;/code&gt;
    &lt;p&gt;You should see a &lt;code&gt;utop #&lt;/code&gt; prompt, where you can enter OCaml expressions.
Use &lt;code&gt;;;&lt;/code&gt; to tell the REPL you've finished typing and it's time to evaluate, e.g.&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Alternatively, you can install things using opam (OCaml's package manager):&lt;/p&gt;
    &lt;code&gt;opam install libdrm utop
utop
&lt;/code&gt;
    &lt;p&gt;Then, at the utop prompt enter &lt;code&gt;#require "libdrm";;&lt;/code&gt; (including the leading &lt;code&gt;#&lt;/code&gt;).&lt;/p&gt;
    &lt;head rend="h2"&gt;Querying the current state&lt;/head&gt;
    &lt;p&gt;Before changing anything, we'll start by discovering what hardware is available.&lt;/p&gt;
    &lt;p&gt;I'll introduce the API as we go along, but you can check the API reference docs if you want more information.&lt;/p&gt;
    &lt;head rend="h3"&gt;Finding devices&lt;/head&gt;
    &lt;p&gt;To list available graphics devices:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;libdrm scans the &lt;code&gt;/dev/dri/&lt;/code&gt; directory looking for devices.
It uses &lt;code&gt;stat&lt;/code&gt; to find the device major and minor numbers and uses the virtual &lt;code&gt;/sys&lt;/code&gt; filesystem to get information about each one.
This is a PCI device, and the information corresponds to the values from &lt;code&gt;lspci&lt;/code&gt;, e.g.&lt;/p&gt;
    &lt;code&gt;$ lspci -nns 0:1:0.0
01:00.0 VGA compatible controller [0300]: Advanced Micro Devices, Inc. [AMD/ATI]
  Baffin [Radeon RX 550 640SP / RX 560/560X] [1002:67ff] (rev ff)
&lt;/code&gt;
    &lt;p&gt;Each graphics device can have a primary and a render node. The primary node gives full access to the device, including configuring monitors, while the render node just allows applications to render scenes to memory. In the last post I was using the render to node to create a 3D image, and then sending it to the Wayland compositor for display. This time we'll be doing the display ourselves, so we need to open the primary node:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;To check the driver version:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;If you're familiar with the C API, this corresponds to the &lt;code&gt;drmGetVersion&lt;/code&gt; function,
and &lt;code&gt;Drm.Device.list&lt;/code&gt; corresponds to &lt;code&gt;drmGetDevices2&lt;/code&gt;;
I reorganised things a bit to make better use of OCaml's modules.&lt;/p&gt;
    &lt;head rend="h3"&gt;Listing resources&lt;/head&gt;
    &lt;p&gt;Let's see what resources we've got to play with:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Note: The Kernel Mode Setting functions are in the Drm.Kms module. The C API calls these functions &lt;code&gt;drmMode*&lt;/code&gt;, but I found that confusing as
e.g. &lt;code&gt;drmModeGetResources&lt;/code&gt; sounds like you're asking for the resources of a mode.&lt;/p&gt;
    &lt;p&gt;A CRTC is a CRT Controller, and typically controls a single monitor (known as a Cathode Ray Tube for historical reasons). Framebuffers provide image data to a CRTC (we create framebuffers as needed). Connectors correspond to physical connectors (e.g. where you plug in a monitor cable). An Encoder encodes data from the CRTC for a particular connector.&lt;/p&gt;
    &lt;head rend="h3"&gt;Connectors&lt;/head&gt;
    &lt;p&gt;To save a bit of typing, I'll create an alias for the &lt;code&gt;Drm.Kms&lt;/code&gt; module:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;1
&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;You could also &lt;code&gt;open Drm.Kms&lt;/code&gt; to avoid needing any prefix, but I'll keep using &lt;code&gt;K&lt;/code&gt; for clarity.&lt;/p&gt;
    &lt;p&gt;To get details for the first connector (the head of the list):&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;This is DisplayPort connector 1 (usually called &lt;code&gt;DP-1&lt;/code&gt;) and it's currently &lt;code&gt;Connected&lt;/code&gt;.
The connector also says which modes are available on the connected monitor.&lt;/p&gt;
    &lt;p&gt;I was lucky in that the first connector was the one I'm using, but really we should get all the connectors and filter them to find the connected ones. &lt;code&gt;List.map&lt;/code&gt; can be used to run &lt;code&gt;get&lt;/code&gt; on each of them:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Then to filter:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;We'll investigate &lt;code&gt;c&lt;/code&gt;, the first connected one:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h4"&gt;A note on IDs&lt;/head&gt;
    &lt;p&gt;In the libdrm C API, IDs are just integers. To avoid mix-ups, I made them distinct types in the OCaml API. For example, if you try to use an encoder ID as a connector ID:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Normally this is what you want, but for interactive use it's annoying that you can't just pass a plain integer. e.g.&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;You can get any kind of ID with &lt;code&gt;Drm.Id.of_int&lt;/code&gt; (e.g. &lt;code&gt;K.Connector.get dev (Drm.Id.of_int 71)&lt;/code&gt;),
but that's still a bit verbose, so you might prefer to (re)define a prefix operator for it, e.g.&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;(note: &lt;code&gt;!&lt;/code&gt; is the only single-character prefix operator available in OCaml)&lt;/p&gt;
    &lt;head rend="h3"&gt;Modes&lt;/head&gt;
    &lt;p&gt;Modes are shown in abbreviated form in the connector output. To see the full list:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Note: I annotated various pretty-printer functions with &lt;code&gt;[@@ocaml.toplevel_printer]&lt;/code&gt;,
which causes utop to use them by default to display values of the corresponding type.
For example, showing a list of modes uses this short summary form.
Displaying an individual mode shows all the information.
Here's the first mode:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Properties&lt;/head&gt;
    &lt;p&gt;Some resources can also have extra properties. Use &lt;code&gt;get_properties&lt;/code&gt; to fetch them:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Linux only returns a subset of the properties until you enable the atomic feature. Let's turn that on now:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;(&lt;code&gt;Module.(expr)&lt;/code&gt; is a short-hand that brings all of &lt;code&gt;Module&lt;/code&gt;'s symbols into scope for &lt;code&gt;expr&lt;/code&gt;,
so we don't have to repeat the module name for both &lt;code&gt;set&lt;/code&gt; and &lt;code&gt;atomic&lt;/code&gt;)&lt;/p&gt;
    &lt;p&gt;And getting the properties again, we now have an extra &lt;code&gt;CRTC_ID&lt;/code&gt;,
telling us which controller this connector is currently using:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Encoders&lt;/head&gt;
    &lt;p&gt;The Linux documentation says:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Those are really just internal artifacts of the helper libraries used to implement KMS drivers. Besides that they make it unnecessarily more complicated for userspace to figure out which connections between a CRTC and a connector are possible, and what kind of cloning is supported, they serve no purpose in the userspace API. Unfortunately encoders have been exposed to userspace, hence canât remove them at this point. Furthermore the exposed restrictions are often wrongly set by drivers, and in many cases not powerful enough to express the real restrictions.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;OK. Well, let's take a look anyway:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Note: We need &lt;code&gt;Option.get&lt;/code&gt; here because a connector might not have an encoder set yet.
Where the C API uses 0 to indicate no resource,
the OCaml API uses &lt;code&gt;None&lt;/code&gt; to force us to think about that case.&lt;/p&gt;
    &lt;p&gt;As the documentation says, the encoder is mainly useful to get the CRTC ID:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;We could instead have got that directly from the connector using its properties:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;CRT Controllers&lt;/head&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;An active CRTC has a mode set (presumably from the connector's list of supported modes), and a framebuffer with the image to be displayed.&lt;/p&gt;
    &lt;p&gt;If I keep calling &lt;code&gt;Crtc.get&lt;/code&gt;, I see that it is sometimes showing framebuffer 93 and sometimes 94.
My Wayland compositor (Sway) updates one framebuffer while the other is being shown, then switches which one is displayed.&lt;/p&gt;
    &lt;head rend="h3"&gt;Framebuffers&lt;/head&gt;
    &lt;p&gt;My CRTC is currently displaying the contents of framebuffer 93:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;A framebuffer has up to 4 framebuffer planes (not to be confused with CRTC planes; see later), each of which references a buffer object (also known as a BO and referenced with a GEM handle).&lt;/p&gt;
    &lt;p&gt;This framebuffer is using the &lt;code&gt;XR24&lt;/code&gt; format, where there is a single BO with 32 bits for each pixel
(8 for red, 8 green, 8 blue and 8 unused).
Some formats use e.g. a separate buffer for each component
(or a different part of the same buffer, using &lt;code&gt;offset&lt;/code&gt;).&lt;/p&gt;
    &lt;p&gt;Modern graphics cards also support format modifiers, but my card is too old so I just get &lt;code&gt;None&lt;/code&gt;.
Linux's fourcc.h header file describes the various formats and modifiers.
Modifiers seem to be mainly used to specify the tiling.&lt;/p&gt;
    &lt;p&gt;I don't have permission to see the buffer object, so it appears as (&lt;code&gt;handle = None&lt;/code&gt;).
The &lt;code&gt;pitch&lt;/code&gt; is the number of bytes from one row to the next (also known as the stride).
Here, the 15360 is simply the width (3840) multiplied by the 4 bytes per pixel.&lt;/p&gt;
    &lt;head rend="h3"&gt;CRTC planes&lt;/head&gt;
    &lt;p&gt;In fact, &lt;code&gt;Crtc.get&lt;/code&gt; is an old API that only covers the basic case of a single framebuffer.
In reality, a CRTC can combine multiple CRTC planes, which for some reason aren't returned with the other resources
and must be requested separately:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;(note: you need to enable "atomic" mode before requesting planes; we already did that above)&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;A lot of these planes aren't being used (don't have a CRTC), which we can check for with a helper function:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Looks like Sway is using two planes at the moment:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;More information is available as properties:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Plane 52 is a &lt;code&gt;Primary&lt;/code&gt;plane and is using framebuffer 93 (as we saw before).&lt;/item&gt;
      &lt;item&gt;Plane 55 is a &lt;code&gt;Cursor&lt;/code&gt;plane, using framebuffer 98 (and the&lt;code&gt;AR24&lt;/code&gt;format, with alpha/transparency).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;A plane chooses which part of the frame buffer to show (&lt;code&gt;SRC_X&lt;/code&gt;, &lt;code&gt;SRC_Y&lt;/code&gt;, &lt;code&gt;SRC_W&lt;/code&gt; and &lt;code&gt;SRC_H&lt;/code&gt;)
and where it should appear on the screen (&lt;code&gt;CRTC_X&lt;/code&gt;, &lt;code&gt;CRTC_Y&lt;/code&gt;, &lt;code&gt;CRTC_W&lt;/code&gt; and &lt;code&gt;CRTC_H&lt;/code&gt;).
The source values are in 16.16 format (i.e. shifted left 16 bits).&lt;/p&gt;
    &lt;p&gt;Oddly, &lt;code&gt;Plane.get&lt;/code&gt; returned &lt;code&gt;crtc_x,crtc_y = 0,0&lt;/code&gt; for both planes, but
the properties show the correct cursor location (&lt;code&gt;CRTC_X = 3105; CRTC_Y = 1518;&lt;/code&gt;).&lt;/p&gt;
    &lt;p&gt;Having the cursor on a separate plane avoids having to modify the main screen image whenever the mouse pointer moves, which is good for low latency (especially if the GPU is busy rendering something else at the time), power consumption (the GPU can stay powered down), and allows showing an application's buffer full screen without the compositor needing to modify the application's buffer.&lt;/p&gt;
    &lt;p&gt;You might also have some &lt;code&gt;Overlay&lt;/code&gt; planes,
which can be useful for displaying video.
My graphics card seems to be too old for that.&lt;/p&gt;
    &lt;head rend="h3"&gt;Expanded resources diagram&lt;/head&gt;
    &lt;p&gt;Here's an expanded diagram showing some more possibilities:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Some framebuffer formats take the input data from multiple buffers.&lt;/item&gt;
      &lt;item&gt;A framebuffer can be shared by multiple CRTCs (perhaps with each plane showing a different part of it).&lt;/item&gt;
      &lt;item&gt;A CRTC can have multiple planes (e.g. primary and cursor).&lt;/item&gt;
      &lt;item&gt;A single CRTC can show the same image on multiple monitors.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Making changes&lt;/head&gt;
    &lt;p&gt;If I try turning off the CRTC (by setting the mode to &lt;code&gt;None&lt;/code&gt;) from my desktop environment it fails:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;The reason is that I'm currently running a graphical desktop and Sway owns the device (so my &lt;code&gt;dev&lt;/code&gt; is not the DRM "master"):&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;That can be fixed by switching to a different VT (e.g. with Ctrl-Alt-F2) and running it there. However, this will result in a second problem: I won't be able to see what I'm doing!&lt;/p&gt;
    &lt;p&gt;If you have a second computer then you can SSH in and test things out from there, but for simplicity we'll leave the utop REPL at this point and write some programs instead.&lt;/p&gt;
    &lt;p&gt;For example, query.ml shows the information we discovered above:&lt;/p&gt;
    &lt;code&gt;dune exec -- ./examples/query.exe
&lt;/code&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Non-atomic mode setting&lt;/head&gt;
    &lt;p&gt;Linux provides two ways to configure modes: the old non-atomic API and the newer atomic one.&lt;/p&gt;
    &lt;p&gt;examples/nonatomic.ml contains a simple example of the older (but simpler) API. It starts by finding a device (the first one with a primary node supporting KMS), then finds all connected connectors (as we did above), and calls &lt;code&gt;show_test_page&lt;/code&gt; on each one:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;&lt;code&gt;restoring_afterwards&lt;/code&gt; stores the current configuration, runs the callback,
and then puts things back to normal when that finishes (or you press Ctrl-C).&lt;/p&gt;
    &lt;p&gt;The program waits for 2 seconds after showing the test page before exiting.&lt;/p&gt;
    &lt;p&gt;&lt;code&gt;show_test_page&lt;/code&gt; finds the CRTC (as we did above),
takes the first supported mode, creates a test framebuffer of that size,
and configures the CRTC to display it:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;If the connector doesn't have a CRTC, we could find a suitable one and use that, but for simplicity the example just skips such connectors.&lt;/p&gt;
    &lt;p&gt;To run the example (switch away from any graphical desktop first or it won't work):&lt;/p&gt;
    &lt;code&gt;dune exec -- ./examples/nonatomic.exe
&lt;/code&gt;
    &lt;head rend="h3"&gt;Dumb buffers&lt;/head&gt;
    &lt;p&gt;Typically the pixel data to be displayed comes from some complex rendering pipeline, but Linux also provides dumb buffers for simple cases such as testing. The &lt;code&gt;Test_image.create&lt;/code&gt; function used above creates a dumb buffer with a test pattern:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;&lt;code&gt;Dumb.create&lt;/code&gt; allocates memory for the image data.
&lt;code&gt;Dumb.map&lt;/code&gt; makes it appear in host-memory as an OCaml bigarray.
The loop sets each 32-bit int in the image to some colour &lt;code&gt;c&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Then we wrap this data up as an XR24-format framebuffer with a single plane:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;head rend="h3"&gt;Atomic mode setting&lt;/head&gt;
    &lt;p&gt;examples/atomic.ml demonstrates the newer atomic API:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;The steps are:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Use &lt;code&gt;set_exn atomic&lt;/code&gt;to enable atomic mode.&lt;/item&gt;
      &lt;item&gt;Create an atomic request (&lt;code&gt;rq&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Use &lt;code&gt;show_test_page&lt;/code&gt;to populate it with the desired property changes.&lt;/item&gt;
      &lt;item&gt;(optional) Check that it will work (&lt;code&gt;~test_only:true&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Commit the changes (&lt;code&gt;Atomic_req.commit&lt;/code&gt;).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The advantage here is that either all changes are successfully applied at once or nothing changes. This avoids various problems with flickering or trying to roll back partial changes.&lt;/p&gt;
    &lt;p&gt;&lt;code&gt;show_test_page&lt;/code&gt; needs a couple of modifications.
First, we have to find a plane (rather than using the old &lt;code&gt;Crtc.set&lt;/code&gt; which assumes a single plane),
and then we set the plane's &lt;code&gt;FB_ID&lt;/code&gt; property to the new framebuffer in the request:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;1
&lt;/code&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;For the example, I actually set more properties and defined an operator to make the code a bit neater:&lt;/p&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;quote&gt;1 2 3 4 5 6 7 8 9 10 11 12 13 14&lt;/quote&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;In libdrm-ocaml, properties are typed, so you can't forget to convert the source values to fixed point format.&lt;/p&gt;
    &lt;head rend="h2"&gt;3D rendering&lt;/head&gt;
    &lt;p&gt;The examples above use a dumb-buffer, but it's fairly simple to replace that with a Vulkan buffer. The code in the last post exported the image memory from Vulkan as a dmabuf FD and sent it to the Wayland compositor. Now, instead of sending it we just need to import it into our device (with &lt;code&gt;Drm.Dmabuf.to_handle&lt;/code&gt;)
and use that handle instead of the dumb-buffer one.&lt;/p&gt;
    &lt;p&gt;I added a simple surface abstraction to the test code, wrapping the &lt;code&gt;Window&lt;/code&gt; module's API
so that the rendering code doesn't need to care whether it's rendering to a Wayland window or directly to the screen.
Then I made a Vt module implementing the new &lt;code&gt;Surface.t&lt;/code&gt; type for rendering directly to a Linux VT.&lt;/p&gt;
    &lt;p&gt;To get the animation working, I used &lt;code&gt;K.Crtc.page_flip&lt;/code&gt; to update the framebuffer (I could also have used the atomic API).
The kernel waits until the encoder has finishing sending the current frame before switching to the new one,
which avoids tearing.
We also need to ask the kernel to tell us when this happens, which is done by setting the optional &lt;code&gt;~event&lt;/code&gt; argument to some number.
You can read events from the device file and parse them with Drm.Event.parse.&lt;/p&gt;
    &lt;p&gt;If you want to try it, this should produce an animated room:&lt;/p&gt;
    &lt;code&gt;git clone https://github.com/talex5/vulkan-test -b kms-3d
cd vulkan-test
nix develop
make download-example
dune exec -- ./src/main.exe 10000 viking_room.obj viking_room.png
&lt;/code&gt;
    &lt;p&gt;If run with &lt;code&gt;$WAYLAND_DISPLAY&lt;/code&gt; set, it will open a Wayland window (as before),
but if run from a text console then it should render the animation directly using KMS.&lt;/p&gt;
    &lt;head rend="h2"&gt;Linux VTs&lt;/head&gt;
    &lt;p&gt;When the user switches to another virtual terminal (e.g. with Ctrl-Alt-F3), we should call &lt;code&gt;Drm.Device.drop_master&lt;/code&gt; to give up being the master,
allowing the application running on the new terminal to take over.&lt;/p&gt;
    &lt;p&gt;We should also switch the VT to &lt;code&gt;KD_GRAPHICS&lt;/code&gt; mode while using it,
to stop the kernel trying to manage it.&lt;/p&gt;
    &lt;p&gt;I didn't implement either of these features, but see How VT-switching works for details.&lt;/p&gt;
    &lt;head rend="h2"&gt;Debugging&lt;/head&gt;
    &lt;p&gt;If you get an unhelpful error code from the kernel (e.g. &lt;code&gt;EINVAL&lt;/code&gt;), enabling debug messages is often helpful.
Writing &lt;code&gt;4&lt;/code&gt; to &lt;code&gt;/sys/module/drm/parameters/debug&lt;/code&gt; enables KMS debug messages, which can be seen in the &lt;code&gt;dmesg&lt;/code&gt; output.
Write &lt;code&gt;0&lt;/code&gt; to the file afterwards to turn the messages off again.
&lt;code&gt;modinfo -p drm&lt;/code&gt; lists the various options.&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusions&lt;/head&gt;
    &lt;p&gt;I hope you found being able to explore the libdrm API interactively from the OCaml top-level made it easier to learn about how Linux manages displays. As when doing Vulkan in OCaml, a lot of the noise from C is removed and I think that the essentials of what is going on are easier to see.&lt;/p&gt;
    &lt;p&gt;I used ocaml-ctypes for the C bindings, and this was my first time using it in "stubs" mode (where it pre-generates C bindings from OCaml definitions). This has the advantage that the C type checker checks that the definitions are correct, and it worked well. Dune's Stub Generation feature generates the build rules for this semi-automatically.&lt;/p&gt;
    &lt;p&gt;Deciding what OCaml types to use for the C types was quite difficult. For example, C has many different integer types (&lt;code&gt;int&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt;, &lt;code&gt;uint32_t&lt;/code&gt;, etc),
but using lots of types is more painful in OCaml where e.g. &lt;code&gt;+&lt;/code&gt; only works on &lt;code&gt;int&lt;/code&gt;.
I used OCaml's int type when possible, and other types only when the value might not fit
(e.g. an image size on a 32-bit platform might not fit into an OCaml int, which is one bit shorter).&lt;/p&gt;
    &lt;p&gt;The C API is somewhat inconsistent about types. e.g. &lt;code&gt;drmModePageFlipTarget&lt;/code&gt; takes a &lt;code&gt;uint32_t target_vblank&lt;/code&gt; argument for the sequence number,
while &lt;code&gt;page_flip_handler&lt;/code&gt; confirms the event by giving it as &lt;code&gt;unsigned int sequence&lt;/code&gt;.
Meanwhile, the &lt;code&gt;sequence_handler&lt;/code&gt; event gives it as &lt;code&gt;uint64_t sequence&lt;/code&gt;.
I'm not sure what happens if the sequence number gets too large to fit in a 32-bit integer.&lt;/p&gt;
    &lt;p&gt;Anyway, I think I understand mode setting a lot better now, and I'm getting faster at debugging graphics problems on Linux (e.g. when element-desktop failed to start recently after I updated it).&lt;/p&gt;
    &lt;p&gt;Thanks to the OCaml Software Foundation for sponsoring this work.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://roscidus.com/blog/blog/2025/11/16/libdrm-ocaml/"/><published>2025-11-16T19:45:36+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45948058</id><title>I have recordings proving Coinbase knew about breach months before disclosure</title><updated>2025-11-16T23:33:51.744884+00:00</updated><content>&lt;doc fingerprint="ee7782190f30bdcd"&gt;
  &lt;main&gt;
    &lt;head rend="h2"&gt;The Call That Changed Everything&lt;/head&gt;
    &lt;p&gt;On January 7, 2025, at 5:02 PM, I received an email with a subject line that immediately caught my attention:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;"Order N54HJG3V: Withdrawal of 2.93 ETH initiated. A representative will be in touch shortly before we mark the payment completed"&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;Minutes later, my phone rang. The caller ID showed 1-805-885-0141. An American-sounding woman who identified herself as a Coinbase fraud prevention representative said someone had initiated a large transfer from my account and she was calling to confirm.&lt;/p&gt;
    &lt;p&gt;What happened next was chilling: She knew my social security number. She knew my Bitcoin balance down to the decimal point. She knew personal details that should have been impossible for a scammer to possess.&lt;/p&gt;
    &lt;p&gt;This wasn't just another phishing attempt. This was something far more sophisticated.&lt;/p&gt;
    &lt;head rend="h2"&gt;Timeline, With Exact Dates&lt;/head&gt;
    &lt;p&gt;Here's the sequence, using exact dates:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;January 7, 2025: I was attacked by scammers with detailed personal information&lt;/item&gt;
      &lt;item&gt;January 7, 2025: I reported the attack to Coinbase security@coinbase.com&lt;/item&gt;
      &lt;item&gt;January 7, 2025 (same day): Brett Farmer, Head of Trust &amp;amp; Safety, responded: "This report is super robust and gives us a lot to look into. We are investigating this scammer now."&lt;/item&gt;
      &lt;item&gt;January 13, 2025: I asked Coinbase: "How did the attacker know the balance of my bitcoin holdings?" (No response)&lt;/item&gt;
      &lt;item&gt;January 17, 2025: I followed up again, asking for a reply (No response)&lt;/item&gt;
      &lt;item&gt;January 22, 2025: Still no answer to my critical question (No response)&lt;/item&gt;
      &lt;item&gt;January 29, 2025: I asked again: "Could I please get a response?" (No response)&lt;/item&gt;
      &lt;item&gt;May 11, 2025: Coinbase says they became aware of the breach (when attackers demanded $20M ransom)&lt;/item&gt;
      &lt;item&gt;May 15, 2025: Coinbase publicly disclosed the breach&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;That's a four-month gap.&lt;/p&gt;
    &lt;p&gt;For four months, I had concrete evidence that attackers possessed detailed Coinbase customer data. For four months, I repeatedly asked Coinbase to explain how this was possible. And for four months, my questions went unanswered.&lt;/p&gt;
    &lt;p&gt;Coinbase never replied to a single follow-up email after Brett Farmer's initial response. Despite his promise that they were "investigating this scammer," the most important question—how the attacker obtained my private account data—was met with complete silence.&lt;/p&gt;
    &lt;head rend="h2"&gt;What Coinbase Disclosed in May 2025&lt;/head&gt;
    &lt;p&gt;In May 2025, Coinbase finally disclosed what had happened: cybercriminals had bribed overseas customer support contractors—particularly employees at TaskUs in India—to steal sensitive customer data.&lt;/p&gt;
    &lt;p&gt;The compromised information included:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Names, addresses, and phone numbers&lt;/item&gt;
      &lt;item&gt;Email addresses&lt;/item&gt;
      &lt;item&gt;Last four digits of Social Security numbers&lt;/item&gt;
      &lt;item&gt;Government-issued ID images&lt;/item&gt;
      &lt;item&gt;Account balances&lt;/item&gt;
      &lt;item&gt;Transaction histories&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Coinbase estimated the financial impact at $180-400 million, affecting less than 1% of their customer base. Over 200 TaskUs employees were ultimately terminated.&lt;/p&gt;
    &lt;p&gt;But here's the crucial question: If attackers were actively using stolen data to target customers in January, when did the actual breach occur? And when did Coinbase first become aware that something was wrong?&lt;/p&gt;
    &lt;head rend="h2"&gt;What I Sent Coinbase on January 7, 2025&lt;/head&gt;
    &lt;p&gt;On January 7, 2025, immediately after recognizing the attack, I sent a comprehensive security report to Coinbase's security team. This wasn't a vague complaint—it was a detailed technical analysis that should have raised immediate red flags about a data breach.&lt;/p&gt;
    &lt;p&gt;My report included:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Full email headers: Complete technical headers showing the email was routed through Amazon SES (a32-86.smtp-out.amazonses.com), not Coinbase's own mail servers, despite appearing to come from commerce@coinbase.com&lt;/item&gt;
      &lt;item&gt;DKIM signature analysis: Documentation that while the email passed DKIM validation for both coinbase.com and amazonses.com, the actual sending infrastructure was suspicious&lt;/item&gt;
      &lt;item&gt;The phishing email content: The complete HTML email with its fake "suspicious activity" warning and fraudulent transaction details (Order N54HJG3V, 2.93 ETH withdrawal)&lt;/item&gt;
      &lt;item&gt;Phone number used: 1-805-885-0141 (later confirmed to be a Google Voice number)&lt;/item&gt;
      &lt;item&gt;Voice recording: An audio recording of my second call with the scammer, capturing the entire conversation where she demonstrated knowledge of my personal information&lt;/item&gt;
      &lt;item&gt;Specific data the attacker possessed: A detailed list of what the scammer knew, including: &lt;list rend="ul"&gt;&lt;item&gt;My Social Security number&lt;/item&gt;&lt;item&gt;My exact Bitcoin balance&lt;/item&gt;&lt;item&gt;My account signup date&lt;/item&gt;&lt;item&gt;Driver's license information&lt;/item&gt;&lt;item&gt;The amount of the fabricated "suspicious transfer"&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Attack methodology: Description of their social engineering tactics, including the attempt to get me to move funds to "a cold wallet" by downloading Coinbase Wallet&lt;/item&gt;
      &lt;item&gt;Red flags I identified: The inability of the caller to authenticate herself, the Google Voice callback number, the lack of any notifications in my actual Coinbase account&lt;/item&gt;
      &lt;item&gt;Post-call SMS flooding: Documentation that immediately after the call, I received hundreds of spam text messages for random service signups—a potential attempt to hide legitimate 2FA codes or security alerts in the noise&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This wasn't a typical phishing report. I specifically highlighted that the attacker had access to non-public account information that should have been impossible to obtain without either a device compromise on my end or a data breach at Coinbase.&lt;/p&gt;
    &lt;p&gt;Brett Farmer, Coinbase's Head of Trust &amp;amp; Safety, responded the same day, calling it a "super robust" report. But when I followed up with the key question—"How did the attacker know the balance of my bitcoin holdings?"—the conversation ended. That critical question was never answered.&lt;/p&gt;
    &lt;head rend="h2"&gt;Inside the Scam Email and Call&lt;/head&gt;
    &lt;p&gt;Here's what made the email and call feel convincing in the moment—and what ultimately stopped me from going through with what the caller wanted.&lt;/p&gt;
    &lt;head rend="h3"&gt;The Email: Remarkably Convincing&lt;/head&gt;
    &lt;p&gt;The phishing email I received looked completely legitimate at first glance:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;From: Coinbase Commerce &amp;lt;commerce@coinbase.com&amp;gt;&lt;/item&gt;
      &lt;item&gt;DKIM signatures: Passed validation for both coinbase.com and amazonses.com&lt;/item&gt;
      &lt;item&gt;Professional formatting: Perfect HTML layout, correct branding, legitimate-looking transaction details&lt;/item&gt;
      &lt;item&gt;Convincing narrative: "We detected suspicious activity on your account. A fraud prevention representative will be in touch shortly..."&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The email even included what appeared to be a verification code (96841) and assigned me a specific case agent ("Sarah Schueler"). This level of detail gave it tremendous credibility.&lt;/p&gt;
    &lt;head rend="h3"&gt;The Critical Red Flag: Amazon SES&lt;/head&gt;
    &lt;p&gt;But when I examined the email headers more carefully, I found something suspicious. Here are the key header fields from the phishing email:&lt;/p&gt;
    &lt;quote&gt;From: Coinbase Commerce &amp;lt;commerce@coinbase.com&amp;gt; To: [REDACTED]@[REDACTED] Subject: Order N54HJG3V: Withdrawal of 2.93 ETH initiated Date: Tue, 7 Jan 2025 17:02:14 +0000 Message-ID: &amp;lt;01000194436f122c-535a7ce0-f493-41c2-b966-dcaa1a9e6b57-000000@email.amazonses.com&amp;gt; Return-Path: &amp;lt;01000194436f122c-535a7ce0-f493-41c2-b966-dcaa1a9e6b57-000000@amazonses.com&amp;gt; Received: from a32-86.smtp-out.amazonses.com (a32-86.smtp-out.amazonses.com. [54.240.32.86]) by mx.google.com with ESMTPS id [REDACTED] for &amp;lt;[REDACTED]@[REDACTED]&amp;gt; Tue, 07 Jan 2025 17:02:18 +0000 (UTC) DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/simple; s=224i4yxa5dv34ggfsdwu2l4en6sydsga; d=amazonses.com; t=1736269334; h=From:To:Subject:Date:Message-ID:MIME-Version:Content-Type; bh=xyz123...; b=abc456... DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/simple; s=gdwg2y3kokkkj5a5oi2lpk5uq5uqfm54; d=coinbase.com; t=1736269334; h=From:To:Subject:Date:Message-ID:MIME-Version:Content-Type; bh=xyz123...; b=def789... Authentication-Results: mx.google.com; dkim=pass header.i=@amazonses.com header.s=224i4yxa5dv34ggfsdwu2l4en6sydsga header.b=abc456; dkim=pass header.i=@coinbase.com header.s=gdwg2y3kokkkj5a5oi2lpk5uq5uqfm54 header.b=def789; spf=pass (google.com: domain of 01000194436f122c-535a7ce0-f493-41c2-b966-dcaa1a9e6b57-000000@amazonses.com designates 54.240.32.86 as permitted sender) smtp.mailfrom=01000194436f122c-535a7ce0-f493-41c2-b966-dcaa1a9e6b57-000000@amazonses.com&lt;/quote&gt;
    &lt;p&gt;The email was sent through Amazon SES (Simple Email Service), not Coinbase's own mail servers. Here's what made this suspicious:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Return-Path mismatch: The return path used @amazonses.com, not @coinbase.com&lt;/item&gt;
      &lt;item&gt;Message-ID from Amazon: The Message-ID clearly shows @email.amazonses.com as the origin&lt;/item&gt;
      &lt;item&gt;Dual DKIM signatures: While both amazonses.com and coinbase.com DKIM checks passed, this is exactly how phishing works—attackers can configure Amazon SES to send "from" coinbase.com&lt;/item&gt;
      &lt;item&gt;SPF pass for wrong domain: SPF validated that Amazon SES was authorized to send for amazonses.com, not that it was authorized to send as coinbase.com&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;While Coinbase might legitimately use Amazon SES for some emails, a security-critical fraud alert should come through more controlled channels with stronger sender verification. The dual DKIM setup is a classic technique: attackers register with Amazon SES, configure it to "send as" the target domain (which Amazon allows), and rely on recipients not checking the actual sending infrastructure.&lt;/p&gt;
    &lt;head rend="h3"&gt;The Phone Call: Even More Convincing (And Recorded)&lt;/head&gt;
    &lt;p&gt;When the woman called me, she was professional, intelligent, and sounded exactly like a legitimate customer service representative. She had all the personal information I'd already mentioned, plus more details that seemed impossible for a scammer to possess.&lt;/p&gt;
    &lt;p&gt;During our conversation, I asked her to authenticate herself. Here's where things got interesting.&lt;/p&gt;
    &lt;head rend="h2"&gt;How I Detected It Was a Scam&lt;/head&gt;
    &lt;p&gt;Despite the sophistication of the attack, several red flags eventually convinced me this was fraudulent:&lt;/p&gt;
    &lt;head rend="h3"&gt;Red Flag #1: The Authentication Problem&lt;/head&gt;
    &lt;p&gt;I asked the caller to prove she was from Coinbase. She offered to read me my personal information—but I already knew she had that information. That's not authentication; that's just proving she has stolen data.&lt;/p&gt;
    &lt;p&gt;When I suggested she send me an email from a verified Coinbase address that I could reply to, she claimed she didn't have access to personal email addresses and could only use generic support channels. A fraud prevention specialist without the ability to send verified emails? That didn't add up.&lt;/p&gt;
    &lt;head rend="h3"&gt;Red Flag #2: The Callback Issue&lt;/head&gt;
    &lt;p&gt;When I asked if I could call her back, she said I couldn't reach her because she was "in the fraud department." After the call, I tried calling the number back: it was a Google Voice number.&lt;/p&gt;
    &lt;p&gt;Legitimate financial institutions always provide callback numbers that route to their main systems. A Google Voice number is a massive red flag.&lt;/p&gt;
    &lt;head rend="h3"&gt;Red Flag #3: Email Verification Confusion&lt;/head&gt;
    &lt;p&gt;When I challenged the authenticity of the email sender, the caller insisted that Amazon was just Coinbase's "service provider" and that the DKIM signatures proved legitimacy. But when pressed, she couldn't explain away the anomalies in a satisfactory way.&lt;/p&gt;
    &lt;p&gt;The conversation on the recorded call shows my growing skepticism:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Me: "I don't think there is enough information provided for me to authenticate you."&lt;/p&gt;
      &lt;p&gt;Caller: "I'm not sure what you would like me to do..."&lt;/p&gt;
      &lt;p&gt;Me: "There are just too many red flags."&lt;/p&gt;
    &lt;/quote&gt;
    &lt;head rend="h3"&gt;Red Flag #4: No Notifications in My Account&lt;/head&gt;
    &lt;p&gt;After the call, I logged into my actual Coinbase account. There were:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;No notifications about the alleged transfer&lt;/item&gt;
      &lt;item&gt;No new login attempts&lt;/item&gt;
      &lt;item&gt;No new authorized devices&lt;/item&gt;
      &lt;item&gt;No actual transaction matching what the caller described&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;If this were real, there would have been notifications everywhere.&lt;/p&gt;
    &lt;head rend="h3"&gt;Red Flag #5: The Pressure to Use Coinbase Wallet&lt;/head&gt;
    &lt;p&gt;The caller wanted me to move my cryptocurrency to "a cold wallet" and started walking me through downloading Coinbase Wallet. This is a classic social engineering tactic—get the victim to move funds to an address controlled by the attacker.&lt;/p&gt;
    &lt;p&gt;I didn't follow through, so I never discovered exactly how they planned to steal the funds, but the intent was clear.&lt;/p&gt;
    &lt;head rend="h2"&gt;The SMS Flooding Attack&lt;/head&gt;
    &lt;p&gt;Here's where things got even more concerning. Immediately after I ended the call with the scammer, my phone was bombarded with hundreds of text messages—random service signups, verification codes, newsletters, everything imaginable.&lt;/p&gt;
    &lt;p&gt;At first, I thought this was just a vindictive "FU" from the scammer. But the timing and volume suggest something more calculated: SMS flooding is a known technique to hide legitimate security alerts in noise.&lt;/p&gt;
    &lt;p&gt;The attack works like this:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Scammer floods your phone with spam texts&lt;/item&gt;
      &lt;item&gt;While you're overwhelmed, they attempt account takeovers on various services&lt;/item&gt;
      &lt;item&gt;Real 2FA codes and security alerts get buried in the flood&lt;/item&gt;
      &lt;item&gt;You miss the critical warnings because they're hidden among hundreds of spam messages&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This could have been an attempt to:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Hijack my SMS-based two-factor authentication&lt;/item&gt;
      &lt;item&gt;Hide real alerts from Coinbase or other services&lt;/item&gt;
      &lt;item&gt;Overwhelm me while they attempted unauthorized access to various accounts&lt;/item&gt;
      &lt;item&gt;Create confusion and distract from their next moves&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This wasn't just a phishing call—it was a coordinated, multi-vector attack.&lt;/p&gt;
    &lt;head rend="h2"&gt;What Coinbase Got Wrong&lt;/head&gt;
    &lt;p&gt;Coinbase's handling of this breach raises serious questions:&lt;/p&gt;
    &lt;head rend="h3"&gt;1. Outsourcing Security-Sensitive Roles&lt;/head&gt;
    &lt;p&gt;Customer support agents at third-party contractors had access to extremely sensitive data: Social Security numbers, account balances, transaction histories, and personal documents. Why were overseas contractors given such privileged access?&lt;/p&gt;
    &lt;p&gt;The economics of the bribery scheme tell the story: attackers likely paid relatively small amounts to contractors earning modest wages to access data they then used to attempt thefts worth potentially millions.&lt;/p&gt;
    &lt;head rend="h3"&gt;2. Failed Detection Systems&lt;/head&gt;
    &lt;p&gt;Coinbase claims they "discovered" the breach on May 11, 2025, when attackers attempted to extort $20 million. But my case—and likely many others—proves the breach was being actively exploited months earlier.&lt;/p&gt;
    &lt;p&gt;What monitoring systems failed to detect that customer data was being used in sophisticated phishing attacks? I reported this in January with specific details about how the attacker knew my information. That report should have triggered alarm bells.&lt;/p&gt;
    &lt;head rend="h3"&gt;3. Inadequate Response to User Reports&lt;/head&gt;
    &lt;p&gt;Despite Brett Farmer's initial acknowledgment that my report was "super robust" and warranted investigation, my follow-up emails asking how attackers obtained my account data went completely unanswered.&lt;/p&gt;
    &lt;p&gt;My question was specific and technical. It went to the heart of what should have been a massive red flag: How did attackers have access to non-public account data?&lt;/p&gt;
    &lt;p&gt;Had Coinbase investigated this seriously in January, they might have discovered the insider threat months earlier and prevented additional victims.&lt;/p&gt;
    &lt;head rend="h3"&gt;4. The Disclosure Timeline&lt;/head&gt;
    &lt;p&gt;Coinbase says they "became aware" of the breach on May 11, 2025. But my January attack proves the breach was active at least four months earlier. This raises uncomfortable questions:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;When did the actual data exfiltration occur? Late 2024?&lt;/item&gt;
      &lt;item&gt;How many other victims reported similar attacks between January and May?&lt;/item&gt;
      &lt;item&gt;Were those reports properly escalated and investigated?&lt;/item&gt;
      &lt;item&gt;Would Coinbase have disclosed the breach if not for the extortion attempt?&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Practical Ways to Protect Yourself&lt;/head&gt;
    &lt;p&gt;When a major platform gets breached, your personal information may already be in attackers' hands. You can't undo that, but you can still reduce the chances you'll fall for the scams that follow:&lt;/p&gt;
    &lt;head rend="h3"&gt;1. Never Trust Caller ID&lt;/head&gt;
    &lt;p&gt;Phone numbers can be spoofed. Even if the caller ID shows a legitimate company, don't trust it. Always hang up and call back using a number you independently verify (from the company's official website, not from the email or caller).&lt;/p&gt;
    &lt;p&gt;One practical check: Ask the caller for their callback number, then look up that number online before calling it back. Search for "[phone number] scam" or "[phone number] reviews" to see if others have reported it as fraudulent. In my case, when I called back the number the scammer gave me (1-805-885-0141), it turned out to be a Google Voice number—an instant red flag. Legitimate corporate support lines won't use Google Voice.&lt;/p&gt;
    &lt;head rend="h3"&gt;2. Understand That Scammers May Have Your Personal Info&lt;/head&gt;
    &lt;p&gt;In the age of massive data breaches, assume attackers may know:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Your name, address, phone number, email&lt;/item&gt;
      &lt;item&gt;Last 4 digits of your SSN&lt;/item&gt;
      &lt;item&gt;Your account balances and transaction history&lt;/item&gt;
      &lt;item&gt;Other "secret" information you thought was secure&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Just because someone knows this information doesn't mean they're legitimate. Authentication needs to work both ways.&lt;/p&gt;
    &lt;head rend="h3"&gt;3. Verify Email Headers&lt;/head&gt;
    &lt;p&gt;Learn to check email headers. Look for:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The actual sending server (not just the "From" address)&lt;/item&gt;
      &lt;item&gt;SPF, DKIM, and DMARC validation results&lt;/item&gt;
      &lt;item&gt;Unusual routing or relay servers&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;In my case, the Amazon SES sending address was the tip-off, even though DKIM signatures technically validated.&lt;/p&gt;
    &lt;p&gt;One way to sanity-check them: If you're not sure how to interpret email headers, copy the full headers and paste them into a good AI assistant (like ChatGPT or Claude) and ask: "Analyze these email headers and tell me if there are any red flags or signs this could be a phishing email." AI tools are excellent at spotting anomalies in technical data like email routing.&lt;/p&gt;
    &lt;head rend="h3"&gt;4. Demand Proper Authentication&lt;/head&gt;
    &lt;p&gt;If someone calls claiming to be from your bank, exchange, or other financial institution, they should be able to authenticate themselves to you, not just read back information they already have.&lt;/p&gt;
    &lt;p&gt;Legitimate companies can:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Send you emails from verified domain addresses you can reply to&lt;/item&gt;
      &lt;item&gt;Provide callback numbers that route through their main system&lt;/item&gt;
      &lt;item&gt;Verify their identity through the app or website you're already logged into&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h3"&gt;5. Check Your Account Directly&lt;/head&gt;
    &lt;p&gt;If someone alerts you to suspicious activity, don't trust the email or call. Open a browser, type in the company's URL directly (don't click links), log in, and check for yourself. If there's really a problem, it will show up in your account.&lt;/p&gt;
    &lt;head rend="h3"&gt;6. Never Move Funds Under Pressure&lt;/head&gt;
    &lt;p&gt;Legitimate companies will never pressure you to immediately move your funds, download software, or take urgent action to "protect" your account. That pressure is the scam.&lt;/p&gt;
    &lt;head rend="h3"&gt;7. Use App-Based or Hardware 2FA, Not SMS&lt;/head&gt;
    &lt;p&gt;My experience with SMS flooding shows why SMS-based two-factor authentication is vulnerable. Use:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Hardware security keys (YubiKey, Titan)&lt;/item&gt;
      &lt;item&gt;Authenticator apps (Google Authenticator, Authy)&lt;/item&gt;
      &lt;item&gt;Platform-specific authentication (like Coinbase's app-based approval)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;SMS can be hijacked, flooded, or intercepted.&lt;/p&gt;
    &lt;head rend="h3"&gt;8. Report Everything&lt;/head&gt;
    &lt;p&gt;If you're targeted by a sophisticated attack, report it immediately and provide as much detail as possible:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Full email headers&lt;/item&gt;
      &lt;item&gt;Phone numbers used&lt;/item&gt;
      &lt;item&gt;Specific information the attacker knew&lt;/item&gt;
      &lt;item&gt;Recording of calls if possible (check your local laws)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Your report might be the data point that helps the company detect a breach.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why This Four-Month Gap Matters&lt;/head&gt;
    &lt;p&gt;My case represents just one data point in what appears to be a months-long campaign of attacks enabled by the Coinbase breach. How many other customers were targeted between January and May? How many fell for these scams because they didn't catch the red flags I did?&lt;/p&gt;
    &lt;p&gt;Coinbase has committed to reimbursing customers who were defrauded. But the $180-400 million estimated cost of this breach doesn't just represent reimbursements—it represents the human cost of trust betrayed, security compromised, and warnings ignored.&lt;/p&gt;
    &lt;p&gt;The cryptocurrency industry promises decentralization and security, but incidents like this expose the risks of centralized custody. When you trust an exchange with your assets and personal information, you're trusting their security practices, their contractor oversight, and their incident response capabilities.&lt;/p&gt;
    &lt;p&gt;In this case, that trust was misplaced.&lt;/p&gt;
    &lt;head rend="h2"&gt;Questions Coinbase Still Hasn't Answered&lt;/head&gt;
    &lt;p&gt;Four months after my attack, and several months after Coinbase's disclosure, key questions remain:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;When did the actual breach occur? My January attack suggests late 2024 at the latest.&lt;/item&gt;
      &lt;item&gt;How many customers were targeted before May 2025? Am I one of dozens? Hundreds? Thousands?&lt;/item&gt;
      &lt;item&gt;What happened to the user reports filed between January and May? Were they properly investigated and escalated?&lt;/item&gt;
      &lt;item&gt;Why wasn't the connection made between user reports of sophisticated phishing and a potential data breach?&lt;/item&gt;
      &lt;item&gt;What specific access controls failed that allowed overseas contractors to exfiltrate sensitive data?&lt;/item&gt;
      &lt;item&gt;Will there be regulatory consequences for the delayed disclosure? SEC rules require timely reporting of material cybersecurity incidents.&lt;/item&gt;
      &lt;item&gt;How can users trust that the security improvements Coinbase claims to have made are actually effective?&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h2"&gt;Conclusion: The Timeline Matters&lt;/head&gt;
    &lt;p&gt;The discrepancy between my January attack and Coinbase's May disclosure isn't just an interesting footnote—it's a critical part of understanding what went wrong and who bears responsibility.&lt;/p&gt;
    &lt;p&gt;My emails, timestamped and documented, prove that:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The breach was being actively exploited months before Coinbase's "discovery"&lt;/item&gt;
      &lt;item&gt;A customer reported detailed evidence of the attack and asked specific questions about data compromise&lt;/item&gt;
      &lt;item&gt;Those questions went unanswered for months&lt;/item&gt;
      &lt;item&gt;The breach was only disclosed after attackers attempted extortion&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I was one of the lucky ones—I detected the scam and didn't lose funds. But how many others weren't so fortunate during those four months of silence?&lt;/p&gt;
    &lt;p&gt;When I asked the one question that mattered most—how did the attacker have my data?—the company went silent.&lt;/p&gt;
    &lt;p&gt;That silence lasted 120 days.&lt;/p&gt;
    &lt;p&gt;And that's the real story behind the $400 million breach.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://jonathanclark.com/posts/coinbase-breach-timeline.html"/><published>2025-11-16T20:18:10+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45948254</id><title>The Pragmatic Programmer: 20th Anniversary Edition (2023)</title><updated>2025-11-16T23:33:51.308677+00:00</updated><content>&lt;doc fingerprint="f74bd85969a12f9c"&gt;
  &lt;main&gt;
    &lt;p&gt;The Pragmatic Programmer: From Journeyman to Master by Dave Thomas and Andrew Hunt was given to me as a gift after an internship. The book gave me invaluable advice as I started out in my career as a professional software engineer. Re-reading it a decade later, I thought the general advice still held up well, but it made references to technologies such as CORBA that are no longer used and felt dated as a result. The authors agreed and wrote a 20th anniversary edition that was updated for modern developers. A third of the book is brand-new material, covering subjects such as security and concurrency. The rest of the book has been extensively rewritten based on the authorsâ experience putting these principles into practice. We discussed the 20th anniversary edition in my book club at work.Â&lt;/p&gt;
    &lt;p&gt;The book is meant for those just starting out in the world of professional software engineering. Many of the tips, such as Tip 28: Always Use Version Control will seem obvious to experienced hands. However, it can also be a guide for senior developers mentoring junior developers, putting actionable advice into words. The book is also valuable to those who lack a formal CS education; it explains things like big-O notation and where to learn more about these subjects. I think that any software engineer will get one or two things out of this book, though itâs most valuable for beginners.&lt;/p&gt;
    &lt;p&gt;One of the things I appreciate about the book is that they talk about applying the principles not only to software engineering but to writing the book as well. The book was originally written in troff and later converted to LaTeX. For example, to illustrate Tip 29: Write Code That Writes Code they wrote a program to convert troff markup to LaTeX. In the 20th anniversary edition, they talk about their efforts to use parallelism to speed up the book build process and how it led to surprising bugs.&lt;/p&gt;
    &lt;p&gt;Perhaps the best thing about the book is that the authors summarize their points into short tips highlighted throughout the book. The authors helpfully attach these tips to a card attached to the physical book. This makes it easy to remember the principles espoused in the book and to refer to them later. I think this is a feature that more books should include, especially managerial or technical books.&lt;/p&gt;
    &lt;p&gt;The first chapter is less about coding and more about the general principles a pragmatic programmer follows. Most of all, itâs about taking responsibility for your work. The first tip of the chapter is Tip 3: You Have Agency: if you donât like something, you can be a catalyst for change. Or you can change organizations if change isnât happening. The most important tip of the chapter to me is Tip 4: Provide Options, Donât Make Lame Excuses. In this section, they discuss taking responsibility for the commitments you make and having a contingency plan for things outside your control. If you donât meet the commitment, provide solutions to fix the problems. Donât tell your boss, âThe cat ate my source code.â&lt;/p&gt;
    &lt;p&gt;Software rots over time without efforts to fix it. The authors talk about broken windows policing, the theory that minor problems such as a single broken window give people the psychological safety to commit larger crimes. Regardless of whether broken windows policing is actually true, the metaphor applies to software. This leads to Tip 5: Donât Live with Broken Windows: If you see a broken window in your software, make an effort to fix it, even if itâs only a minor effort to board it up. This may seem impractical if your project already has a lot of broken windows, but this tip helps you avoid creating such an environment in the first place. In my experience, it works: when we set up a new project at work, we made a commitment to use git commit hooks to enforce coding standards. This made each of us more reluctant to compromise on software to begin with, and all of the code was a good example to copy from.&lt;/p&gt;
    &lt;p&gt;A pragmatic programmer is always learning, and learns things outside their specialty; they are a jack of all trades. Even if they are a specialist in their current role, they invest regularly in a broad knowledge portfolio. In addition to software skills, people skills are important as well. The section âCommunicate!â shows how to effectively communicate your ideas, such as how to present, what to say, and how pick the right time. In the words of Tip 11: English is Just Another Programming Language. If you donât have an answer to an email immediately, respond with an acknowledgment and that youâll get back to them later - nobody wants to be talking to a void. Donât be afraid to reach out for help if you need it; thatâs what your colleagues are there for, after all. And donât neglect documentation! Make it an integral part of the development process, not an afterthought.&lt;/p&gt;
    &lt;p&gt;Finally, the principles in this book are not iron-clad: you must consider the tradeoffs between different values and make the right decision for your project. Your software does not need to be perfect. When working on software, involve your users in deciding what quality issues are acceptable in return for getting it out faster. After all, if you wait a year to ship the perfect version, their requirements will change anyways. As Tip 8 says: Make Quality a Requirements Issue.&lt;/p&gt;
    &lt;quote&gt;&lt;p&gt;Why is decoupling good? Because by isolating concerns we make each easier to change. ETC.&lt;/p&gt;&lt;lb/&gt;Why is the single responsibility principle useful? Because a change in requirements is mirrored by a change in just one module. ETC.&lt;lb/&gt;Why is naming important? Because good names make code easier to read, and you have to read it to change it. ETC!&lt;/quote&gt;
    &lt;p&gt;However, the authors also stress that ETC is a value, not a rule. For example, ETC may not be appropriate for writing code that has high performance requirements; making the code complex to achieve the performance requirements is an acceptable tradeoff.Â&lt;/p&gt;
    &lt;p&gt;They then turn to another important acronym for implementing ETC in Tip 15: DRYâDonât Repeat Yourself. DRY makes things easier to change by having one place to change anything. Worse, if you forget to make a change, youâll have contradictory information in your program that could crash it or silently corrupt data.&lt;/p&gt;
    &lt;p&gt;A closely related principle to DRY is Orthogonality. Two components of a software system are orthogonal if changes in one do not effect the other. Systems should be designed as a set of cooperating independent modules, each of which has a single, well-defined purpose. Modules communicate between themselves using well defined interfaces and donât rely on shared global data or the implementation details of another module. Unless you change a componentâs external interfaces, it should not cause changes in the rest of the system. Orthogonal systems are easier to test, because more testing can be done at the module level in unit tests rather than end-to-end integration tests that test the whole system.&lt;/p&gt;
    &lt;p&gt;Often, when starting a software project, there are a lot of unknowns. The user has an idea of what they want, but thereâs some ambiguity in the requirements. You donât know if the library and frameworks you pick will work nicely together. The solution here is Tip 20: Use Tracer Bullets to Find the Target. In a machine gun, tracer bullets are bullets that glow in the air, enabling the user to see if theyâre hitting the target at night. Tracer Bullet Development provides that kind of immediate feedback. Look for a single feature that can be built quickly using the architectural approach youâve chosen, and put that in front of the users. You may miss; users may say thatâs not quite what they wanted. But thatâs the point of tracer code: it allows you to adjust your aim with a skeleton project thatâs easier to change than a final application. Users will be delighted to see something working early, and youâll have an integration platform to build the rest of the application on.&lt;/p&gt;
    &lt;p&gt;Tracer code is different from prototypes. To the authors, prototypes are disposable code used to learn about a problem domain, never meant to be used in production. Prototypes donât even have to be code. A UI can be mocked up in an interface builder, or an architecture mapped out with post-it notes. In terms of Tip 21: Prototype to Learn. In contrast, tracer bullet code is meant to be part of the final application.&lt;/p&gt;
    &lt;p&gt;The final tip of this chapter I bring up is Tip 18: There Are No Final Decisions. Decisions should be reversible; if you rely on MySQL today, you may find yourself needing to switch to Postgres six months from now. If youâve properly abstracted the database logic, making this change should be easy. Marketing may decide that your web app should be a mobile app in the future; if your architecture is built well, this extra demand should not be a burden. This is one tip I disagree with: I think it can easily be taken too far. If you provide too much reversibility, youâll end up with over-abstracted code with configuration options that are never used. I think itâs more reasonable to think about what decisions can reasonably change and make them flexible; if you spend all your time trying to cover for every possibility, youâll never get around to actually coding the required functionality.&lt;/p&gt;
    &lt;p&gt;This chapter focuses on how to make the most out of your tools, what tools to invest in, and how to approach debugging. The first bit of advice: Tip 25: Keep Knowledge in Plain Text. By plain text, they mean keep knowledge such as configuration or data in a simultaneously human-readable and computer readable format. Plain text insures you against obsolesce; you can always write something to parse it later, while reverse-engineering a binary format is significantly harder. In addition, almost any other tool in existence can process plain text in some way, so youâll have an extensive suite of other tools to use. As an extension of the power of plain text, they also suggest you master a command shell such as &lt;code&gt;bash&lt;/code&gt;. Shells provide a family of tools that are composable with each other, and can be combined as much as your imagination allows. A GUI in contrast, limits you to the actions the programmers of the GUI thought of in advance. Finally, you should learn a text processing language such as &lt;code&gt;awk&lt;/code&gt; or &lt;code&gt;perl&lt;/code&gt; to get the most out of text - the authors used perl (first edition) and ruby (20th anniversary edition) to automatically highlight the source code in the book, for example.&lt;/p&gt;
    &lt;p&gt;The next topic the authors turn to is debugging. Debugging is the main task a software engineer does throughout their day, so itâs essential you get good at it. Defects show up in a variety of ways, from misunderstood requirements to coding errors. Some cultures try to find someone to blame for a defect; the authors think you should avoid that with Tip 29: Fix the Problem, Not the Blame.&lt;/p&gt;
    &lt;p&gt;They give the following tips on debugging your code:&lt;/p&gt;
    &lt;p&gt;Once youâve solved the bug, however thereâs still one more step: you should write a test to catch that bug in the future.&lt;/p&gt;
    &lt;p&gt;Tip 36: You Canât Write Perfect Software starts off the chapter. While weâd like to write perfect software, there will always be bugs, poor design decisions, and missing documentation. The theme of this chapter is how to design this fact in mind.&lt;/p&gt;
    &lt;p&gt;The first idea they propose is Design By Contract. Similar to legal contracts, it explains a function or moduleâs rights and responsibilities. A contract has three parts: It has Preconditions: things that must be true when it is called, such as what qualifies as valid inputs. Postconditions are what will be true when it is done, such as a sort routine returning a sorted array. Finally, Invariants are things that are always true from the callerâs perspective - they may change while the routine is running, but will hold at the beginning and the end of the call. For example, in a sort routine, the invariant is that the list to be sorted will contain the same number of items when it started as when it finished. If the contract is violated, the contract will specify what to do, such as crash or throw an exception.&lt;/p&gt;
    &lt;p&gt;Some languages, such as Clojure have built-in semantics for design by contract, with explicit pre- and post- conditions. However, if your language doesnât support contracts, you can implement them with Tip 39: Use Assertions to Prevent the Impossible. You can assert that the conditions of your contract are true, and handle the cases where the contract is violated. If you donât know what to do when a contract is violated, the authors recommend Tip 38: Crash Early. Itâs better that you crash rather than write incorrect data to the database. After all, dead programs tell no lies. Of course, crashing immediately may not be appropriate - if you have resources open make sure to close them before exiting.&lt;/p&gt;
    &lt;p&gt;The final paranoid tip is Tip 43: Avoid Fortune-Telling. Pragmatic programmers only make decisions that they can get immediate feedback on. The more predictions you make about the future, the more likely youâll get some of the predictions wrong and make the wrong decision based on them.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;You might find yourself slipping into fortune telling when you have to:&lt;/p&gt;
      &lt;item&gt;Estimate completion dates months in the future&lt;/item&gt;
      &lt;item&gt;Plan a design for future maintenance or extendability&lt;/item&gt;
      &lt;item&gt;Guess userâs future needs&lt;/item&gt;
      &lt;item&gt;Guess future tech availability&lt;/item&gt;
    &lt;/quote&gt;
    &lt;p&gt;In a previous chapter, the authors wrote about making decisions reversible and easier to change. This chapter tells you how to implement it in your code. The key here is to make your code flexible rather than rigid - good code bends to circumstances rather than breaks. Part of this is decoupling code. Code is consider coupled when they share something in common. This may be something as simple as a shared global variable, or something more complex like an inheritance chain.&lt;/p&gt;
    &lt;p&gt;The authors argue against what they term Train Wrecks - long chains of method calls, such as this example they give:&lt;/p&gt;
    &lt;code&gt;public void applyDiscount(customer, order_id, discount) { 
	totals = customer
			  .orders 
			  .find(order_id) 
			  .getTotals();

	totals.grandTotal = totals.grandTotal - discount;
	totals.discount = discount; 
}

&lt;/code&gt;
    &lt;p&gt;This code is traversing many different levels of abstraction - you have to know that a customer object exposes orders, that orders have a &lt;code&gt;find&lt;/code&gt; method, and that the order &lt;code&gt;find&lt;/code&gt; returns has a &lt;code&gt;getTotal&lt;/code&gt; method. If any of these levels of abstraction are changed, your code might break. And requirements may change; What if the business decides to implement a maximum discount amount of 40%? Certainly, this could be applied in the &lt;code&gt;applyDiscount&lt;/code&gt; routine, but anything could modify the &lt;code&gt;grandTotal&lt;/code&gt; and &lt;code&gt;discount&lt;/code&gt; fields - this rule could be violated if other modules modifying the totals object donât get the memo.&lt;/p&gt;
    &lt;p&gt;The authors suggest refactoring the code so that there is no orders object, just a &lt;code&gt;find&lt;/code&gt; method and an applyDiscount method for the order object that implements the 40% rule:&lt;/p&gt;
    &lt;code&gt;public void applyDiscount(customer, order_id, discount) { 
	customer
	.findOrder(order_id)
	.applyDiscount(discount); 
}
&lt;/code&gt;
    &lt;p&gt;The authors suggest having only one . when you access something if that something is likely to change, such as anything in your application, or a fast moving external API. This includes using intermediate variables between accesses, such as this code:&lt;/p&gt;
    &lt;code&gt;# This is cheating!
orders = customer.orders
order = orders.find(order_id)
totals = order.getTotals
&lt;/code&gt;
    &lt;p&gt;However, the rule does not apply to things that are unlikely to change, such as core language APIs. So this code is ok:&lt;/p&gt;
    &lt;code&gt;people
.sort_by {|person| person.age } 
.first(10)
.map {| person | person.name }
&lt;/code&gt;
    &lt;p&gt;Another source of coupling is globally accessible data. Global data makes it hard to reason about the state of a program, since any other module might be able to change it. Global data includes design patterns such as singletons, and external resources such as databases. Given how extensive global resources are, how can one avoid them? If global data is unavoidable, the key is to manage them through a well-defined API that you control, rather than allowing anything to read and write global data. In the words of Tip 48: If Itâs Important Enough to Be Global, Wrap It in an API.&lt;/p&gt;
    &lt;p&gt;Poor use of inheritance is a third source of coupling. Inheritance is used for two reasons: code reuse and type modeling. Inheritance doesnât work for code reuse; Not only is the code of a child class coupled to any ancestor of the class, so is any code that uses the class. Things may unexpectedly break when an ancestor changes an API, even if you are using a subclass.&lt;/p&gt;
    &lt;p&gt;Nor does inheritance work for modeling types. Class hierarchies quickly become tangled, wall covering monstrosities. Another problem is multiple inheritance. A &lt;code&gt;Car&lt;/code&gt; may be a type of &lt;code&gt;Vehicle&lt;/code&gt;, but it may be an &lt;code&gt;Asset&lt;/code&gt; or &lt;code&gt;InsuredItem&lt;/code&gt;. Multiple inheritance is required to model this, and many OO languages donât support multiple inheritance. Instead of paying the inheritance tax, the authors suggest using:&lt;/p&gt;
    &lt;p&gt;Interfaces or Protocols are classes that contain no code but instead contains behaviors. A class that implements an interface promises to define the behaviors. For example, a &lt;code&gt;Car&lt;/code&gt; might implement &lt;code&gt;Drivable&lt;/code&gt; which has methods such as &lt;code&gt;accelerate&lt;/code&gt; and &lt;code&gt;brake&lt;/code&gt;. Interfaces can be used as types, and any class that implements the interface will be compatible with that type. This is a much easier way to provide polymorphism than inheritance.&lt;/p&gt;
    &lt;p&gt;Another alternative to inheritance is delegation. If you want to include behavior from class &lt;code&gt;Foo&lt;/code&gt; add a member of type &lt;code&gt;Foo&lt;/code&gt; to your class rather than inherit from &lt;code&gt;Foo&lt;/code&gt;. You can then use Fooâs API wrapped in code you control. Delegation is a has-a relationship rather than a is-a relationship.&lt;/p&gt;
    &lt;p&gt;The problem with interfaces and delegation is that they require writing lots of boilerplate code. For example, itâs likely that most of your classes that implement &lt;code&gt;Drivable&lt;/code&gt; will have the same logic for &lt;code&gt;brake&lt;/code&gt;, but each class will have to write itâs own implementation of &lt;code&gt;brake&lt;/code&gt;. This leads to repeated code across your codebase, violating the DRY principle. To resolve this, the authors turn to Mixins - sets of functions that can be âmixed intoâ a class. This allows you to add common functionality without using inheritance. I wonder how mixins are implemented in a language like Java, which doesnât have an obvious version of that feature. Itâs also not clear to me how mixins are different from inheritance; arenât they just a form of multiple inheritance?&lt;/p&gt;
    &lt;p&gt;Tip 55: Parameterize Your App Using External Configuration: Code may have values that change while the application is running, such as credentials for for third-party services. Rather than directly including the values in your code, you should externalize them and put them in a configuration bucket. Keeping credentials in source code is a security risk - hackers scan public git repositories for common security credentials, such as AWS keys. Itâs common to store them in a flat file or database tables, and read them when the application initializes. However, in our world of highly-available applications thatâs not as appropriate. Instead the authors propose configuration-as-a-service, where configuration is stored behind a service API. This allows multiple applications to share configuration information, use access control to control who can see and edit configuration, and provide a UI to easily edit config information. Using the configuration service, applications can subscribe to a configuration item and get notifications when they change. This allows applications to update config data on their side without restarting.&lt;/p&gt;
    &lt;p&gt;This chapter deals with Parallelism, where two pieces of code run at the same time, and Concurrency, where things act as if they run at the same time. In the real world, things are asynchronous - the user is supplying input, network resources are called, and the screen is being redrawn all at the same time. Applications that run everything serially feel sluggish.&lt;/p&gt;
    &lt;p&gt;In Tip 56: Analyze Workflow to Improve Concurrency the authors advocate that you break temporal coupling where possible. Temporal Coupling is when your code depends on event A happening before event B. You should look at your workflow to see what can be executed concurrently. Look for activities that take a lot of time that would allow for something else to be done in the meantime. If your application makes multiple independent API calls to a remote service, execute them on separate threads rather than serially, then gather up the results of each call. If your workflow allows a way to split the work into multiple independent units, take advantage of those multiple cores and execute them in parallel.&lt;/p&gt;
    &lt;p&gt;Of course, parallelism has its pitfalls as well. For example, imagine reading an integer, incrementing it, and writing it back. If two processes read that integer at the same time, they will each increment the value to n+1, when you want it to be n+2. The update needs to be atomic; each process needs to do this sequentially without the other process interfering. This can be done through synchronized methods, semaphores, or other forms of resource locking. However, they have their own dangers as well, such as deadlocking, where two processes each get a lock on one of two needed resources, but not the other. Each waits forever for the other to release its lock. The authors think you should avoid shared state rather than try to handle yourself wherever possible; Tip 57: Shared State Is Incorrect State.&lt;/p&gt;
    &lt;p&gt;The authors ran into this issue when writing the 20th anniversary edition: they updated the build process for the book to utilize parallelism. However, the build would randomly fail. The authors tracked this down to changing the directory temporarily. In the original, a subtask would change directory, then go back to the original directory. However, this no longer worked when new threads started, expecting to be in the root directory. Depending on the timing, this could break the build. This prompted them to write Tip 58: Random Failures Are Often Concurrency Issues.&lt;/p&gt;
    &lt;p&gt;This chapter is more of a grab-bag. It covers subjects such as psychology, big-O notation, refactoring, security, and testing.&lt;/p&gt;
    &lt;p&gt;In Tip 61: Listen to Your Inner Lizard the authors talk about listening to your instincts (your lizard-brain). If you find yourself having a hard time writing code, your brain is trying to tell you something. Perhaps the structure or design is wrong, or you donât fully understand the requirements. If you find yourself in this situation, take a step back and think about what you are doing. Maybe go for a walk, or sleep on it. You might find that the solution is staring you in the face when you come back.&lt;/p&gt;
    &lt;p&gt;Perhaps you need to refactor the code instead of writing more. Refactoring is a continuous process, espoused in Tip 65: Refactor Early, Refactor Often. If anything strikes you as wrong in your code, such as DRY violations, outdated knowledge or non-orthogonal design, donât hesitate to fix it. When you are refactoring, make sure you have a good suite of unit tests beforehand to test if your changes break anything. Run the tests frequently to check if youâve broken anything.&lt;/p&gt;
    &lt;p&gt;Speaking of tests, the authors start with a bold assertion: Tip 67: Testing Is Not About Finding Bugs. Instead, tests function as the First User of Your Code - a source of immediate feedback, and immediately forces you to think about what counts as a correct solution. In addition, tightly coupled code tends to be hard to test, so it helps you make good design decisions. The authors emphatically do not think you should adopt full-on Test Driven Development - itâs too easy to become a slave to writing tests. They note an example of a TDD advocate starting a sudoku solver using TDD and spent so much time writing the tests they failed to write the solver itself!&lt;/p&gt;
    &lt;p&gt;In a sidebar, Dave Thomas explains that he stopped writing tests for a few months, and said ânot a lotâ happened. The quality didnât drop, nor did he introduce bugs into the code. His code was still testable, it just wasnât tested.&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Andy says I shouldnât include this sidebar. He worries it will tempt inexperienced developers not to test. Hereâs my compromise: Should you write tests? Yes. But after youâve been doing it for 30 years, feel free to experiment a little to see where the benefit lies for you.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;This chapter focuses on how to start your project on the right foot. The first subject the authors tackle is requirements gathering: The Requirements Pit. While we talk about gathering requirements as if they are on the ground, waiting to be picked up, requirements are non-obvious because of Tip 75: No One Knows Exactly What They Want. They think of requirements gathering as a kind of therapy, where you take an initial requirement and ask questions about the details to nail down exactly what they need. The authors show an example of a simple requirement: âShipping should be free on all orders costing $50 or moreâ. Does that include the shipping cost itself? Tax? If youâre selling ebooks as well, should they be included? The job of the programmer is Tip 76: Programmers Help People Understand What They Want. You should find any edge cases the client may not have considered and make sure theyâre documented. This doesnât mean creating long specifications the client wonât read. Instead, the authors think requirements should be able to fit on an index card. This helps prevent feature creep; if the client understands how adding one more index card will impact the schedule, theyâll consider the tradeoffs and prioritize the requirements they need the most.&lt;/p&gt;
    &lt;p&gt;You are given constraints in your requirements as well. Your job as a software engineer is to evaluate if those constraints are things you actually have to live with or if you can relax them. In the words of Tip 81: Donât Think Outside the BoxâFind the Box, the constraints are the edges of the box. What you initially thought of as a constraint may actually be an assumption you held.&lt;/p&gt;
    &lt;p&gt;Another tip the authors advocate for is Tip 78: Work with a User to Think Like a User. If youâre building an inventory system, work in the warehouse for a few days to get an idea of their processes and how your system will be used. If you donât understand how it will be used, you could create something that meets all of the requirements but is totally useless. They cite an example of a digital sound mixing board that could do anything to sound that was possible, yet nobody wanted to use it. Rather than take advantage of recording engineersâ experience with tactile sliders and knobs, they built an interface that was unfamiliar to them. Each feature was buried behind menus and given unintuitive names. Â It did what was required, but didnât do it how it was required.Â&lt;/p&gt;
    &lt;p&gt;The authors also consider in this chapter what it means to be Agile. Many teams and companies are eager for an off-the-shelf solution: call it Agile-in-a-Box. But no process can make you Agile; âUse this process and youâll be agileâ ignores a key part of the Agile manifesto: Individuals and interactions over processes and tools. To the authors Agile can be boiled down to the following:&lt;/p&gt;
    &lt;quote&gt;
      &lt;item&gt;Work out where you are.&lt;/item&gt;
      &lt;item&gt;Make the smallest meaningful step towards where you want to be.&lt;/item&gt;
      &lt;item&gt;Evaluate where you end up, and fix anything you broke.&lt;/item&gt;
    &lt;/quote&gt;
    &lt;p&gt;Do this for every level of what you do, from process to code, and youâll have adopted the Agile spirit.&lt;/p&gt;
    &lt;p&gt;Can the lessons of The Pragmatic Programmer be applied to teams too? The authors say yes. This chapter focuses on how to apply the lessons of the previous chapters to the team level. Many of the lessons are the same as those mentioned previously, so I wonât go into them again.&lt;/p&gt;
    &lt;p&gt;The authors advise Tip 87: Do What Works, Not Whatâs Fashionable. Just because Google or Facebook adopts process $ x $ doesnât mean itâs right for your team. How do you know if something works? Try it. Pilot an idea with a small team, and see what works about it and what doesnât. The goal isnât to âdo Scrumâ or âbe Agileâ, but to deliver working software continuously. When you adopt a new idea, you should do it with improving continuous deployment of software in mind. If youâre measuring your deployments in months, try to get it down to weeks instead. Once you get it down to weeks, try to deliver in one-week iterations.&lt;/p&gt;
    &lt;p&gt;Related to continuously delivering software is Tip 96: Delight Users, Donât Just Deliver Code. Delivering working software in a timely matter is not enough to delight your users; that is merely meeting expectations. The authors suggest you ask your users a question:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;How will you know that weâve all been successful a month (or a year, or whatever) after this project is done?&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;The answer may not be related to the requirements, and may surprise you. For example, a recommendations engine might be valued on driving customer retention. But once you know what the secret to success is, you should aim not just to hit the goal but to exceed it.&lt;/p&gt;
    &lt;p&gt;Finally, take pride in your work. The final tip of the book is Tip 97: Sign Your Work.&lt;/p&gt;
    &lt;p&gt;I was only able to cover a portion of this remarkable book in this review. I highly recommend this book to any software engineer, especially to those just starting out in the field. It makes a great graduation gift to someone just finishing their CS degree.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.ahalbert.com/technology/2023/12/19/the_pragmatic_programmer.html"/><published>2025-11-16T20:46:30+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45948463</id><title>Call Me Maybe: Eavesdropping encrypted LTE calls with ReVoLTE (2020)</title><updated>2025-11-16T23:33:50.642778+00:00</updated><content>&lt;doc fingerprint="b4289e03e06931f1"&gt;
  &lt;main&gt;
    &lt;p&gt;David Rupprecht, Katharina Kohls, Thorsten Holz, and Christina PÃ¶pper&lt;/p&gt;
    &lt;p&gt;Ruhr-UniversitÃ¤t Bochum &amp;amp; New York University Abu Dhabi&lt;/p&gt;
    &lt;p&gt;Voice over LTE (VoLTE) is a packet-based telephony service seamlessly integrated into the Long Term Evolution (LTE) standard. By now all major telecommunication operators use VoLTE. To secure the phone calls, VoLTE encrypts the voice data between the phone and the network with a stream cipher. The stream cipher shall generate a unique keystream for each call to prevent the problem of keystream reuse.&lt;/p&gt;
    &lt;p&gt;We introduce ReVoLTE, an attack that exploits an LTE implementation flaw to recover the contents of an encrypted VoLTE call. This enables an adversary to eavesdrop on VoLTE phone calls. ReVoLTE makes use of a predictable keystream reuse. Eventually, the keystream reuse allows an adversary to decrypt a recorded call with minimal resources.&lt;/p&gt;
    &lt;p&gt;We provide an overview of the ReVoLTE attack, the implications, and demonstrate the feasibility of the ReVoLTE attack in a commercial network. Further, we publish an App that allows tech savvy people to track networks down that are still vulnerable. Our work will appear at the 29th USENIX Security Symposium (2020) and all details are available in a pre-print version of the paper.&lt;/p&gt;
    &lt;p&gt;The ReVoLTE attacks exploit the reuse of the same keystream for two subsequent calls within one radio connection. This weakness is caused by an implementation flaw of the base station (eNodeB). In order to determine how widespread the security gap was, we tested a number of randomly selected radio cells mainly across Germany but also other countries. The security gap affected 12 out of 15 base stations.&lt;/p&gt;
    &lt;p&gt;The ReVoLTE attack aims to eavesdrop the call between Alice and Bob. We will name this call the target or first call. To perform the attack, the attacker sniffs the encrypted radio traffic of Alice within the cell of a vulnerable base station. Shortly after the first call ends, the attacker calls Alice and engages her in a conversation. We name this second call, or keystream call. For this call, the attacker sniffs the encrypted radio traffic of Alice and records the unencrypted sound (known plaintext).&lt;/p&gt;
    &lt;p&gt;For decrypting the target call, the attacker must now compute the following: First, the attacker xors the known plaintext (recorded at the attacker's phone) with the ciphertext of the keystream call. Thus, the attacker computes the keystream of the keystream call. Due to the vulnerable base station, this keystream is the same as for the target (first) call. In a second step, the attacker decrypts the first call by xoring the keystream with the first call's ciphertext. It is important to note that the attacker has to engage the victim in a longer conversation. The longer he/she talked to the victim, the more content of the previous communication he/she can decrypt. For example, if the attacker and victim spoke for five minutes, the attacker could later decode five minutes of the previous conversation.&lt;/p&gt;
    &lt;p&gt;To mitigate the threat of eavesdropping, we have informed providers about the attack vector through the GSMA Coordinated Vulnerability Disclosure Programme process at the beginning of December 2019. The GSMA requested vendors to provide patches for affected base stations. By the time of publication, those vendors should have provided patches, and providers are requested to install and configure them securely. A re-test indicates that the German operators have managed to install the patches. However, we need to consider a large number of providers worldwide and their large deployments. It is thus crucial to raise awareness about the vulnerability. In case you want to know if your network is vulnerable or not, you can test it with our App.&lt;/p&gt;
    &lt;p&gt;To demonstrate the practical feasibility of the ReVoLTE attack, we have implemented an end-to-end version of the attack within a commercial network (which was vulnerable) and commercial phones. We use the downlink analyzer Airscope by Software Radio System to sniff the encrypted traffic. Further, we use three Android-based phones which are controlled via ADB and SCAT to obtain the known plaintext at the attacker's phone. For a demonstration of these steps, please refer to the video below.&lt;/p&gt;
    &lt;p&gt;Yes, we (mainly Bedran) have developed an App that allows to detect whether a base station is vulnerable to the ReVoLTE attack or not. The App requires a VoLTE capable Android phone with root access and a Qualcomm chipset. Please click here to visit the Github page regarding the Mobile Sentinel App.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://montsecure.com/research/revolte-attack/"/><published>2025-11-16T21:17:37+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45948792</id><title>How Your Brain Creates 'Aha' Moments and Why They Stick</title><updated>2025-11-16T23:33:50.405376+00:00</updated><content>&lt;doc fingerprint="fa73133599e7d742"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;How Your Brain Creates ‘Aha’ Moments and Why They Stick&lt;/head&gt;
    &lt;head rend="h2"&gt;Introduction&lt;/head&gt;
    &lt;p&gt;Here are three words: pine, crab, sauce. There’s a fourth word that combines with each of the others to create another common word. What is it?&lt;/p&gt;
    &lt;p&gt;When the answer finally comes to you, it’ll likely feel instantaneous. You might even say “Aha!” This kind of sudden realization is known as insight, and a research team recently uncovered how the brain produces it, which suggests why insightful ideas tend to stick in our memory.&lt;/p&gt;
    &lt;p&gt;Maxi Becker, a cognitive neuroscientist at Duke University, first got interested in insight after reading the landmark 1962 book The Structure of Scientific Revolutions by the historian and philosopher of science Thomas Kuhn. “He describes how some ideas are so powerful that they can completely shift the way an entire field thinks,” she said. “That got me wondering: How does the brain come up with those kinds of ideas? How can a single thought change how we see the world?”&lt;/p&gt;
    &lt;p&gt;Such moments of insight are written across history. According to the Roman architect and engineer Vitruvius, in the third century BCE the Greek mathematician Archimedes suddenly exclaimed “Eureka!” after he slid into a bathtub and saw the water level rise by an amount equal to his submerged volume (although this tale may be apocryphal). In the 17th century, according to lore, Sir Isaac Newton had a breakthrough in understanding gravity after an apple fell on his head. In the early 1900s, Einstein came to a sudden realization that “if a man falls freely, he would not feel his weight,” which led him to his theory of relativity, as he later described in a lecture.&lt;/p&gt;
    &lt;p&gt;Insights are not limited to geniuses: We have these cognitive experiences all the time when solving riddles or dealing with social or intellectual problems. They are distinct from analytical problem-solving, such as the process of doing formulaic algebra, in which you arrive at a solution slowly and gradually as if you’re getting warmer. Instead, insights often follow periods of confusion. You never feel as if you’re getting warmer; rather, you go from cold to hot, seemingly in an instant. Or, as the neuropsychologist Donald Hebb, known for his work building neurobiological models of learning, wrote in the 1940s, sometimes “learning occurs as a single jump, an all-or-none affair.”&lt;/p&gt;
    &lt;p&gt;Ann Rosan Picture Library&lt;/p&gt;
    &lt;p&gt;An abrupt cognitive shift in how the mind understands information is known as a representational change. Although researchers have inferred sudden shifts in understanding from the behavior of subjects, they have not pinned down how the brain supports representational change.&lt;/p&gt;
    &lt;p&gt;During moments of insight, representational change typically occurs, said John Kounios, a cognitive neuroscientist at Drexel University and co-author of the book The Eureka Factor: Aha Moments, Creative Insight, and the Brain. “The question is: How is it occurring?”&lt;/p&gt;
    &lt;head rend="h2"&gt;Insightful Activity&lt;/head&gt;
    &lt;p&gt;While at Humboldt University of Berlin, Becker set out to uncover this neural signature of insight. Given that it’s nearly impossible to fabricate life-changing, field-altering insights in the lab, her team needed to identify a simple task that could produce a sudden feeling of understanding rather than a slowly unfolding solution.&lt;/p&gt;
    &lt;p&gt;They turned to abstracted black-and-white pictures called Mooney images, which are made by cranking up the contrast on a photograph all the way so that the subjects — a dog or a coffee mug, for example — are unrecognizable at first. The pictures pose a challenge for human brains, which typically identify objects by piecing together their different parts. But if given enough time with a Mooney image, even a few seconds, the brain can rearrange the contours to recognize the pictured object — and trigger the insightful “aha” feeling, a representational change.&lt;/p&gt;
    &lt;p&gt;Over the course of two days, Becker had study participants lie in a functional magnetic resonance imaging (fMRI) scanner, which detects blood flow in the brain as a proxy for neural activity, and view a series of 120 Mooney images. After 10 seconds of viewing a single image, the participant would indicate whether they recognized the pictured object. If they did, they would then answer a series of questions about the suddenness, positive emotion and certainty associated with their experience — three measures that have been linked to moments of insight.&lt;/p&gt;
    &lt;p&gt;Becker and her team then used neural networks to parse the fMRI data, looking to identify consistent changes in brain activity shared by participants when they correctly recognized Mooney images. They observed that when a participant noticed a hidden object, brain activity increased in the ventral occipitotemporal cortex (VOTC), a region responsible for recognizing visual patterns in the environment; the amygdala, which processes both positive and negative emotions; and the hippocampus, a deep-brain structure involved in handling memories. This activity was greater for experiences rated more certain and emotionally positive — in other words, more insightful ones.&lt;/p&gt;
    &lt;p&gt;The hippocampus is sometimes known as the brain’s “mismatch detector,” Becker said, because it reacts when an input doesn’t align with expectations. In this case, insight leads a once-meaningless image to gain meaning, going against the brain’s predictions.&lt;/p&gt;
    &lt;p&gt;Courtesy of Maxi Becker&lt;/p&gt;
    &lt;p&gt;These regions — the hippocampus, amygdala and VOTC — create “a plausible network of brain areas” behind representational change, said Kounios, who was not involved in the study. These findings finally “connect the psychological theory with the neural mechanism,” said Yuhua Yu, a postdoctoral researcher in neuroscience at the University of Arizona, who was also not involved with the study.&lt;/p&gt;
    &lt;p&gt;Becker and her team likely found representational change in the VOTC because of the visual nature of their stimuli. If they had chosen another type of stimulus, like words, the change would probably have appeared in language-processing areas of the brain.&lt;/p&gt;
    &lt;p&gt;Once the team had figured out which brain areas support insight, they wanted to probe whether these regions might be working together to create a lasting memory.&lt;/p&gt;
    &lt;head rend="h2"&gt;A Memory Boost&lt;/head&gt;
    &lt;p&gt;Since they began investigating insight, researchers have suspected that such experiences might boost memory. In his 1949 book The Organization of Behavior, Hebb wrote that “whatever insight is, we now know that it continually affects the learning of the adult mammal.” Insight not only feels notable or salient in the moment but also helps us retain new information as memory.&lt;/p&gt;
    &lt;p&gt;This memory boost, which became known as the insight-memory advantage, has since been studied in many types of problem-solving, including the unraveling of magic tricks and puzzles. “When you have an insight, you tend to be better able to remember the solution,” Becker said, compared to when you resolve a problem more gradually. She wanted to understand why.&lt;/p&gt;
    &lt;p&gt;A few days after the initial experiment, the team tested participants’ memory by having them look at more Mooney images online, including some they had seen before. Participants were better able to remember prior images that they had rated highly on the three aspects of insight. This suggested that the insight-memory advantage was real, but the team wanted to see what was going on under the hood. Did brain activity during insight predict better memory five days later?&lt;/p&gt;
    &lt;p&gt;The researchers found that the larger the activity boost in both the VOTC and the hippocampus during the initial insight, the better participants remembered the Mooney images. The big change in brain activity likely makes the experience more salient, Becker said, and salient experiences are known to better encode long-term memories.&lt;/p&gt;
    &lt;p&gt;While insight creates stronger memories of an idea, it doesn’t mean the idea is correct. Previous work has shown that the quicker, more certain and more pleasurable a solution feels, the more likely it is to be correct — but false insights can and do exist. In Becker’s study, participants wrongly identified the subjects of more than half the Mooney images they saw. Of those incorrect trials (which the researchers excluded from the analysis), the participants reported experiencing insight 40% of the time. In comparison, correct trials were accompanied by feelings of insight 65% of the time.&lt;/p&gt;
    &lt;p&gt;These kinds of studies of insight in the lab will set researchers up to look at how it functions in the real world. Once we decompose insight into “very simple tasks that we already understand well,” Becker said, we can “move on to more complex, truly creative tasks.”&lt;/p&gt;
    &lt;head rend="h2"&gt;Insight Into the Future&lt;/head&gt;
    &lt;p&gt;As a self-described uncreative person, Yu has been particularly fascinated by insight’s role in the creative process. Creativity is “like a magic power,” she said. “A really big creative idea is [often] associated with insight because a creative idea is in some way a leap in your cognitive world, and a leap will often elicit an insight or ‘aha’ feeling.”&lt;/p&gt;
    &lt;p&gt;However, Yu is finding that insight’s role in creativity might depend on the kind of problem a person is solving. In a recent study, she asked participants to come up with metaphors for scientific concepts and asked whether they used insight as they did so. The insight-driven metaphors weren’t more or less creative than those created through analytic thinking, she found — and the participants were more likely to remember the science concepts behind the latter.&lt;/p&gt;
    &lt;p&gt;This may be because, unlike the task of seeing a hidden object in a Mooney image, creating a metaphor tends to rely on slower cognitive problem-solving rather than sudden moments of insight, Becker suggested. The effects of insight therefore likely depend on the context.&lt;/p&gt;
    &lt;p&gt;Next, Yu wants to investigate insight in more contexts. “Most of the insight research is looking at insight in the problem-solving context and in the lab setting,” Yu said. She hopes that researchers will begin investigating “insight within many other domains, like in psychotherapy, in meditation, even in psychedelic experiences.”&lt;/p&gt;
    &lt;p&gt;Beyond offering a better understanding of how the human brain learns, these findings could have applications in classrooms. Kounios believes that applying insight-boosting strategies to teaching could lead to better learning outcomes for students. Insight seems to be a powerful and positive experience that generates accurate solutions, confidence in our answers and strong memories.&lt;/p&gt;
    &lt;p&gt;“It’s very intensive for a teacher to do this, but a lot of really good teachers try to get the students to have the insights themselves about how something works, and that will burn it into their memories,” Kounios said. “Another aspect of that [is], it’s very motivating, too.”&lt;/p&gt;
    &lt;p&gt;It’s a nice feeling when your brain suddenly comes up with an answer. Perhaps you’ve even experienced that feeling since reading this piece’s first sentence. Maybe it even hit you like an apple on the head.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.quantamagazine.org/how-your-brain-creates-aha-moments-and-why-they-stick-20251105/"/><published>2025-11-16T21:57:13+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45949247</id><title>Goldman Sachs asks in biotech Report: Is curing patients a sustainable business?</title><updated>2025-11-16T23:33:49.987164+00:00</updated><content>&lt;doc fingerprint="65e985c5f32a502"&gt;
  &lt;main&gt;
    &lt;p&gt;Goldman Sachs analysts attempted to address a touchy subject for biotech companies, especially those involved in the pioneering "gene therapy" treatment: cures could be bad for business in the long run.&lt;/p&gt;
    &lt;p&gt;"Is curing patients a sustainable business model?" analysts ask in an April 10 report entitled "The Genome Revolution."&lt;/p&gt;
    &lt;p&gt;"The potential to deliver 'one shot cures' is one of the most attractive aspects of gene therapy, genetically-engineered cell therapy and gene editing. However, such treatments offer a very different outlook with regard to recurring revenue versus chronic therapies," analyst Salveen Richter wrote in the note to clients Tuesday. "While this proposition carries tremendous value for patients and society, it could represent a challenge for genome medicine developers looking for sustained cash flow."&lt;/p&gt;
    &lt;p&gt;Richter cited Gilead Sciences' treatments for hepatitis C, which achieved cure rates of more than 90 percent. The company's U.S. sales for these hepatitis C treatments peaked at $12.5 billion in 2015, but have been falling ever since. Goldman estimates the U.S. sales for these treatments will be less than $4 billion this year, according to a table in the report.&lt;/p&gt;
    &lt;p&gt;"GILD is a case in point, where the success of its hepatitis C franchise has gradually exhausted the available pool of treatable patients," the analyst wrote. "In the case of infectious diseases such as hepatitis C, curing existing patients also decreases the number of carriers able to transmit the virus to new patients, thus the incident pool also declines … Where an incident pool remains stable (eg, in cancer) the potential for a cure poses less risk to the sustainability of a franchise."&lt;/p&gt;
    &lt;p&gt;The analyst didn't immediately respond to a request for comment.&lt;/p&gt;
    &lt;p&gt;The report suggested three potential solutions for biotech firms:&lt;/p&gt;
    &lt;p&gt;"Solution 1: Address large markets: Hemophilia is a $9-10bn WW market (hemophilia A, B), growing at ~6-7% annually."&lt;lb/&gt; "Solution 2: Address disorders with high incidence: Spinal muscular atrophy (SMA) affects the cells (neurons) in the spinal cord, impacting the ability to walk, eat, or breathe."&lt;lb/&gt;"Solution 3: Constant innovation and portfolio expansion: There are hundreds of inherited retinal diseases (genetics forms of blindness) … Pace of innovation will also play a role as future programs can offset the declining revenue trajectory of prior assets."&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.cnbc.com/2018/04/11/goldman-asks-is-curing-patients-a-sustainable-business-model.html"/><published>2025-11-16T23:01:24+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=45949326</id><title>Britney Spears' Guide to Semiconductor Physics</title><updated>2025-11-16T23:33:49.781059+00:00</updated><content>&lt;doc fingerprint="75705b9cd2c36e3a"&gt;
  &lt;main&gt;
    &lt;table&gt;
      &lt;row/&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;p&gt;It is a little known fact, that Ms Spears is an expert in semiconductor physics. Not content with just singing and acting, in the following pages, she will guide you in the fundamentals of the vital semiconductor laser components that have made it possible to hear her super music in a digital format.&lt;/p&gt;
        &lt;/cell&gt;
        &lt;cell&gt;
          &lt;p&gt; Click here to donate food to the starving people of the world. &lt;/p&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;
          &lt;p&gt; Splung.com Physics&lt;/p&gt;
        &lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;Bad-Ads.co.uk Hate TV adverts? Read Bad Ads&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;table&gt;
      &lt;row/&gt;
    &lt;/table&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://britneyspears.ac/lasers.htm"/><published>2025-11-16T23:15:20+00:00</published></entry></feed>