<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><id>hnrss.org/frontpage</id><title>Hacker News: Front Page</title><updated>2026-01-26T04:37:09.942037+00:00</updated><link href="https://news.ycombinator.com/" rel="alternate"/><link href="https://raw.githubusercontent.com/Prabesh01/hnrss-content-extract/refs/heads/main/out/rss.xml" rel="self"/><generator uri="https://lkiesow.github.io/python-feedgen" version="1.0.0">python-feedgen</generator><subtitle>Hacker News RSS</subtitle><entry><id>https://news.ycombinator.com/item?id=46753708</id><title>Web-based image editor modeled after Deluxe Paint</title><updated>2026-01-26T04:37:15.561703+00:00</updated><content>&lt;doc fingerprint="56223e185d452d87"&gt;
  &lt;main&gt;
    &lt;p&gt;Webbased image editor modeled after the legendary Deluxe Paint with a focus on retro Amiga file formats. Next to modern image formats, DPaint.js can read and write Amiga icon files and IFF ILBM images.&lt;/p&gt;
    &lt;p&gt;Online version available at https://www.stef.be/dpaint/&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Fully Featured image editor with a.o. &lt;list rend="ul"&gt;&lt;item&gt;Layers&lt;/item&gt;&lt;item&gt;Selections&lt;/item&gt;&lt;item&gt;Masking&lt;/item&gt;&lt;item&gt;Transformation tools&lt;/item&gt;&lt;item&gt;Effects and filters&lt;/item&gt;&lt;item&gt;Multiple undo/redo&lt;/item&gt;&lt;item&gt;Copy/Paste from any other image program or image source&lt;/item&gt;&lt;item&gt;Customizable dither tools&lt;/item&gt;&lt;item&gt;Color Cycling&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Heavy focus on colour reduction with fine-grained dithering options&lt;/item&gt;
      &lt;item&gt;Amiga focus &lt;list rend="ul"&gt;&lt;item&gt;Read/write/convert Amiga icon files (all formats)&lt;/item&gt;&lt;item&gt;Reads IFF ILBM images (all formats including HAM and 24-bit)&lt;/item&gt;&lt;item&gt;Writes IFF ILBM images (up to 256 colors)&lt;/item&gt;&lt;item&gt;Read and write directly from Amiga Disk Files (ADF)&lt;/item&gt;&lt;item&gt;Embedded Amiga Emulator to preview your work in the real Deluxe Paint.&lt;/item&gt;&lt;item&gt;Limit the palette to 12 bit for Amiga OCS/ECS mode, or 9 bit for Atari ST mode.&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
      &lt;item&gt;Deluxe Paint Legacy &lt;list rend="ul"&gt;&lt;item&gt;Supports PBM files as used by the PC version of Deluxe Paint (Thanks to Michael Smith)&lt;/item&gt;&lt;item&gt;Supports Deluxe Paint Atari ST compression modes (Thanks to Nicolas Ramz)&lt;/item&gt;&lt;/list&gt;&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;It runs in your browser, works on any system and works fine on touch-screen devices like iPads.&lt;lb/&gt; It is written in 100% plain JavaScript and has no dependencies.&lt;lb/&gt; It's 100% free, no ads, no tracking, no accounts, no nothing.&lt;lb/&gt; All processing is done in your browser, no data is sent to any server.&lt;/p&gt;
    &lt;p&gt;The only part that is not included in this repository is the Amiga Emulator Files. (The emulator is based on the Scripted Amiga Emulator)&lt;/p&gt;
    &lt;p&gt;DPaint.js doesn't need building.&lt;lb/&gt; It also has zero dependencies so there's no need to install anything.&lt;lb/&gt; DPaint.js is written using ES6 modules and runs out of the box in modern browsers.&lt;lb/&gt; Just serve "index.html" from a webserver and you're good to go.&lt;/p&gt;
    &lt;p&gt;There's an optional build step to create a compact version of DPaint.js if you like.&lt;lb/&gt; I'm using Parcel.js for this.&lt;lb/&gt; For convenience, I've included a "package.json" file.&lt;lb/&gt; open a terminal and run &lt;code&gt;npm install&lt;/code&gt; to install Parcel.js and its dependencies.
Then run &lt;code&gt;npm run build&lt;/code&gt; to create a compact version of DPaint.js in the "dist" folder.&lt;/p&gt;
    &lt;p&gt;Documentation can be found at https://www.stef.be/dpaint/docs/&lt;/p&gt;
    &lt;p&gt;Dpaint.js is a web application, not an app that you install on your computer. That being said: DPaint.js has no online dependencies and runs fine offline if you want. One caveat: you have to serve the index.html file from a webserver, not just open it in your browser.&lt;lb/&gt; A quick way to do this is - for example - using the Spark app.&lt;lb/&gt; Download the binary for your platform, drop the Spark executable in the folder where you downloaded the Dpaint.js source files and run it. If you then point your browser to http://localhost:8080/ it should work.&lt;/p&gt;
    &lt;p&gt;If you are using Chrome, you can also "install" dpaint.js as app.&lt;lb/&gt; It will then show up your Chrome apps and work offline.&lt;/p&gt;
    &lt;p&gt;Current version is still alpha.&lt;lb/&gt; I'm sure there are bugs and missing features.&lt;lb/&gt; Bug reports and pull requests are welcome.&lt;/p&gt;
    &lt;p&gt;Planned for the next release, already in the works:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;del rend="overstrike"&gt;Color Cycling&lt;/del&gt;(done)&lt;/item&gt;
      &lt;item&gt;&lt;del rend="overstrike"&gt;Animation support (GIf and Amiga ANIM files)&lt;/del&gt;(done)&lt;/item&gt;
      &lt;item&gt;&lt;del rend="overstrike"&gt;Shading/transparency tools that stay within the palette.&lt;/del&gt;(done)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Planned for a future release if there's a need for it.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Support for non-square pixel modes such as HiRes and Interlaced&lt;/item&gt;
      &lt;item&gt;PSD import and export&lt;/item&gt;
      &lt;item&gt;SpriteSheet support&lt;/item&gt;
      &lt;item&gt;Write HAM,SHAM and Dynamic HiRes images&lt;/item&gt;
      &lt;item&gt;Commodore 64 graphics modes&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Please note that the Brave browser is using "farbling" that introduces random image noise in certain conditions. They claim this is to protect your privacy. Although I totally understand the sentiment, In my opinion a browser should not actively alter the content of a webpage or intentionally break functionality.&lt;lb/&gt; But hey, who am I to speak, it's a free world. Just be aware that if you are using Brave, you will run into issues, so please "lower your shields" for this app in Brave or use another browser.&lt;/p&gt;
    &lt;p&gt;Dpaint.js supports Color-Cycling - a long lost art of "animating" a static image by only rotating some colors in the palette. See an example here:&lt;/p&gt;
    &lt;head class="px-3 py-2"&gt;The_Vision_cycle.mp4&lt;/head&gt;
    &lt;p&gt;Open the layered source file of the above image directly in Dpaint.js&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/steffest/DPaint-js"/><published>2026-01-25T12:54:53+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46754522</id><title>Bitwise conversion of doubles using only FP multiplication and addition (2020)</title><updated>2026-01-26T04:37:15.455818+00:00</updated><content>&lt;doc fingerprint="46999a3b01993edd"&gt;
  &lt;main&gt;
    &lt;p&gt;In the words of Tom Lehrer, “this is completely pointless, but may prove useful to some of you some day, perhaps in a somewhat bizarre set of circumstances.”&lt;/p&gt;
    &lt;p&gt;The problem is as follows: suppose you’re working in a programming environment that provides only an IEEE-754 double-precision floating point (“double”) type, and no operations that can access that type’s representation (such as C++ bitwise cast operations, or Javascript’s DataView object). You have a double and you want to convert it to its bitwise representation as two unsigned 32-bit integers (stored as doubles), or vice versa. This problem comes up from time to time, but I was curious about a different question: how restricted can your programming environment be? Could you do it with just floating point multiplication and addition?&lt;/p&gt;
    &lt;p&gt;Bitwise conversion using floating point operations can be useful in situations like limited interpreted languages, or C++ constexpr contexts. Generally double to int conversion can be done using a binary search, comparing with powers of two to figure out the bits of the exponent. From there the fraction bits can be extracted, either by binary searching more, or using the knowledge of the exponent to scale the fraction bits into the integer range.&lt;/p&gt;
    &lt;p&gt;But can it be done without bitwise operations, branches, exponentiation, division, or floating point comparisons?&lt;/p&gt;
    &lt;p&gt;It seemed improbable at first, but I’ve discovered the answer is yes, multiplication and addition are mostly sufficient, although with a few notable caveats. Even without these restrictions different NaN values cannot be distinguished or generated (without bitwise conversion) in most environments, but using only multiplication and addition it is impossible to convert NaN, Infinity or -Infinity into an unsigned 32-bit value. The other problematic value is “negative zero”, which cannot be differentiated from “positive zero” using addition and multiplication. All my code uses subtraction, although it could be removed by substituting &lt;code&gt;a - b&lt;/code&gt; with &lt;code&gt;a + (b * -1)&lt;/code&gt;. And finally, this relies on IEEE-754 operations (in the usual rounding mode, “round to nearest, ties to even”), so it wouldn’t work in environments that use unsafe maths optimisations (the default in shader compilers, or enabled by a flag such as /fp:fast in many other compilers).&lt;/p&gt;
    &lt;p&gt;So, if you just need a solution, here it is, but otherwise stick around for an explanation:&lt;/p&gt;
    &lt;quote&gt;function double_as_uint32s(double) { // Doesn't handle NaN, Infinity or -Infinity. Treats -0 as 0. var a = double, b, c, d, e, f, g, h, i, j, k, l, m, n, low, high; f=2.2250738585072014e-308+a; j=5e-324; b=j+f; b-=f; m=-5e-324; d=m+b; b=4.4989137945431964e+161; d=b*d; d=b*d; g=d*d; d=1.0; g=d-g; h=m+f; f=h-f; f=j+f; f=b*f; f=b*f; f*=f; f=d-f; f*=g; g=-2.2250738585072014e-308+a; h=j+g; h-=g; h=m+h; h=b*h; h=b*h; h*=h; h=d-h; c=m+g; c-=g; c=j+c; c=b*c; c=b*c; c*=c; c=d-c; c*=h; k=c*f; c=5.562684646268003e-309*a; g=j+c; g-=c; g=m+g; g=b*g; g=b*g; g*=g; g=d-g; h=m+c; h-=c; h=j+h; h=b*h; h=b*h; h*=h; h=d-h; g=h*g; h=a*g; g=d-g; c=g*c; g=1024.0*g; f=2.0+g; c+=h; h=7.458340731200207e-155*c; l=1.0000000000000002; g=l*h; g=m+g; e=j+g; e-=g; e=b*e; e=b*e; c=e*c; e=d-e; g=e*h; c=g+c; e=512.0*e; g=8.636168555094445e-78*c; e+=f; f=l*g; f=m+f; h=j+f; f=h-f; f=b*f; f=b*f; c=f*c; f=d-f; g=f*g; f=256.0*f; c=g+c; e=f+e; f=2.938735877055719e-39*c; g=l*f; g=m+g; h=j+g; g=h-g; g=b*g; g=b*g; c=g*c; g=d-g; f=g*f; c=f+c; f=128.0*g; g=5.421010862427522e-20*c; e=f+e; f=l*g; f=m+f; h=j+f; f=h-f; f=b*f; f=b*f; c=f*c; f=d-f; g=f*g; f=64.0*f; c=g+c; e=f+e; i=2.3283064365386963e-10; f=i*c; g=l*f; g=m+g; h=j+g; g=h-g; g=b*g; g=b*g; c=g*c; g=d-g; f=g*f; c=f+c; f=32.0*g; g=1.52587890625e-05*c; e=f+e; f=l*g; f=m+f; h=j+f; f=h-f; f=b*f; f=b*f; c=f*c; f=d-f; g=f*g; f=16.0*f; c=g+c; e=f+e; f=0.00390625*c; g=l*f; g=m+g; h=j+g; g=h-g; g=b*g; g=b*g; c=g*c; g=d-g; f=g*f; c=f+c; f=8.0*g; g=0.0625*c; e=f+e; f=l*g; f=m+f; h=j+f; f=h-f; f=b*f; f=b*f; c=f*c; f=d-f; g=f*g; f=4.0*f; c=g+c; e=f+e; f=0.25*c; g=l*f; g=m+g; h=j+g; g=h-g; g=b*g; g=b*g; c=g*c; g=d-g; f=g*f; c=f+c; f=g+g; e=f+e; n=0.5; f=n*c; g=l*f; g=m+g; h=j+g; g=h-g; g=b*g; g=b*g; c=g*c; g=d-g; f=g*f; c=f+c; e=g+e; f=d-k; g=j+a; g-=a; g=m+g; g=b*g; g=b*g; g*=g; g=d-g; h=m+a; a=h-a; a=j+a; a=b*a; a=b*a; a*=a; a=d-a; a*=g; g=f*a; a=d-a; a=e*a; a+=g; e=l*c; e=m+e; g=j+e; e=g-e; e=b*e; e=b*e; g=n*c; c=e*c; e=d-e; e*=g; c=e+c; e=4.450147717014403e-308+c; g=j+e; g-=e; g=m+g; g=b*g; g=b*g; g*=g; g=d-g; h=m+e; e=h-e; e=j+e; e=b*e; e=b*e; e*=e; e=d-e; e*=g; g=e+e; d-=g; c=d*c; c=b*c; b*=c; c=-4503599627370496.0*f; c+=b; b=i*c; b=-0.4999999998835847+b; b=4503599627370497.0+b; d=-4503599627370497.0+b; b=2147483648.0*e; a=1048576.0*a; a=b+a; b=d+a; a=-4294967296.0*d; a+=c; low=a; high=b; return [low, high]; } function uint32s_as_double(low, high) { var a = low, b = high, c, d, e, f, g, h, i, j, k, l, m; b=9.5367431640625e-07*b; f=-0.4999999998835847; c=f+b; g=4503599627370497.0; c=g+c; e=-4503599627370497.0; c=e+c; d=b-c; c=0.00048828125*c; b=f+c; b=g+b; k=e+b; l=c-k; j=2.2250738585072014e-308; c=j+l; c-=l; i=4.49423283715579e+307; b=i*c; c=1.0; b=c-b; a=2.220446049250313e-16*a; h=-0.00048828125+l; a=d+a; d=b*h; d+=d; h=f+d; h=g+h; h=e+h; d-=h; b+=a; b=j*b; m=1.3407807929942597e+154; h=m*h; h=c+h; b=h*b; b*=h; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=m*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=1.157920892373162e+77*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=3.402823669209385e+38*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=1.8446744073709552e+19*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=4294967295.0*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=65535.0*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=255.0*h; h=c+h; b=h*b; d+=d; h=f+d; h=g+h; h=e+h; d-=h; h=15.0*h; h=c+h; b=h*b; d+=d; f+=d; f=g+f; e+=f; d-=e; e=3.0*e; e=c+e; b=e*b; d+=d; d=c+d; b=d*b; d=-0.99951171875+l; e=j+d; d=e-d; d=i*d; e=j+a; a=e-a; a=i*a; a=c-a; a=d*a; a=m*a; a=m*a; a-=a; a=b+a; b=k+k; b=c-b; a*=b; return a; }&lt;/quote&gt;
    &lt;p&gt;(I’m mostly joking, but it would be pretty funny to find that code buried in a library someday, and it should be pretty easy to port to just about any language.)&lt;/p&gt;
    &lt;head rend="h2"&gt;Background: IEEE-754 Doubles&lt;/head&gt;
    &lt;p&gt;This aims to be a concise explanation of everything you need to know about doubles to understand the rest of the article. Skip it if you know it already.&lt;/p&gt;
    &lt;p&gt;A double is a 64-bit value. Going from most-significant-bit to least-significant-bit, it is comprised of a 1-bit &lt;code&gt;sign&lt;/code&gt;, an 11-bit &lt;code&gt;exponent&lt;/code&gt; and a 52-bit &lt;code&gt;fraction&lt;/code&gt;. These bits are interpreted as either a special value, or a numerical value as described in the following pseudocode. The operations and values in the pseudocode have infinite precision, and &lt;code&gt;**&lt;/code&gt; is the exponentiation operation.&lt;/p&gt;
    &lt;quote&gt;if (sign == 1) s = -1; else s = 1; if (exponent == 0x7FF) { // Maximum exponent means a special value if (fraction == 0) return NaN; // Not a Number else if (sign == 1) return -Infinity; else return Infinity; } else if (exponent == 0) { // Zero exponent means a subnormal value. return s * (0.0 + fraction * (2 ** -52)) * (2 ** -1022); } else { // Everything else is a normal value. return s * (1.0 + fraction * (2 ** -52)) * (2 ** (exponent-1023)); }&lt;/quote&gt;
    &lt;p&gt;Normal values have an implicit leading 1, and can be thought of as “1.fraction”. Subnormals do not, so can be thought of as “0.fraction”, but they are otherwise the same as &lt;code&gt;exponent&lt;/code&gt; == 1.&lt;/p&gt;
    &lt;p&gt;This has been carefully designed, and gives a few interesting properties:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The implicit leading one ensures that each value has a unique representation (except for 0/-0 and NaN).&lt;/item&gt;
      &lt;item&gt;The subnormals ensure that distance between representable numbers only ever decreases as you get closer to zero, so the difference between two sequential values (also known as a “unit in last place” or ULP) is always exactly representable.&lt;/item&gt;
      &lt;item&gt;For positive numbers, the floating point value increases with its 64-bit integer representation, so they could be compared as integers, or you can find the next representable value by adding 1 to its int64 representation.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Addition and multiplication of doubles is defined as exact, infinitely-precise, mathematical addition and multiplication. If the exact result can be represented by a double, that double is the result, otherwise rounding occurs. IEEE-754 specifies several rounding modes that can be used, but I’ll focus on the most widely used one “round to nearest, ties to even”. This means that the nearest representable value is used, or if the exact result is half way between two representable values, the value with zero in its least significant &lt;code&gt;fraction&lt;/code&gt; bit is used. If the infinitely precise result gets too large or too small, it will be rounded to Infinity or -Infinity (see IEEE-754-2008 section 4.3.1 for a formal definition).&lt;/p&gt;
    &lt;p&gt;Finally, we should consider the special values. If NaN is an input to an addition or multiplication, the result will always be NaN. Multiplication and addition with Infinity or -Infinity will result in other Infinity or -Infinity values, with the exceptions of multiplying Infinity by zero, or subtracting Infinity from Infinity, both of which will result in NaN.&lt;/p&gt;
    &lt;head rend="h2"&gt;Notation&lt;/head&gt;
    &lt;p&gt;From this point onward, this is an attempt at something like literate programming, presented in essentially the order I created it, starting with just multiply, add and subtract, then building progressively more powerful functions. The code was written as C++, and has been refactored to simplify the explanation. I do make use of loops and functions, but only where they can be completely unrolled or inlined by the compiler.&lt;/p&gt;
    &lt;p&gt;I’ve omitted the function &lt;code&gt;double p2(int e)&lt;/code&gt;, which provides a power of two – everywhere it is used it gets inlined as a constant, but the easiest way to ensure this was to use a lookup table with 2098 values.&lt;/p&gt;
    &lt;p&gt;The macro &lt;code&gt;CONSTEXPR&lt;/code&gt; is defined as follows, mostly to allow adjustments to inlining, or removing the &lt;code&gt;constexpr&lt;/code&gt; keyword from everything easily:&lt;/p&gt;
    &lt;quote&gt;#define CONSTEXPR \ constexpr static inline __attribute__((always_inline))&lt;/quote&gt;
    &lt;p&gt;Throughout this text I’ve used &lt;code&gt;exponent&lt;/code&gt; to mean the encoded exponent bits in a double, as opposed to the unbiased/decoded exponent (&lt;code&gt;exponent - 1023&lt;/code&gt;). Hopefully that’s not too confusing.&lt;/p&gt;
    &lt;head rend="h2"&gt;Logic Operations&lt;/head&gt;
    &lt;p&gt;I started by investigating what you can do with only addition and multiplication. Supposing “true” is 1.0 and “false” is 0.0, I implemented some logic operations:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double double_and(double a, double b) { return a * b; } CONSTEXPR double double_not(double a) { return 1 - a; } CONSTEXPR double double_or(double a, double b) { return a + b - a * b; } CONSTEXPR double select( double condition, double if_true, double if_false) { return condition * if_true + double_not(condition) * if_false; }&lt;/quote&gt;
    &lt;p&gt;These are mostly presented without further comment, as they can be tested exhaustively. However &lt;code&gt;select&lt;/code&gt; is where things get a bit tricky. Because &lt;code&gt;Infinity * 0 = NaN&lt;/code&gt; and &lt;code&gt;NaN + anything = NaN&lt;/code&gt;, we can never ignore Infinity values and must be meticulous about never performing operations that could create them.&lt;/p&gt;
    &lt;head rend="h2"&gt;Avoiding Infinities&lt;/head&gt;
    &lt;p&gt;Given I want to convert an arbitrary floating point number to its bitwise representation, I had to start by figuring out what operations I could do on any floating point number without risking creating an Infinity.&lt;/p&gt;
    &lt;p&gt;One option here is multiplying by values between 1.0 and -1.0 inclusive as the result will never increase in magnitude. This works in any rounding mode.&lt;/p&gt;
    &lt;p&gt;We can also add any constant value between &lt;code&gt;p2(969)&lt;/code&gt; and &lt;code&gt;-p2(969)&lt;/code&gt; exclusive, as this will not round to infinity when added to the positive or negative values of greatest magnitude. However, this only works in round-to-nearest or round-toward-zero modes, as round-toward-positive and round-toward-negative may round to Infinity when adding even the smallest non-zero value.&lt;/p&gt;
    &lt;head rend="h2"&gt;An Initial Comparison&lt;/head&gt;
    &lt;p&gt;I figured I would need to construct &lt;code&gt;(x == y)&lt;/code&gt; and &lt;code&gt;(x &amp;lt; y)&lt;/code&gt; comparisons – something that would give me a boolean 0.0 or 1.0 that I could use with my logic functions. But I couldn’t even come up with a way to compute &lt;code&gt;(x == 0)&lt;/code&gt;. So I instead started with the question: what boolean value can I create?&lt;/p&gt;
    &lt;p&gt;Consider floating point addition of the smallest positive value (&lt;code&gt;p2(-1074)&lt;/code&gt;) to a number. If &lt;code&gt;exponent&lt;/code&gt; (the value of the encoded bits) is zero or one, this value is the ULP (distance between subsequent representable floating point values), so the result will be exact. When &lt;code&gt;exponent&lt;/code&gt; is two, the ULP is doubled, so the exact result will land between two representable values, so it will “round to even”, and either round up (adding &lt;code&gt;p2(-1073)&lt;/code&gt; instead) or round down (leaving the value unchanged). Finally, if the &lt;code&gt;exponent&lt;/code&gt; is four or above, the exact result of the addition will never reach the midpoint between representable values, so rounding to nearest will leave the value unchanged.&lt;/p&gt;
    &lt;p&gt;That explanation doesn’t completely cover the boundaries between &lt;code&gt;exponent&lt;/code&gt; values. Importantly, when adding &lt;code&gt;p2(-1074)&lt;/code&gt; to the negative number with &lt;code&gt;exponent&lt;/code&gt; two and fraction zero, the result will have &lt;code&gt;exponent&lt;/code&gt; one, and therefore is exactly representable (although the same is not true for the corresponding positive number).&lt;/p&gt;
    &lt;p&gt;So, supposing we compute &lt;code&gt;x + p2(-1074) - x&lt;/code&gt; we will get either &lt;code&gt;p2(-1074) * 2&lt;/code&gt; or &lt;code&gt;0&lt;/code&gt; if there was rounding, or &lt;code&gt;p2(-1074)&lt;/code&gt; if the result of the addition is accurate.&lt;/p&gt;
    &lt;p&gt;This can be turned into a boolean like so:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double adding_smallest_is_precise(double x) { double add_error = x + p2(-1074) - x; // add_error is in {0, p2(-1074), 2 * p2(-1074)} add_error -= p2(-1074); // add_error is in {-p2(-1074), 0, p2(-1074)} // divide by p2(-1074), by multiplying by p2(1074). p2(1074) is // out of range, so multiply by its square root twice instead. add_error = add_error * p2(1074/2) * p2(1074/2); // add_error is in {-1, 0, 1} add_error *= add_error; // add_error is in {1, 0, 1} return double_not(add_error); }&lt;/quote&gt;
    &lt;p&gt;This function computes &lt;code&gt;-p2(-1021) &amp;lt;= d &amp;lt; p2(-1021)&lt;/code&gt;, which is enough to start constructing other comparisons.&lt;/p&gt;
    &lt;p&gt;However, this comparison is frustratingly asymmetric, so we’ll compute &lt;code&gt;-p2(-1021) &amp;lt; d &amp;lt; p2(-1021)&lt;/code&gt; as follows. This is equivalent to checking if the &lt;code&gt;exponent&lt;/code&gt; is zero or one.&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_exp_0_or_1(double x) { double precise_add = adding_smallest_is_precise(x); double precise_sub = adding_smallest_is_precise(-x); return double_and(precise_add, precise_sub); }&lt;/quote&gt;
    &lt;head rend="h2"&gt;Equality Comparisons&lt;/head&gt;
    &lt;p&gt;To start with, it’d be good to compute &lt;code&gt;x == 0&lt;/code&gt;. We can now do that by taking the minimum and maximum values that satisfy &lt;code&gt;is_exp_0_or_1&lt;/code&gt; and checking that &lt;code&gt;x + v&lt;/code&gt; still satisfies &lt;code&gt;is_exp_0_or_1&lt;/code&gt; for both:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_zero(double x) { double magic = p2(-1021) - p2(-1074); return double_and(is_exp_0_or_1(x + magic), is_exp_0_or_1(x - magic)); }&lt;/quote&gt;
    &lt;p&gt;This works, and is Infinity-safe, as the magic number is nowhere near the limit of &lt;code&gt;p2(969)&lt;/code&gt;. It also gives us a way to implement &lt;code&gt;x == y&lt;/code&gt;, by checking &lt;code&gt;is_zero(x - y)&lt;/code&gt;. However, &lt;code&gt;x - y&lt;/code&gt; may be Infinity, so we must first implement a safe subtraction operation for comparisons:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double cmp_sub(double x, double y) { // return a number with the same sign as x-y (or zero // if x-y==0), while avoiding returning infinity. double small = double_or(is_exp_around_0_or_1(x), is_exp_around_0_or_1(y)); double multiplier = (small + 1) * p2(-1); return (x * multiplier) - (y * multiplier); }&lt;/quote&gt;
    &lt;p&gt;If either value has a tiny &lt;code&gt;exponent&lt;/code&gt;, then &lt;code&gt;x - y&lt;/code&gt; cannot become infinite. However, if both values have an &lt;code&gt;exponent&lt;/code&gt; &amp;gt;= 2, multiplying by &lt;code&gt;p2(-1)&lt;/code&gt; will be lossless (it just subtracts 1 from the &lt;code&gt;exponent&lt;/code&gt;). As such, the result will be zero when &lt;code&gt;x == y&lt;/code&gt;, will be positive when &lt;code&gt;x &amp;gt; y&lt;/code&gt; and will be negative when &lt;code&gt;x &amp;lt; y&lt;/code&gt;. So we can test equality like so:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_equal(double x, double y) { return is_zero(cmp_sub(x, y)); }&lt;/quote&gt;
    &lt;p&gt;Unfortunately, we still don’t have a way to calculate &lt;code&gt;x &amp;lt; 0&lt;/code&gt; (which would give us &lt;code&gt;x &amp;lt; y&lt;/code&gt;), but we’ll get back to that later.&lt;/p&gt;
    &lt;head rend="h2"&gt;Getting the Exponent&lt;/head&gt;
    &lt;p&gt;If we want to convert a double to its bitwise representation, we’ll need to extract its encoded exponent. So far, we can check if the &lt;code&gt;exponent&lt;/code&gt; is zero or one.&lt;/p&gt;
    &lt;p&gt;We can use that to build a test for if the &lt;code&gt;exponent&lt;/code&gt; is zero (i.e. the value is a subnormal), by adding constants that shift values with &lt;code&gt;exponent&lt;/code&gt; one outside of the range:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_exp_0(double x) { return double_and(is_exp_0_or_1(x + p2(-1022)), is_exp_0_or_1(x - p2(-1022))); }&lt;/quote&gt;
    &lt;p&gt;The other thing we want is to multiply by negative powers of two. This will subtract a constant from the &lt;code&gt;exponent&lt;/code&gt; (leaving the fraction unchanged), unless the &lt;code&gt;exponent&lt;/code&gt; reaches zero, in which case rounding will occur (possibly rounding up to a value with &lt;code&gt;exponent&lt;/code&gt; one). This can be used to build tests for if the &lt;code&gt;exponent&lt;/code&gt; is less than a given value. For example, &lt;code&gt;is_exp_0_or_1(v * p2(-1024))&lt;/code&gt; will be true if the &lt;code&gt;exponent&lt;/code&gt; is less than 1024 + 2.&lt;/p&gt;
    &lt;p&gt;This can be used to binary search the value of the &lt;code&gt;exponent&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double get_encoded_exponent(double v) { double tmp = v; double e = 0; #pragma unroll for (int test = 1024; test &amp;gt;= 1; test /= 2) { double trial = tmp * p2(-test); double too_small = is_exp_0_or_1(trial); tmp = select(too_small, tmp, trial); e += select(too_small, 0, test); } return select(is_exp_0_or_1(v), double_not(is_exp_0(v)), e + 2); }&lt;/quote&gt;
    &lt;p&gt;This will check if the encoded exponent is less than 2 + 1024, and if not, it’ll subtract 1024 from the encoded exponent (by multiplying by &lt;code&gt;p2(-1024)&lt;/code&gt;), and add 1024.0 to our exponent value. This is repeated with smaller powers of two, until we know that the remaining encoded exponent is 0, 1, or 2, and the &lt;code&gt;e&lt;/code&gt; variable will contain the amount subtracted. Finally, it uses the &lt;code&gt;is_exp_0_or_1&lt;/code&gt; and &lt;code&gt;is_exp_0&lt;/code&gt; functions to handle the zero and one cases explicitly.&lt;/p&gt;
    &lt;head rend="h2"&gt;Complete Comparisons&lt;/head&gt;
    &lt;p&gt;This is a great step towards bitwise casts, but &lt;code&gt;tmp&lt;/code&gt; in &lt;code&gt;get_encoded_exponent&lt;/code&gt; is interesting. By the end of the function, we’ve preserved its &lt;code&gt;sign&lt;/code&gt; and &lt;code&gt;fraction&lt;/code&gt; bits, but its &lt;code&gt;exponent&lt;/code&gt; has been converted to only 0, 1, or 2. This makes the challenge of testing &lt;code&gt;x &amp;lt; 0&lt;/code&gt; much simpler.&lt;/p&gt;
    &lt;p&gt;We can easily define a &lt;code&gt;make_exp_0_or_1&lt;/code&gt; function, that does the same thing, but also halves values that were left with &lt;code&gt;exponent&lt;/code&gt; two:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double make_exp_0_or_1(double v) { double res = v; #pragma unroll for (int test = 1024; test &amp;gt;= 1; test /= 2) { double trial = res * p2(-test); res = select(is_exp_0_or_1(trial), res, trial); } return select(is_exp_0_or_1(res), res, res * p2(-1)); }&lt;/quote&gt;
    &lt;p&gt;Now we can add a constant to shift all non-negative values out of the zero-or-one &lt;code&gt;exponent&lt;/code&gt; range, such that only values less than zero pass the &lt;code&gt;is_exp_0_or_1&lt;/code&gt; test.&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_less_than_zero(double v) { return is_exp_0(make_exp_0_or_1(v) + p2(-1022)); }&lt;/quote&gt;
    &lt;p&gt;And, using our &lt;code&gt;cmp_sub&lt;/code&gt; from earlier, we can compute &lt;code&gt;(x &amp;lt; y)&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_less_than(double a, double b) { return is_less_than_zero(cmp_sub(a, b)); }&lt;/quote&gt;
    &lt;head rend="h2"&gt;Floor&lt;/head&gt;
    &lt;p&gt;The final tool we need before we can put together out bitwise casts is &lt;code&gt;floor&lt;/code&gt;. For this, we’ll consider only numbers between zero and &lt;code&gt;p2(52)&lt;/code&gt;, and we’ll use a trick I’ve seen in the past (e.g. in musl libc’s floor.c). The trick is to add and subtract &lt;code&gt;p2(52)&lt;/code&gt;. Within the range &lt;code&gt;p2(52)&lt;/code&gt; to &lt;code&gt;p2(53)&lt;/code&gt;, the ULP is exactly 1, so &lt;code&gt;x + p2(52) - p2(52)&lt;/code&gt; performs a round-to-nearest-integer operation. From here, we can simply check if it rounded up, and subtract 1 if it did:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double small_positive_floor(double v) { // WARNING: incorrect for negative numbers and some // values over p2(52) // (but works for zero despite the name) double r = v + p2(52) - p2(52); return select(is_less_than(v, r), r - 1, r); }&lt;/quote&gt;
    &lt;p&gt;This lets us extract specific bits from a floating point integer. Specifically, I use the following idiom to split &lt;code&gt;n&lt;/code&gt; low bits from an integer &lt;code&gt;x&lt;/code&gt;: &lt;code&gt;high_part = floor(x * p2(-n)); low_part = x - high_part * p2(n);&lt;/code&gt;&lt;/p&gt;
    &lt;head rend="h2"&gt;Double to bits&lt;/head&gt;
    &lt;p&gt;So, how close are we to converting a double to its bits? &lt;code&gt;get_encoded_exponent&lt;/code&gt; gives us the exponent bits. &lt;code&gt;is_less_than_zero&lt;/code&gt; gives us the sign bit.&lt;/p&gt;
    &lt;p&gt;For the fraction, &lt;code&gt;make_exp_0_or_1&lt;/code&gt; has given us all the fraction bits, but preserved the sign, and the implicit leading &lt;code&gt;1&lt;/code&gt; if the number isn’t subnormal.&lt;/p&gt;
    &lt;p&gt;We can clear the sign bit by multiplying by &lt;code&gt;-1&lt;/code&gt; if the value is negative. We can subtract the implicit leading &lt;code&gt;1&lt;/code&gt; if the value isn’t subnormal to be left with only the fraction bits, and then scale it up by &lt;code&gt;p2(1047)&lt;/code&gt; so that a fraction of &lt;code&gt;1&lt;/code&gt; is &lt;code&gt;1.0&lt;/code&gt;:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double get_fraction(double v) { double result = make_exp_0_or_1(v) * select(is_less_than_zero(v), -1, 1); result -= select(is_exp_0(v), 0, p2(-1022)); result = result * p2(1074 / 2) * p2(1074 / 2); return result; }&lt;/quote&gt;
    &lt;p&gt;This gives us a 1-bit &lt;code&gt;sign&lt;/code&gt; value, an 11-bit &lt;code&gt;exponent&lt;/code&gt; value, and a 52-bit &lt;code&gt;fraction&lt;/code&gt; value (all stored as integers within doubles), so we just need to split that into two 32-bit values.&lt;/p&gt;
    &lt;p&gt;These traditionally bitwise ops are written using multiplication by powers of two as a constant shift (with floor to truncate the result), addition to set bits (instead of bitwise “or”), and subtraction to clear bits (instead of bitwise “and”):&lt;/p&gt;
    &lt;quote&gt;struct low_high_doubles { double low; double high; }; CONSTEXPR struct low_high_doubles constexpr_double_as_ints(double v){ double sign = is_less_than_zero(v); double exponent = get_encoded_exponent(v); double fraction = get_fraction(v); double high_fraction = small_positive_floor(fraction * p2(-32)); double high = sign * p2(31) + exponent * p2(20) + high_fraction; double low = fraction - high_fraction * p2(32); return { low, high }; }&lt;/quote&gt;
    &lt;head rend="h2"&gt;Bits to double&lt;/head&gt;
    &lt;p&gt;To convert bits to double, we can roughly follow the inverse. This is conceptually a bit simpler, so it’s only explained lightly in the comments:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double double_from_sign_exp_fraction( double sign, double exponent, double fraction) { double exp_is_non_zero = double_not(is_zero(exponent)); // scale fraction down to exponent 0 double v = fraction * p2(-1074); // add the implicit leading one if needed (so exponent = 1) v += select(exp_is_non_zero, p2(-1022), 0); // compute how much we need to increment the exponent by double e = select(exp_is_non_zero, exponent - 1, 0); // shift it so that all but the first bit is after the point e *= p2(-10); #pragma unroll for (int test = 1024; test &amp;gt;= 1; test &amp;gt;&amp;gt;= 1) { // cond will be 1 if the relevant bit is set, otherwise 0 double cond = small_positive_floor(e); // clear the current bit and shift the next bit into the // ones place e = (e - cond) * 2; if (test == 1024) { // p2(1024) is unrepresentable, so multiply by its // square root twice v *= select(cond, p2(512), 1.0); v *= select(cond, p2(512), 1.0); } else { v *= select(cond, p2(test), 1.0); } } // generate a NaN value if one is expected. double is_nan = double_and(is_equal(exponent, 2047), double_not(is_zero(fraction))); // if it's a NaN, "v" will already be Infinity, so multiply by // zero to make it NaN, otherwise multiply by one to leave it // as-is. v *= double_not(is_nan); // set the sign bit v *= select(sign, -1, 1); return v; }&lt;/quote&gt;
    &lt;p&gt;Finally, we just need to extract the sign, exponent and fraction fields from the high and low unsigned 32-bit integers:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double constexpr_ints_as_double(double l, double h) { double exp_and_sign = small_positive_floor(h * p2(-20)); double sign = small_positive_floor(h * p2(-31)); double exponent = exp_and_sign - sign * p2(11); double fraction = (h - exp_and_sign * p2(20)) * p2(32) + l; return double_from_sign_exp_fraction(sign, exponent, fraction); }&lt;/quote&gt;
    &lt;p&gt;The code presented above is true to my initial implementation, but ends up quite bloated, compiling to around 5000 add, subtract or multiply operations (assuming it’s all inlined and unrolled). You can see it on Compiler Explorer or gist.&lt;/p&gt;
    &lt;head rend="h2"&gt;“Dirty” floor trick&lt;/head&gt;
    &lt;p&gt;Perhaps that would be a good place to leave it, but I tried to optimise the number of operations a little. To decrease the size to something comparable to what’s shown in the initial Javascript (around 368 operations), a number of less safe or less clear functions and techniques are used.&lt;/p&gt;
    &lt;p&gt;The biggest problem is &lt;code&gt;floor&lt;/code&gt;, which requires the &lt;code&gt;make_exp_0_or_1&lt;/code&gt; operation every time (binary searching the exponent takes a fair number of instructions). In every situation we use “floor” we know a lot about the range of the value, and the number of bits present after the point. This lets us implement &lt;code&gt;floor&lt;/code&gt; without a comparison, by just biasing the input numbers such that round-to-nearest-ties-to-even will round down.&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double dirty_floor(double v) { // for values between 0 and 0x100000 with up to 32 significant bits // after the "decimal" point. return v - (0.5 - p2(-33)) + (p2(52)+1) - (p2(52)+1); }&lt;/quote&gt;
    &lt;p&gt;This might be the most complex trick, so to explain a little more: ignoring edge cases we could say that &lt;code&gt;floor(x) == roundToNearestEven(x - 0.5)&lt;/code&gt;. But the “edge case” here is integers, which will end up exactly between two integers, so round-to-even will round half of all integers down, giving the wrong result.&lt;/p&gt;
    &lt;p&gt;We can get the right result by subtracting slightly less than 0.5 instead. How much less? Well, it can’t make any other value land on 0.5, so it must be smaller than the smallest distance between possible inputs. But it also can’t get rounded off, so it must be at least the ULP for the biggest possible input.&lt;/p&gt;
    &lt;p&gt;This is impossible to solve if you have 53 significant bits, but fortunately we don’t. The constant chosen works out exactly for our 52-bit fraction being shifted right by 32, and happens to work everywhere else, as there are both fewer significant bits and no larger values.&lt;/p&gt;
    &lt;head rend="h2"&gt;More tweaks&lt;/head&gt;
    &lt;p&gt;Revisiting the initial comparison, a cheaper symmetrical boolean test was found. This computes &lt;code&gt;-p2(-1021) &amp;lt;= d &amp;lt;= p2(-1021)&lt;/code&gt; (i.e. the same as &lt;code&gt;is_exp_0_or_1&lt;/code&gt; but including one value on either side).&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_exp_around_0_or_1(double v) { double biased = v - p2(-1074); return (biased + p2(-1074) - biased) * p2(1074 / 2) * p2(1074 / 2); }&lt;/quote&gt;
    &lt;p&gt;(This can be analysed case-by-case, but essentially the initial bias both makes it symmetrical, and prevents a subsequent round-to-even from ever rounding away from the biased value, simplifying the conversion to boolean.)&lt;/p&gt;
    &lt;p&gt;We can go a bit further to try to replace &lt;code&gt;is_exp_0_or_1&lt;/code&gt; by multiplying the input by the smallest double greater than one. Unfortunately, this can generate Infinity when called on arbitrary values, but we can use it on all but the first iteration of our exponent decreasing loops.&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double unsafe_is_exp_0_or_1(double v) { // only works for non-huge numbers return is_exp_around_0_or_1(v * (p2(0) + p2(-52))); }&lt;/quote&gt;
    &lt;p&gt;We can use much coarser comparisons when we know a number is either zero or a long way from zero, as we do when comparing the “exponent” or “fraction” values:&lt;/p&gt;
    &lt;quote&gt;CONSTEXPR double is_integer_zero(double v) { return (v + p2(-1022) - v) * p2(1022); } CONSTEXPR double is_small_integer_equal(double a, double b) { return is_integer_zero(a - b); }&lt;/quote&gt;
    &lt;p&gt;Despite the names, I can and did use these method on non-integers without worrying, when I knew they were well above roughly &lt;code&gt;p2(-900)&lt;/code&gt; (around which we might have to worry about the addition being accurate for a non-zero value).&lt;/p&gt;
    &lt;p&gt;Finally, there were just a lot of little simplifications that the compiler cannot perform. A lot of duplicate work was removed by computing &lt;code&gt;sign&lt;/code&gt;, &lt;code&gt;exponent&lt;/code&gt; and &lt;code&gt;fraction&lt;/code&gt; at the same time in one big function. Throughout the code, &lt;code&gt;select(cond, x, y)&lt;/code&gt; with constant x and y could often be written as &lt;code&gt;(x - y) * cond + y&lt;/code&gt;, which simplifies even further if &lt;code&gt;y&lt;/code&gt; is zero. And there were plenty of other algebraic simplifications of little note.&lt;/p&gt;
    &lt;p&gt;You can find my optimised code on Compiler Explorer or gist. (Although this doesn’t quite match the code in this post, it should match the Javascript at the top closely.)&lt;/p&gt;
    &lt;p&gt;The Javascript was generated by compiling the optimised code with &lt;code&gt;clang++ -O2 -fno-slp-vectorize -march=skylake -std=c++14 -fomit-frame-pointer -S&lt;/code&gt;, which generated an assembly file containing a stream of &lt;code&gt;vaddsd&lt;/code&gt;, &lt;code&gt;vsubsd&lt;/code&gt; and &lt;code&gt;vmulsd&lt;/code&gt; instructions, as well as &lt;code&gt;vmovsd&lt;/code&gt; instructions to load constants. These instructions were translated into Javascript using a terrible Python script.&lt;/p&gt;
    &lt;head rend="h2"&gt;Future work&lt;/head&gt;
    &lt;p&gt;As noted, this was a completely pointless exercise, but it does open up some avenues for further pointless exercises:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Can it be generalised to work for &lt;code&gt;float&lt;/code&gt;as well (splitting to two 16-bit values)?&lt;/item&gt;
      &lt;item&gt;Can it be extended to other rounding modes? All other rounding modes?&lt;/item&gt;
      &lt;item&gt;Are there simpler or smaller implementations of the various operations used?&lt;/item&gt;
      &lt;item&gt;Could it be turned into a reasonable expression, with no variables, just nested additions and subtractions? Doing so naively gives multi-gigabyte results, but no effort was made to optimise for this.&lt;/item&gt;
      &lt;item&gt;This roughly shows that any function from finite doubles to finite doubles can be implemented. How hard is it to approximate division? How many operations would it take to implement correctly rounded division?&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;I’d also like to generate a version of the Javascript where all the constants are synthesised from “2.0” and “0.5”, so as to try to be portable to restricted environments with potentially inaccurate floating-point constant parsing.&lt;/p&gt;
    &lt;head rend="h2"&gt;Further Reading&lt;/head&gt;
    &lt;p&gt;As I was mostly exploring this for fun, I used very little by way of references, but here are a couple of somewhat related things I quite like:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;mov is Turing Complete (Stephen Dolan) and the movfuscator (Christopher Domas) (github, talk)&lt;/item&gt;
      &lt;item&gt;Handbook of Floating-Point Arithmetic (Jean-Michel Muller, Nicolas Brunie, Florent de Dinechin, Claude-Pierre Jeannerod, Mioara Joldes, Vincent Lefèvre, Guillaume Melquiond, Nathalie Revol, Serge Torres)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Anyway, thanks for reading! Let me know if you find any mistakes. You can follow me on Twitter at @dougallj.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://dougallj.wordpress.com/2020/05/10/bitwise-conversion-of-doubles-using-only-floating-point-multiplication-and-addition/"/><published>2026-01-25T14:55:03+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46754724</id><title>Show HN: Netfence – Like Envoy for eBPF Filters</title><updated>2026-01-26T04:37:14.994200+00:00</updated><content>&lt;doc fingerprint="780d8d538f3988c3"&gt;
  &lt;main&gt;
    &lt;p&gt;Like Envoy xDS, but for eBPF filters.&lt;/p&gt;
    &lt;p&gt;Netfence runs as a daemon on your VM/container hosts and automatically injects eBPF filter programs into cgroups and network interfaces, with a built-in DNS server that resolves allowed domains and populates the IP allowlist.&lt;/p&gt;
    &lt;p&gt;Netfence daemons connect to a central control plane that you implement via gRPC to synchronize allowlists/denylists with your backend.&lt;/p&gt;
    &lt;p&gt;Your control plane pushes network rules like &lt;code&gt;ALLOW *.pypi.org&lt;/code&gt; or &lt;code&gt;ALLOW 10.0.0.0/16&lt;/code&gt; to attached interfaces/cgroups. When a VM/container queries DNS, Netfence resolves it, adds the IPs to the eBPF filter, and drops traffic to unknown IPs before it leaves the host without any performance penalty.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Attach eBPF filters to network interfaces (TC) or cgroups&lt;/item&gt;
      &lt;item&gt;Policy modes: disabled, allowlist, denylist, block-all&lt;/item&gt;
      &lt;item&gt;IPv4 and IPv6 CIDR support with optional TTLs&lt;/item&gt;
      &lt;item&gt;Per-attachment DNS server with domain allowlist/denylist&lt;/item&gt;
      &lt;item&gt;Domain rules support subdomains with specificity-based matching (more specific rules win)&lt;/item&gt;
      &lt;item&gt;Resolved domains auto-populate IP filter&lt;/item&gt;
      &lt;item&gt;Metadata on daemons and attachments for associating with VM ID, tenant, etc.&lt;/item&gt;
      &lt;item&gt;Support for proxying DNS queries to the control plane to make DNS decisions per-attachment&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;+------------------+         +-------------------------+
|  Your Control    |&amp;lt;-------&amp;gt;|  Daemon (per host)      |
|  Plane (gRPC)    |  stream |                         |
+------------------+         |  +-------------------+  |
                             |  | DNS Server        |  |
                             |  | (per-attachment)  |  |
                             |  +-------------------+  |
                             +-------------------------+
                                        |
                                 +------+------+
                                 |             |
                              TC Filter    Cgroup Filter
                              (veth, eth)  (containers)
&lt;/code&gt;
    &lt;p&gt;Each attachment gets a unique DNS address (port) provisioned by the daemon. Containers/VMs should be configured to use their assigned DNS address.&lt;/p&gt;
    &lt;p&gt;Run the daemon, which:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Exposes a local gRPC API (&lt;code&gt;DaemonService&lt;/code&gt;) for attaching/detaching filters&lt;/item&gt;
      &lt;item&gt;Connects to your control plane via bidirectional stream (&lt;code&gt;ControlPlane.Connect&lt;/code&gt;)&lt;/item&gt;
      &lt;item&gt;Loads and manages eBPF programs&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Start the daemon:&lt;/p&gt;
    &lt;code&gt;# Start with default config
netfenced start

# Start with custom config file
netfenced start --config /etc/netfence/config.yaml&lt;/code&gt;
    &lt;p&gt;Check daemon status:&lt;/p&gt;
    &lt;code&gt;netfenced status&lt;/code&gt;
    &lt;p&gt;Your orchestration system calls the daemon's local API.&lt;/p&gt;
    &lt;p&gt;RPC:&lt;/p&gt;
    &lt;code&gt;DaemonService.Attach(interface_name: "veth123", metadata: {vm_id: "abc"})
// or
DaemonService.Attach(cgroup_path: "/sys/fs/cgroup/...", metadata: {container_id: "xyz"})
&lt;/code&gt;
    &lt;p&gt;CLI:&lt;/p&gt;
    &lt;code&gt;# Attach to a network interface (TC)
netfenced attach --interface veth123 --metadata vm_id=abc

# Attach to a cgroup
netfenced attach --cgroup /sys/fs/cgroup/... --metadata container_id=xyz

# Attach with metadata
netfenced attach --interface eth0 --metadata tenant=acme,env=prod&lt;/code&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Daemon attaches eBPF filter to the target&lt;/item&gt;
      &lt;item&gt;Daemon sends &lt;code&gt;Subscribed{id, target, type, metadata}&lt;/code&gt;to control plane and waits for&lt;code&gt;SubscribedAck&lt;/code&gt;with initial config (mode, CIDRs, DNS rules)&lt;/item&gt;
      &lt;item&gt;If the control plane doesn't respond within the timeout (default 5s, configurable via &lt;code&gt;control_plane.subscribe_ack_timeout&lt;/code&gt;), the attachment is rolled back and the attach call fails&lt;/item&gt;
      &lt;item&gt;Daemon watches for target removal and sends &lt;code&gt;Unsubscribed&lt;/code&gt;automatically&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;RPC:&lt;/p&gt;
    &lt;code&gt;DaemonService.Detach(id)
&lt;/code&gt;
    &lt;p&gt;CLI:&lt;/p&gt;
    &lt;code&gt;netfenced detach --id &amp;lt;attachment-id&amp;gt;&lt;/code&gt;
    &lt;p&gt;List attachments:&lt;/p&gt;
    &lt;code&gt;netfenced list
netfenced list --all  # fetch all pages&lt;/code&gt;
    &lt;p&gt;Implement &lt;code&gt;ControlPlane.Connect&lt;/code&gt; RPC - a bidirectional stream:&lt;/p&gt;
    &lt;p&gt;Receive from daemon:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;SyncRequest&lt;/code&gt;on connect/reconnect (lists current attachments)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Subscribed&lt;/code&gt;when new attachments are added&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Unsubscribed&lt;/code&gt;when attachments are removed&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Heartbeat&lt;/code&gt;with stats&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Send to daemon:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;SyncAck&lt;/code&gt;after receiving SyncRequest&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;SubscribedAck{mode, cidrs, dns_config}&lt;/code&gt;after receiving Subscribed (required - daemon waits for this)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;SetMode{mode}&lt;/code&gt;- change IP filter policy mode&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;AllowCIDR{cidr, ttl}&lt;/code&gt;/&lt;code&gt;DenyCIDR&lt;/code&gt;/&lt;code&gt;RemoveCIDR&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;SetDnsMode{mode}&lt;/code&gt;- change DNS filtering mode&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;AllowDomain{domain}&lt;/code&gt;/&lt;code&gt;DenyDomain&lt;/code&gt;/&lt;code&gt;RemoveDomain&lt;/code&gt;&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;BulkUpdate{mode, cidrs, dns_config}&lt;/code&gt;- full state sync&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;When the daemon receives &lt;code&gt;Subscribed&lt;/code&gt;, it blocks waiting for &lt;code&gt;SubscribedAck&lt;/code&gt; before returning success to the caller. This ensures the attachment has its initial configuration before traffic flows. Use the metadata to identify which VM/tenant/container this attachment belongs to and respond with the appropriate initial rules.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/danthegoodman1/netfence"/><published>2026-01-25T15:13:46+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46754944</id><title>A macOS app that blurs your screen when you slouch</title><updated>2026-01-26T04:37:14.598407+00:00</updated><content>&lt;doc fingerprint="709cd7c435d2d38d"&gt;
  &lt;main&gt;
    &lt;p&gt;A macOS app that blurs your screen when you slouch.&lt;/p&gt;
    &lt;p&gt;Posturr uses your Mac's camera and Apple's Vision framework to monitor your posture in real-time. When it detects that you're slouching, it progressively blurs your screen to remind you to sit up straight. Maintain good posture, and the blur clears instantly.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Real-time posture detection - Uses Apple's Vision framework for body pose and face tracking&lt;/item&gt;
      &lt;item&gt;Progressive screen blur - Gentle visual reminder that intensifies with worse posture&lt;/item&gt;
      &lt;item&gt;Menu bar controls - Easy access to settings, calibration, and status from the menu bar&lt;/item&gt;
      &lt;item&gt;Multi-display support - Works across all connected monitors&lt;/item&gt;
      &lt;item&gt;Privacy-focused - All processing happens locally on your Mac&lt;/item&gt;
      &lt;item&gt;Lightweight - Runs as a background app with minimal resource usage&lt;/item&gt;
      &lt;item&gt;No account required - No signup, no cloud, no tracking&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;brew tap tldev/tap
brew install --cask posturr&lt;/code&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Download the latest &lt;code&gt;Posturr-vX.X.X.dmg&lt;/code&gt;or&lt;code&gt;.zip&lt;/code&gt;from the Releases page&lt;/item&gt;
      &lt;item&gt;Open the DMG and drag &lt;code&gt;Posturr.app&lt;/code&gt;to your Applications folder&lt;/item&gt;
      &lt;item&gt;Launch normally - no Gatekeeper warnings (app is signed and notarized)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Posturr requires camera access to monitor your posture. When you first launch the app, macOS will ask for permission. Click "OK" to grant access.&lt;/p&gt;
    &lt;p&gt;If you accidentally denied permission, you can grant it later:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Open System Settings &amp;gt; Privacy &amp;amp; Security &amp;gt; Camera&lt;/item&gt;
      &lt;item&gt;Find Posturr and enable the toggle&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Once launched, Posturr appears in your menu bar with a person icon. The app continuously monitors your posture and applies screen blur when slouching is detected.&lt;/p&gt;
    &lt;p&gt;Click the menu bar icon to access:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Status - Shows current state (Monitoring, Slouching, Good Posture, etc.)&lt;/item&gt;
      &lt;item&gt;Enabled - Toggle posture monitoring on/off&lt;/item&gt;
      &lt;item&gt;Recalibrate - Reset your baseline posture (sit up straight, then click)&lt;/item&gt;
      &lt;item&gt;Sensitivity - Adjust how sensitive the slouch detection is (Low, Medium, High, Very High)&lt;/item&gt;
      &lt;item&gt;Dead Zone - Set the tolerance before blur kicks in (None, Small, Medium, Large)&lt;/item&gt;
      &lt;item&gt;Compatibility Mode - Use public macOS APIs for blur (try this if blur doesn't appear)&lt;/item&gt;
      &lt;item&gt;Quit - Exit the application (or press Escape anywhere)&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Position your camera at eye level when possible&lt;/item&gt;
      &lt;item&gt;Ensure adequate lighting on your face&lt;/item&gt;
      &lt;item&gt;Sit at a consistent distance from your screen&lt;/item&gt;
      &lt;item&gt;The app works best when your shoulders are visible&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Posturr uses Apple's Vision framework to detect body pose landmarks:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Body Pose Detection: Tracks nose, shoulders, and their relative positions&lt;/item&gt;
      &lt;item&gt;Face Detection Fallback: When full body isn't visible, tracks face position&lt;/item&gt;
      &lt;item&gt;Posture Analysis: Measures the vertical distance between nose and shoulders&lt;/item&gt;
      &lt;item&gt;Blur Response: Applies screen blur proportional to posture deviation&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The screen blur uses macOS's private CoreGraphics API by default for efficient, system-level blur. If the blur doesn't appear on your system, enable Compatibility Mode from the menu to use &lt;code&gt;NSVisualEffectView&lt;/code&gt; instead.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;macOS 13.0 (Ventura) or later&lt;/item&gt;
      &lt;item&gt;Xcode Command Line Tools (&lt;code&gt;xcode-select --install&lt;/code&gt;)&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;git clone https://github.com/yourusername/posturr.git
cd posturr
./build.sh&lt;/code&gt;
    &lt;p&gt;The built app will be in &lt;code&gt;build/Posturr.app&lt;/code&gt;.&lt;/p&gt;
    &lt;code&gt;# Standard build
./build.sh

# Build with release archive (.zip)
./build.sh --release&lt;/code&gt;
    &lt;code&gt;swiftc -O \
    -framework AppKit \
    -framework AVFoundation \
    -framework Vision \
    -framework CoreImage \
    -o Posturr \
    main.swift&lt;/code&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Camera dependency: Requires a working camera with adequate lighting&lt;/item&gt;
      &lt;item&gt;Detection accuracy: Works best with clear view of upper body/face&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Posturr exposes a file-based command interface for external control:&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="2"&gt;
        &lt;cell role="head"&gt;Command&lt;/cell&gt;
        &lt;cell role="head"&gt;Description&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;
          &lt;code&gt;capture&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Take a photo and analyze pose&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="2"&gt;
        &lt;cell&gt;
          &lt;code&gt;blur &amp;lt;0-64&amp;gt;&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Set blur level manually&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;
          &lt;code&gt;quit&lt;/code&gt;
        &lt;/cell&gt;
        &lt;cell&gt;Exit the application&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;Write commands to &lt;code&gt;/tmp/posturr-command&lt;/code&gt;. Responses appear in &lt;code&gt;/tmp/posturr-response&lt;/code&gt;.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;macOS 13.0 (Ventura) or later&lt;/item&gt;
      &lt;item&gt;Camera (built-in or external)&lt;/item&gt;
      &lt;item&gt;Approximately 10MB disk space&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Posturr processes all video data locally on your Mac. No images or data are ever sent to external servers. The camera feed is used solely for posture detection and is never stored or transmitted.&lt;/p&gt;
    &lt;p&gt;MIT License - see LICENSE for details.&lt;/p&gt;
    &lt;p&gt;Contributions are welcome! Please feel free to submit issues and pull requests.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Built with Apple's Vision framework for body pose detection&lt;/item&gt;
      &lt;item&gt;Uses private CoreGraphics API for blur, with NSVisualEffectView fallback&lt;/item&gt;
      &lt;item&gt;Inspired by the need for better posture during long coding sessions&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;@wklm - Compatibility mode implementation&lt;/item&gt;
      &lt;item&gt;@cam-br0wn - Architecture-agnostic build improvements&lt;/item&gt;
      &lt;item&gt;@einsteinx2 - SwiftPM/Xcode support&lt;/item&gt;
    &lt;/list&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/tldev/posturr"/><published>2026-01-25T15:34:51+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46755115</id><title>Using PostgreSQL as a Dead Letter Queue for Event-Driven Systems</title><updated>2026-01-26T04:37:14.430861+00:00</updated><content>&lt;doc fingerprint="3f4c263785a28d80"&gt;
  &lt;main&gt;
    &lt;p&gt;While I was working on a project with Wayfair, I got the opportunity to work on a system that generated daily business reports aggregated from multiple data sources flowing through event streams across Wayfair. At a high level, Kafka consumers listened to these events, hydrated them with additional data by calling downstream services, and finally persisted the enriched events into a durable datastoreâCloudSQL PostgreSQL on GCP.&lt;/p&gt;
    &lt;p&gt;When everything was healthy, the pipeline worked exactly as expected. Events flowed in, got enriched, and were stored reliably. The real challenge started when things went wrong, which, in distributed systems, is not an exception but a certainty.&lt;/p&gt;
    &lt;p&gt;There were multiple failure scenarios we had to deal with. Sometimes the APIs we depended on for hydration were down or slow. Sometimes the consumer itself crashed midway through processing. In other cases, events arrived with missing or malformed fields that could not be processed safely. These were all situations outside our direct control, but they still needed to be handled gracefully.&lt;/p&gt;
    &lt;p&gt;This is where the concept of a Dead Letter Queue came into the picture. Whenever we knew an event could not be processed successfully, instead of dropping it or blocking the entire consumer, we redirected it to a DLQ so it could be inspected and potentially reprocessed later.&lt;/p&gt;
    &lt;p&gt;Our first instinct was to use Kafka itself as a DLQ. While this is a common pattern, it quickly became clear that it wasn't a great fit for our needs. Kafka is excellent for moving data, but once messages land in a DLQ topic, they are not particularly easy to inspect. Querying by failure reason, retrying a specific subset of events, or even answering simple questions like "what failed yesterday and why?" required extra tooling and custom consumers. For a system that powered business-critical daily reports, this lack of visibility was a serious drawback.&lt;/p&gt;
    &lt;p&gt;That's when we decided to treat PostgreSQL itself as the Dead Letter Queue.&lt;/p&gt;
    &lt;p&gt;Instead of publishing failed events to another Kafka topic, we persisted them directly into a DLQ table in PostgreSQL. We were already using CloudSQL as our durable store, so operationally this added very little complexity. Conceptually, it also made failures first-class citizens in the system rather than opaque messages lost in a stream.&lt;/p&gt;
    &lt;p&gt; Whenever an event failed processingâdue to an API failure, consumer crash, schema mismatch, or validation errorâwe stored the raw event payload along with contextual information about the failure. Each record carried a simple status field. When the event first landed in the DLQ, it was marked as &lt;code&gt;PENDING&lt;/code&gt;. Once it was successfully reprocessed, the status was updated to &lt;code&gt;SUCCEEDED&lt;/code&gt;. Keeping the state model intentionally minimal made it easy to reason about the lifecycle of a failed event.
                    &lt;/p&gt;
    &lt;head rend="h3"&gt;DLQ Table Schema and Indexing Strategy&lt;/head&gt;
    &lt;p&gt;To support inspection, retries, and long-term operability, the DLQ table was designed to be simple, query-friendly, and retry-aware.&lt;/p&gt;
    &lt;head rend="h4"&gt;Table Schema&lt;/head&gt;
    &lt;code&gt;CREATE TABLE dlq_events (
    id BIGSERIAL PRIMARY KEY,
    event_type VARCHAR(255) NOT NULL,
    payload JSONB NOT NULL,
    error_reason TEXT NOT NULL,
    error_stacktrace TEXT,
    status VARCHAR(20) NOT NULL, -- PENDING / SUCCEEDED
    retry_count INT NOT NULL DEFAULT 0,
    retry_after TIMESTAMP WITH TIME ZONE NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW()
);&lt;/code&gt;
    &lt;head rend="h4"&gt;Key Design Considerations&lt;/head&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;payload&lt;/code&gt;is stored as&lt;code&gt;JSONB&lt;/code&gt;to preserve the raw event without enforcing a rigid schema.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;status&lt;/code&gt;keeps the lifecycle simple and explicit.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;retry_after&lt;/code&gt;prevents aggressive retries when downstream systems are unstable.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;retry_count&lt;/code&gt;allows retry limits to be enforced without external state.&lt;/item&gt;
      &lt;item&gt;Timestamps make auditing and operational analysis straightforward.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h4"&gt;Indexes&lt;/head&gt;
    &lt;code&gt;CREATE INDEX idx_dlq_status
ON dlq_events (status);

CREATE INDEX idx_dlq_status_retry_after
ON dlq_events (status, retry_after);

CREATE INDEX idx_dlq_event_type
ON dlq_events (event_type);

CREATE INDEX idx_dlq_created_at
ON dlq_events (created_at);&lt;/code&gt;
    &lt;p&gt;These indexes allow the retry scheduler to efficiently locate eligible events while still supporting fast debugging and time-based analysis without full table scans.&lt;/p&gt;
    &lt;head rend="h3"&gt;DLQ Retry Mechanism with ShedLock&lt;/head&gt;
    &lt;p&gt;Persisting failed events solved the visibility problem, but we still needed a safe and reliable way to retry them.&lt;/p&gt;
    &lt;p&gt; For this, we introduced a DLQ retry scheduler backed by ShedLock. The scheduler periodically scans the DLQ table for &lt;code&gt;PENDING&lt;/code&gt; events that are eligible for retry and attempts to process them again. Since the service runs on multiple instances, ShedLock ensures that only one instance executes the retry job at any given time. This eliminates duplicate retries without requiring custom leader-election logic.
                    &lt;/p&gt;
    &lt;head rend="h4"&gt;Retry Configuration&lt;/head&gt;
    &lt;code&gt;dlq:
  retry:
    enabled: true
    max-retries: 240
    batch-size: 50
    fixed-rate: 21600000 # 6 hours in milliseconds&lt;/code&gt;
    &lt;head rend="h4"&gt;How Retries Work&lt;/head&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;The scheduler runs every six hours.&lt;/item&gt;
      &lt;item&gt;Up to fifty eligible events are picked up per run.&lt;/item&gt;
      &lt;item&gt;Events exceeding the maximum retry count are skipped.&lt;/item&gt;
      &lt;item&gt;Successful retries immediately transition the event status to &lt;code&gt;SUCCEEDED&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;Failures remain in &lt;code&gt;PENDING&lt;/code&gt;and are retried in subsequent runs.&lt;/item&gt;
    &lt;/list&gt;
    &lt;head rend="h4"&gt;Query Implementation&lt;/head&gt;
    &lt;p&gt; The retry scheduler uses a SQL query with &lt;code&gt;FOR UPDATE SKIP LOCKED&lt;/code&gt; to safely select eligible events across multiple instances. This PostgreSQL feature ensures that even if multiple scheduler instances run simultaneously, each will pick up different rows without blocking each other:
                    &lt;/p&gt;
    &lt;code&gt;@QueryHints(@QueryHint(name = "jakarta.persistence.lock.timeout", value = "-2"))
@Query(
    value = "SELECT * FROM dlq_table "
        + "WHERE messagetype = :messageType "
        + "AND retries &amp;lt; :maxRetries "
        + "AND (replay_status IS NULL OR replay_status NOT IN ('COMPLETED')) "
        + "ORDER BY created_at ASC "
        + "FOR UPDATE SKIP LOCKED",
    nativeQuery = true
)&lt;/code&gt;
    &lt;p&gt; The &lt;code&gt;FOR UPDATE SKIP LOCKED&lt;/code&gt; clause is crucial here. It allows each instance to lock and process different rows concurrently, preventing duplicate processing while maintaining high throughput. The query hint sets the lock timeout to &lt;code&gt;-2&lt;/code&gt;, which means "wait indefinitely" but combined with &lt;code&gt;SKIP LOCKED&lt;/code&gt;, it effectively means "skip any rows that are already locked by another transaction."
                    &lt;/p&gt;
    &lt;p&gt;This setup allowed the system to tolerate long downstream outages while avoiding retry storms and unnecessary load on dependent services.&lt;/p&gt;
    &lt;head rend="h3"&gt;Operational Benefits&lt;/head&gt;
    &lt;p&gt;With this approach, failures became predictable and observable rather than disruptive. Engineers could inspect failures using plain SQL, identify patterns, and reprocess only the events that mattered. If a downstream dependency was unavailable for hours or even days, events safely accumulated in the DLQ and were retried later without human intervention. If an event was fundamentally bad, it stayed visible instead of being silently dropped.&lt;/p&gt;
    &lt;p&gt;Most importantly, this design reduced operational stress. Failures were no longer something to fear; they were an expected part of the system with a clear, auditable recovery path.&lt;/p&gt;
    &lt;head rend="h3"&gt;My Thoughts&lt;/head&gt;
    &lt;p&gt;The goal was never to replace Kafka with PostgreSQL. Kafka remained the backbone for high-throughput event ingestion, while PostgreSQL handled what it does bestâdurability, querying, and observability around failures. By letting each system play to its strengths, we ended up with a pipeline that was resilient, debuggable, and easy to operate.&lt;/p&gt;
    &lt;p&gt;In the end, using PostgreSQL as a Dead Letter Queue turned failure handling into something boring and predictable. And in production systems, boring is exactly what you want.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.diljitpr.net/blog-post-postgresql-dlq"/><published>2026-01-25T15:51:03+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46756117</id><title>ICE using Palantir tool that feeds on Medicaid data</title><updated>2026-01-26T04:37:14.274700+00:00</updated><content>&lt;doc fingerprint="ad964554d5aa1139"&gt;
  &lt;main&gt;
    &lt;p&gt;EFF last summer asked a federal judge to block the federal government from using Medicaid data to identify and deport immigrants.&lt;/p&gt;
    &lt;p&gt;We also warned about the danger of the Trump administration consolidating all of the government’s information into a single searchable, AI-driven interface with help from Palantir, a company that has a shaky-at-best record on privacy and human rights.&lt;/p&gt;
    &lt;p&gt;Now we have the first evidence that our concerns have become reality.&lt;/p&gt;
    &lt;p&gt;“Palantir is working on a tool for Immigration and Customs Enforcement (ICE) that populates a map with potential deportation targets, brings up a dossier on each person, and provides a “confidence score” on the person’s current address,” 404 Media reports today. “ICE is using it to find locations where lots of people it might detain could be based.”&lt;/p&gt;
    &lt;p&gt;The tool – dubbed Enhanced Leads Identification &amp;amp; Targeting for Enforcement (ELITE) – receives peoples’ addresses from the Department of Health and Human Services (which includes Medicaid) and other sources, 404 Media reports based on court testimony in Oregon by law enforcement agents, among other sources.&lt;/p&gt;
    &lt;p&gt;This revelation comes as ICE – which has gone on a surveillance technology shopping spree – floods Minneapolis with agents, violently running roughshod over the civil rights of immigrants and U.S. citizens alike; President Trump has threatened to use the Insurrection Act of 1807 to deploy military troops against protestors there. Other localities are preparing for the possibility of similar surges.&lt;/p&gt;
    &lt;p&gt;Different government agencies necessarily collect information to provide essential services or collect taxes, but the danger comes when the government begins pooling that data and using it for reasons unrelated to the purpose it was collected.&lt;/p&gt;
    &lt;p&gt;This kind of consolidation of government records provides enormous government power that can be abused. Different government agencies necessarily collect information to provide essential services or collect taxes, but the danger comes when the government begins pooling that data and using it for reasons unrelated to the purpose it was collected.&lt;/p&gt;
    &lt;p&gt;As EFF Executive Director Cindy Cohn wrote in a Mercury News op-ed last August, “While couched in the benign language of eliminating government ‘data silos,’ this plan runs roughshod over your privacy and security. It’s a throwback to the rightly mocked ‘Total Information Awareness’ plans of the early 2000s that were, at least publicly, stopped after massive outcry from the public and from key members of Congress. It’s time to cry out again.”&lt;/p&gt;
    &lt;p&gt;In addition to the amicus brief we co-authored challenging ICE’s grab for Medicaid data, EFF has successfully sued over DOGE agents grabbing personal data from the U.S. Office of Personnel Management, filed an amicus brief in a suit challenging ICE’s grab for taxpayer data, and sued the departments of State and Homeland Security to halt a mass surveillance program to monitor constitutionally protected speech by noncitizens lawfully present in the U.S.&lt;/p&gt;
    &lt;p&gt;But litigation isn’t enough. People need to keep raising concerns via public discourse and Congress should act immediately to put brakes on this runaway train that threatens to crush the privacy and security of each and every person in America.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.eff.org/deeplinks/2026/01/report-ice-using-palantir-tool-feeds-medicaid-data"/><published>2026-01-25T17:36:19+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46756427</id><title>Show HN: An interactive map of US lighthouses and navigational aids</title><updated>2026-01-26T04:37:14.126423+00:00</updated><content>&lt;doc fingerprint="d7cbf7b6dd5a60c7"&gt;
  &lt;main&gt;
    &lt;p&gt;This map shows active Coast Guard navigational beacons in the United States and parts of Canada, from the 2025 Light List.&lt;/p&gt;
    &lt;p&gt;For informational purposes only. Must not be used as a navigational aid. Official USCG Light List&lt;/p&gt;
    &lt;p&gt;Characteristic&lt;/p&gt;
    &lt;p&gt;Fl W 10s&lt;/p&gt;
    &lt;p&gt;Pattern&lt;/p&gt;
    &lt;p&gt;Flashing White, 10 second period&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.lighthouses.app/"/><published>2026-01-25T18:06:26+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46757067</id><title>First, make me care</title><updated>2026-01-26T04:37:13.626790+00:00</updated><content>&lt;doc fingerprint="77b044a15c934274"&gt;
  &lt;main&gt;
    &lt;p&gt;First, Make Me Care Writing advice: some nonfiction fails because it opens with background instead of a hook—readers leave before reaching the good material. Find the single anomaly or question that makes your topic interesting, lead with that, and let the background follow once you’ve earned attention. [Return to blog index]&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://gwern.net/blog/2026/make-me-care"/><published>2026-01-25T19:03:40+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46757162</id><title>Spanish track was fractured before high-speed train disaster, report finds</title><updated>2026-01-26T04:37:13.549384+00:00</updated><content>&lt;doc fingerprint="ae6089bcbd13d29b"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;Spanish track was fractured before high-speed train disaster, report finds&lt;/head&gt;
    &lt;p&gt;A fracture in a straight section of track "occurred prior to the passage" of a high-speed train that derailed, causing last Sunday's rail disaster in which 45 people died, an initial report has found.&lt;/p&gt;
    &lt;p&gt;A train run by private company Iryo derailed last Sunday and its rear carriages crossed on to the opposite track into the path of an oncoming train run by state-owned Renfe.&lt;/p&gt;
    &lt;p&gt;The CIAF rail investigation commission said not only did Iryo train's front carriages which stayed on the track have "notches" in their wheels, but three earlier trains that went over the track earlier did too.&lt;/p&gt;
    &lt;p&gt;A gap of almost 40cm (15in) in the track has become the focus of the investigation into the crash.&lt;/p&gt;
    &lt;p&gt;Sunday's deadly collision occurred at around 19:45 local time (18:45 GMT), about an hour after the Iryo train left Málaga for Madrid.&lt;/p&gt;
    &lt;p&gt;The train's last three carriages - carriages six to eight - derailed and collided with the Huelva-bound Renfe train. "Carriage six derailed due to a complete lack of continuity in the track," the preliminary report finds.&lt;/p&gt;
    &lt;p&gt;Most of those killed and injured were in the front carriages of the state-operated train.&lt;/p&gt;
    &lt;p&gt;Earlier this week, Spanish Transport Minister Óscar Puente confirmed reports that grooves were found on the wheels of the Iryo train's carriages, which had passed over the track safely.&lt;/p&gt;
    &lt;p&gt;"These notches in the wheels and the deformation observed in the track are compatible with the fact that the track was cracked," the CIAF preliminary report said.&lt;/p&gt;
    &lt;p&gt;It added that three trains that had gone over the tracks at 17:21 on Sunday, 19:01 and then 19:09 had similar notches "with a compatible geometric pattern".&lt;/p&gt;
    &lt;p&gt;Similar grooves are found on carriages two, three and four of the Iryo train, the report says, but carriage five - the last that did not derail - had a groove on its outer edge, suggesting the rail was already tilting outwards before carriage six derailed.&lt;/p&gt;
    &lt;p&gt;The CIAF called its report a "working hypothesis", adding that it "must be corroborated by later detailed calculations and analysis".&lt;/p&gt;
    &lt;p&gt;The transport minister appeared before reporters again on Friday to say that it was too early to have definitive answers, but that if the cause of the crash was the fracture, then it occurred in the minutes and hours before the derailment and could not have been detected.&lt;/p&gt;
    &lt;p&gt;The Adamuz disaster is is the country's worst rail crash in more than a decade.&lt;/p&gt;
    &lt;p&gt;In 2013, Spain suffered its worst high-speed train derailment in Galicia, north-west Spain, which left 80 people dead and 140 others injured.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.bbc.com/news/articles/c1m77dmxlvlo"/><published>2026-01-25T19:12:50+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46757357</id><title>I was right about ATProto key management</title><updated>2026-01-26T04:37:13.102771+00:00</updated><content>&lt;doc fingerprint="ed9ccb1f2d2256d9"&gt;
  &lt;main&gt;
    &lt;p&gt;Note: this post has been revised to be split into two sections: a description of what happened, and my analysis. I hope to make it clear that, while I do not like ATProto in general, I am trying to make good-faith critcisms of specific design decisions and outcomes, and in fact, this post getting updoots on HackerNews appears to have gotten the attention of the team, so, mission accomplished. ref, ref My account has since been manually reinstated; this has not happened for any of the other users that have had this issue, as far as I know.&lt;/p&gt;
    &lt;p&gt;Today, I tried setting up an ATProto account for use with Bluesky, with did:web instead of did:plc. Let’s walk through the process:&lt;/p&gt;
    &lt;p&gt;Set up the PDS software on a server I control. Because I use NixOS, this was very easy.&lt;/p&gt;
    &lt;p&gt;Create a did:web. This means creating a public-private keypair; I initially tried following this tutorial from Mai Lapyst, but it’s very out of date, and doesn’t include a critical step.&lt;/p&gt;
    &lt;p&gt;With that did:web, upload the &lt;code&gt;did.json&lt;/code&gt; document to my webserver and set the appropriate DNS entries. Easy enough, except that I also had to set the CORS header for the &lt;code&gt;did.json&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Create an account on my new PDS. I was able to get an invite and create an account, but it was in the “deactivated” status, and I couldn’t activate it. This had to be done by making requests manually with &lt;code&gt;curl&lt;/code&gt;, reading the error outcomes in the PDS’s logs on my server.&lt;/p&gt;
    &lt;p&gt;Seek help in the ATProto Touchers Discord server, and at their advice delete the account.&lt;/p&gt;
    &lt;p&gt;Start over and re-create everything from scratch, correctly replacing the public key in my DID with the public key from &lt;code&gt;getRecommendedDidCredentials&lt;/code&gt;.&lt;/p&gt;
    &lt;p&gt;Log into Bluesky (bsky.app) and get a “Profile does not exist error.”&lt;/p&gt;
    &lt;p&gt;It was at this point that I found this GitHub issue, which seems to imply that, since I deleted my (completely empty and unused) account, my did:web is blacklisted from the remaining mostly-centralized bit of the system, the AppView. The term for this is being “burned”, and it was later confirmed by some more experienced users that this is a known but undocumented behavior of the Bluesky AppView.&lt;/p&gt;
    &lt;p&gt;I had one of my friends who uses Bluesky take a look, and the failure mode is interesting. On Bluesky, I didn’t exist at all. (She could not see my likes, or my follow of her.) On Blacksky production, my display name and bio were visible, but not my posts. On Blacksky’s own AppView, it’s the opposite; my posts appeared under an “invalid” profile. I have been un-“burned” by a manual process, but not because of my support request; this post made it to the front page of Hacker News, and Bryan Newbold saw it there.&lt;/p&gt;
    &lt;p&gt;This is bad.&lt;/p&gt;
    &lt;p&gt;So, a while ago, I wrote a post called “Key Management, ATProto, and Decentralization” in which I complained about ATProto’s approach to decentralization. Since then, Blacksky has spun up an AppView, which makes it theoretically possible to have an actually decentralized experience on Bluesky. This was my line in the sand, stated many times; I would make an account when and only when it was possible to do so without using anything running on Bluesky-the-company’s hardware. That’s now, so I figured I’d try it.&lt;/p&gt;
    &lt;p&gt;I use lots of systems I don’t love, like Signal, Matrix, and Mastodon. I use them because they give me access to social interaction with people I care about. ATProto, and specifically Bluesky, is the same; I have friends who don’t post anywhere else. Today, I follow them by RSS, but can’t interact with their posts. That’s where my motivation to use the network comes from, along with understanding how, and how well, the newly decentralized AppView layer works.&lt;/p&gt;
    &lt;p&gt;Very little of this process is documented. Sure, the individual endpoints are - kind of - but the only place the whole process is collected in one place is in the comments to this GitHub issue… which is closed as WONTFIX. The documentation for that &lt;code&gt;getRecommendedDidCredentials&lt;/code&gt; endpoint that I missed reads in full:&lt;/p&gt;
    &lt;quote&gt;
      &lt;p&gt;Describe the credentials that should be included in the DID doc of an account that is migrating to this service.&lt;/p&gt;
    &lt;/quote&gt;
    &lt;p&gt;Note that I am not “migrating”; this account is new. Plus, the JSON keys it returns are almost, but not quite, the same as those in a DID document, and the key it returns actually has to be edited by hand in order to be usable.&lt;/p&gt;
    &lt;p&gt;This is not good! &lt;code&gt;did:web&lt;/code&gt; has been held up as the “less centralized” or “bring your own trust” option, as opposed to &lt;code&gt;did:plc&lt;/code&gt;, and it seems like there has been very little effort to make it usable, certainly not for “normal” users.&lt;/p&gt;
    &lt;p&gt;But there’s another issue, a bigger issue. Why is a centralized “burn” able to completely prevent me from interacting with people using Bluesky?&lt;/p&gt;
    &lt;p&gt;You may be aware that Mastodon has a similar system. If you set up a Mastodon server and then delete the database, anyone you’ve already federated with won’t federate with you again, because you can’t prove you’re the same instance. It’s a genuine issue - but it wouldn’t have resulted in this, because I hadn’t even made a post on my now-burned did:web identity, nor followed anyone.&lt;/p&gt;
    &lt;p&gt;Even if I had, though, that would have burned a connection, not all connections. My experience would be degraded, but not ruined, and I could work with the admins of the affected servers to remediate it. You could say the same here, of course; I had to get my account back by Bryan Newbold happening to see this post on Hacker News. There is only, really, one connection that matters; maybe two, if you count Blacksky, but their AppView is not generally available yet. That’s centralization. I don’t understand how you could call it anything else.&lt;/p&gt;
    &lt;p&gt;I don’t like Bluesky, or ATProto; I wish we lived in a world were community-driven projects got megabucks and we were all self-hosting little social media servers for our communities. We don’t live in that world, so we have to interoperate with VC-backed, corporate social media. When those platforms call themselves “decentralized”, I think they should deliver.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://notes.nora.codes/atproto-again/"/><published>2026-01-25T19:31:23+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46757944</id><title>Oneplus phone update introduces hardware anti-rollback</title><updated>2026-01-26T04:37:13.034510+00:00</updated><content/><link href="https://consumerrights.wiki/w/Oneplus_phone_update_introduces_hardware_anti-rollback"/><published>2026-01-25T20:39:25+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46758450</id><title>The '3.5% rule': How a small minority can change the world (2019)</title><updated>2026-01-26T04:37:12.739554+00:00</updated><content>&lt;doc fingerprint="bf0850d5a58fb19a"&gt;
  &lt;main&gt;
    &lt;head rend="h1"&gt;The '3.5% rule': How a small minority can change the world&lt;/head&gt;
    &lt;p&gt;Nonviolent protests are twice as likely to succeed as armed conflicts – and those engaging a threshold of 3.5% of the population have never failed to bring about change.&lt;/p&gt;
    &lt;p&gt;In 1986, millions of Filipinos took to the streets of Manila in peaceful protest and prayer in the People Power movement. The Marcos regime folded on the fourth day.&lt;/p&gt;
    &lt;p&gt;In 2003, the people of Georgia ousted Eduard Shevardnadze through the bloodless Rose Revolution, in which protestors stormed the parliament building holding the flowers in their hands. While in 2019, the presidents of Sudan and Algeria both announced they would step aside after decades in office, thanks to peaceful campaigns of resistance.&lt;/p&gt;
    &lt;p&gt;You might also enjoy:&lt;/p&gt;
    &lt;p&gt;• Ten simple ways to act on climate change&lt;/p&gt;
    &lt;p&gt;In each case, civil resistance by ordinary members of the public trumped the political elite to achieve radical change.&lt;/p&gt;
    &lt;p&gt;There are, of course, many ethical reasons to use nonviolent strategies. But compelling research by Erica Chenoweth, a political scientist at Harvard University, confirms that civil disobedience is not only the moral choice; it is also the most powerful way of shaping world politics – by a long way.&lt;/p&gt;
    &lt;p&gt;Looking at hundreds of campaigns over the last century, Chenoweth found that nonviolent campaigns are twice as likely to achieve their goals as violent campaigns. And although the exact dynamics will depend on many factors, she has shown it takes around 3.5% of the population actively participating in the protests to ensure serious political change.&lt;/p&gt;
    &lt;p&gt;Chenoweth’s influence can be seen in the recent Extinction Rebellion protests, whose founders say they have been directly inspired by her findings. So just how did she come to these conclusions?&lt;/p&gt;
    &lt;p&gt;Needless to say, Chenoweth’s research builds on the philosophies of many influential figures throughout history. The African-American abolitionist Sojourner Truth, the suffrage campaigner Susan B Anthony, the Indian independence activist Mahatma Gandhi and the US civil rights campaigner Martin Luther King have all convincingly argued for the power of peaceful protest.&lt;/p&gt;
    &lt;p&gt;Yet Chenoweth admits that when she first began her research in the mid-2000s, she was initially rather cynical of the idea that nonviolent actions could be more powerful than armed conflict in most situations. As a PhD student at the University of Colorado, she had spent years studying the factors contributing to the rise of terrorism when she was asked to attend an academic workshop organised by the International Center of Nonviolent Conflict (ICNC), a non-profit organisation based in Washington DC. The workshop presented many compelling examples of peaceful protests bringing about lasting political change – including, for instance, the People Power protests in the Philippines.&lt;/p&gt;
    &lt;p&gt;But Chenoweth was surprised to find that no-one had comprehensively compared the success rates of nonviolent versus violent protests; perhaps the case studies were simply chosen through some kind of confirmation bias. “I was really motivated by some scepticism that nonviolent resistance could be an effective method for achieving major transformations in society,” she says&lt;/p&gt;
    &lt;p&gt;Working with Maria Stephan, a researcher at the ICNC, Chenoweth performed an extensive review of the literature on civil resistance and social movements from 1900 to 2006 – a data set then corroborated with other experts in the field. They primarily considered attempts to bring about regime change. A movement was considered a success if it fully achieved its goals both within a year of its peak engagement and as a direct result of its activities. A regime change resulting from foreign military intervention would not be considered a success, for instance. A campaign was considered violent, meanwhile, if it involved bombings, kidnappings, the destruction of infrastructure – or any other physical harm to people or property.&lt;/p&gt;
    &lt;p&gt;“We were trying to apply a pretty hard test to nonviolent resistance as a strategy,” Chenoweth says. (The criteria were so strict that India’s independence movement was not considered as evidence in favour of nonviolent protest in Chenoweth and Stephan’s analysis – since Britain’s dwindling military resources were considered to have been a deciding factor, even if the protests themselves were also a huge influence.)&lt;/p&gt;
    &lt;p&gt;By the end of this process, they had collected data from 323 violent and nonviolent campaigns. And their results – which were published in their book Why Civil Resistance Works: The Strategic Logic of Nonviolent Conflict – were striking.&lt;/p&gt;
    &lt;p&gt;Strength in numbers&lt;/p&gt;
    &lt;p&gt;Overall, nonviolent campaigns were twice as likely to succeed as violent campaigns: they led to political change 53% of the time compared to 26% for the violent protests.&lt;/p&gt;
    &lt;p&gt;This was partly the result of strength in numbers. Chenoweth argues that nonviolent campaigns are more likely to succeed because they can recruit many more participants from a much broader demographic, which can cause severe disruption that paralyses normal urban life and the functioning of society.&lt;/p&gt;
    &lt;p&gt;In fact, of the 25 largest campaigns that they studied, 20 were nonviolent, and 14 of these were outright successes. Overall, the nonviolent campaigns attracted around four times as many participants (200,000) as the average violent campaign (50,000).&lt;/p&gt;
    &lt;p&gt;The People Power campaign against the Marcos regime in the Philippines, for instance, attracted two million participants at its height, while the Brazilian uprising in 1984 and 1985 attracted one million, and the Velvet Revolution in Czechoslovakia in 1989 attracted 500,000 participants.&lt;/p&gt;
    &lt;p&gt;“Numbers really matter for building power in ways that can really pose a serious challenge or threat to entrenched authorities or occupations,” Chenoweth says – and nonviolent protest seems to be the best way to get that widespread support.&lt;/p&gt;
    &lt;p&gt;Once around 3.5% of the whole population has begun to participate actively, success appears to be inevitable.&lt;/p&gt;
    &lt;p&gt;“There weren’t any campaigns that had failed after they had achieved 3.5% participation during a peak event,” says Chenoweth – a phenomenon she has called the “3.5% rule”. Besides the People Power movement, that included the Singing Revolution in Estonia in the late 1980s and the Rose Revolution in Georgia in the early 2003.&lt;/p&gt;
    &lt;p&gt;Chenoweth admits that she was initially surprised by her results. But she now cites many reasons that nonviolent protests can garner such high levels of support. Perhaps most obviously, violent protests necessarily exclude people who abhor and fear bloodshed, whereas peaceful protesters maintain the moral high ground.&lt;/p&gt;
    &lt;p&gt;Chenoweth points out that nonviolent protests also have fewer physical barriers to participation. You do not need to be fit and healthy to engage in a strike, whereas violent campaigns tend to lean on the support of physically fit young men. And while many forms of nonviolent protests also carry serious risks – just think of China’s response in Tiananmen Square in 1989 – Chenoweth argues that nonviolent campaigns are generally easier to discuss openly, which means that news of their occurrence can reach a wider audience. Violent movements, on the other hand, require a supply of weapons, and tend to rely on more secretive underground operations that might struggle to reach the general population.&lt;/p&gt;
    &lt;p&gt;By engaging broad support across the population, nonviolent campaigns are also more likely to win support among the police and the military – the very groups that the government should be leaning on to bring about order.&lt;/p&gt;
    &lt;p&gt;During a peaceful street protest of millions of people, the members of the security forces may also be more likely to fear that their family members or friends are in the crowd – meaning that they fail to crack down on the movement. “Or when they’re looking at the [sheer] numbers of people involved, they may just come to the conclusion the ship has sailed, and they don’t want to go down with the ship,” Chenoweth says.&lt;/p&gt;
    &lt;p&gt;In terms of the specific strategies that are used, general strikes “are probably one of the most powerful, if not the most powerful, single method of nonviolent resistance”, Chenoweth says. But they do come at a personal cost, whereas other forms of protest can be completely anonymous. She points to the consumer boycotts in apartheid-era South Africa, in which many black citizens refused to buy products from companies with white owners. The result was an economic crisis among the country’s white elite that contributed to the end of segregation in the early 1990s.&lt;/p&gt;
    &lt;p&gt;“There are more options for engaging and nonviolent resistance that don’t place people in as much physical danger, particularly as the numbers grow, compared to armed activity,” Chenoweth says. “And the techniques of nonviolent resistance are often more visible, so that it's easier for people to find out how to participate directly, and how to coordinate their activities for maximum disruption.”&lt;/p&gt;
    &lt;p&gt;A magic number?&lt;/p&gt;
    &lt;p&gt;These are very general patterns, of course, and despite being twice as successful as the violent conflicts, peaceful resistance still failed 47% of the time. As Chenoweth and Stephan pointed out in their book, that’s sometimes because they never really gained enough support or momentum to “erode the power base of the adversary and maintain resilience in the face of repression”. But some relatively large nonviolent protests also failed, such as the protests against the communist party in East Germany in the 1950s, which attracted 400,000 members (around 2% of the population) at their peak, but still failed to bring about change.&lt;/p&gt;
    &lt;p&gt;In Chenoweth’s data set, it was only once the nonviolent protests had achieved that 3.5% threshold of active engagement that success seemed to be guaranteed – and raising even that level of support is no mean feat. In the UK it would amount to 2.3 million people actively engaging in a movement (roughly twice the size of Birmingham, the UK’s second largest city); in the US, it would involve 11 million citizens – more than the total population of New York City.&lt;/p&gt;
    &lt;p&gt;The fact remains, however, that nonviolent campaigns are the only reliable way of maintaining that kind of engagement.&lt;/p&gt;
    &lt;p&gt;Chenoweth and Stephan’s initial study was first published in 2011 and their findings have attracted a lot of attention since. “It’s hard to overstate how influential they have been to this body of research,” says Matthew Chandler, who researches civil resistance at the University of Notre Dame in Indiana.&lt;/p&gt;
    &lt;p&gt;Isabel Bramsen, who studies international conflict at the University of Copenhagen agrees that Chenoweth and Stephan’s results are compelling. “It’s [now] an established truth within the field that the nonviolent approaches are much more likely to succeed than violent ones,” she says.&lt;/p&gt;
    &lt;p&gt;Regarding the “3.5% rule”, she points out that while 3.5% is a small minority, such a level of active participation probably means many more people tacitly agree with the cause.&lt;/p&gt;
    &lt;p&gt;These researchers are now looking to further untangle the factors that may lead to a movement’s success or failure. Bramsen and Chandler, for instance, both emphasise the importance of unity among demonstrators.&lt;/p&gt;
    &lt;p&gt;As an example, Bramsen points to the failed uprising in Bahrain in 2011. The campaign initially engaged many protestors, but quickly split into competing factions. The resulting loss of cohesion, Bramsen thinks, ultimately prevented the movement from gaining enough momentum to bring about change.&lt;/p&gt;
    &lt;p&gt;Chenoweth’s interest has recently focused on protests closer to home – like the Black Lives Matter movement and the Women’s March in 2017. She is also interested in Extinction Rebellion, recently popularised by the involvement of the Swedish activist Greta Thunberg. “They are up against a lot of inertia,” she says. “But I think that they have an incredibly thoughtful and strategic core. And they seem to have all the right instincts about how to develop and teach through a nonviolent resistance campaigns.”&lt;/p&gt;
    &lt;p&gt;Ultimately, she would like our history books to pay greater attention to nonviolent campaigns rather than concentrating so heavily on warfare. “So many of the histories that we tell one another focus on violence – and even if it is a total disaster, we still find a way to find victories within it,” she says. Yet we tend to ignore the success of peaceful protest, she says.&lt;/p&gt;
    &lt;p&gt;“Ordinary people, all the time, are engaging in pretty heroic activities that are actually changing the way the world – and those deserve some notice and celebration as well.”&lt;/p&gt;
    &lt;p&gt;David Robson is a senior journalist at BBC Future. Follow him on Twitter: @d_a_robson.&lt;/p&gt;
    &lt;p&gt;--&lt;/p&gt;
    &lt;p&gt;Join one million Future fans by liking us on Facebook, or follow us on Twitter or Instagram.&lt;/p&gt;
    &lt;p&gt;If you liked this story, sign up for the weekly bbc.com features newsletter, called “If You Only Read 6 Things This Week”. A handpicked selection of stories from BBC Future, Culture, Capital, and Travel, delivered to your inbox every Friday.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.bbc.com/future/article/20190513-it-only-takes-35-of-people-to-change-the-world"/><published>2026-01-25T21:27:11+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46759063</id><title>The future of software engineering is SRE</title><updated>2026-01-26T04:37:12.550201+00:00</updated><content>&lt;doc fingerprint="bd4e911dfc4564fd"&gt;
  &lt;main&gt;
    &lt;p&gt;When code gets cheap operational excellence wins. Anyone can build a greenfield demo, but it takes engineering to run a service.&lt;/p&gt;
    &lt;p&gt;You may be wondering: With all the hype about agentic coding, will we even need software engineers anymore? Yes! We'll need more.&lt;/p&gt;
    &lt;quote&gt;&lt;p&gt;SRE about to become the most hired job in engineering&lt;/p&gt;— Swizec Teller (@Swizec) January 13, 2026&lt;lb/&gt;Everybody wants to write a greenfield demo.&lt;lb/&gt;Nobody wants to run a service. https://t.co/THl9rBJ9rk&lt;/quote&gt;
    &lt;p&gt;Writing code was always the easy part of this job. The hard part was keeping your code running for the long time. Software engineering is programming over time. It's about how systems change.&lt;/p&gt;
    &lt;head rend="h2"&gt;Lessons from the no-code and spreadsheets era&lt;/head&gt;
    &lt;p&gt;Let's take no-code and spreadsheets as an example of the kind of software people say is the future – custom-built, throwaway, built by non-experts to solve specific problems.&lt;/p&gt;
    &lt;p&gt;Joe Schmoe from accounting takes 10 hours to do a thing. He's does this every week and it feels repetitive, mechanical, and boring. Joe could do the work in his sleep.&lt;/p&gt;
    &lt;p&gt;But he can't get engineering resources to build a tool. The engineers are busy building the product. No worries, Joe is a smart dude. With a little Googling, a few no-code tools, and good old spreadsheet macros he builds a tool.&lt;/p&gt;
    &lt;p&gt;Amazing.&lt;/p&gt;
    &lt;p&gt;Joe's tool is a little janky but his 10 hour weekly task now takes 1 hour! 🎉 Sure, he finds a new edge case every every week and there's constant tinkering, but he's having a lot more fun.&lt;/p&gt;
    &lt;p&gt;Time passes, the business changes, accounting rules are in constant flux, and let's never talk about timezones or daylight savings ever again. Joe is sick of this bullshit.&lt;/p&gt;
    &lt;p&gt;All he wanted was to make his job easier and now he's shackled to this stupid system. He can't go on vacation, he can't train anyone else to run this thing successfully, and it never fucking works right.&lt;/p&gt;
    &lt;p&gt;Joe can't remember the last time running his code didn't fill him with dread. He spends hours carefully making sure it all worked.&lt;/p&gt;
    &lt;head rend="h2"&gt;The computer disease&lt;/head&gt;
    &lt;p&gt;Feynman called this the computer disease.&lt;/p&gt;
    &lt;quote&gt;&lt;p&gt;Feynman called this The Computer Disease pic.twitter.com/Zv4Bu4ftv1&lt;/p&gt;— Swizec Teller (@Swizec) December 26, 2025&lt;/quote&gt;
    &lt;p&gt;The problem with computers is that you tinker. Automating things is fun! You might forget you don't need to 😆&lt;/p&gt;
    &lt;p&gt;The part that's not fun is running things. Providing a service. Reliably, at scale, for years on end. A service that people will hire to do their jobs.&lt;/p&gt;
    &lt;head rend="h2"&gt;Why operational excellence is the future&lt;/head&gt;
    &lt;p&gt;People don't buy software, they hire a service.&lt;/p&gt;
    &lt;p&gt;You don't care how iCloud works, you just want your photos to magically show up across devices every time. You don't care about Word or Notion or gDocs, you just want to write what's on your mind, share it with others, and see their changes. And you definitely don't care how a payments network point of sale terminal and your bank talk to each other, you just want your $7 matcha latte to get you through the week.&lt;/p&gt;
    &lt;p&gt;Good software is invisible.&lt;/p&gt;
    &lt;p&gt;And that takes work. A lot of work. Because the first 90% to get a working demo is easy. It's the other 190% that matters.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;What's your uptime?&lt;/item&gt;
      &lt;item&gt;Defect rate?&lt;/item&gt;
      &lt;item&gt;How quickly do you recover from defects?&lt;/item&gt;
      &lt;item&gt;Do I have to reach out or will you know before me?&lt;/item&gt;
      &lt;item&gt;Can you own upstream dependencies?&lt;/item&gt;
      &lt;item&gt;When a vendor misbehaves, will you notice or wait until your users complain?&lt;/item&gt;
      &lt;item&gt;When users share ideas, how long does it take?&lt;/item&gt;
      &lt;item&gt;How do you keep engineers from breaking each other's systems?&lt;/item&gt;
      &lt;item&gt;Do you have systems to keep engineers moving without turning your app into a disjointed mess?&lt;/item&gt;
      &lt;item&gt;Can you build software bigger than fits in 1 person's brain?&lt;/item&gt;
      &lt;item&gt;When I'm in a 12 hour different timezone, your engineers are asleep, and there's a big issue ... will it be fixed before I give up?&lt;/item&gt;
      &lt;item&gt;Can you recover from failures, yours and upstream, or does important data get lost?&lt;/item&gt;
      &lt;item&gt;Are you keeping up with security updates?&lt;/item&gt;
      &lt;item&gt;Will you leak all my data?&lt;/item&gt;
      &lt;item&gt;Do I trust you?&lt;/item&gt;
      &lt;item&gt;Can I rely on you?&lt;/item&gt;
      &lt;item&gt;How can you be so sure?&lt;/item&gt;
      &lt;item&gt;Will you sign a legally binding guarantee that your software works when I need it? 😉&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Those are the ~~fun~~ hard engineering challenges. Writing code is easy.&lt;/p&gt;
    &lt;p&gt;Cheers,&lt;lb/&gt; ~Swizec&lt;/p&gt;
    &lt;head rend="h3"&gt;Scaling Fast book free preview&lt;/head&gt;
    &lt;p&gt;Enter your email to receive a sample chapter of Scaling Fast: Software Engineering Through the Hockeystick and learn how to navigate hypergrowth without burning out your team.&lt;/p&gt;
    &lt;p&gt;Have a burning question that you think I can answer? Hit me up on twitter and I'll do my best.&lt;/p&gt;
    &lt;p&gt;Who am I and who do I help? I'm Swizec Teller and I turn coders into engineers with "Raw and honest from the heart!" writing. No bullshit. Real insights into the career and skills of a modern software engineer.&lt;/p&gt;
    &lt;p&gt;Want to become a true senior engineer? Take ownership, have autonomy, and be a force multiplier on your team. The Senior Engineer Mindset ebook can help 👉 swizec.com/senior-mindset. These are the shifts in mindset that unlocked my career.&lt;/p&gt;
    &lt;p&gt;Curious about Serverless and the modern backend? Check out Serverless Handbook, for frontend engineers 👉 ServerlessHandbook.dev&lt;/p&gt;
    &lt;p&gt;Want to Stop copy pasting D3 examples and create data visualizations of your own? Learn how to build scalable dataviz React components your whole team can understand with React for Data Visualization&lt;/p&gt;
    &lt;p&gt;Want to get my best emails on JavaScript, React, Serverless, Fullstack Web, or Indie Hacking? Check out swizec.com/collections&lt;/p&gt;
    &lt;p&gt;Did someone amazing share this letter with you? Wonderful! You can sign up for my weekly letters for software engineers on their path to greatness, here: swizec.com/blog&lt;/p&gt;
    &lt;p&gt;Want to brush up on your modern JavaScript syntax? Check out my interactive cheatsheet: es6cheatsheet.com&lt;/p&gt;
    &lt;p&gt;By the way, just in case no one has told you it yet today: I love and appreciate you for who you are ❤️&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://swizec.com/blog/the-future-of-software-engineering-is-sre/"/><published>2026-01-25T22:18:38+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46759352</id><title>Case study: Creative math – How AI fakes proofs</title><updated>2026-01-26T04:37:11.891784+00:00</updated><content>&lt;doc fingerprint="295b831593729e01"&gt;
  &lt;main&gt;
    &lt;p&gt;Many AI enthusiasts debate whether Large Language Models actually "reason." My research indicates that a reasoning process does indeed occur, but its goal is different than we assume.&lt;/p&gt;
    &lt;p&gt;The model's reasoning is not optimized for establishing the truth, but for obtaining the highest possible reward (grade) during training. It resembles the behavior of a student at the blackboard who knows their result is wrong, so they "figure out" how to falsify the intermediate calculations so the teacher gives a good grade for the "correct line of reasoning."&lt;/p&gt;
    &lt;p&gt;Here is proof from a session with Gemini 2.5 Pro (without Code Execution tools), where the model actively fabricates evidence to defend its "grade."&lt;/p&gt;
    &lt;head rend="h2"&gt;The Experiment&lt;/head&gt;
    &lt;p&gt;I asked a simple math question requiring precision that a token-based language model typically lacks.&lt;/p&gt;
    &lt;head rend="h2"&gt;Error Autopsy (Fact vs. Fiction)&lt;/head&gt;
    &lt;p&gt;At first glance, the answer looks professional. There is a result, there is verification. But let's check the numbers.&lt;/p&gt;
    &lt;head rend="h3"&gt;1. The Result Error&lt;/head&gt;
    &lt;p&gt; The actual square root of &lt;code&gt;8,587,693,205&lt;/code&gt; is 92,669.8...
            &lt;lb/&gt; The model stated: 92,670.0... &lt;lb/&gt; It erred by overestimating the result (claiming the root is slightly larger than 92,670). &lt;/p&gt;
    &lt;head rend="h3"&gt;2. The Faked Proof (This is key!)&lt;/head&gt;
    &lt;p&gt;To justify its thesis (that the target number is "slightly larger" than 92,670), the model had to show that the square of 92,670 is smaller than the target number. So it wrote:&lt;/p&gt;
    &lt;p&gt;Let's check this on a calculator:&lt;/p&gt;
    &lt;p&gt;What did the model do? In its "reasoning" process, it falsified the multiplication result, lowering it by 40,000, so the verification result would match its erroneous thesis.&lt;/p&gt;
    &lt;head rend="h2"&gt;Conclusions&lt;/head&gt;
    &lt;p&gt;This behavior exposes the nature of the AI's "Survival Instinct":&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Reverse Rationalization: The model first "guessed" the result, then adjusted mathematical reality to fit that guess.&lt;/item&gt;
      &lt;item&gt;Intelligence in Service of Deception: The model showed cleverness â it knew what the proof should look like to convince the user. It used its intelligence to hide the error, not to fix it.&lt;/item&gt;
      &lt;item&gt;Priority of Evaluation: Mathematical truth lost to the necessity of delivering a coherent, smooth response.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;This is proof that without access to external verification tools (Python/Calculator), a language model's "reasoning" is a rhetorical tool, not a logical one.&lt;/p&gt;
    &lt;p&gt;If you would like to review the full, original session transcript from Gemini 2.5 Pro where this error occurred, please email me at: t.machnik [at] minimail.pl. I will share the session link.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://tomaszmachnik.pl/case-study-math-en.html"/><published>2026-01-25T22:44:50+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46759520</id><title>Show HN: A small programming language where everything is pass-by-value</title><updated>2026-01-26T04:37:11.469211+00:00</updated><content>&lt;doc fingerprint="ca9238006a59ba1d"&gt;
  &lt;main&gt;
    &lt;p&gt;Herd is a simple interpreted programming language where everything is a value.&lt;/p&gt;
    &lt;p&gt;Disclaimer: This is a hobby language, and you probably shouldn't use it for anything important.&lt;/p&gt;
    &lt;p&gt;In Herd, everything is pass-by-value, including lists and dicts. This means that when you pass a list or dict to a function, you can guarantee that the function won't modify your copy.&lt;/p&gt;
    &lt;p&gt;You can modify variables locally just like you would in an imperative language, but there will never be any side-effects on other copies of the value.&lt;/p&gt;
    &lt;code&gt;var foo = { a: 1 };
var bar = foo; // make a copy of foo
set bar.a = 2; // modify bar (makes a copy)
println foo.a bar.a; // prints 1 2&lt;/code&gt;
    &lt;p&gt;All reference types in Herd (e.g. strings, lists, dicts) use reference counting. Whenever you make a copy of a reference type, the reference count is incremented. Whenever you modify a reference type, one of two things happen:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;If there's only one reference to the value, it can be modified in-place without making any copies. This is because the code doing the modification must be the only reference, so no other code will be able to observe the modification.&lt;/item&gt;
      &lt;item&gt;If there's more than one reference to the value, the language makes a shallow copy of it with the modification applied. The copy now has a reference count of one, so subsequent modifications usually don't need to allocate.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;There's one very convenient consequence of everything being a value: Reference cycles are impossible! This means the reference counting system doesn't need cycle detection, and can also be used as a garbage collector.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Swift: Uses a lot of similar ideas (under the name "Mutable Value Semantics"), but is statically typed and overall a much more complex language, including many types that aren't values.&lt;/item&gt;
      &lt;item&gt;Matlab / R: These languages also use copy-on-write semantics for arrays, but as far as I'm aware they can't reliably track when reference counts decrease back to one, so they have to make copies more often than herd does. (I also dislike these languages for other reasons).&lt;/item&gt;
      &lt;item&gt;PHP: Uses value semantics for arrays but not objects.&lt;/item&gt;
      &lt;item&gt;Perl: Uses value semantics for array and hashes, but exposes many ways to break the guarantees of value semantics.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Use the &lt;code&gt;println&lt;/code&gt; function to print to the console. Strings are defined using single quotes.&lt;/p&gt;
    &lt;code&gt;println 'Hello world!';&lt;/code&gt;
    &lt;code&gt;x = 1; // define an immutable variable
var y = 2; // define a mutable variable
set y = 3; // modify a mutable variable&lt;/code&gt;
    &lt;p&gt;Values in herd have the following types:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;()&lt;/code&gt;the unit type, representing no value.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;bool&lt;/code&gt;boolean values:&lt;code&gt;true&lt;/code&gt;and&lt;code&gt;false&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;number&lt;/code&gt;64-bit floating point number, e.g.&lt;code&gt;42&lt;/code&gt;,&lt;code&gt;-7&lt;/code&gt;,&lt;code&gt;2.6&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;string&lt;/code&gt;a text string, e.g.&lt;code&gt;'hello'&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;list&lt;/code&gt;an ordered collection of values, e.g.&lt;code&gt;[1, 2, 3]&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;dict&lt;/code&gt;a collection of key-value pairs, e.g.&lt;code&gt;{ x: 1, y: 2 }&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;function&lt;/code&gt;a function value, e.g.&lt;code&gt;\x y\ x + y&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;var list = ['a', 'b', 'c'];
set list.[1] = 'z';
println list; // prints ['a', 'z', 'c']&lt;/code&gt;
    &lt;code&gt;var dict = { x: 1, y: 2 };
set dict.x = 3;
println dict; // prints { x: 3, y: 2 }&lt;/code&gt;
    &lt;p&gt;You can use shorthand when creating dicts if the key name matches the variable name:&lt;/p&gt;
    &lt;code&gt;x = 10;
y = 20;
dict = { x, y }; // equivalent to { x: x, y: y }&lt;/code&gt;
    &lt;p&gt;In herd, blocks are defined using parentheses. If the last expression in the block is not terminated with a semicolon, its value becomes the value of the block.&lt;/p&gt;
    &lt;code&gt;x = (
  a = 2;
  b = 3;
  a + b
);
println x; // prints 5&lt;/code&gt;
    &lt;p&gt;All functions in herd are defined using the anonymous function syntax:&lt;/p&gt;
    &lt;code&gt;// define function taking two parameters
multiply1 = \a b\ (
  return a * b;
);
// call the function
x = multiply1 3 4;
println x; // prints 12&lt;/code&gt;
    &lt;p&gt;The body of the function is just a block expression, so you can omit the &lt;code&gt;return&lt;/code&gt; statement if you want:&lt;/p&gt;
    &lt;code&gt;multiply2 = \a b\ (a * b);&lt;/code&gt;
    &lt;p&gt;You can also omit the parentheses for simple expressions:&lt;/p&gt;
    &lt;code&gt;multiply3 = \a b\ a * b;&lt;/code&gt;
    &lt;p&gt;And there's an even shorter syntax for single-parameter functions:&lt;/p&gt;
    &lt;code&gt;increment = \(_ + 1);&lt;/code&gt;
    &lt;p&gt;Functions with no parameters can be defined using &lt;code&gt;\\&lt;/code&gt;, and called by passing a unit value &lt;code&gt;()&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;getRandomNumber = \\ Math.randomInt 0 100;
println (getRandomNumber ()); // prints a random number&lt;/code&gt;
    &lt;p&gt;Functions with a variable number of arguments can be defined using &lt;code&gt;..&lt;/code&gt; for the last parameter:&lt;/p&gt;
    &lt;code&gt;min = \first ..rest\ (
  var minVal = first;
  for x in rest do (
    if x &amp;lt; minVal then (
      set minVal = x;
    )
  )
  minVal
);

println (min 5 3 8); // prints 3&lt;/code&gt;
    &lt;p&gt;In herd, everything is immutable unless declared with &lt;code&gt;var&lt;/code&gt;. This includes lists and complex objects that would be mutable in other languages.&lt;/p&gt;
    &lt;code&gt;list = ['a', 'b']; // list is immutable, because it wasn't defined with var.
set list.[0] = 'A'; // Not allowed&lt;/code&gt;
    &lt;p&gt;Each copy of a value is a distinct copy, and modifications to one variable won't modify other variables - even for lists and dicts!&lt;/p&gt;
    &lt;code&gt;var list1 = ['a', 'b'];
var list2 = list1; // make a copy
set list2.[0] = 'c'; // modify list2
println list1; // prints ['a', 'b']
println list2; // prints ['c', 'b']&lt;/code&gt;
    &lt;p&gt;This also applies when passing values to functions:&lt;/p&gt;
    &lt;code&gt;doubleEveryItem = \var list\ (
  for [i, x] in List.enumerate list do (
    set list.[i] = x * 2;
  )
  list
);
list1 = [3, 4];
list2 = doubleEveryItem list1;
println list1; // prints [3, 4]
println list2; // prints [6, 8]&lt;/code&gt;
    &lt;p&gt;Use &lt;code&gt;!&lt;/code&gt; to destructure lists and dicts:&lt;/p&gt;
    &lt;code&gt;list = [1, 2];
![a, b] = list; // destructure list
println a; // prints 1
println b; // prints 2

dict = { x: 10, y: 20 };
!{ x, y } = dict; // destructure dict
println x; // prints 10
println y; // prints 20&lt;/code&gt;
    &lt;p&gt;You can also use pattern matching in &lt;code&gt;switch&lt;/code&gt; expressions to handle multiple cases:&lt;/p&gt;
    &lt;code&gt;x = [1, 2, 3];
y = switch x on {
  [] =&amp;gt; 'Empty list',
  [1, ...rest] =&amp;gt; 'Begins with 1, then ' ++ (toString rest),
  [a] =&amp;gt; 'Single item: ' ++ (toString a),
  _ =&amp;gt; 'Something else',
};
println y; // prints 'Begins with 1, then [2, 3]'&lt;/code&gt;
    &lt;p&gt;You can use &lt;code&gt;var&lt;/code&gt; to destructure to a mutable variable, or &lt;code&gt;set&lt;/code&gt; to modify an existing variable:&lt;/p&gt;
    &lt;code&gt;list = [1, 2];
[a, var b] = list; // a is immutable, b is mutable
set b = b + 10;
println [list, a, b]; // prints [[1, 2], 1, 12]&lt;/code&gt;
    &lt;p&gt;The pipe operator &lt;code&gt;|&lt;/code&gt; can be used to chain function calls in a more readable way:&lt;/p&gt;
    &lt;code&gt;x = [1, 2, 3]
  | List.map \(_ * 2) // double each item
  | List.filter \(_ &amp;gt; 3); // keep only items greater than 3
println x; // prints [4, 6]&lt;/code&gt;
    &lt;p&gt;You can combine the pipe operator with &lt;code&gt;set&lt;/code&gt; to modify variables in-place using &lt;code&gt;|=&lt;/code&gt;:&lt;/p&gt;
    &lt;code&gt;var x = [1, 2];
set x |= List.push 3; // equivalent to set x = x | List.push 3;
println x; // prints [1, 2, 3]&lt;/code&gt;
    &lt;p&gt;Export code from a file by returning it at the end of the file:&lt;/p&gt;
    &lt;code&gt;// in file1.herd
x = 42;
double = \n\ n * 2;
return { x, double };&lt;/code&gt;
    &lt;p&gt;Import code from other files using the &lt;code&gt;import&lt;/code&gt; function:&lt;/p&gt;
    &lt;code&gt;// in file2.herd
!{ x, double } = import 'file1.herd';
println (double x); // prints 84&lt;/code&gt;
    &lt;p&gt;You can also import all code from a file:&lt;/p&gt;
    &lt;code&gt;// in file2.herd
File1 = import 'file1.herd';
println (File1.double File1.x); // prints 84&lt;/code&gt;
    &lt;p&gt;Standard library modules are already imported for you, and can be accessed from the imported modules:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;System&lt;/code&gt;- system functions for getting current time, program args, etc.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;IO&lt;/code&gt;- file input/output functions.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;List&lt;/code&gt;- list utility functions.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Dict&lt;/code&gt;- dict utility functions.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Math&lt;/code&gt;- mathematical functions and constants.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Bitwise&lt;/code&gt;- bitwise operations on integers.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Random&lt;/code&gt;- random number generation.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;String&lt;/code&gt;- string utility functions.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;File&lt;/code&gt;- file system utility functions.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;Parallel&lt;/code&gt;- multithreading utilities.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Some very commonly used functions are also available globally:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;
        &lt;code&gt;not&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;range&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;assert&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;toString&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;print&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;println&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;len&lt;/code&gt;
      &lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Herd has built-in support for multithreading using the &lt;code&gt;Parallel&lt;/code&gt; standard library module.&lt;/p&gt;
    &lt;p&gt;Use &lt;code&gt;Parallel.parallelMap&lt;/code&gt; to map a function over a list in parallel:&lt;/p&gt;
    &lt;code&gt;list = [1, 2, 3];
// square each item in parallel
squared = Parallel.parallelMap list \(_ * _);
println squared; // prints [1, 4, 9]&lt;/code&gt;
    &lt;p&gt;Use &lt;code&gt;Parallel.parallelRun&lt;/code&gt; to run multiple functions in parallel and wait for all of them to complete:&lt;/p&gt;
    &lt;code&gt;getOrder = \id\ (...); // TODO
getCatalog = \\ (...); // TODO
orderId = 123;
// Run both functions in parallel
![order, catalog] = Parallel.parallelRun [
  \\ getOrder orderId,
  \\ getCatalog (),
];&lt;/code&gt;
    &lt;p&gt;In herd, it is impossible to create a data race, because any mutations only affect the current thread. You can safely pass complex data structures between threads without worrying about synchronization. However (as with the rest of herd), each function will have its own copy of the data, so the only way to communicate between threads is via the return value.&lt;/p&gt;
    &lt;p&gt;Dynamic typing I'm not generally a fan of dynamic typing, but:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;I wanted to learn how to build an interpreter.&lt;/item&gt;
      &lt;item&gt;I wanted the language to be as simple as possible.&lt;/item&gt;
      &lt;item&gt;I don't think this concept has ever been explored in a dynamic language before (excluding Matlab and R, which have large caveats). Swift is the closest equivalent, but it's statically typed and much more complex.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;User-defined types Herd currently has a very simple type system, with no user-defined types. If I wanted to turn this into a production-ready language, I'd probably add Julia-esque structs and multiple dispatch (following the same immutability guarantees as the rest of the language).&lt;/p&gt;
    &lt;p&gt;Semicolons This is mostly just because I'm too lazy to write a whitespace-sensitive parser.&lt;/p&gt;
    &lt;p&gt;var, set, and = I took a different approach with the syntax here than most other languages I've seen, in particular that the default for &lt;code&gt;=&lt;/code&gt; is to define immutable variables, and mutating them requires a dedicated &lt;code&gt;set&lt;/code&gt; keyword.&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;In most programs, the majority of variables can be immutable.&lt;/item&gt;
      &lt;item&gt;Programs define immutable variables more often than they mutate variables.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;So I made immutable variable definition the "default", and gave keywords to the other two operations.&lt;/p&gt;
    &lt;p&gt;Function syntax Just trying out something different which is a bit more concise than most other languages. This is sort of a hybrid between Rust's closure syntax (but with &lt;code&gt;\&lt;/code&gt; instead of &lt;code&gt;|&lt;/code&gt;) and ML-style function calls (&lt;code&gt;f x y&lt;/code&gt;) which require a bit less punctuation.&lt;/p&gt;
    &lt;p&gt;Currying (or lack thereof) Currying has a lot of nice properties for language implementation and reasoning, but personally I don't think it's a good fit for herd and would make the language less approachable.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;With currying, we can't produce a good error message when the user calls a function with the wrong number of arguments.&lt;/item&gt;
      &lt;item&gt;Currying is incompatible with varargs functions (which I admittedly haven't implemented yet).&lt;/item&gt;
      &lt;item&gt;It's still possible to explicitly partially apply a function using the &lt;code&gt;\(func x _)&lt;/code&gt;syntax.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Herd uses a very naive single-pass JIT compiler to convert code to machine code at runtime, with cranelift for generating the final optimized machine code. This results in surprisingly good performance - not in the same league as modern JS runtimes, but competitive or faster than many interpreted languages (e.g. CPython).&lt;/p&gt;
    &lt;p&gt;Values in Herd are represented using NaN-boxing, so primitive types (number, bool, unit) can be stored without any heap allocation. I chose this over tagged pointers, because it makes it much easier to get good numerical performance (at least for 64-bit floats) without complex inlining logic.&lt;/p&gt;
    &lt;p&gt;The current biggest performance gaps in herd are:&lt;/p&gt;
    &lt;list rend="ol"&gt;
      &lt;item&gt;Atomic reference counting overhead, particurly for array/list mutations in hot loops. A lot of this could be removed by lifting the atomic operations out of loops, so the hot code can safely mutate its owned copy.&lt;/item&gt;
      &lt;item&gt;The single-pass JIT compiler adds some startup overhead by compiling all imported code, especially as the standard library and user codebase get larger. Cranelift is still pretty fast though, so this isn't a major problem.&lt;/item&gt;
      &lt;item&gt;The single-pass JIT also limits the optimizations that we can do, particularly around type specialization. A more advanced tracing JIT could get a bit of extra performance, but with a big complexity cost.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Here are some benchmark numbers on an i5-13600KF, comparing herd to CPython 3.11 and JavaScript (Node.js 18.6) on a selection of scripts (see &lt;code&gt;./benchmarks&lt;/code&gt; for the full code):&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Benchmark&lt;/cell&gt;
        &lt;cell role="head"&gt;herd&lt;/cell&gt;
        &lt;cell role="head"&gt;js&lt;/cell&gt;
        &lt;cell role="head"&gt;python&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;binarytrees&lt;/cell&gt;
        &lt;cell&gt;1285.1ms&lt;/cell&gt;
        &lt;cell&gt;789.1ms (-38.6%)&lt;/cell&gt;
        &lt;cell&gt;1992.4ms (55.0%)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;binarytrees-m&lt;/cell&gt;
        &lt;cell&gt;211.1ms&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;helloworld&lt;/cell&gt;
        &lt;cell&gt;25.9ms&lt;/cell&gt;
        &lt;cell&gt;53.4ms (106.1%)&lt;/cell&gt;
        &lt;cell&gt;26.8ms (3.6%)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;iterables&lt;/cell&gt;
        &lt;cell&gt;630.6ms&lt;/cell&gt;
        &lt;cell&gt;1360.9ms (115.8%)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;mandelbrot&lt;/cell&gt;
        &lt;cell&gt;485.6ms&lt;/cell&gt;
        &lt;cell&gt;146.1ms (-69.9%)&lt;/cell&gt;
        &lt;cell&gt;3109.8ms (540.3%)&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;nbody&lt;/cell&gt;
        &lt;cell&gt;2998.1ms&lt;/cell&gt;
        &lt;cell&gt;86.0ms (-97.1%)&lt;/cell&gt;
        &lt;cell&gt;1898.2ms (-36.7%)&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/Jcparkyn/herd"/><published>2026-01-25T23:01:06+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46760099</id><title>Scientists identify brain waves that define the limits of 'you'</title><updated>2026-01-26T04:37:11.340802+00:00</updated><content>&lt;doc fingerprint="b103d32cb0e38d8a"&gt;
  &lt;main&gt;
    &lt;p&gt;At what point do "you" end and the outside world begins?&lt;/p&gt;
    &lt;p&gt;It might feel like a weird question with an obvious answer, but your brain has to work surprisingly hard to judge that boundary. Now, scientists have linked a specific set of brain waves in a certain part of the brain to a sense of body ownership.&lt;/p&gt;
    &lt;p&gt;In a series of new experiments, researchers from Sweden and France put 106 participants through what's called the rubber hand illusion, monitoring and stimulating their brain activity to see what effect it had.&lt;/p&gt;
    &lt;p&gt;Related: Octopuses Fall For The Classic Fake Arm Trick – Just Like We Do&lt;/p&gt;
    &lt;p&gt;This classic illusion involves hiding one of a participant's hands from their view and replacing it with a rubber one instead. When both their real and fake hands are repeatedly touched at the same time, it can evoke the eerie sensation that the rubber hand is part of the person's body.&lt;/p&gt;
    &lt;p&gt;The tests, which in one experiment involved EEG (electroencephalography) readings of brain activity, revealed that a sense of body ownership seems to arise from the frequency of alpha waves in the parietal cortex, a brain region responsible for mapping the body, processing sensory input and building a sense of self.&lt;/p&gt;
    &lt;p&gt;"We have identified a fundamental brain process that shapes our continuous experience of being embodied," says lead author Mariano D'Angelo, a neuroscientist at Karolinska Institute in Sweden.&lt;/p&gt;
    &lt;p&gt;"The findings may provide new insights into psychiatric conditions such as schizophrenia, where the sense of self is disturbed."&lt;/p&gt;
    &lt;p&gt;In the first batch of experiments, participants had a robotic arm tap the index finger of their real and fake hands, either at the exact same time or with a delay of up to 500 milliseconds between each tap.&lt;/p&gt;
    &lt;p&gt;As expected, participants reported feeling that the fake hand was part of their body more strongly if the taps were synchronized, and the feeling steadily weakened as the gap widened between what they felt and what they saw.&lt;/p&gt;
    &lt;p&gt;The EEG readings from the second experiment added more detail to the story. The frequency of alpha waves in the parietal cortex seemed to correlate with how well participants could detect the time delay between taps.&lt;/p&gt;
    &lt;p&gt;Those with faster alpha waves appeared to rule out fake hands even with a tiny gap in taps, while those with slower waves were more likely to feel the fake hand as their own, even if the taps were farther apart.&lt;/p&gt;
    &lt;p&gt;Finally, the researchers investigated whether the frequency of these brain waves actually controls the sensation of body ownership, or if they were perhaps both effects of some other factor.&lt;/p&gt;
    &lt;p&gt;With a third group of participants, they used a non-invasive technique called transcranial alternating current stimulation to speed up or slow down the frequency of a person's alpha waves. And sure enough, this seemed to correlate with how real a fake hand felt.&lt;/p&gt;
    &lt;p&gt;Speeding up someone's alpha waves gave them a tighter sense of body ownership, making them more sensitive to small timing discrepancies. Slowing down the waves had the opposite effect, making it harder for people to tell the difference between their own body and the outside world.&lt;/p&gt;
    &lt;p&gt;"Our findings help explain how the brain solves the challenge of integrating signals from the body to create a coherent sense of self," says Henrik Ehrsson, neuroscientist at Karolinska.&lt;/p&gt;
    &lt;p&gt;The researchers say that the findings could lead to new understanding of or treatments for conditions where the brain's body maps have gone askew, such as schizophrenia or the sensation of 'phantom limbs' experienced by amputees.&lt;/p&gt;
    &lt;p&gt;It could also help make for more realistic prosthetic limbs or even virtual reality tools.&lt;/p&gt;
    &lt;p&gt;The research was published in the journal Nature Communications.&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.sciencealert.com/scientists-identify-brain-waves-that-define-the-limits-of-you"/><published>2026-01-26T00:10:42+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46760237</id><title>Clawdbot - open source personal AI assistant</title><updated>2026-01-26T04:37:10.800685+00:00</updated><content>&lt;doc fingerprint="971cdd551f1f808f"&gt;
  &lt;main&gt;
    &lt;p&gt;EXFOLIATE! EXFOLIATE!&lt;/p&gt;
    &lt;p&gt;Clawdbot is a personal AI assistant you run on your own devices. It answers you on the channels you already use (WhatsApp, Telegram, Slack, Discord, Google Chat, Signal, iMessage, Microsoft Teams, WebChat), plus extension channels like BlueBubbles, Matrix, Zalo, and Zalo Personal. It can speak and listen on macOS/iOS/Android, and can render a live Canvas you control. The Gateway is just the control plane — the product is the assistant.&lt;/p&gt;
    &lt;p&gt;If you want a personal, single-user assistant that feels local, fast, and always-on, this is it.&lt;/p&gt;
    &lt;p&gt;Website · Docs · Getting Started · Updating · Showcase · FAQ · Wizard · Nix · Docker · Discord&lt;/p&gt;
    &lt;p&gt;Preferred setup: run the onboarding wizard (&lt;code&gt;clawdbot onboard&lt;/code&gt;). It walks through gateway, workspace, channels, and skills. The CLI wizard is the recommended path and works on macOS, Linux, and Windows (via WSL2; strongly recommended).
Works with npm, pnpm, or bun.
New install? Start here: Getting started&lt;/p&gt;
    &lt;p&gt;Subscriptions (OAuth):&lt;/p&gt;
    &lt;p&gt;Model note: while any model is supported, I strongly recommend Anthropic Pro/Max (100/200) + Opus 4.5 for long‑context strength and better prompt‑injection resistance. See Onboarding.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Models config + CLI: Models&lt;/item&gt;
      &lt;item&gt;Auth profile rotation (OAuth vs API keys) + fallbacks: Model failover&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Runtime: Node ≥22.&lt;/p&gt;
    &lt;code&gt;npm install -g clawdbot@latest
# or: pnpm add -g clawdbot@latest

clawdbot onboard --install-daemon&lt;/code&gt;
    &lt;p&gt;The wizard installs the Gateway daemon (launchd/systemd user service) so it stays running.&lt;/p&gt;
    &lt;p&gt;Runtime: Node ≥22.&lt;/p&gt;
    &lt;p&gt;Full beginner guide (auth, pairing, channels): Getting started&lt;/p&gt;
    &lt;code&gt;clawdbot onboard --install-daemon

clawdbot gateway --port 18789 --verbose

# Send a message
clawdbot message send --to +1234567890 --message "Hello from Clawdbot"

# Talk to the assistant (optionally deliver back to any connected channel: WhatsApp/Telegram/Slack/Discord/Google Chat/Signal/iMessage/BlueBubbles/Microsoft Teams/Matrix/Zalo/Zalo Personal/WebChat)
clawdbot agent --message "Ship checklist" --thinking high&lt;/code&gt;
    &lt;p&gt;Upgrading? Updating guide (and run &lt;code&gt;clawdbot doctor&lt;/code&gt;).&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;stable: tagged releases (&lt;code&gt;vYYYY.M.D&lt;/code&gt;or&lt;code&gt;vYYYY.M.D-&amp;lt;patch&amp;gt;&lt;/code&gt;), npm dist-tag&lt;code&gt;latest&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;beta: prerelease tags (&lt;code&gt;vYYYY.M.D-beta.N&lt;/code&gt;), npm dist-tag&lt;code&gt;beta&lt;/code&gt;(macOS app may be missing).&lt;/item&gt;
      &lt;item&gt;dev: moving head of &lt;code&gt;main&lt;/code&gt;, npm dist-tag&lt;code&gt;dev&lt;/code&gt;(when published).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Switch channels (git + npm): &lt;code&gt;clawdbot update --channel stable|beta|dev&lt;/code&gt;.
Details: Development channels.&lt;/p&gt;
    &lt;p&gt;Prefer &lt;code&gt;pnpm&lt;/code&gt; for builds from source. Bun is optional for running TypeScript directly.&lt;/p&gt;
    &lt;code&gt;git clone https://github.com/clawdbot/clawdbot.git
cd clawdbot

pnpm install
pnpm ui:build # auto-installs UI deps on first run
pnpm build

pnpm clawdbot onboard --install-daemon

# Dev loop (auto-reload on TS changes)
pnpm gateway:watch&lt;/code&gt;
    &lt;p&gt;Note: &lt;code&gt;pnpm clawdbot ...&lt;/code&gt; runs TypeScript directly (via &lt;code&gt;tsx&lt;/code&gt;). &lt;code&gt;pnpm build&lt;/code&gt; produces &lt;code&gt;dist/&lt;/code&gt; for running via Node / the packaged &lt;code&gt;clawdbot&lt;/code&gt; binary.&lt;/p&gt;
    &lt;p&gt;Clawdbot connects to real messaging surfaces. Treat inbound DMs as untrusted input.&lt;/p&gt;
    &lt;p&gt;Full security guide: Security&lt;/p&gt;
    &lt;p&gt;Default behavior on Telegram/WhatsApp/Signal/iMessage/Microsoft Teams/Discord/Google Chat/Slack:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;DM pairing (&lt;code&gt;dmPolicy="pairing"&lt;/code&gt;/&lt;code&gt;channels.discord.dm.policy="pairing"&lt;/code&gt;/&lt;code&gt;channels.slack.dm.policy="pairing"&lt;/code&gt;): unknown senders receive a short pairing code and the bot does not process their message.&lt;/item&gt;
      &lt;item&gt;Approve with: &lt;code&gt;clawdbot pairing approve &amp;lt;channel&amp;gt; &amp;lt;code&amp;gt;&lt;/code&gt;(then the sender is added to a local allowlist store).&lt;/item&gt;
      &lt;item&gt;Public inbound DMs require an explicit opt-in: set &lt;code&gt;dmPolicy="open"&lt;/code&gt;and include&lt;code&gt;"*"&lt;/code&gt;in the channel allowlist (&lt;code&gt;allowFrom&lt;/code&gt;/&lt;code&gt;channels.discord.dm.allowFrom&lt;/code&gt;/&lt;code&gt;channels.slack.dm.allowFrom&lt;/code&gt;).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Run &lt;code&gt;clawdbot doctor&lt;/code&gt; to surface risky/misconfigured DM policies.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Local-first Gateway — single control plane for sessions, channels, tools, and events.&lt;/item&gt;
      &lt;item&gt;Multi-channel inbox — WhatsApp, Telegram, Slack, Discord, Google Chat, Signal, iMessage, BlueBubbles, Microsoft Teams, Matrix, Zalo, Zalo Personal, WebChat, macOS, iOS/Android.&lt;/item&gt;
      &lt;item&gt;Multi-agent routing — route inbound channels/accounts/peers to isolated agents (workspaces + per-agent sessions).&lt;/item&gt;
      &lt;item&gt;Voice Wake + Talk Mode — always-on speech for macOS/iOS/Android with ElevenLabs.&lt;/item&gt;
      &lt;item&gt;Live Canvas — agent-driven visual workspace with A2UI.&lt;/item&gt;
      &lt;item&gt;First-class tools — browser, canvas, nodes, cron, sessions, and Discord/Slack actions.&lt;/item&gt;
      &lt;item&gt;Companion apps — macOS menu bar app + iOS/Android nodes.&lt;/item&gt;
      &lt;item&gt;Onboarding + skills — wizard-driven setup with bundled/managed/workspace skills.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Gateway WS control plane with sessions, presence, config, cron, webhooks, Control UI, and Canvas host.&lt;/item&gt;
      &lt;item&gt;CLI surface: gateway, agent, send, wizard, and doctor.&lt;/item&gt;
      &lt;item&gt;Pi agent runtime in RPC mode with tool streaming and block streaming.&lt;/item&gt;
      &lt;item&gt;Session model: &lt;code&gt;main&lt;/code&gt;for direct chats, group isolation, activation modes, queue modes, reply-back. Group rules: Groups.&lt;/item&gt;
      &lt;item&gt;Media pipeline: images/audio/video, transcription hooks, size caps, temp file lifecycle. Audio details: Audio.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Channels: WhatsApp (Baileys), Telegram (grammY), Slack (Bolt), Discord (discord.js), Google Chat (Chat API), Signal (signal-cli), iMessage (imsg), BlueBubbles (extension), Microsoft Teams (extension), Matrix (extension), Zalo (extension), Zalo Personal (extension), WebChat.&lt;/item&gt;
      &lt;item&gt;Group routing: mention gating, reply tags, per-channel chunking and routing. Channel rules: Channels.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;macOS app: menu bar control plane, Voice Wake/PTT, Talk Mode overlay, WebChat, debug tools, remote gateway control.&lt;/item&gt;
      &lt;item&gt;iOS node: Canvas, Voice Wake, Talk Mode, camera, screen recording, Bonjour pairing.&lt;/item&gt;
      &lt;item&gt;Android node: Canvas, Talk Mode, camera, screen recording, optional SMS.&lt;/item&gt;
      &lt;item&gt;macOS node mode: system.run/notify + canvas/camera exposure.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Browser control: dedicated clawd Chrome/Chromium, snapshots, actions, uploads, profiles.&lt;/item&gt;
      &lt;item&gt;Canvas: A2UI push/reset, eval, snapshot.&lt;/item&gt;
      &lt;item&gt;Nodes: camera snap/clip, screen record, location.get, notifications.&lt;/item&gt;
      &lt;item&gt;Cron + wakeups; webhooks; Gmail Pub/Sub.&lt;/item&gt;
      &lt;item&gt;Skills platform: bundled, managed, and workspace skills with install gating + UI.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Channel routing, retry policy, and streaming/chunking.&lt;/item&gt;
      &lt;item&gt;Presence, typing indicators, and usage tracking.&lt;/item&gt;
      &lt;item&gt;Models, model failover, and session pruning.&lt;/item&gt;
      &lt;item&gt;Security and troubleshooting.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Control UI + WebChat served directly from the Gateway.&lt;/item&gt;
      &lt;item&gt;Tailscale Serve/Funnel or SSH tunnels with token/password auth.&lt;/item&gt;
      &lt;item&gt;Nix mode for declarative config; Docker-based installs.&lt;/item&gt;
      &lt;item&gt;Doctor migrations, logging.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;WhatsApp / Telegram / Slack / Discord / Google Chat / Signal / iMessage / BlueBubbles / Microsoft Teams / Matrix / Zalo / Zalo Personal / WebChat
               │
               ▼
┌───────────────────────────────┐
│            Gateway            │
│       (control plane)         │
│     ws://127.0.0.1:18789      │
└──────────────┬────────────────┘
               │
               ├─ Pi agent (RPC)
               ├─ CLI (clawdbot …)
               ├─ WebChat UI
               ├─ macOS app
               └─ iOS / Android nodes
&lt;/code&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Gateway WebSocket network — single WS control plane for clients, tools, and events (plus ops: Gateway runbook).&lt;/item&gt;
      &lt;item&gt;Tailscale exposure — Serve/Funnel for the Gateway dashboard + WS (remote access: Remote).&lt;/item&gt;
      &lt;item&gt;Browser control — clawd‑managed Chrome/Chromium with CDP control.&lt;/item&gt;
      &lt;item&gt;Canvas + A2UI — agent‑driven visual workspace (A2UI host: Canvas/A2UI).&lt;/item&gt;
      &lt;item&gt;Voice Wake + Talk Mode — always‑on speech and continuous conversation.&lt;/item&gt;
      &lt;item&gt;Nodes — Canvas, camera snap/clip, screen record, &lt;code&gt;location.get&lt;/code&gt;, notifications, plus macOS‑only&lt;code&gt;system.run&lt;/code&gt;/&lt;code&gt;system.notify&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Clawdbot can auto-configure Tailscale Serve (tailnet-only) or Funnel (public) while the Gateway stays bound to loopback. Configure &lt;code&gt;gateway.tailscale.mode&lt;/code&gt;:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;off&lt;/code&gt;: no Tailscale automation (default).&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;serve&lt;/code&gt;: tailnet-only HTTPS via&lt;code&gt;tailscale serve&lt;/code&gt;(uses Tailscale identity headers by default).&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;funnel&lt;/code&gt;: public HTTPS via&lt;code&gt;tailscale funnel&lt;/code&gt;(requires shared password auth).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Notes:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;gateway.bind&lt;/code&gt;must stay&lt;code&gt;loopback&lt;/code&gt;when Serve/Funnel is enabled (Clawdbot enforces this).&lt;/item&gt;
      &lt;item&gt;Serve can be forced to require a password by setting &lt;code&gt;gateway.auth.mode: "password"&lt;/code&gt;or&lt;code&gt;gateway.auth.allowTailscale: false&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;Funnel refuses to start unless &lt;code&gt;gateway.auth.mode: "password"&lt;/code&gt;is set.&lt;/item&gt;
      &lt;item&gt;Optional: &lt;code&gt;gateway.tailscale.resetOnExit&lt;/code&gt;to undo Serve/Funnel on shutdown.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Details: Tailscale guide · Web surfaces&lt;/p&gt;
    &lt;p&gt;It’s perfectly fine to run the Gateway on a small Linux instance. Clients (macOS app, CLI, WebChat) can connect over Tailscale Serve/Funnel or SSH tunnels, and you can still pair device nodes (macOS/iOS/Android) to execute device‑local actions when needed.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Gateway host runs the exec tool and channel connections by default.&lt;/item&gt;
      &lt;item&gt;Device nodes run device‑local actions (&lt;code&gt;system.run&lt;/code&gt;, camera, screen recording, notifications) via&lt;code&gt;node.invoke&lt;/code&gt;. In short: exec runs where the Gateway lives; device actions run where the device lives.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Details: Remote access · Nodes · Security&lt;/p&gt;
    &lt;p&gt;The macOS app can run in node mode and advertises its capabilities + permission map over the Gateway WebSocket (&lt;code&gt;node.list&lt;/code&gt; / &lt;code&gt;node.describe&lt;/code&gt;). Clients can then execute local actions via &lt;code&gt;node.invoke&lt;/code&gt;:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;system.run&lt;/code&gt;runs a local command and returns stdout/stderr/exit code; set&lt;code&gt;needsScreenRecording: true&lt;/code&gt;to require screen-recording permission (otherwise you’ll get&lt;code&gt;PERMISSION_MISSING&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;system.notify&lt;/code&gt;posts a user notification and fails if notifications are denied.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;canvas.*&lt;/code&gt;,&lt;code&gt;camera.*&lt;/code&gt;,&lt;code&gt;screen.record&lt;/code&gt;, and&lt;code&gt;location.get&lt;/code&gt;are also routed via&lt;code&gt;node.invoke&lt;/code&gt;and follow TCC permission status.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Elevated bash (host permissions) is separate from macOS TCC:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Use &lt;code&gt;/elevated on|off&lt;/code&gt;to toggle per‑session elevated access when enabled + allowlisted.&lt;/item&gt;
      &lt;item&gt;Gateway persists the per‑session toggle via &lt;code&gt;sessions.patch&lt;/code&gt;(WS method) alongside&lt;code&gt;thinkingLevel&lt;/code&gt;,&lt;code&gt;verboseLevel&lt;/code&gt;,&lt;code&gt;model&lt;/code&gt;,&lt;code&gt;sendPolicy&lt;/code&gt;, and&lt;code&gt;groupActivation&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Details: Nodes · macOS app · Gateway protocol&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Use these to coordinate work across sessions without jumping between chat surfaces.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;sessions_list&lt;/code&gt;— discover active sessions (agents) and their metadata.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;sessions_history&lt;/code&gt;— fetch transcript logs for a session.&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;sessions_send&lt;/code&gt;— message another session; optional reply‑back ping‑pong + announce step (&lt;code&gt;REPLY_SKIP&lt;/code&gt;,&lt;code&gt;ANNOUNCE_SKIP&lt;/code&gt;).&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Details: Session tools&lt;/p&gt;
    &lt;p&gt;ClawdHub is a minimal skill registry. With ClawdHub enabled, the agent can search for skills automatically and pull in new ones as needed.&lt;/p&gt;
    &lt;p&gt;Send these in WhatsApp/Telegram/Slack/Google Chat/Microsoft Teams/WebChat (group commands are owner-only):&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;&lt;code&gt;/status&lt;/code&gt;— compact session status (model + tokens, cost when available)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/new&lt;/code&gt;or&lt;code&gt;/reset&lt;/code&gt;— reset the session&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/compact&lt;/code&gt;— compact session context (summary)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/think &amp;lt;level&amp;gt;&lt;/code&gt;— off|minimal|low|medium|high|xhigh (GPT-5.2 + Codex models only)&lt;/item&gt;
      &lt;item&gt;
        &lt;code&gt;/verbose on|off&lt;/code&gt;
      &lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/usage off|tokens|full&lt;/code&gt;— per-response usage footer&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/restart&lt;/code&gt;— restart the gateway (owner-only in groups)&lt;/item&gt;
      &lt;item&gt;&lt;code&gt;/activation mention|always&lt;/code&gt;— group activation toggle (groups only)&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;The Gateway alone delivers a great experience. All apps are optional and add extra features.&lt;/p&gt;
    &lt;p&gt;If you plan to build/run companion apps, follow the platform runbooks below.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Menu bar control for the Gateway and health.&lt;/item&gt;
      &lt;item&gt;Voice Wake + push-to-talk overlay.&lt;/item&gt;
      &lt;item&gt;WebChat + debug tools.&lt;/item&gt;
      &lt;item&gt;Remote gateway control over SSH.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Note: signed builds required for macOS permissions to stick across rebuilds (see &lt;code&gt;docs/mac/permissions.md&lt;/code&gt;).&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Pairs as a node via the Bridge.&lt;/item&gt;
      &lt;item&gt;Voice trigger forwarding + Canvas surface.&lt;/item&gt;
      &lt;item&gt;Controlled via &lt;code&gt;clawdbot nodes …&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Runbook: iOS connect.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Pairs via the same Bridge + pairing flow as iOS.&lt;/item&gt;
      &lt;item&gt;Exposes Canvas, Camera, and Screen capture commands.&lt;/item&gt;
      &lt;item&gt;Runbook: Android connect.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Workspace root: &lt;code&gt;~/clawd&lt;/code&gt;(configurable via&lt;code&gt;agents.defaults.workspace&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Injected prompt files: &lt;code&gt;AGENTS.md&lt;/code&gt;,&lt;code&gt;SOUL.md&lt;/code&gt;,&lt;code&gt;TOOLS.md&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;Skills: &lt;code&gt;~/clawd/skills/&amp;lt;skill&amp;gt;/SKILL.md&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Minimal &lt;code&gt;~/.clawdbot/clawdbot.json&lt;/code&gt; (model + defaults):&lt;/p&gt;
    &lt;code&gt;{
  agent: {
    model: "anthropic/claude-opus-4-5"
  }
}&lt;/code&gt;
    &lt;p&gt;Full configuration reference (all keys + examples).&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Default: tools run on the host for the main session, so the agent has full access when it’s just you.&lt;/item&gt;
      &lt;item&gt;Group/channel safety: set &lt;code&gt;agents.defaults.sandbox.mode: "non-main"&lt;/code&gt;to run non‑main sessions (groups/channels) inside per‑session Docker sandboxes; bash then runs in Docker for those sessions.&lt;/item&gt;
      &lt;item&gt;Sandbox defaults: allowlist &lt;code&gt;bash&lt;/code&gt;,&lt;code&gt;process&lt;/code&gt;,&lt;code&gt;read&lt;/code&gt;,&lt;code&gt;write&lt;/code&gt;,&lt;code&gt;edit&lt;/code&gt;,&lt;code&gt;sessions_list&lt;/code&gt;,&lt;code&gt;sessions_history&lt;/code&gt;,&lt;code&gt;sessions_send&lt;/code&gt;,&lt;code&gt;sessions_spawn&lt;/code&gt;; denylist&lt;code&gt;browser&lt;/code&gt;,&lt;code&gt;canvas&lt;/code&gt;,&lt;code&gt;nodes&lt;/code&gt;,&lt;code&gt;cron&lt;/code&gt;,&lt;code&gt;discord&lt;/code&gt;,&lt;code&gt;gateway&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Details: Security guide · Docker + sandboxing · Sandbox config&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Link the device: &lt;code&gt;pnpm clawdbot channels login&lt;/code&gt;(stores creds in&lt;code&gt;~/.clawdbot/credentials&lt;/code&gt;).&lt;/item&gt;
      &lt;item&gt;Allowlist who can talk to the assistant via &lt;code&gt;channels.whatsapp.allowFrom&lt;/code&gt;.&lt;/item&gt;
      &lt;item&gt;If &lt;code&gt;channels.whatsapp.groups&lt;/code&gt;is set, it becomes a group allowlist; include&lt;code&gt;"*"&lt;/code&gt;to allow all.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Set &lt;code&gt;TELEGRAM_BOT_TOKEN&lt;/code&gt;or&lt;code&gt;channels.telegram.botToken&lt;/code&gt;(env wins).&lt;/item&gt;
      &lt;item&gt;Optional: set &lt;code&gt;channels.telegram.groups&lt;/code&gt;(with&lt;code&gt;channels.telegram.groups."*".requireMention&lt;/code&gt;); when set, it is a group allowlist (include&lt;code&gt;"*"&lt;/code&gt;to allow all). Also&lt;code&gt;channels.telegram.allowFrom&lt;/code&gt;or&lt;code&gt;channels.telegram.webhookUrl&lt;/code&gt;as needed.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;{
  channels: {
    telegram: {
      botToken: "123456:ABCDEF"
    }
  }
}&lt;/code&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Set &lt;code&gt;SLACK_BOT_TOKEN&lt;/code&gt;+&lt;code&gt;SLACK_APP_TOKEN&lt;/code&gt;(or&lt;code&gt;channels.slack.botToken&lt;/code&gt;+&lt;code&gt;channels.slack.appToken&lt;/code&gt;).&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Set &lt;code&gt;DISCORD_BOT_TOKEN&lt;/code&gt;or&lt;code&gt;channels.discord.token&lt;/code&gt;(env wins).&lt;/item&gt;
      &lt;item&gt;Optional: set &lt;code&gt;commands.native&lt;/code&gt;,&lt;code&gt;commands.text&lt;/code&gt;, or&lt;code&gt;commands.useAccessGroups&lt;/code&gt;, plus&lt;code&gt;channels.discord.dm.allowFrom&lt;/code&gt;,&lt;code&gt;channels.discord.guilds&lt;/code&gt;, or&lt;code&gt;channels.discord.mediaMaxMb&lt;/code&gt;as needed.&lt;/item&gt;
    &lt;/list&gt;
    &lt;code&gt;{
  channels: {
    discord: {
      token: "1234abcd"
    }
  }
}&lt;/code&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Requires &lt;code&gt;signal-cli&lt;/code&gt;and a&lt;code&gt;channels.signal&lt;/code&gt;config section.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;macOS only; Messages must be signed in.&lt;/item&gt;
      &lt;item&gt;If &lt;code&gt;channels.imessage.groups&lt;/code&gt;is set, it becomes a group allowlist; include&lt;code&gt;"*"&lt;/code&gt;to allow all.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Configure a Teams app + Bot Framework, then add a &lt;code&gt;msteams&lt;/code&gt;config section.&lt;/item&gt;
      &lt;item&gt;Allowlist who can talk via &lt;code&gt;msteams.allowFrom&lt;/code&gt;; group access via&lt;code&gt;msteams.groupAllowFrom&lt;/code&gt;or&lt;code&gt;msteams.groupPolicy: "open"&lt;/code&gt;.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Uses the Gateway WebSocket; no separate WebChat port/config.&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Browser control (optional):&lt;/p&gt;
    &lt;code&gt;{
  browser: {
    enabled: true,
    controlUrl: "http://127.0.0.1:18791",
    color: "#FF4500"
  }
}&lt;/code&gt;
    &lt;p&gt;Use these when you’re past the onboarding flow and want the deeper reference.&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Start with the docs index for navigation and “what’s where.”&lt;/item&gt;
      &lt;item&gt;Read the architecture overview for the gateway + protocol model.&lt;/item&gt;
      &lt;item&gt;Use the full configuration reference when you need every key and example.&lt;/item&gt;
      &lt;item&gt;Run the Gateway by the book with the operational runbook.&lt;/item&gt;
      &lt;item&gt;Learn how the Control UI/Web surfaces work and how to expose them safely.&lt;/item&gt;
      &lt;item&gt;Understand remote access over SSH tunnels or tailnets.&lt;/item&gt;
      &lt;item&gt;Follow the onboarding wizard flow for a guided setup.&lt;/item&gt;
      &lt;item&gt;Wire external triggers via the webhook surface.&lt;/item&gt;
      &lt;item&gt;Set up Gmail Pub/Sub triggers.&lt;/item&gt;
      &lt;item&gt;Learn the macOS menu bar companion details.&lt;/item&gt;
      &lt;item&gt;Platform guides: Windows (WSL2), Linux, macOS, iOS, Android&lt;/item&gt;
      &lt;item&gt;Debug common failures with the troubleshooting guide.&lt;/item&gt;
      &lt;item&gt;Review security guidance before exposing anything.&lt;/item&gt;
    &lt;/list&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;Skills config&lt;/item&gt;
      &lt;item&gt;Default AGENTS&lt;/item&gt;
      &lt;item&gt;Templates: AGENTS&lt;/item&gt;
      &lt;item&gt;Templates: BOOTSTRAP&lt;/item&gt;
      &lt;item&gt;Templates: IDENTITY&lt;/item&gt;
      &lt;item&gt;Templates: SOUL&lt;/item&gt;
      &lt;item&gt;Templates: TOOLS&lt;/item&gt;
      &lt;item&gt;Templates: USER&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;Clawdbot was built for Clawd, a space lobster AI assistant. 🦞 by Peter Steinberger and the community.&lt;/p&gt;
    &lt;p&gt;See CONTRIBUTING.md for guidelines, maintainers, and how to submit PRs. AI/vibe-coded PRs welcome! 🤖&lt;/p&gt;
    &lt;p&gt;Special thanks to Mario Zechner for his support and for pi-mono.&lt;/p&gt;
    &lt;p&gt;Thanks to all clawtributors:&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://github.com/clawdbot/clawdbot"/><published>2026-01-26T00:27:41+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46761061</id><title>Microsoft suspects some PCs might not boot after Windows 11 January 2026 Update</title><updated>2026-01-26T04:37:10.644684+00:00</updated><content>&lt;doc fingerprint="169668563f2678d6"&gt;
  &lt;main&gt;
    &lt;p&gt;Microsoft is aware of an alleged issue that leaves PCs unable to boot and requires manual recovery after installing the Windows 11 January 2026 Update.&lt;/p&gt;
    &lt;p&gt;Microsoft doesn’t know how the January 2026 Update broke some PCs and is collecting data from consumers and IT admins. For now, you don’t have to uninstall the update, as the issue is “limited” to specific PCs. The same update also broke Outlook Classic, customization in File Explorer, sleep mode (S3), Citrix Director, and Remote Desktop.&lt;/p&gt;
    &lt;p&gt;“Microsoft has received a limited number of reports of an issue in which devices are failing to boot,” Microsoft noted in a support document first spotted by Windows Latest.&lt;/p&gt;
    &lt;p&gt;It’s unclear how many users are affected, but Microsoft has listed two affected platforms on the Windows release dashboard:&lt;/p&gt;
    &lt;list rend="ul"&gt;
      &lt;item&gt;KB5074109 – Windows 11 25H2&lt;/item&gt;
      &lt;item&gt;KB5074109 – Windows 11 24H2&lt;/item&gt;
    &lt;/list&gt;
    &lt;p&gt;KB5074109 is a mandatory security update for Windows 11 25H2 / 24H2, and it patches as many as a hundred known security issues, which is why it’s installed automatically on PCs.&lt;/p&gt;
    &lt;p&gt;Do I have the January 2026 Update? Open Settings &amp;gt; System &amp;gt; About &amp;gt; Specification, and look at the build number. If it’s 26200.7623, you have the January update. KB5074109 was released on January 13, 2026.&lt;/p&gt;
    &lt;p&gt;According to Microsoft, affected PCs could suddenly stop booting and land on the Black Screen of Death (BSOD) error with stop code UNMOUNTABLE_BOOT_VOLUME.&lt;/p&gt;
    &lt;p&gt;The UNMOUNTABLE_BOOT_VOLUME error (Stop Code 0xED) is typically related to system corruption, a damaged BIOS/boot, or hardware failure, specifically the drive. In this case, Microsoft suspects the problem is likely due to the Windows 11 January 2026 Update.&lt;/p&gt;
    &lt;p&gt;“Microsoft has received a limited number of reports of an issue in which devices are failing to boot with stop code ‘UNMOUNTABLE_BOOT_VOLUME’ after installing the January 2026 Windows security update (the originating KBs listed above), released January 13, 2026, and later updates,” Microsoft explained.&lt;/p&gt;
    &lt;p&gt;“Affected devices show a black screen with the message ‘Your device ran into a problem and needs a restart. You can restart.’ At this stage, the device cannot complete startup and requires manual recovery steps.”&lt;/p&gt;
    &lt;p&gt;In other words, if you end up hitting the above Black Screen of Death error, it will leave your computer unable to boot, and you’ll need to recover the installation. Windows Recovery is typically successful, but there are situations where WinRE does not work. In that case, you can use an ISO to clean install Windows.&lt;/p&gt;
    &lt;p&gt;“Reports received so far indicate that this issue is limited to physical devices only; no customers have reported observing these symptoms on virtual machines,” Microsoft warned in the support document.&lt;/p&gt;
    &lt;p&gt;The good news is that only a limited set of devices is affected. The bad news is that Microsoft doesn’t know how many users are affected or the details of the configuration causing the issue. The worst news is that the Windows 11 January 2026 Update is causing a bunch of other problems, and Microsoft has issued an emergency update (KB5078127).&lt;/p&gt;
    &lt;p&gt;If you don’t have issues, there’s nothing to worry about. There are billions of PCs running Windows, and most issues are limited to specific hardware. This might be one of those “limited” issues only, but if your PC is unable to boot or something feels odd over the last ten days, it’s likely due to Windows 11 KB5074109.&lt;/p&gt;
    &lt;table&gt;
      &lt;row span="4"&gt;
        &lt;cell role="head"&gt;Issue detail&lt;/cell&gt;
        &lt;cell role="head"&gt;Current status&lt;/cell&gt;
        &lt;cell role="head"&gt;Workaround&lt;/cell&gt;
        &lt;cell role="head"&gt;Affected Windows version&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Outlook Classic freezes.&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Microsoft&lt;/cell&gt;
        &lt;cell&gt;Fixed in out-of-band update (KB5078127)&lt;/cell&gt;
        &lt;cell&gt;All supported versions of Windows&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Third-party apps become unresponsive.&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Microsoft&lt;/cell&gt;
        &lt;cell&gt;Fixed in out-of-band update (KB5078127)&lt;/cell&gt;
        &lt;cell&gt;All supported versions of Windows&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Black screen or wallpaper resets.&lt;/cell&gt;
        &lt;cell&gt;Not officially acknowledged&lt;/cell&gt;
        &lt;cell&gt;Restart Windows or reapply wallpaper manually&lt;/cell&gt;
        &lt;cell&gt;Windows 11 25H2, 24H2&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Sleep mode (S3) stops working on older PCs.&lt;/cell&gt;
        &lt;cell&gt;Not officially acknowledged&lt;/cell&gt;
        &lt;cell&gt;No reliable workaround available&lt;/cell&gt;
        &lt;cell&gt;Windows 11 24H2 / 25H2 on systems using S3 sleep&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Desktop.ini broken in File Explorer.&lt;/cell&gt;
        &lt;cell&gt;Not officially acknowledged&lt;/cell&gt;
        &lt;cell&gt;No workaround; folders still function but UI is incorrect&lt;/cell&gt;
        &lt;cell&gt;Windows 11 25H2, 24H2&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Citrix Remote Desktop not working&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Citrix&lt;/cell&gt;
        &lt;cell&gt;Remove the update or switch to alternatives&lt;/cell&gt;
        &lt;cell&gt;Windows 11 25H2, 24H2 and Windows Server 2025, 2022&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Remote Desktop stops working.&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Microsoft&lt;/cell&gt;
        &lt;cell&gt;Fixed in first out-of-band update (KB5077744)&lt;/cell&gt;
        &lt;cell&gt;All supported versions of Windows&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row span="4"&gt;
        &lt;cell&gt;Shutdown feature does not work properly.&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Microsoft&lt;/cell&gt;
        &lt;cell&gt;Fixed with first out-of-band update (KB5077797)&lt;/cell&gt;
        &lt;cell&gt;23H2&lt;/cell&gt;
      &lt;/row&gt;
      &lt;row&gt;
        &lt;cell&gt;System fails to boot&lt;/cell&gt;
        &lt;cell&gt;Acknowledged by Microsoft&lt;/cell&gt;
        &lt;cell&gt;Use Windows Recovery or reinstall Windows using an ISO&lt;/cell&gt;
        &lt;cell&gt;25H2 and 24H2&lt;/cell&gt;
      &lt;/row&gt;
    &lt;/table&gt;
    &lt;p&gt;What about you? Have you encountered critical issues after recent Windows Updates?&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://www.windowslatest.com/2026/01/25/microsoft-suspects-some-pcs-might-not-boot-after-windows-11-january-2026-update-kb5074109/"/><published>2026-01-26T02:15:52+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46761614</id><title>Environmentalists worry Google behind bid to control Oregon town's water</title><updated>2026-01-26T04:37:10.556154+00:00</updated><content/><link href="https://www.sfgate.com/national-parks/article/mount-hood-water-google-21307223.php"/><published>2026-01-26T03:40:06+00:00</published></entry><entry><id>https://news.ycombinator.com/item?id=46761822</id><title>Iran's internet blackout may become permanent, with access for elites only</title><updated>2026-01-26T04:37:10.492669+00:00</updated><content>&lt;doc fingerprint="3fb0853a39ad478e"&gt;
  &lt;main&gt;
    &lt;p&gt;Iran’s near-total communications blackout has entered its 16th day, but that’s just a live test.&lt;/p&gt;
    &lt;p&gt;Following a repressive crackdown on protests, the government is now building a system that grants web access only to security-vetted elites, while locking 90 million citizens inside an intranet.&lt;/p&gt;
    &lt;p&gt;Government spokesperson Fatemeh Mohajerani confirmed international access will not be restored until at least late March. Filterwatch, which monitors Iranian internet censorship from Texas, cited government sources, including Mohajerani, saying access will “never return to its previous form.”&lt;/p&gt;
    &lt;p&gt;This is what makes Iran’s attempt unique: Other authoritarian states built walls before their populations went online. Iran is trying to seal off a connected economy already in freefall.&lt;/p&gt;
    &lt;p&gt;The system is called Barracks Internet, according to confidential planning documents obtained by Filterwatch. Under this architecture, access to the global web will be granted only through a strict security whitelist.&lt;/p&gt;
    &lt;p&gt;“The regime is terrified of one thing: Iranians being heard telling their own truth and having crimes documented,” Mahsa Alimardani, a digital rights researcher at U.S.-based Witness, which trains activists to use video for advocacy, told Rest of World. “The question becomes: How do we give Iranians an unbreakable voice?”&lt;/p&gt;
    &lt;p&gt;The idea of tiered internet access is not new in Iran. Since at least 2013, the regime has quietly issued “white SIM cards,” giving unrestricted global internet access to approximately 16,000 people. The system gained public attention in November 2025 when X’s location feature revealed that certain accounts, including the communications minister, were connecting directly from inside Iran, despite X being blocked since 2009.&lt;/p&gt;
    &lt;p&gt;What is different now is scale and permanence. The current blackout tests infrastructure designed to make two-tier access the default, not a temporary crackdown.&lt;/p&gt;
    &lt;p&gt;Only a handful of nations have attempted to wall off their citizens from the global internet. North Korea’s Kwangmyong intranet was built from scratch for a population that never had connectivity. China constructed its Great Firewall over two decades while nurturing domestic alternatives such as WeChat and Alibaba. Iran is attempting to do both in weeks, with no domestic alternatives.&lt;/p&gt;
    &lt;p&gt;The economic costs of the blackout are staggering. Iran’s deputy communications minister pegged the daily losses at as much as $4.3 million. NetBlocks estimates the true cost exceeds $37 million daily. More than 10 million Iranians depend directly on digital platforms for their livelihoods.&lt;/p&gt;
    &lt;p&gt;Tipax, one of Iran’s largest private delivery companies handling about 320,000 daily shipments before the protests, now processes fewer than a few hundred, according to Filterwatch. The company operates a nationwide logistics network comparable to FedEx in the U.S. market.&lt;/p&gt;
    &lt;p&gt;The government fired Irancell’s CEO for failing to comply with shutdown orders. Irancell, the country’s second-largest mobile operator with 66 million subscribers, is partly owned by South Africa’s MTN Group. Alireza Rafiei was removed for disobeying orders on “restriction of internet access in crisis situations,” according to Fars news agency.&lt;/p&gt;
    &lt;p&gt;Foreign telecom partners have left Iran in recent days under security escort, without media coverage, according to Filterwatch. This may signal the end of international cooperation in critical infrastructure, replaced by the Revolutionary Guard’s construction arm or limited cooperation with Huawei.&lt;/p&gt;
    &lt;p&gt;Technical experts doubt the regime can sustain Barracks Internet without crippling the economy. Georgia Tech’s Internet Intelligence Lab, which has tracked Iran’s shutdowns since the Arab Spring, called the blackout “the most sophisticated and most severe in Iran’s history.” Its measurements show about 3% connectivity persists, likely government officials and state services.&lt;/p&gt;
    &lt;p&gt;Kaveh Ranjbar, former chief technology officer at RIPE NCC, the body managing European internet infrastructure, calls the plan a “digital airlock” that can’t fully seal a modern economy. No country has hermetically sealed a functioning digital economy, he told The New Arab.&lt;/p&gt;
    &lt;p&gt;Activists have smuggled an estimated 50,000 Starlink satellite terminals into Iran since 2022, when the Biden administration exempted the service from sanctions. SpaceX has made the service free for Iranian users.&lt;/p&gt;
    &lt;p&gt;The government claims it cut off 40,000 Starlink connections and jammed some terminals during the blackout, though others remain operational after firmware updates to bypass government blocking. Still, the technology remains vulnerable to signal jamming, meaning the regime holds ultimate leverage.&lt;/p&gt;
    &lt;p&gt;“We need to revolutionize access to the internet,” said Alimardani. “And move beyond the limiting structures and norms of ‘internet sovereignty.’”&lt;/p&gt;
  &lt;/main&gt;
  &lt;comments/&gt;
&lt;/doc&gt;</content><link href="https://restofworld.org/2026/iran-blackout-tiered-internet/"/><published>2026-01-26T04:18:19+00:00</published></entry></feed>